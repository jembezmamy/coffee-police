window.EmberENV={FEATURES:{},EXTEND_PROTOTYPES:{Date:!1},_JQUERY_INTEGRATION:!0}
var loader,define,requireModule,require,requirejs,runningTests=!1;(function(e){"use strict"
function t(){var e=Object.create(null)
return e.__=void 0,delete e.__,e}var n={loader:loader,define:define,requireModule:requireModule,require:require,requirejs:requirejs}
requirejs=require=requireModule=function(e){for(var t=[],n=c(e,"(require)",t),r=t.length-1;r>=0;r--)t[r].exports()
return n.module.exports},loader={noConflict:function(t){var r,i
for(r in t)t.hasOwnProperty(r)&&n.hasOwnProperty(r)&&(i=t[r],e[i]=e[r],e[r]=n[r])},makeDefaultExport:!0}
var r=t(),i=(t(),0)
var o=["require","exports","module"]
function a(e,t,n,r){this.uuid=i++,this.id=e,this.deps=!t.length&&n.length?o:t,this.module={exports:{}},this.callback=n,this.hasExportsAsDep=!1,this.isAlias=r,this.reified=new Array(t.length),this.state="new"}function s(){}function u(e){this.id=e}function c(e,t,n){for(var i=r[e]||r[e+"/index"];i&&i.isAlias;)i=r[i.id]||r[i.id+"/index"]
return i||function(e,t){throw new Error("Could not find module `"+e+"` imported from `"+t+"`")}(e,t),n&&"pending"!==i.state&&"finalized"!==i.state&&(i.findDeps(n),n.push(i)),i}function l(e,t){if("."!==e.charAt(0))return e
for(var n=e.split("/"),r=t.split("/").slice(0,-1),i=0,o=n.length;i<o;i++){var a=n[i]
if(".."===a){if(0===r.length)throw new Error("Cannot access parent module of root")
r.pop()}else{if("."===a)continue
r.push(a)}}return r.join("/")}function h(e){return!(!r[e]&&!r[e+"/index"])}a.prototype.makeDefaultExport=function(){var e=this.module.exports
null===e||"object"!=typeof e&&"function"!=typeof e||void 0!==e.default||!Object.isExtensible(e)||(e.default=e)},a.prototype.exports=function(){if("finalized"===this.state||"reifying"===this.state)return this.module.exports
loader.wrapModules&&(this.callback=loader.wrapModules(this.id,this.callback)),this.reify()
var e=this.callback.apply(this,this.reified)
return this.reified.length=0,this.state="finalized",this.hasExportsAsDep&&void 0===e||(this.module.exports=e),loader.makeDefaultExport&&this.makeDefaultExport(),this.module.exports},a.prototype.unsee=function(){this.state="new",this.module={exports:{}}},a.prototype.reify=function(){if("reified"!==this.state){this.state="reifying"
try{this.reified=this._reify(),this.state="reified"}finally{"reifying"===this.state&&(this.state="errored")}}},a.prototype._reify=function(){for(var e=this.reified.slice(),t=0;t<e.length;t++){var n=e[t]
e[t]=n.exports?n.exports:n.module.exports()}return e},a.prototype.findDeps=function(e){if("new"===this.state){this.state="pending"
for(var t=this.deps,n=0;n<t.length;n++){var r=t[n],i=this.reified[n]={exports:void 0,module:void 0}
"exports"===r?(this.hasExportsAsDep=!0,i.exports=this.module.exports):"require"===r?i.exports=this.makeRequire():"module"===r?i.exports=this.module:i.module=c(l(r,this.id),this.id,e)}}},a.prototype.makeRequire=function(){var e=this.id,t=function(t){return require(l(t,e))}
return t.default=t,t.moduleId=e,t.has=function(t){return h(l(t,e))},t},(define=function(e,t,n){var i=r[e]
i&&"new"!==i.state||(arguments.length<2&&function(e){throw new Error("an unsupported module was defined, expected `define(id, deps, module)` instead got: `"+e+"` arguments to define`")}(arguments.length),Array.isArray(t)||(n=t,t=[]),r[e]=n instanceof u?new a(n.id,t,n,!0):new a(e,t,n,!1))}).exports=function(e,t){var n=r[e]
if(!n||"new"===n.state)return(n=new a(e,[],s,null)).module.exports=t,n.state="finalized",r[e]=n,n},define.alias=function(e,t){return 2===arguments.length?define(t,new u(e)):new u(e)},requirejs.entries=requirejs._eak_seen=r,requirejs.has=h,requirejs.unsee=function(e){c(e,"(unsee)",!1).unsee()},requirejs.clear=function(){requirejs.entries=requirejs._eak_seen=r=t(),t()},define("foo",function(){}),define("foo/bar",[],function(){}),define("foo/asdf",["module","exports","require"],function(e,t,n){n.has("foo/bar")&&n("foo/bar")}),define("foo/baz",[],define.alias("foo")),define("foo/quz",define.alias("foo")),define.alias("foo","foo/qux"),define("foo/bar",["foo","./quz","./baz","./asdf","./bar","../foo"],function(){}),define("foo/main",["foo/bar"],function(){}),define.exports("foo/exports",{}),require("foo/exports"),require("foo/main"),require.unsee("foo/bar"),requirejs.clear(),"object"==typeof exports&&"object"==typeof module&&module.exports&&(module.exports={require:require,define:define})})(this),function(e){"use strict"
var t,n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag",a="object"==typeof module,s=e.regeneratorRuntime
if(s)a&&(module.exports=s)
else{(s=e.regeneratorRuntime=a?module.exports:{}).wrap=p
var u="suspendedStart",c="suspendedYield",l="executing",h="completed",f={},d=y.prototype=m.prototype
g.prototype=d.constructor=y,y.constructor=g,y[o]=g.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor
return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(d),e},s.awrap=function(e){return new x(e)},b(w.prototype),s.async=function(e,t,n,r){var i=new w(p(e,t,n,r))
return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(d),d[i]=function(){return this},d[o]="Generator",d.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[]
for(var n in e)t.push(n)
return t.reverse(),function n(){for(;t.length;){var r=t.pop()
if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0
var e=this.tryEntries[0].completion
if("throw"===e.type)throw e.arg
return this.rval},dispatchException:function(e){if(this.done)throw e
var t=this
function r(n,r){return a.type="throw",a.arg=e,t.next=n,!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion
if("root"===o.tryLoc)return r("end")
if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc")
if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)
if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally")
if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r]
if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i
break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null)
var a=o?o.completion:{}
return a.type=e,a.arg=t,o?this.next=o.finallyLoc:this.complete(a),f},complete:function(e,t){if("throw"===e.type)throw e.arg
"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t]
if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t]
if(n.tryLoc===e){var r=n.completion
if("throw"===r.type){var i=r.arg
R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},f}}}function p(e,n,r,i){var o=n&&n.prototype instanceof m?n:m,a=Object.create(o.prototype),s=new E(i||[])
return a._invoke=function(e,n,r){var i=u
return function(o,a){if(i===l)throw new Error("Generator is already running")
if(i===h){if("throw"===o)throw a
return k()}for(;;){var s=r.delegate
if(s){if("return"===o||"throw"===o&&s.iterator[o]===t){r.delegate=null
var d=s.iterator.return
if(d){var p=v(d,s.iterator,a)
if("throw"===p.type){o="throw",a=p.arg
continue}}if("return"===o)continue}var p=v(s.iterator[o],s.iterator,a)
if("throw"===p.type){r.delegate=null,o="throw",a=p.arg
continue}o="next",a=t
var m=p.arg
if(!m.done)return i=c,m
r[s.resultName]=m.value,r.next=s.nextLoc,r.delegate=null}if("next"===o)r.sent=r._sent=a
else if("throw"===o){if(i===u)throw i=h,a
r.dispatchException(a)&&(o="next",a=t)}else"return"===o&&r.abrupt("return",a)
i=l
var p=v(e,n,r)
if("normal"===p.type){i=r.done?h:c
var m={value:p.arg,done:r.done}
if(p.arg!==f)return m
r.delegate&&"next"===o&&(a=t)}else"throw"===p.type&&(i=h,o="throw",a=p.arg)}}}(e,r,s),a}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function m(){}function g(){}function y(){}function b(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){this.arg=e}function w(e){function t(n,r,i,o){var a=v(e[n],e,r)
if("throw"!==a.type){var s=a.arg,u=s.value
return u instanceof x?Promise.resolve(u.arg).then(function(e){t("next",e,i,o)},function(e){t("throw",e,i,o)}):Promise.resolve(u).then(function(e){s.value=e,i(s)},o)}o(a.arg)}var n
"object"==typeof process&&process.domain&&(t=process.domain.bind(t)),this._invoke=function(e,r){function i(){return new Promise(function(n,i){t(e,r,n,i)})}return n=n?n.then(i,i):i()}}function _(e){var t={tryLoc:e[0]}
1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{}
t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var r=e[i]
if(r)return r.call(e)
if("function"==typeof e.next)return e
if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r
return r.value=t,r.done=!0,r}
return a.next=a}}return{next:k}}function k(){return{value:t,done:!0}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this),function(e,t){"use strict"
"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document")
return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict"
var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,c={},l=c.toString,h=c.hasOwnProperty,f=h.toString,d=f.call(Object),p={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},m=function(e){return null!=e&&e===e.window},g={type:!0,src:!0,nonce:!0,noModule:!0}
function y(e,t,n){var i,o,a=(n=n||r).createElement("script")
if(a.text=e,t)for(i in g)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,o)
n.head.appendChild(a).parentNode.removeChild(a)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[l.call(e)]||"object":typeof e}var x=function(e,t){return new x.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
function _(e){var t=!!e&&"length"in e&&e.length,n=b(e)
return!v(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.4.1",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e)
return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0)
return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1
for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||x.isPlainObject(n)?n:{},i=!1,a[t]=x.extend(c,o,r)):void 0!==r&&(a[t]=r))
return a},x.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n
return!(!e||"[object Object]"!==l.call(e))&&(!(t=i(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&f.call(n)===d)},isEmptyObject:function(e){var t
for(t in e)return!1
return!0},globalEval:function(e,t){y(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0
if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break
return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[]
return null!=e&&(_(Object(e))?x.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r]
return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i])
return r},map:function(e,t,n){var r,i,o=0,s=[]
if(_(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i)
else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i)
return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()})
var R=function(e){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x="sizzle"+1*new Date,w=e.document,_=0,R=0,E=ue(),C=ue(),k=ue(),S=ue(),A=function(e,t){return e===t&&(h=!0),0},T={}.hasOwnProperty,O=[],I=O.pop,N=O.push,D=O.push,P=O.slice,M=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n
return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+L+"*("+B+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+L+"*\\]",z=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",U=new RegExp(L+"+","g"),W=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),V=new RegExp("^"+L+"*,"+L+"*"),q=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),H=new RegExp(L+"|>"),G=new RegExp(z),K=new RegExp("^"+B+"$"),$={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536
return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=xe(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"})
try{D.apply(O=P.call(w.childNodes),w.childNodes),O[w.childNodes.length].nodeType}catch(Ce){D={apply:O.length?function(e,t){N.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,c,l,h,p,g,y=t&&t.ownerDocument,_=t?t.nodeType:9
if(r=r||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return r
if(!i&&((t?t.ownerDocument||t:w)!==d&&f(t),t=t||d,v)){if(11!==_&&(h=Z.exec(e)))if(o=h[1]){if(9===_){if(!(c=t.getElementById(o)))return r
if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(h[2])return D.apply(r,t.getElementsByTagName(e)),r
if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!m||!m.test(e))&&(1!==_||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===_&&H.test(e)){for((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=x),s=(p=a(e)).length;s--;)p[s]="#"+l+" "+be(p[s])
g=p.join(","),y=ee.test(e)&&ge(t.parentNode)||t}try{return D.apply(r,y.querySelectorAll(g)),r}catch(R){S(e,!0)}finally{l===x&&t.removeAttribute("id")}}}return u(e.replace(W,"$1"),t,r,i)}function ue(){var e=[]
return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[x]=!0,e}function le(e){var t=d.createElement("fieldset")
try{return!!e(t)}catch(Ce){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex
if(r)return r
if(n)for(;n=n.nextSibling;)if(n===t)return-1
return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase()
return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce(function(t){return t=+t,ce(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement
return!X.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w
return a!==d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,v=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne)
return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n=t.getElementById(e)
return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne)
return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id")
return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n,r,i,o=t.getElementById(e)
if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o]
for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e)
if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n)
return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=J.test(d.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>"
var t=d.createElement("input")
t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode
return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0
return!1},A=t?function(e,t){if(e===t)return h=!0,0
var r=!e.compareDocumentPosition-!t.compareDocumentPosition
return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&b(w,e)?-1:t===d||t.ownerDocument===w&&b(w,t)?1:l?M(l,e)-M(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0
var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t]
if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:l?M(l,e)-M(l,t):0
if(i===o)return fe(e,t)
for(n=e;n=n.parentNode;)a.unshift(n)
for(n=t;n=n.parentNode;)s.unshift(n)
for(;a[r]===s[r];)r++
return r?fe(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&f(e),n.matchesSelector&&v&&!S[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t)
if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Ce){S(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&f(e)
var i=r.attrHandle[t.toLowerCase()],o=i&&T.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0
return void 0!==o?o:n.attributes||!v?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0
if(h=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(A),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o))
for(;i--;)e.splice(r[i],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType
if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent
for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t)
return n},(r=se.selectors={cacheLength:50,createPseudo:ce,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2]
return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase()
return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "]
return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e)
return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t
return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,d,p,v=o!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1
if(m){if(o){for(;v;){for(f=t;f=f[v];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1
p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(b=(d=(c=(l=(h=(f=m)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],f=d&&m.childNodes[d];f=++d&&f&&f[v]||(b=d=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[_,d,b]
break}}else if(y&&(b=d=(c=(l=(h=(f=t)[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(f=++d&&f&&f[v]||(b=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(y&&((l=(h=f[x]||(f[x]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[_,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e)
return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=M(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ce(function(e){var t=[],n=[],r=s(e.replace(W,"$1"))
return r[x]?ce(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:ce(function(e){return function(t){return se(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ce(function(e){return K.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n
do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType)
return!1}}),target:function(t){var n=e.location&&e.location.hash
return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase()
return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1
return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase()
return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t
return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n)
return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n)
return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r)
return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r)
return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t)
for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t)
function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value
return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=R++
return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i)
return!1}:function(t,n,u){var c,l,h,f=[_,s]
if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(l=(h=t[x]||(t[x]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t
else{if((c=l[o])&&c[0]===_&&c[1]===s)return f[2]=c[2]
if(l[o]=f,f[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1
return!0}:e[0]}function _e(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)))
return a}function Re(e,t,n,r,i,o){return r&&!r[x]&&(r=Re(r)),i&&!i[x]&&(i=Re(i,o)),ce(function(o,a,s,u){var c,l,h,f=[],d=[],p=a.length,v=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n)
return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?v:_e(v,f,e,s,u),g=n?i||(o?e:p||r)?[]:a:m
if(n&&n(m,g,s,u),r)for(c=_e(g,d),r(c,[],s,u),l=c.length;l--;)(h=c[l])&&(g[d[l]]=!(m[d[l]]=h))
if(o){if(i||e){if(i){for(c=[],l=g.length;l--;)(h=g[l])&&c.push(m[l]=h)
i(null,g=[],c,u)}for(l=g.length;l--;)(h=g[l])&&(c=i?M(o,h):f[l])>-1&&(o[c]=!(a[c]=h))}}else g=_e(g===a?g.splice(p,g.length):g),i?i(null,a,g,u):D.apply(a,g)})}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,l=xe(function(e){return e===t},s,!0),h=xe(function(e){return M(t,e)>-1},s,!0),f=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?l(e,n,r):h(e,n,r))
return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])f=[xe(we(f),n)]
else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[x]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return Re(u>1&&we(f),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(W,"$1"),n,u<i&&Ee(e.slice(u,i)),i<o&&Ee(e=e.slice(i)),i<o&&be(e))}f.push(n)}return we(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,i,o,a,s,u,c,l=C[e+" "]
if(l)return t?0:l.slice(0)
for(s=e,u=[],c=r.preFilter;s;){for(a in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=q.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(W," ")}),s=s.slice(n.length)),r.filter)!(i=$[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length))
if(!n)break}return t?s.length:s?se.error(e):C(e,u).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=k[e+" "]
if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[x]?i.push(s):o.push(s);(s=k(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,l){var h,p,m,g=0,y="0",b=o&&[],x=[],w=c,R=o||i&&r.find.TAG("*",l),E=_+=null==w?1:Math.random()||.1,C=R.length
for(l&&(c=a===d||a||l);y!==C&&null!=(h=R[y]);y++){if(i&&h){for(p=0,a||h.ownerDocument===d||(f(h),s=!v);m=e[p++];)if(m(h,a||d,s)){u.push(h)
break}l&&(_=E)}n&&((h=!m&&h)&&g--,o&&b.push(h))}if(g+=y,n&&y!==g){for(p=0;m=t[p++];)m(b,x,a,s)
if(o){if(g>0)for(;y--;)b[y]||x[y]||(x[y]=I.call(u))
x=_e(x)}D.apply(u,x),l&&!o&&x.length>0&&g+t.length>1&&se.uniqueSort(u)}return l&&(_=E,c=w),b}
return n?ce(o):o}(o,i))).selector=e}return s},u=se.select=function(e,t,n,i){var o,u,c,l,h,f="function"==typeof e&&e,d=!i&&a(e=f.selector||e)
if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&v&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n
f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=$.needsContext.test(e)?0:u.length;o--&&(c=u[o],!r.relative[l=c.type]);)if((h=r.find[l])&&(i=h(c.matches[0].replace(te,ne),ee.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&be(u)))return D.apply(n,i),n
break}}return(f||s(e,d))(i,t,!v,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(A).join("")===x,n.detectDuplicates=!!h,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||he(F,function(e,t,n){var r
if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e)
x.find=R,x.expr=R.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=R.uniqueSort,x.text=R.getText,x.isXMLDoc=R.isXML,x.contains=R.contains,x.escapeSelector=R.escape
var E=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break
r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e)
return n},k=x.expr.match.needsContext
function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i
function T(e,t,n){return v(t)?x.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?x.grep(e,function(e){return e===t!==n}):"string"!=typeof t?x.grep(e,function(e){return u.call(t,e)>-1!==n}):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0]
return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,r=this.length,i=this
if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<r;t++)if(x.contains(i[t],this))return!0}))
for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,i[t],n)
return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&k.test(e)?x(e):e||[],!1).length}})
var O,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var i,o
if(!e)return this
if(n=n||O,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)
if(i[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&x.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i])
return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,O=x(r)
var N=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0}
function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length
return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&x(e)
if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n)
break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(x(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode
return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(S(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n)
return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(D[e]||x.uniqueSort(i),N.test(e)&&i.reverse()),this.pushStack(i)}})
var M=/[^\x20\t\r\n\f]+/g
function F(e){return e}function L(e){throw e}function B(e,t,n,r){var i
try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={}
return x.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):x.extend({},e)
var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)
e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){x.each(n,function(n,r){v(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?x.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}}
return c},x.extend({Deferred:function(t){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments
return x.Deferred(function(t){x.each(n,function(n,r){var i=v(e[r[4]])&&e[r[4]]
o[r[1]](function(){var e=i&&i.apply(this,arguments)
e&&v(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0
function a(t,n,r,i){return function(){var s=this,u=arguments,c=function(){var e,c
if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution")
c=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(c)?i?c.call(e,a(o,n,F,i),a(o,n,L,i)):(o++,c.call(e,a(o,n,F,i),a(o,n,L,i),a(o,n,F,n.notifyWith))):(r!==F&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,l.stackTrace),t+1>=o&&(r!==L&&(s=void 0,u=[e]),n.rejectWith(s,u))}}
t?l():(x.Deferred.getStackHook&&(l.stackTrace=x.Deferred.getStackHook()),e.setTimeout(l))}}return x.Deferred(function(e){n[0][3].add(a(0,e,v(i)?i:F,e.notifyWith)),n[1][3].add(a(0,e,v(t)?t:F)),n[2][3].add(a(0,e,v(r)?r:L))}).promise()},promise:function(e){return null!=e?x.extend(e,i):i}},o={}
return x.each(n,function(e,t){var a=t[2],s=t[5]
i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}}
if(t<=1&&(B(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||v(i[n]&&i[n].then)))return a.then()
for(;n--;)B(i[n],s(n),a.reject)
return a.promise()}})
var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/
x.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&j.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},x.readyException=function(t){e.setTimeout(function(){throw t})}
var z=x.Deferred()
function U(){r.removeEventListener("DOMContentLoaded",U),e.removeEventListener("load",U),x.ready()}x.fn.ready=function(e){return z.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||z.resolveWith(r,[x]))}}),x.ready.then=z.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(x.ready):(r.addEventListener("DOMContentLoaded",U),e.addEventListener("load",U))
var W=function(e,t,n,r,i,o,a){var s=0,u=e.length,c=null==n
if("object"===b(n))for(s in i=!0,n)W(e,t,s,n[s],!0,o,a)
else if(void 0!==r&&(i=!0,v(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(x(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)))
return i?e:c?t.call(e):u?t(e[0],n):o},V=/^-ms-/,q=/-([a-z])/g
function H(e,t){return t.toUpperCase()}function G(e){return e.replace(V,"ms-").replace(q,H)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}
function $(){this.expando=x.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando]
return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e)
if("string"==typeof t)i[G(t)]=n
else for(r in t)i[G(r)]=t[r]
return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando]
if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length
for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando]
return void 0!==t&&!x.isEmptyObject(t)}}
var X=new $,Y=new $,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g
function Z(e,t,n){var r
if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(n)}catch(i){}Y.set(e,t,n)}else n=void 0
return n}x.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes
if(void 0===e){if(this.length&&(i=Y.get(o),1===o.nodeType&&!X.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),Z(o,r,i[r]))
X.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Y.set(this,e)}):W(this,function(t){var n
if(o&&void 0===t)return void 0!==(n=Y.get(o,e))?n:void 0!==(n=Z(o,e))?n:void 0
this.each(function(){Y.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r
if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx"
var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t)
"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){x.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks"
return X.get(e,n)||X.access(e,n,{empty:x.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2
return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each(function(){var n=x.queue(this,e,t)
x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])}
for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=X.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s))
return s(),i.promise(t)}})
var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=r.documentElement,ie=function(e){return x.contains(e.ownerDocument,e)},oe={composed:!0}
re.getRootNode&&(ie=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument})
var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===x.css(e,"display")},se=function(e,t,n,r){var i,o,a={}
for(o in t)a[o]=e.style[o],e.style[o]=t[o]
for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o]
return i}
function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},u=s(),c=n&&n[3]||(x.cssNumber[t]?"":"px"),l=e.nodeType&&(x.cssNumber[t]||"px"!==c&&+u)&&te.exec(x.css(e,t))
if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)x.style(e,t,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o
l*=2,x.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ce={}
function le(e){var t,n=e.ownerDocument,r=e.nodeName,i=ce[r]
return i||(t=n.body.appendChild(n.createElement(r)),i=x.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ce[r]=i,i)}function he(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=X.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=le(r))):"none"!==n&&(i[o]="none",X.set(r,"display",n)))
for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o])
return e}x.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?x(this).show():x(this).hide()})}})
var fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i,ve={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]}
function me(e,t){var n
return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?x.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td
var ye,be,xe=/<|&#?\w+;/
function we(e,t,n,r,i){for(var o,a,s,u,c,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===b(o))x.merge(f,o.nodeType?[o]:o)
else if(xe.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ve[s]||ve._default,a.innerHTML=u[1]+x.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild
x.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(t.createTextNode(o))
for(h.textContent="",d=0;o=f[d++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o)
else if(c=ie(o),a=me(h.appendChild(o),"script"),c&&ge(a),n)for(l=0;o=a[l++];)pe.test(o.type||"")&&n.push(o)
return h}ye=r.createDocumentFragment().appendChild(r.createElement("div")),(be=r.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),p.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue
var _e=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/
function Ce(){return!0}function ke(){return!1}function Se(e,t){return e===function(){try{return r.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s
if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o)
return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke
else if(!i)return e
return 1===o&&(a=i,(i=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each(function(){x.event.add(this,t,i,r,n)})}function Te(e,t,n){n?(X.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=X.get(this,t)
if(1&e.isTrigger&&this[t]){if(a.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation()
else if(a=o.call(arguments),X.set(this,t,a),r=n(this,t),this[t](),a!==(i=X.get(this,t))||r?X.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else a.length&&(X.set(this,t,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&x.event.add(e,t,Ce)}x.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,h,f,d,p,v,m=X.get(e)
if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(re,i),n.guid||(n.guid=x.guid++),(u=m.events)||(u=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)d=v=(s=Ee.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(h=x.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=x.event.special[d]||{},l=x.extend({type:d,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(d,a)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),x.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,h,f,d,p,v,m=X.hasData(e)&&X.get(e)
if(m&&(u=m.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(d=v=(s=Ee.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(h=x.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l))
a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||x.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)x.event.remove(e,d+t[c],n,r,!0)
x.isEmptyObject(u)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=x.event.fix(e),u=new Array(arguments.length),c=(X.get(this,"events")||{})[s.type]||[],l=x.event.special[s.type]||{}
for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t]
if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=x.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))
return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target
if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(c)>-1:x.find(i,this,null,[c]).length),a[i]&&o.push(r)
o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e
return fe.test(t.type)&&t.click&&S(t,"input")&&Te(t,"click",Ce),!1},trigger:function(e){var t=this||e
return fe.test(t.type)&&t.click&&S(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target
return fe.test(t.type)&&t.click&&S(t,"input")&&X.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t)
e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent
this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent
this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent
this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button
return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Re.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(e,t){x.event.special[e]={setup:function(){return Te(this,e,Se),!1},trigger:function(){return Te(this,e),!0},delegateType:t}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj
return r&&(r===this||x.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),x.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i
if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this
if("object"==typeof e){for(i in e)this.off(i,t,e[i])
return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){x.event.remove(this,e,n,t)})}})
var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
function Pe(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s,u,c
if(1===t.nodeType){if(X.hasData(e)&&(o=X.access(e),a=X.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)x.event.add(t,i,c[i][n])
Y.hasData(e)&&(s=Y.access(e),u=x.extend({},s),Y.set(t,u))}}function Be(e,t,n,r){t=a.apply([],t)
var i,o,s,u,c,l,h=0,f=e.length,d=f-1,m=t[0],g=v(m)
if(g||f>1&&"string"==typeof m&&!p.checkClone&&Ne.test(m))return e.each(function(i){var o=e.eq(i)
g&&(t[0]=m.call(this,i,o.html())),Be(o,t,n,r)})
if(f&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=x.map(me(i,"script"),Me)).length;h<f;h++)c=i,h!==d&&(c=x.clone(c,!0,!0),u&&x.merge(s,me(c,"script"))),n.call(e[h],c,h)
if(u)for(l=s[s.length-1].ownerDocument,x.map(s,Fe),h=0;h<u;h++)c=s[h],pe.test(c.type||"")&&!X.access(c,"globalEval")&&x.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&!c.noModule&&x._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):y(c.textContent.replace(De,""),c,l))}return e}function je(e,t,n){for(var r,i=t?x.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(me(r)),r.parentNode&&(n&&ie(r)&&ge(me(r,"script")),r.parentNode.removeChild(r))
return e}x.extend({htmlPrefilter:function(e){return e.replace(Oe,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,c,l=e.cloneNode(!0),h=ie(e)
if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=me(l),r=0,i=(o=me(e)).length;r<i;r++)s=o[r],u=a[r],c=void 0,"input"===(c=u.nodeName.toLowerCase())&&fe.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue)
if(t)if(n)for(o=o||me(e),a=a||me(l),r=0,i=o.length;r<i;r++)Le(o[r],a[r])
else Le(e,l)
return(a=me(l,"script")).length>0&&ge(a,!h&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,i=x.event.special,o=0;void 0!==(n=e[o]);o++)if(K(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle)
n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),x.fn.extend({detach:function(e){return je(this,e,!0)},remove:function(e){return je(this,e)},text:function(e){return W(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e)
t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(me(e,!1)),e.textContent="")
return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,r=this.length
if(void 0===e&&1===t.nodeType)return t.innerHTML
if("string"==typeof e&&!Ie.test(e)&&!ve[(de.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e)
try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(me(t,!1)),t.innerHTML=e)
t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[]
return Be(this,arguments,function(t){var n=this.parentNode
x.inArray(this,e)<0&&(x.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[t](n),s.apply(r,n.get())
return this.pushStack(r)}})
var ze=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ue=function(t){var n=t.ownerDocument.defaultView
return n&&n.opener||(n=e),n.getComputedStyle(t)},We=new RegExp(ne.join("|"),"i")
function Ve(e,t,n){var r,i,o,a,s=e.style
return(n=n||Ue(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=x.style(e,t)),!p.pixelBoxStyles()&&ze.test(a)&&We.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments)
delete this.get}}}(function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(l)
var t=e.getComputedStyle(l)
i="1%"!==t.top,u=12===n(t.marginLeft),l.style.right="60%",s=36===n(t.right),o=36===n(t.width),l.style.position="absolute",a=12===n(l.offsetWidth/3),re.removeChild(c),l=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,c=r.createElement("div"),l=r.createElement("div")
l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===l.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))})()
var He=["Webkit","Moz","ms"],Ge=r.createElement("div").style,Ke={}
function $e(e){var t=x.cssProps[e]||Ke[e]
return t||(e in Ge?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in Ge)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"}
function Ze(e,t,n){var r=te.exec(t)
return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0
if(n===(r?"border":"content"))return 0
for(;a<4;a+=2)"margin"===n&&(u+=x.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=x.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=x.css(e,"border"+ne[a]+"Width",!0,i))):(u+=x.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=x.css(e,"border"+ne[a]+"Width",!0,i):s+=x.css(e,"border"+ne[a]+"Width",!0,i))
return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Ue(e),i=(!p.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),o=i,a=Ve(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1)
if(ze.test(a)){if(!n)return a
a="auto"}return(!p.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===x.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ve(e,"opacity")
return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Ye.test(t),c=e.style
if(u||(t=$e(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t]
"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t)
return Ye.test(t)||(t=$e(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ve(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!Xe.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):se(e,Qe,function(){return tt(e,t,r)})},set:function(e,n,r){var i,o=Ue(e),a=!p.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===x.css(e,"boxSizing",!1,o),u=r?et(e,t,r,s,o):0
return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-et(e,t,"border",!1,o)-.5)),u&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Ze(0,n,u)}}}),x.cssHooks.marginLeft=qe(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0]
return i}},"margin"!==e&&(x.cssHooks[e+t].set=Ze)}),x.fn.extend({css:function(e,t){return W(this,function(e,t,n){var r,i,o={},a=0
if(Array.isArray(t)){for(r=Ue(e),i=t.length;a<i;a++)o[t[a]]=x.css(e,t[a],!1,r)
return o}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)}}),x.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop]
return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop]
return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t
return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=nt.prototype.init,x.fx.step={}
var rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/
function st(){it&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,x.fx.interval),x.fx.tick())}function ut(){return e.setTimeout(function(){rt=void 0}),rt=Date.now()}function ct(e,t){var n,r=0,i={height:e}
for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e
return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ht(e,t,n){var r,i,o=0,a=ht.prefilters.length,s=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1
for(var t=rt||ut(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r)
return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing)
return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0
if(i)return this
for(i=!0;n<r;n++)c.tweens[n].run(1)
return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props
for(function(e,t){var n,r,i,o,a
for(n in e)if(i=t[r=G(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i)
else t[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=ht.prefilters[o].call(c,e,l,c.opts))return v(r.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r
return x.map(l,lt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t)
return ue(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(M)
for(var n,r=0,i=e.length;r<i;r++)n=e[r],ht.tweeners[n]=ht.tweeners[n]||[],ht.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,c,l,h="width"in t||"height"in t,f=this,d={},p=e.style,v=e.nodeType&&ae(e),m=X.get(e,"fxshow")
for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue
v=!0}d[r]=m&&m[r]||x.style(e,r)}if((u=!x.isEmptyObject(t))||!x.isEmptyObject(d))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=X.get(e,"display")),"none"===(l=x.css(e,"display"))&&(c?l=c:(he([e],!0),c=e.style.display||c,l=x.css(e,"display"),he([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===x.css(e,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(m?"hidden"in m&&(v=m.hidden):m=X.access(e,"fxshow",{display:c}),o&&(m.hidden=!v),v&&he([e],!0),f.done(function(){for(r in v||he([e]),X.remove(e,"fxshow"),d)x.style(e,r,d[r])})),u=lt(v?m[r]:0,r,f),r in m||(m[r]=u.start,v&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t}
return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=ht(this,x.extend({},e),o);(i||X.get(this,"finish"))&&t.stop(!0)}
return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop
delete e.stop,t(n)}
return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,a=X.get(this)
if(i)a[i]&&a[i].stop&&r(a[i])
else for(i in a)a[i]&&a[i].stop&&at.test(i)&&r(a[i])
for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1))
!t&&n||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0
for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1))
for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this)
delete n.finish})}}),x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t]
x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,i)}}),x.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers
for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1)
n.length||x.fx.stop(),rt=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){it||(it=!0,st())},x.fx.stop=function(){it=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,n){return t=x.fx&&x.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t)
r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"))
e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}()
var ft,dt=x.expr.attrHandle
x.fn.extend({attr:function(e,t){return W(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var r,i,o=e.nodeType
if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&S(e,"input")){var n=e.value
return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M)
if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||x.find.attr
dt[t]=function(e,t,r){var i,o,a=t.toLowerCase()
return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}})
var pt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i
function mt(e){return(e.match(M)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}x.fn.extend({prop:function(e,t){return W(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var r,i,o=e.nodeType
if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(e)||(t=x.propFix[t]||t,i=x.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex")
return t?parseInt(t,10):pt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode
return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode
t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0
if(v(e))return this.each(function(t){x(this).addClass(e.call(this,t,gt(this)))})
if((t=yt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ")
i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0
if(v(e))return this.each(function(t){x(this).removeClass(e.call(this,t,gt(this)))})
if(!arguments.length)return this.attr("class","")
if((t=yt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ")
i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e)
return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):v(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a
if(r)for(i=0,o=x(this),a=yt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t)
else void 0!==e&&"boolean"!==n||((t=gt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0
for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0
return!1}})
var bt=/\r/g
x.fn.extend({val:function(e){var t,n,r,i=this[0]
return arguments.length?(r=v(e),this.each(function(n){var i
1===this.nodeType&&(null==(i=r?e.call(this,n,x(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value")
return null!=t?t:mt(x.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length
for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t
s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0)
return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},p.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e
var xt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()}
x.extend(x.event,{trigger:function(t,n,i,o){var a,s,u,c,l,f,d,p,g=[i||r],y=h.call(t,"type")?t.type:t,b=h.call(t,"namespace")?t.namespace.split("."):[]
if(s=p=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!xt.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(b=y.split("."),y=b.shift(),b.sort()),l=y.indexOf(":")<0&&"on"+y,(t=t[x.expando]?t:new x.Event(y,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:x.makeArray(n,[t]),d=x.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!m(i)){for(c=d.delegateType||y,xt.test(c+y)||(s=s.parentNode);s;s=s.parentNode)g.push(s),u=s
u===(i.ownerDocument||r)&&g.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=g[a++])&&!t.isPropagationStopped();)p=s,t.type=a>1?c:d.bindType||y,(f=(X.get(s,"events")||{})[t.type]&&X.get(s,"handle"))&&f.apply(s,n),(f=l&&s[l])&&f.apply&&K(s)&&(t.result=f.apply(s,n),!1===t.result&&t.preventDefault())
return t.type=y,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),n)||!K(i)||l&&v(i[y])&&!m(i)&&((u=i[l])&&(i[l]=null),x.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,wt),i[y](),t.isPropagationStopped()&&p.removeEventListener(y,wt),x.event.triggered=void 0,u&&(i[l]=u)),t.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0})
x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0]
if(n)return x.event.trigger(e,t,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))}
x.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=X.access(r,t)
i||r.addEventListener(e,n,!0),X.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=X.access(r,t)-1
i?X.access(r,t,i):(r.removeEventListener(e,n,!0),X.remove(r,t))}}})
var _t=e.location,Rt=Date.now(),Et=/\?/
x.parseXML=function(t){var n
if(!t||"string"!=typeof t)return null
try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+t),n}
var Ct=/\[\]$/,kt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i
function Tt(e,t,n,r){var i
if(Array.isArray(t))x.each(t,function(t,i){n||Ct.test(e)?r(e,i):Tt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)})
else if(n||"object"!==b(t))r(e,t)
else for(i in t)Tt(e+"["+i+"]",t[i],n,r)}x.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t
r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}
if(null==e)return""
if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)})
else for(n in e)Tt(n,e[n],t,i)
return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements")
return e?x.makeArray(e):this}).filter(function(){var e=this.type
return this.name&&!x(this).is(":disabled")&&At.test(this.nodeName)&&!St.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=x(this).val()
return null==n?null:Array.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}})
var Ot=/%20/g,It=/#.*$/,Nt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Mt=/^\/\//,Ft={},Lt={},Bt="*/".concat("*"),jt=r.createElement("a")
function zt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*")
var r,i=0,o=t.toLowerCase().match(M)||[]
if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ut(e,t,n,r){var i={},o=e===Lt
function a(s){var u
return i[s]=!0,x.each(e[s]||[],function(e,s){var c=s(t,n,r)
return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Wt(e,t){var n,r,i=x.ajaxSettings.flatOptions||{}
for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n])
return r&&x.extend(!0,e,r),e}jt.href=_t.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,x.ajaxSettings),t):Wt(x.ajaxSettings,e)},ajaxPrefilter:zt(Ft),ajaxTransport:zt(Lt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{}
var i,o,a,s,u,c,l,h,f,d,p=x.ajaxSetup({},n),v=p.context||p,m=p.context&&(v.nodeType||v.jquery)?x(v):x.event,g=x.Deferred(),y=x.Callbacks("once memory"),b=p.statusCode||{},w={},_={},R="canceled",E={readyState:0,getResponseHeader:function(e){var t
if(l){if(!s)for(s={};t=Dt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2])
t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t
if(e)if(l)E.always(e[E.status])
else for(t in e)b[t]=[b[t],e[t]]
return this},abort:function(e){var t=e||R
return i&&i.abort(t),C(0,t),this}}
if(g.promise(E),p.url=((t||p.url||_t.href)+"").replace(Mt,_t.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(M)||[""],null==p.crossDomain){c=r.createElement("a")
try{c.href=p.url,c.href=c.href,p.crossDomain=jt.protocol+"//"+jt.host!=c.protocol+"//"+c.host}catch(k){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Ut(Ft,p,n,E),l)return E
for(f in(h=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),o=p.url.replace(It,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ot,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Et.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Nt,"$1"),d=(Et.test(o)?"&":"?")+"_="+Rt+++d),p.url=o+d),p.ifModified&&(x.lastModified[o]&&E.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&E.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Bt+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(f,p.headers[f])
if(p.beforeSend&&(!1===p.beforeSend.call(v,E,p)||l))return E.abort()
if(R="abort",y.add(p.complete),E.done(p.success),E.fail(p.error),i=Ut(Lt,p,n,E)){if(E.readyState=1,h&&m.trigger("ajaxSend",[E,p]),l)return E
p.async&&p.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},p.timeout))
try{l=!1,i.send(w,C)}catch(k){if(l)throw k
C(-1,k)}}else C(-1,"No Transport")
function C(t,n,r,s){var c,f,d,w,_,R=n
l||(l=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,r&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"))
if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i)
break}if(u[0]in n)o=u[0]
else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i
break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,E,r)),w=function(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice()
if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a]
for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u
else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]))
break}if(!0!==a)if(a&&e.throws)t=a(t)
else try{t=a(t)}catch(k){return{state:"parsererror",error:a?k:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,w,E,c),c?(p.ifModified&&((_=E.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=_),(_=E.getResponseHeader("etag"))&&(x.etag[o]=_)),204===t||"HEAD"===p.type?R="nocontent":304===t?R="notmodified":(R=w.state,f=w.data,c=!(d=w.error))):(d=R,!t&&R||(R="error",t<0&&(t=0))),E.status=t,E.statusText=(n||R)+"",c?g.resolveWith(v,[f,R,E]):g.rejectWith(v,[E,R,d]),E.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[E,p,c?f:d]),y.fireWith(v,[E,R]),h&&(m.trigger("ajaxComplete",[E,p]),--x.active||x.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:i,data:n,success:r},x.isPlainObject(e)&&e))}}),x._evalUrl=function(e,t){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t)}})},x.fn.extend({wrapAll:function(e){var t
return this[0]&&(v(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild
return e}).append(this)),this},wrapInner:function(e){return v(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents()
n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v(e)
return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}}
var Vt={0:200,1223:204},qt=x.ajaxSettings.xhr()
p.cors=!!qt&&"withCredentials"in qt,p.ajax=qt=!!qt,x.ajaxTransport(function(t){var n,r
if(p.cors||qt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr()
if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a]
for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a])
n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort")
try{s.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n
if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}})
var Ht,Gt=[],Kt=/(=)\?(?=&|$)|\?\?/
x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||x.expando+"_"+Rt++
return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data")
if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+i):!1!==t.jsonp&&(t.url+=(Et.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?x(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Gt.push(i)),a&&v(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=((Ht=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ht.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),a=!n&&[],(o=A.exec(e))?[t.createElement(o[1])]:(o=we([e],t,a),a&&a.length&&x(a).remove(),x.merge([],o.childNodes)))
var i,o,a},x.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ")
return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c=x.css(e,"position"),l=x(e),h={}
"static"===c&&(e.style.position="relative"),s=l.offset(),o=x.css(e,"top"),u=x.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):l.css(h)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)})
var t,n,r=this[0]
return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0}
if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect()
else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode
e&&e!==r&&1===e.nodeType&&((i=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),i.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-x.css(r,"marginTop",!0),left:t.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent
return e||re})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t
x.fn[e]=function(r){return W(this,function(e,r,i){var o
if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r]
o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=qe(p.pixelPosition,function(e,n){if(n)return n=Ve(e,t),ze.test(n)?x(e).position()[t]+"px":n})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border")
return W(this,function(t,n,i){var o
return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?x.css(t,n,s):x.style(t,n,i,s)},t,a?i:void 0,a)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),x.proxy=function(e,t){var n,r,i
if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=S,x.isFunction=v,x.isWindow=m,x.camelCase=G,x.type=b,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e)
return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x})
var $t=e.jQuery,Xt=e.$
return x.noConflict=function(t){return e.$===x&&(e.$=Xt),t&&e.jQuery===x&&(e.jQuery=$t),x},t||(e.jQuery=e.$=x),x}),function(){var e,t,n
mainContext=this,function(){function r(e,n){var a=e,s=i[a]
s||(s=i[a+="/index"])
var u=o[a]
if(void 0!==u)return u
u=o[a]={},s||function(e,t){throw t?new Error("Could not find module "+e+" required by: "+t):new Error("Could not find module "+e)}(e,n)
for(var c=s.deps,l=s.callback,h=new Array(c.length),f=0;f<c.length;f++)"exports"===c[f]?h[f]=u:"require"===c[f]?h[f]=t:h[f]=r(c[f],a)
return l.apply(this,h),u}if("undefined"==typeof window&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)||(n=this.Ember=this.Ember||{}),void 0===n&&(n={}),void 0===n.__loader){var i=Object.create(null),o=Object.create(null)
e=function(e,t,n){var r={}
n?(r.deps=t,r.callback=n):(r.deps=[],r.callback=t),i[e]=r},(t=function(e){return r(e,null)}).default=t,t.has=function(e){return Boolean(i[e])||Boolean(i[e+"/index"])},t._eak_seen=i,n.__loader={define:e,require:t,registry:i}}else e=n.__loader.define,t=n.__loader.require}(),e("@ember/-internals/browser-environment",["exports"],function(e){"use strict"
e.hasDOM=e.isFirefox=e.isChrome=e.userAgent=e.history=e.location=e.window=void 0
var t="object"==typeof self&&null!==self&&self.Object===Object&&"undefined"!=typeof Window&&self.constructor===Window&&"object"==typeof document&&null!==document&&self.document===document&&"object"==typeof location&&null!==location&&self.location===location&&"object"==typeof history&&null!==history&&self.history===history&&"object"==typeof navigator&&null!==navigator&&self.navigator===navigator&&"string"==typeof navigator.userAgent
e.hasDOM=t
var n=t?self:null
e.window=n
var r=t?self.location:null
e.location=r
var i=t?self.history:null
e.history=i
var o=t?self.navigator.userAgent:"Lynx (textmode)"
e.userAgent=o
var a=!!t&&(Boolean(n.chrome)&&!n.opera)
e.isChrome=a
var s=!!t&&"undefined"!=typeof InstallTrigger
e.isFirefox=s}),e("@ember/-internals/console/index",["exports","@ember/debug","@ember/deprecated-features"],function(e,t,n){"use strict"
e.default=void 0
var r
n.LOGGER&&(r={log:function(){var e
return(e=console).log.apply(e,arguments)},warn:function(){var e
return(e=console).warn.apply(e,arguments)},error:function(){var e
return(e=console).error.apply(e,arguments)},info:function(){var e
return(e=console).info.apply(e,arguments)},debug:function(){var e,t
return console.debug?(t=console).debug.apply(t,arguments):(e=console).info.apply(e,arguments)},assert:function(){var e
return(e=console).assert.apply(e,arguments)}})
var i=r
e.default=i}),e("@ember/-internals/container",["exports","@ember/-internals/owner","@ember/-internals/utils","@ember/debug","@ember/polyfills"],function(e,t,n,r,i){"use strict"
e.privatize=function(e){var t=e[0],r=y[t]
if(r)return r
var i=t.split(":"),o=i[0],a=i[1]
return y[t]=(0,n.intern)(o+":"+a+"-"+b)},e.FACTORY_FOR=e.Container=e.Registry=void 0
var o=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
this.registry=e,this.owner=t.owner||null,this.cache=(0,n.dictionary)(t.cache||null),this.factoryManagerCache=(0,n.dictionary)(t.factoryManagerCache||null),this.isDestroyed=!1,this.isDestroying=!1}var r=e.prototype
return r.lookup=function(e,t){return u(this,this.registry.normalize(e),t)},r.destroy=function(){f(this),this.isDestroying=!0},r.finalizeDestroy=function(){d(this),this.isDestroyed=!0},r.reset=function(e){this.isDestroyed||(void 0===e?(f(this),d(this)):function(e,t){var n=e.cache[t]
delete e.factoryManagerCache[t],n&&(delete e.cache[t],n.destroy&&n.destroy())}(this,this.registry.normalize(e)))},r.ownerInjection=function(){var e
return(e={})[t.OWNER]=this.owner,e},r.factoryFor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.registry.normalize(e)
if(!t.source&&!t.namespace||(n=this.registry.expandLocalLookup(e,t)))return c(this,n,e)},e}()
function a(e,t){return!1!==e.registry.getOption(t,"singleton")}function s(e,t){return!1!==e.registry.getOption(t,"instantiate")}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t
if(!n.source&&!n.namespace||(r=e.registry.expandLocalLookup(t,n))){if(!1!==n.singleton){var i=e.cache[r]
if(void 0!==i)return i}return function(e,t,n,r){var i=c(e,t,n)
if(void 0===i)return
if(function(e,t,n){var r=n.instantiate
return!1!==n.singleton&&!1!==r&&a(e,t)&&s(e,t)}(e,n,r))return e.cache[t]=i.create()
if(function(e,t,n){var r=n.instantiate,i=n.singleton
return!1!==r&&(!1!==i||a(e,t))&&s(e,t)}(e,n,r))return i.create()
if(function(e,t,n){var r=n.instantiate
return!1!==n.singleton&&!r&&a(e,t)&&!s(e,t)}(e,n,r)||function(e,t,n){var r=n.instantiate,i=n.singleton
return!(!1!==r||!1!==i&&a(e,t)||s(e,t))}(e,n,r))return i.class
throw new Error("Could not create factory")}(e,r,t,n)}}function c(e,t,n){var r=e.factoryManagerCache[t]
if(void 0!==r)return r
var i=e.registry.resolve(t)
if(void 0!==i){0
var o=new v(e,i,n,t)
return e.factoryManagerCache[t]=o,o}}function l(e,t,n){var r=n.injections
void 0===r&&(r=n.injections={})
for(var i=0;i<t.length;i++){var o=t[i],s=o.property,c=o.specifier,l=o.source
r[s]=l?u(e,c,{source:l}):u(e,c),n.isDynamic||(n.isDynamic=!a(e,c))}}function h(e,t){var n=e.registry,r=t.split(":")[0]
return function(e,t,n){var r={injections:void 0,isDynamic:!1}
return void 0!==t&&l(e,t,r),void 0!==n&&l(e,n,r),r}(e,n.getTypeInjections(r),n.getInjections(t))}function f(e){for(var t=e.cache,n=Object.keys(t),r=0;r<n.length;r++){var i=t[n[r]]
i.destroy&&i.destroy()}}function d(e){e.cache=(0,n.dictionary)(null),e.factoryManagerCache=(0,n.dictionary)(null)}e.Container=o
var p=new WeakMap
e.FACTORY_FOR=p
var v=function(){function e(e,t,n,r){this.container=e,this.owner=e.owner,this.class=t,this.fullName=n,this.normalizedName=r,this.madeToString=void 0,this.injections=void 0,p.set(this,this)}var n=e.prototype
return n.toString=function(){return void 0===this.madeToString&&(this.madeToString=this.container.registry.makeToString(this.class,this.fullName)),this.madeToString},n.create=function(e){var n=this.injections
if(void 0===n){var r=h(this.container,this.normalizedName),o=r.injections
n=o,r.isDynamic||(this.injections=o)}var a=n
if(void 0!==e&&(a=(0,i.assign)({},n,e)),!this.class.create)throw new Error("Failed to create an instance of '"+this.normalizedName+"'. Most likely an improperly defined class or an invalid module export.")
"function"==typeof this.class._initFactory?this.class._initFactory(this):(void 0!==e&&void 0!==a||(a=(0,i.assign)({},a)),(0,t.setOwner)(a,this.owner))
var s=this.class.create(a)
return p.set(s,this),s},e}(),m=/^[^:]+:[^:]+$/,g=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this.fallback=e.fallback||null,this.resolver=e.resolver||null,this.registrations=(0,n.dictionary)(e.registrations||null),this._typeInjections=(0,n.dictionary)(null),this._injections=(0,n.dictionary)(null),this._localLookupCache=Object.create(null),this._normalizeCache=(0,n.dictionary)(null),this._resolveCache=(0,n.dictionary)(null),this._failSet=new Set,this._options=(0,n.dictionary)(null),this._typeOptions=(0,n.dictionary)(null)}var t=e.prototype
return t.container=function(e){return new o(this,e)},t.register=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.normalize(e)
this._failSet.delete(r),this.registrations[r]=t,this._options[r]=n},t.unregister=function(e){var t=this.normalize(e)
this._localLookupCache=Object.create(null),delete this.registrations[t],delete this._resolveCache[t],delete this._options[t],this._failSet.delete(t)},t.resolve=function(e,t){var n,r=function(e,t,n){var r=t
if(void 0!==n&&(n.source||n.namespace)&&!(r=e.expandLocalLookup(t,n)))return
var i,o=e._resolveCache[r]
if(void 0!==o)return o
if(e._failSet.has(r))return
e.resolver&&(i=e.resolver.resolve(r))
void 0===i&&(i=e.registrations[r])
void 0===i?e._failSet.add(r):e._resolveCache[r]=i
return i}(this,this.normalize(e),t)
void 0===r&&null!==this.fallback&&(r=(n=this.fallback).resolve.apply(n,arguments))
return r},t.describe=function(e){return null!==this.resolver&&this.resolver.lookupDescription?this.resolver.lookupDescription(e):null!==this.fallback?this.fallback.describe(e):e},t.normalizeFullName=function(e){return null!==this.resolver&&this.resolver.normalize?this.resolver.normalize(e):null!==this.fallback?this.fallback.normalizeFullName(e):e},t.normalize=function(e){return this._normalizeCache[e]||(this._normalizeCache[e]=this.normalizeFullName(e))},t.makeToString=function(e,t){return null!==this.resolver&&this.resolver.makeToString?this.resolver.makeToString(e,t):null!==this.fallback?this.fallback.makeToString(e,t):e.toString()},t.has=function(e,t){if(!this.isValidFullName(e))return!1
var n=t&&t.source&&this.normalize(t.source),r=t&&t.namespace||void 0
return function(e,t,n,r){return void 0!==e.resolve(t,{source:n,namespace:r})}(this,this.normalize(e),n,r)},t.optionsForType=function(e,t){this._typeOptions[e]=t},t.getOptionsForType=function(e){var t=this._typeOptions[e]
return void 0===t&&null!==this.fallback&&(t=this.fallback.getOptionsForType(e)),t},t.options=function(e,t){var n=this.normalize(e)
this._options[n]=t},t.getOptions=function(e){var t=this.normalize(e),n=this._options[t]
return void 0===n&&null!==this.fallback&&(n=this.fallback.getOptions(e)),n},t.getOption=function(e,t){var n=this._options[e]
if(void 0!==n&&void 0!==n[t])return n[t]
var r=e.split(":")[0]
return(n=this._typeOptions[r])&&void 0!==n[t]?n[t]:null!==this.fallback?this.fallback.getOption(e,t):void 0},t.typeInjection=function(e,t,n){n.split(":")[0];(this._typeInjections[e]||(this._typeInjections[e]=[])).push({property:t,specifier:n})},t.injection=function(e,t,n){var r=this.normalize(n)
if(-1===e.indexOf(":"))return this.typeInjection(e,t,r)
var i=this.normalize(e);(this._injections[i]||(this._injections[i]=[])).push({property:t,specifier:r})},t.knownForType=function(e){for(var t,r,o=(0,n.dictionary)(null),a=Object.keys(this.registrations),s=0;s<a.length;s++){var u=a[s]
u.split(":")[0]===e&&(o[u]=!0)}return null!==this.fallback&&(t=this.fallback.knownForType(e)),null!==this.resolver&&this.resolver.knownForType&&(r=this.resolver.knownForType(e)),(0,i.assign)({},t,o,r)},t.isValidFullName=function(e){return m.test(e)},t.getInjections=function(e){var t=this._injections[e]
if(null!==this.fallback){var n=this.fallback.getInjections(e)
void 0!==n&&(t=void 0===t?n:t.concat(n))}return t},t.getTypeInjections=function(e){var t=this._typeInjections[e]
if(null!==this.fallback){var n=this.fallback.getTypeInjections(e)
void 0!==n&&(t=void 0===t?n:t.concat(n))}return t},t.expandLocalLookup=function(e,t){return null!==this.resolver&&this.resolver.expandLocalLookup?function(e,t,n,r){var i=e._localLookupCache,o=i[t]
o||(o=i[t]=Object.create(null))
var a=r||n,s=o[a]
if(void 0!==s)return s
var u=e.resolver.expandLocalLookup(t,n,r)
return o[a]=u}(this,this.normalize(e),this.normalize(t.source),t.namespace):null!==this.fallback?this.fallback.expandLocalLookup(e,t):null},e}()
e.Registry=g
var y=(0,n.dictionary)(null),b=(""+Math.random()+Date.now()).replace(".","")}),e("@ember/-internals/environment",["exports","@ember/deprecated-features"],function(e,t){"use strict"
function n(e){return e&&e.Object===Object?e:void 0}e.getLookup=function(){return o.lookup},e.setLookup=function(e){o.lookup=e},e.getENV=function(){return a},e.ENV=e.context=e.global=void 0
var r,i=n((r="object"==typeof global&&global)&&void 0===r.nodeType?r:void 0)||n("object"==typeof self&&self)||n("object"==typeof window&&window)||"undefined"!=typeof mainContext&&mainContext||new Function("return this")()
e.global=i
var o=function(e,t){return void 0===t?{imports:e,exports:e,lookup:e}:{imports:t.imports||e,exports:t.exports||e,lookup:t.lookup||e}}(i,i.Ember)
e.context=o
var a={ENABLE_OPTIONAL_FEATURES:!1,EXTEND_PROTOTYPES:{Array:!0,Function:!0,String:!0},LOG_STACKTRACE_ON_DEPRECATION:!0,LOG_VERSION:!0,RAISE_ON_DEPRECATION:!1,STRUCTURED_PROFILE:!1,_APPLICATION_TEMPLATE_WRAPPER:!0,_TEMPLATE_ONLY_GLIMMER_COMPONENTS:!1,_JQUERY_INTEGRATION:!0,_DEFAULT_ASYNC_OBSERVERS:!1,_RERENDER_LOOP_LIMIT:1e3,EMBER_LOAD_HOOKS:{},FEATURES:{}}
e.ENV=a,function(e){if("object"==typeof e&&null!==e){for(var n in e)if(e.hasOwnProperty(n)&&"EXTEND_PROTOTYPES"!==n&&"EMBER_LOAD_HOOKS"!==n){var r=a[n]
!0===r?a[n]=!1!==e[n]:!1===r&&(a[n]=!0===e[n])}var i=e.EXTEND_PROTOTYPES
if(void 0!==i)if("object"==typeof i&&null!==i)a.EXTEND_PROTOTYPES.String=!1!==i.String,t.FUNCTION_PROTOTYPE_EXTENSIONS&&(a.EXTEND_PROTOTYPES.Function=!1!==i.Function),a.EXTEND_PROTOTYPES.Array=!1!==i.Array
else{var o=!1!==i
a.EXTEND_PROTOTYPES.String=o,t.FUNCTION_PROTOTYPE_EXTENSIONS&&(a.EXTEND_PROTOTYPES.Function=o),a.EXTEND_PROTOTYPES.Array=o}var s=e.EMBER_LOAD_HOOKS
if("object"==typeof s&&null!==s)for(var u in s)if(s.hasOwnProperty(u)){var c=s[u]
Array.isArray(c)&&(a.EMBER_LOAD_HOOKS[u]=c.filter(function(e){return"function"==typeof e}))}var l=e.FEATURES
if("object"==typeof l&&null!==l)for(var h in l)l.hasOwnProperty(h)&&(a.FEATURES[h]=!0===l[h])}}(i.EmberENV||i.ENV)}),e("@ember/-internals/error-handling/index",["exports"],function(e){"use strict"
var t
e.getOnerror=function(){return t},e.setOnerror=function(e){t=e},e.getDispatchOverride=function(){return n},e.setDispatchOverride=function(e){n=e},e.onErrorTarget=void 0
var n,r={get onerror(){return t}}
e.onErrorTarget=r}),e("@ember/-internals/extension-support/index",["exports","@ember/-internals/extension-support/lib/data_adapter","@ember/-internals/extension-support/lib/container_debug_adapter"],function(e,t,n){"use strict"
Object.defineProperty(e,"DataAdapter",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"ContainerDebugAdapter",{enumerable:!0,get:function(){return n.default}})}),e("@ember/-internals/extension-support/lib/container_debug_adapter",["exports","@ember/string","@ember/-internals/runtime"],function(e,t,n){"use strict"
e.default=void 0
var r=n.Object.extend({resolver:null,canCatalogEntriesByType:function(e){return"model"!==e&&"template"!==e},catalogEntriesByType:function(e){var r=(0,n.A)(n.Namespace.NAMESPACES),i=(0,n.A)(),o=new RegExp((0,t.classify)(e)+"$")
return r.forEach(function(e){for(var r in e)if(e.hasOwnProperty(r)&&o.test(r)){var a=e[r]
"class"===(0,n.typeOf)(a)&&i.push((0,t.dasherize)(r.replace(o,"")))}}),i}})
e.default=r}),e("@ember/-internals/extension-support/lib/data_adapter",["exports","@ember/-internals/owner","@ember/runloop","@ember/-internals/metal","@ember/string","@ember/-internals/runtime"],function(e,t,n,r,i,o){"use strict"
e.default=void 0
var a=o.Object.extend({init:function(){this._super.apply(this,arguments),this.releaseMethods=(0,o.A)()},containerDebugAdapter:void 0,attributeLimit:3,acceptsModelName:!0,releaseMethods:(0,o.A)(),getFilters:function(){return(0,o.A)()},watchModelTypes:function(e,t){var n=this,r=this.getModelTypes(),i=(0,o.A)()
e(r.map(function(e){var r=e.klass,o=n.wrapModelType(r,e.name)
return i.push(n.observeModelType(e.name,t)),o}))
var a=function(){i.forEach(function(e){return e()}),n.releaseMethods.removeObject(a)}
return this.releaseMethods.pushObject(a),a},_nameToClass:function(e){if("string"==typeof e){var n=(0,t.getOwner)(this).factoryFor("model:"+e)
e=n&&n.class}return e},watchRecords:function(e,t,n,i){var a,s=this,u=(0,o.A)(),c=this._nameToClass(e),l=this.getRecords(c,e)
function h(e){n([e])}var f=l.map(function(e){return u.push(s.observeRecord(e,h)),s.wrapRecord(e)}),d={didChange:function(e,n,o,a){for(var c=n;c<n+a;c++){var l=(0,r.objectAt)(e,c),f=s.wrapRecord(l)
u.push(s.observeRecord(l,h)),t([f])}o&&i(n,o)},willChange:function(){return this}}
return(0,r.addArrayObserver)(l,this,d),a=function(){u.forEach(function(e){return e()}),(0,r.removeArrayObserver)(l,s,d),s.releaseMethods.removeObject(a)},t(f),this.releaseMethods.pushObject(a),a},willDestroy:function(){this._super.apply(this,arguments),this.releaseMethods.forEach(function(e){return e()})},detect:function(){return!1},columnsForType:function(){return(0,o.A)()},observeModelType:function(e,t){var i=this,o=this._nameToClass(e),a=this.getRecords(o,e)
function s(){t([this.wrapModelType(o,e)])}var u={didChange:function(e,t,r,i){(r>0||i>0)&&(0,n.scheduleOnce)("actions",this,s)},willChange:function(){return this}};(0,r.addArrayObserver)(a,this,u)
return function(){return(0,r.removeArrayObserver)(a,i,u)}},wrapModelType:function(e,t){var n=this.getRecords(e,t)
return{name:t,count:(0,r.get)(n,"length"),columns:this.columnsForType(e),object:e}},getModelTypes:function(){var e,t=this,n=this.get("containerDebugAdapter")
return e=n.canCatalogEntriesByType("model")?n.catalogEntriesByType("model"):this._getObjectsOnNamespaces(),e=(0,o.A)(e).map(function(e){return{klass:t._nameToClass(e),name:e}}),e=(0,o.A)(e).filter(function(e){return t.detect(e.klass)}),(0,o.A)(e)},_getObjectsOnNamespaces:function(){var e=this,t=(0,o.A)(o.Namespace.NAMESPACES),n=(0,o.A)()
return t.forEach(function(t){for(var r in t)if(t.hasOwnProperty(r)&&e.detect(t[r])){var o=(0,i.dasherize)(r)
n.push(o)}}),n},getRecords:function(){return(0,o.A)()},wrapRecord:function(e){var t={object:e}
return t.columnValues=this.getRecordColumnValues(e),t.searchKeywords=this.getRecordKeywords(e),t.filterValues=this.getRecordFilterValues(e),t.color=this.getRecordColor(e),t},getRecordColumnValues:function(){return{}},getRecordKeywords:function(){return(0,o.A)()},getRecordFilterValues:function(){return{}},getRecordColor:function(){return null},observeRecord:function(){return function(){}}})
e.default=a}),e("@ember/-internals/glimmer",["exports","node-module","ember-babel","@ember/polyfills","@ember/-internals/owner","@glimmer/opcode-compiler","@ember/-internals/runtime","@ember/-internals/utils","@ember/runloop","@glimmer/reference","@ember/-internals/metal","@ember/debug","@glimmer/runtime","@glimmer/util","@ember/-internals/views","@ember/-internals/browser-environment","@ember/instrumentation","@ember/service","@ember/-internals/environment","@ember/string","@glimmer/wire-format","@ember/-internals/container","rsvp","@glimmer/node","@ember/-internals/routing","@ember/deprecated-features"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_,R,E,C){"use strict"
function k(){const e=F(["component:-default"])
return k=function(){return e},e}function S(){const e=F(["template-compiler:main"])
return S=function(){return e},e}function A(){const e=F(["template-compiler:main"])
return A=function(){return e},e}function T(){const e=F(["template-compiler:main"])
return T=function(){return e},e}function O(){const e=F(["template:components/-default"])
return O=function(){return e},e}function I(){const e=F(["template:-root"])
return I=function(){return e},e}function N(){const e=F(["template:-root"])
return N=function(){return e},e}function D(){const e=F(["component:-default"])
return D=function(){return e},e}function P(){const e=F(["template:components/-default"])
return P=function(){return e},e}function M(){const e=F(["template:components/-default"])
return M=function(){return e},e}function F(e,t){return t||(t=e.slice(0)),e.raw=t,e}var L
function B(e){return new j((0,o.templateFactory)(e))}e.template=B,e.helper=q,e.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML()
if(null==e)return""
if(!e)return String(e)
e=String(e)}if(!it.test(e))return e
return e.replace(ot,at)},e.htmlSafe=st,e.isHTMLSafe=ut,e._resetRenderers=function(){Gt.length=0},e.renderSettled=function(){null===Xt&&(Xt=_.default.defer(),(0,u.getCurrentRunLoop)()||u.backburner.schedule("actions",null,$t))
return Xt.promise},e.getTemplate=function(e){if(en.hasOwnProperty(e))return en[e]},e.setTemplate=function(e,t){return en[e]=t},e.hasTemplate=function(e){return en.hasOwnProperty(e)},e.getTemplates=function(){return en},e.setTemplates=function(e){en=e},e.setupEngineRegistry=function(e){e.register("view:-outlet",Pr),e.register("template:-outlet",Ir),e.injection("view:-outlet","template","template:-outlet"),e.injection("service:-dom-changes","document","service:-document"),e.injection("service:-dom-tree-construction","document","service:-document"),e.register((0,w.privatize)(O()),Tr),e.register("service:-glimmer-environment",ht),e.register((0,w.privatize)(T()),Ar),e.injection((0,w.privatize)(A()),"environment","-environment:main"),e.injection("template","compiler",(0,w.privatize)(S())),e.optionsForType("helper",{instantiate:!1}),e.register("helper:loc",dn),e.register("component:-text-field",Re),e.register("component:-checkbox",we),e.register("component:link-to",Oe),e.register("component:input",fn),e.register("template:components/input",Or),e.register("component:textarea",Ee)
y.ENV._TEMPLATE_ONLY_GLIMMER_COMPONENTS||e.register((0,w.privatize)(k()),be)},e.setupApplicationRegistry=function(e){e.injection("service:-glimmer-environment","appendOperations","service:-dom-tree-construction"),e.injection("renderer","env","service:-glimmer-environment"),e.register("service:-dom-builder",{create:function(e){switch(e.bootOptions._renderMode){case"serialize":return R.serializeBuilder.bind(null)
case"rehydrate":return f.rehydrationBuilder.bind(null)
default:return f.clientBuilder.bind(null)}}}),e.injection("service:-dom-builder","bootOptions","-environment:main"),e.injection("renderer","builder","service:-dom-builder"),e.register((0,w.privatize)(N()),z),e.injection("renderer","rootTemplate",(0,w.privatize)(I())),e.register("renderer:-dom",Zt),e.register("renderer:-inert",Jt),v.hasDOM&&e.injection("service:-glimmer-environment","updateOperations","service:-dom-changes")
e.register("service:-dom-changes",{create:function(e){var t=e.document
return new f.DOMChanges(t)}}),e.register("service:-dom-tree-construction",{create:function(e){var t=e.document,n=v.hasDOM?f.DOMTreeConstruction:R.NodeDOMTreeConstruction
return new n(t)}})},e._registerMacros=function(e){_r.push(e)},e.iterableFor=Me,e.capabilities=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
var n=!0
0
return{asyncLifeCycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:n}},e.setComponentManager=function(e,t){var n
n=C.COMPONENT_MANAGER_STRING_LOOKUP&&"string"==typeof e?function(t){return t.lookup("component-manager:"+e)}:e
return ln({factory:n,internal:!1,type:"component"},t)},e.getComponentManager=function(e){var t=hn(e)
return t&&!t.internal&&"component"===t.type?t.factory:void 0},e.setModifierManager=function(e,t){return ln({factory:e,internal:!1,type:"modifier"},t)},e.getModifierManager=Rr,e.modifierCapabilties=function(e,t){return{}},Object.defineProperty(e,"DOMChanges",{enumerable:!0,get:function(){return f.DOMChanges}}),Object.defineProperty(e,"DOMTreeConstruction",{enumerable:!0,get:function(){return f.DOMTreeConstruction}}),Object.defineProperty(e,"isSerializationFirstNode",{enumerable:!0,get:function(){return f.isSerializationFirstNode}}),Object.defineProperty(e,"NodeDOMTreeConstruction",{enumerable:!0,get:function(){return R.NodeDOMTreeConstruction}}),e.OutletView=e.DebugStack=e.INVOKE=e.UpdatableReference=e.AbstractComponentManager=e._experimentalMacros=e.InteractiveRenderer=e.InertRenderer=e.Renderer=e.SafeString=e.Environment=e.Helper=e.ROOT_REF=e.Component=e.LinkComponent=e.TextArea=e.TextField=e.Checkbox=e.RootTemplate=void 0
var j=function(){function e(e){this.factory=e,this.id=e.id,this.meta=e.meta}return e.prototype.create=function(e){var t=(0,i.getOwner)(e)
return this.factory.create(e.compiler,{owner:t})},e}(),z=B({id:"hjhxUoru",block:'{"symbols":[],"statements":[[1,[28,"component",[[23,0,[]]],null],false]],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/root.hbs"}})
e.RootTemplate=z
var U=(0,s.symbol)("RECOMPUTE_TAG")
var W=a.FrameworkObject.extend({init:function(){this._super.apply(this,arguments),this[U]=c.DirtyableTag.create()},recompute:function(){var e=this;(0,u.join)(function(){return e[U].inner.dirty()})}})
e.Helper=W,W.isHelperFactory=!0,(0,a.setFrameworkClass)(W)
var V=function(){function e(e){this.compute=e,this.isHelperFactory=!0}return e.prototype.create=function(){return{compute:this.compute}},e}()
function q(e){return new V(e)}function H(e){return(0,a.isArray)(e)?0!==e.length:Boolean(e)}var G=(0,s.symbol)("UPDATE"),K=(0,s.symbol)("INVOKE")
e.INVOKE=K
var $=(0,s.symbol)("ACTION"),X=function(){function e(){}return e.prototype.get=function(e){return J.create(this,e)},e}(),Y=function(e){function t(){var t
return(t=e.call(this)||this).lastRevision=null,t.lastValue=null,t}return(0,n.inheritsLoose)(t,e),t.prototype.value=function(){var e=this.tag,t=this.lastRevision,n=this.lastValue
return null!==t&&e.validate(t)||(n=this.lastValue=this.compute(),this.lastRevision=e.value()),n},t}(X),Q=function(e){function t(t){var n
return(n=e.call(this,t)||this).children=Object.create(null),n}return(0,n.inheritsLoose)(t,e),t.create=function(e){return fe(e)},t.prototype.get=function(e){var t=this.children[e]
return void 0===t&&(t=this.children[e]=new Z(this.inner,e)),t},t}(c.ConstReference)
var J=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.inheritsLoose)(t,e),t.create=function(e,t){return(0,c.isConst)(e)?function(e,t){if(ce(e))return new Z(e,t)
if(le(e))return new ae(e[t])
if(he(e))return f.UNDEFINED_REFERENCE
throw(0,d.unreachable)()}(e.value(),t):new ee(e,t)},t.prototype.get=function(e){return new ee(this,e)},t}(Y),Z=function(e){function t(t,n){var r
return(r=e.call(this)||this).parentValue=t,r.propertyKey=n,r.propertyTag=c.UpdatableTag.create((0,l.tagForProperty)(t,n)),r.tag=r.propertyTag,r}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.compute=function(){var e=this.parentValue,t=this.propertyKey
return(0,l.get)(e,t)},r[G]=function(e){(0,l.set)(this.parentValue,this.propertyKey,e)},t}(J),ee=function(e){function t(t,n){var r;(r=e.call(this)||this).parentReference=t,r.propertyKey=n
var i=t.tag,o=r.propertyTag=c.UpdatableTag.create(c.CONSTANT_TAG)
return r.tag=(0,c.combine)([i,o]),r}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.compute=function(){var e=this.parentReference,t=this.propertyTag,n=this.propertyKey,r=e.value(),i=typeof r
if("string"===i&&"length"===n)return r.length
if("object"===i&&null!==r||"function"===i){var o,a=r
return o=(0,l.get)(a,n),t.inner.update((0,l.tagForProperty)(a,n)),o}},r[G]=function(e){(0,l.set)(this.parentReference.value(),this.propertyKey,e)},t}(J),te=function(e){function t(t){var n
return(n=e.call(this)||this).tag=c.DirtyableTag.create(),n._value=t,n}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.value=function(){return this._value},r.update=function(e){e!==this._value&&(this.tag.inner.dirty(),this._value=e)},t}(X)
e.UpdatableReference=te
var ne=function(e){function t(t){var n
return(n=e.call(this,t)||this).objectTag=c.UpdatableTag.create(c.CONSTANT_TAG),n.tag=(0,c.combine)([t.tag,n.objectTag]),n}return(0,n.inheritsLoose)(t,e),t.create=function(e){if((0,c.isConst)(e)){var n=e.value()
if(!(0,s.isProxy)(n))return f.PrimitiveReference.create(H(n))}return new t(e)},t.prototype.toBool=function(e){return(0,s.isProxy)(e)?(this.objectTag.inner.update((0,l.tagForProperty)(e,"isTruthy")),Boolean((0,l.get)(e,"isTruthy"))):(this.objectTag.inner.update((0,l.tagFor)(e)),H(e))},t}(f.ConditionalReference),re=function(e){function t(t,n){var r
return(r=e.call(this)||this).helper=t,r.args=n,r.tag=n.tag,r}return(0,n.inheritsLoose)(t,e),t.create=function(e,n){if((0,c.isConst)(n)){var r=n.positional,i=n.named,o=r.value(),a=i.value()
return fe(e(o,a))}return new t(e,n)},t.prototype.compute=function(){var e=this.helper,t=this.args,n=t.positional,r=t.named,i=n.value(),o=r.value()
return e(i,o)},t}(Y),ie=function(e){function t(t,n){var r
return(r=e.call(this)||this).instance=t,r.args=n,r.tag=(0,c.combine)([t[U],n.tag]),r}return(0,n.inheritsLoose)(t,e),t.create=function(e,n){return new t(e,n)},t.prototype.compute=function(){var e=this.instance,t=this.args,n=t.positional,r=t.named,i=n.value(),o=r.value()
return e.compute(i,o)},t}(Y),oe=function(e){function t(t,n){var r
return(r=e.call(this)||this).helper=t,r.args=n,r.tag=n.tag,r}return(0,n.inheritsLoose)(t,e),t.prototype.compute=function(){return(0,this.helper)(this.args)},t}(Y),ae=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.inheritsLoose)(t,e),t.create=function(e){return fe(e,!1)},t.prototype.get=function(e){return fe(this.inner[e],!1)},t}(c.ConstReference),se=function(e){function t(t){var n
return(n=e.call(this)||this).inner=t,n.tag=t.tag,n}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.compute=function(){return this.inner.value()},r.get=function(e){return this.inner.get(e)},(0,n.createClass)(t,[{key:K,get:function(){return this.inner[K]}}]),t}(Y)
function ue(e,t){for(var n=e,r=0;r<t.length;r++)n=n.get(t[r])
return n}function ce(e){return null!==e&&"object"==typeof e}function le(e){return"function"==typeof e}function he(e){return!0}function fe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]
return ce(e)?t?new Q(e):new ae(e):le(e)?new ae(e):f.PrimitiveReference.create(e)}var de=(0,s.symbol)("DIRTY_TAG"),pe=(0,s.symbol)("ARGS"),ve=(0,s.symbol)("ROOT_REF")
e.ROOT_REF=ve
var me=(0,s.symbol)("IS_DISPATCHING_ATTRS"),ge=(0,s.symbol)("HAS_BLOCK"),ye=(0,s.symbol)("BOUNDS"),be=p.CoreView.extend(p.ChildViewsSupport,p.ViewStateSupport,p.ClassNamesSupport,a.TargetActionSupport,p.ActionSupport,p.ViewMixin,((L={isComponent:!0,init:function(){this._super.apply(this,arguments),this[me]=!1,this[de]=c.DirtyableTag.create(),this[ve]=new Q(this),this[ye]=null},rerender:function(){this[de].inner.dirty(),this._super()}})[l.PROPERTY_DID_CHANGE]=function(e){if(!this[me]){var t=this[pe],n=void 0!==t?t[e]:void 0
void 0!==n&&void 0!==n[G]&&n[G]((0,l.get)(this,e))}},L.getAttr=function(e){return this.get(e)},L.readDOMAttr=function(e){var t=(0,p.getViewElement)(this),n=t,r=n.namespaceURI===f.SVG_NAMESPACE,i=(0,f.normalizeProperty)(n,e),o=i.type,a=i.normalized
return r||"attr"===o?n.getAttribute(a):n[a]},L.didReceiveAttrs=function(){},L.didRender=function(){},L.willRender=function(){},L.didUpdateAttrs=function(){},L.willUpdate=function(){},L.didUpdate=function(){},L))
e.Component=be,be.toString=function(){return"@ember/component"},be.reopenClass({isComponentFactory:!0,positionalParams:[]}),(0,a.setFrameworkClass)(be)
var xe=B({id:"hvtsz7RF",block:'{"symbols":[],"statements":[],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/empty.hbs"}}),we=be.extend({layout:xe,classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","indeterminate","disabled","tabindex","name","autofocus","required","form"],type:"checkbox",disabled:!1,indeterminate:!1,didInsertElement:function(){this._super.apply(this,arguments),this.element.indeterminate=Boolean(this.indeterminate)},change:function(){(0,l.set)(this,"checked",this.element.checked)}})
e.Checkbox=we,we.toString=function(){return"@ember/component/checkbox"}
var _e=v.hasDOM?Object.create(null):null
var Re=be.extend(p.TextSupport,{layout:xe,classNames:["ember-text-field"],tagName:"input",attributeBindings:["accept","autocomplete","autosave","dir","formaction","formenctype","formmethod","formnovalidate","formtarget","height","inputmode","lang","list","type","max","min","multiple","name","pattern","size","step","value","width"],value:"",type:(0,l.computed)({get:function(){return"text"},set:function(e,t){var n="text"
return function(e){if(!v.hasDOM)return Boolean(e)
if(e in _e)return _e[e]
var t=document.createElement("input")
try{t.type=e}catch(n){}return _e[e]=t.type===e}(t)&&(n=t),n}}),size:null,pattern:null,min:null,max:null})
e.TextField=Re,Re.toString=function(){return"@ember/component/text-field"}
var Ee=be.extend(p.TextSupport,{classNames:["ember-text-area"],layout:xe,tagName:"textarea",attributeBindings:["rows","cols","name","selectionEnd","selectionStart","autocomplete","wrap","lang","dir","value"],rows:null,cols:null})
e.TextArea=Ee,Ee.toString=function(){return"@ember/component/text-area"}
var Ce,ke=B({id:"giTNx+op",block:'{"symbols":["&default"],"statements":[[4,"if",[[25,1]],null,{"statements":[[14,1]],"parameters":[]},{"statements":[[1,[23,0,["linkTitle"]],false]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/link-to.hbs"}}),Se=Object.freeze({toString:function(){return"UNDEFINED"}}),Ae=Object.freeze({});(Ce=be.extend({layout:ke,tagName:"a",route:Se,model:Se,models:Se,query:Se,"current-when":null,title:null,rel:null,tabindex:null,target:null,activeClass:"active",loadingClass:"loading",disabledClass:"disabled",replace:!1,attributeBindings:["href","title","rel","tabindex","target"],classNameBindings:["active","loading","disabled","transitioningIn","transitioningOut"],eventName:"click",init:function(){this._super.apply(this,arguments)
var e=this.eventName
this.on(e,this,this._invoke)},_routing:(0,g.inject)("-routing"),_currentRoute:(0,l.alias)("_routing.currentRouteName"),_currentRouterState:(0,l.alias)("_routing.currentState"),_targetRouterState:(0,l.alias)("_routing.targetState"),_route:(0,l.computed)("route","_currentRouterState",function(){var e=this.route
return e===Se?this._currentRoute:e}),_models:(0,l.computed)("model","models",function(){var e=this.model,t=this.models
return e!==Se?[e]:t!==Se?t:[]}),_query:(0,l.computed)("query",function(){var e=this.query
return e===Se?Ae:(0,r.assign)({},e)}),disabled:(0,l.computed)({get:function(e){return!1},set:function(e,t){return this._isDisabled=t,!!t&&this.disabledClass}}),active:(0,l.computed)("activeClass","_active",function(){return!!this._active&&this.activeClass}),_active:(0,l.computed)("_currentRouterState","_route","_models","_query","loading","current-when",function(){var e=this._currentRouterState
return!!e&&this._isActive(e)}),willBeActive:(0,l.computed)("_currentRouterState","_targetRouterState","_route","_models","_query","loading","current-when",function(){var e=this._currentRouterState,t=this._targetRouterState
if(e!==t)return this._isActive(t)}),_isActive:function(e){if(this.loading)return!1
var t=this["current-when"]
if("boolean"==typeof t)return t
var n=Boolean(t)
t=n?t.split(" "):[this._route]
for(var r=this._models,i=this._query,o=this._routing,a=0;a<t.length;a++)if(o.isActiveForRoute(r,i,t[a],e,n))return!0
return!1},transitioningIn:(0,l.computed)("_active","willBeActive",function(){return!0===this.willBeActive&&!this._active&&"ember-transitioning-in"}),transitioningOut:(0,l.computed)("_active","willBeActive",function(){return!(!1!==this.willBeActive||!this._active)&&"ember-transitioning-out"}),_invoke:function(e){if(!(0,p.isSimpleClick)(e))return!0
var t=this.bubbles,n=this.preventDefault,r=this.element.target,i=!r||"_self"===r
if(!1!==n&&i&&e.preventDefault(),!1===t&&e.stopPropagation(),this._isDisabled)return!1
if(this.loading)return!1
if(!i)return!1
var o=this._route,a=this._models,s=this._query,u=this.replace,c={queryParams:s,routeName:o}
return(0,m.flaggedInstrument)("interaction.link-to",c,this._generateTransition(c,o,a,s,u)),!1},_generateTransition:function(e,t,n,r,i){var o=this._routing
return function(){e.transition=o.transitionTo(t,n,r,i)}},href:(0,l.computed)("_currentRouterState","_route","_models","_query","tagName","loading","loadingHref",function(){if("a"===this.tagName){if(this.loading)return this.loadingHref
var e=this._route,t=this._models,n=this._query,r=this._routing
return r.generateURL(e,t,n)}}),loading:(0,l.computed)("_route","_modelsAreLoaded","loadingClass",function(){var e=this._route
if(!this._modelsAreLoaded||null==e)return this.loadingClass}),_modelsAreLoaded:(0,l.computed)("_models",function(){for(var e=this._models,t=0;t<e.length;t++){var n=e[t]
if(null==n)return!1}return!0}),loadingHref:"#",didReceiveAttrs:function(){var e=this.disabledWhen
void 0!==e&&this.set("disabled",e)
var t=this.params
if(t&&0!==t.length){t=t.slice(),this[ge]||this.set("linkTitle",t.shift())
var n=t[t.length-1]
n&&n.isQueryParams?this.set("query",t.pop().values):this.set("query",Se),0===t.length?this.set("route",Se):this.set("route",t.shift()),this.set("model",Se),this.set("models",t)}else;}})).toString=function(){return"@ember/routing/link-component"},Ce.reopenClass({positionalParams:"params"})
var Te,Oe=Ce
e.LinkComponent=Oe
var Ie=Te
e.DebugStack=Ie
var Ne=(0,s.symbol)("EACH_IN"),De=function(){function e(e){this.inner=e,this.tag=e.tag,this[Ne]=!0}var t=e.prototype
return t.value=function(){return this.inner.value()},t.get=function(e){return this.inner.get(e)},e}()
var Pe="be277757-bbbe-4620-9fcb-213ef433cca2"
function Me(e,t){return function(e){return null!==e&&"object"==typeof e&&e[Ne]}(e)?new qe(e,t||"@key"):new He(e,t||"@identity")}var Fe=function(){function e(e,t){this.length=e,this.keyFor=t,this.position=0}var t=e.prototype
return t.isEmpty=function(){return!1},t.memoFor=function(e){return e},t.next=function(){var e=this.length,t=this.keyFor,n=this.position
if(n>=e)return null
var r=this.valueFor(n),i=this.memoFor(n),o=t(r,i,n)
return this.position++,{key:o,value:r,memo:i}},e}(),Le=function(e){function t(t,n,r){var i
return(i=e.call(this,n,r)||this).array=t,i}return(0,n.inheritsLoose)(t,e),t.from=function(e,t){var n=e.length
return 0===n?Ve:new this(e,n,t)},t.fromForEachable=function(e,t){var n=[]
return e.forEach(function(e){return n.push(e)}),this.from(n,t)},t.prototype.valueFor=function(e){return this.array[e]},t}(Fe),Be=function(e){function t(t,n,r){var i
return(i=e.call(this,n,r)||this).array=t,i}return(0,n.inheritsLoose)(t,e),t.from=function(e,t){var n=e.length
return 0===n?Ve:new this(e,n,t)},t.prototype.valueFor=function(e){return(0,l.objectAt)(this.array,e)},t}(Fe),je=function(e){function t(t,n,r,i){var o
return(o=e.call(this,r,i)||this).keys=t,o.values=n,o}(0,n.inheritsLoose)(t,e),t.fromIndexable=function(e,t){var n=Object.keys(e),r=n.length
if(0===r)return Ve
for(var i=[],o=0;o<r;o++)i.push((0,l.get)(e,n[o]))
return new this(n,i,r,t)},t.fromForEachable=function(e,t){var n=arguments,r=[],i=[],o=0,a=!1
return e.forEach(function(e,t){(a=a||n.length>=2)&&r.push(t),i.push(e),o++}),0===o?Ve:a?new this(r,i,o,t):new Le(i,o,t)}
var r=t.prototype
return r.valueFor=function(e){return this.values[e]},r.memoFor=function(e){return this.keys[e]},t}(Fe),ze=function(){function e(e,t,n){this.iterable=e,this.result=t,this.keyFor=n,this.position=0}e.from=function(e,t){var n=e[Symbol.iterator](),r=n.next(),i=r.value
return r.done?Ve:Array.isArray(i)&&2===i.length?new this(n,r,t):new Ue(n,r,t)}
var t=e.prototype
return t.isEmpty=function(){return!1},t.next=function(){var e=this.iterable,t=this.result,n=this.position,r=this.keyFor
if(t.done)return null
var i=this.valueFor(t,n),o=this.memoFor(t,n),a=r(i,o,n)
return this.position++,this.result=e.next(),{key:a,value:i,memo:o}},e}(),Ue=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.valueFor=function(e){return e.value},r.memoFor=function(e,t){return t},t}(ze),We=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.valueFor=function(e){return e.value[1]},r.memoFor=function(e){return e.value[0]},t}(ze),Ve={isEmpty:function(){return!0},next:function(){return null}},qe=function(){function e(e,t){this.ref=e,this.keyPath=t,this.valueTag=c.UpdatableTag.create(c.CONSTANT_TAG),this.tag=(0,c.combine)([e.tag,this.valueTag])}var t=e.prototype
return t.iterate=function(){var e,t=this.ref,n=this.valueTag,r=t.value(),i=(0,l.tagFor)(r)
return(0,s.isProxy)(r)&&(r=(0,a._contentFor)(r)),n.inner.update(i),null===(e=r)||"object"!=typeof e&&"function"!=typeof e?Ve:Array.isArray(r)||(0,s.isEmberArray)(r)?je.fromIndexable(r,this.keyFor(!0)):s.HAS_NATIVE_SYMBOL&&Ke(r)?We.from(r,this.keyFor()):Ge(r)?je.fromForEachable(r,this.keyFor()):je.fromIndexable(r,this.keyFor(!0))},t.valueReferenceFor=function(e){return new te(e.value)},t.updateValueReference=function(e,t){e.update(t.value)},t.memoReferenceFor=function(e){return new te(e.memo)},t.updateMemoReference=function(e,t){e.update(t.memo)},t.keyFor=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.keyPath
switch(t){case"@key":return e?Xe:Ze(Ye)
case"@index":return $e
case"@identity":return Ze(Qe)
default:return Ze(Je(t))}},e}(),He=function(){function e(e,t){this.ref=e,this.keyPath=t,this.valueTag=c.UpdatableTag.create(c.CONSTANT_TAG),this.tag=(0,c.combine)([e.tag,this.valueTag])}var t=e.prototype
return t.iterate=function(){var e=this.ref,t=this.valueTag,n=e.value()
if(t.inner.update((0,l.tagForProperty)(n,"[]")),null===n||"object"!=typeof n)return Ve
var r=this.keyFor()
return Array.isArray(n)?Le.from(n,r):(0,s.isEmberArray)(n)?Be.from(n,r):s.HAS_NATIVE_SYMBOL&&Ke(n)?Ue.from(n,r):Ge(n)?Le.fromForEachable(n,r):Ve},t.valueReferenceFor=function(e){return new te(e.value)},t.updateValueReference=function(e,t){e.update(t.value)},t.memoReferenceFor=function(e){return new te(e.memo)},t.updateMemoReference=function(e,t){e.update(t.memo)},t.keyFor=function(){var e=this.keyPath
switch(e){case"@index":return $e
case"@identity":return Ze(Qe)
default:return Ze(Je(e))}},e}()
function Ge(e){return"function"==typeof e.forEach}function Ke(e){return"function"==typeof e[Symbol.iterator]}function $e(e,t,n){return String(n)}function Xe(e,t){return t}function Ye(e,t){return Qe(t)}function Qe(e){switch(typeof e){case"string":return e
case"number":return String(e)
default:return(0,s.guidFor)(e)}}function Je(e){return function(t){return String((0,l.get)(t,e))}}function Ze(e){var t={}
return function(n,r,i){var o=e(n,r,i),a=t[o]
return void 0===a?(t[o]=0,o):(t[o]=++a,""+o+Pe+a)}}var et=function(){function e(e){this.string=e}var t=e.prototype
return t.toString=function(){return""+this.string},t.toHTML=function(){return this.toString()},e}()
e.SafeString=et
var tt,nt,rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},it=/[&<>"'`=]/,ot=/[&<>"'`=]/g
function at(e){return rt[e]}function st(e){return null==e?e="":"string"!=typeof e&&(e=String(e)),new et(e)}function ut(e){return null!==e&&"object"==typeof e&&"function"==typeof e.toHTML}function ct(e){return nt||(nt=document.createElement("a")),nt.href=e,nt.protocol}function lt(e){var t=null
return"string"==typeof e&&(t=tt.parse(e).protocol),null===t?":":t}var ht=function(e){function r(r){var o
return(o=e.call(this,r)||this).inTransaction=!1,o.owner=r[i.OWNER],o.isInteractive=o.owner.lookup("-environment:main").isInteractive,o.destroyedComponents=[],function(e){var n
if(v.hasDOM&&(n=ct.call(e,"foobar:baz")),"foobar:"===n)e.protocolForURL=ct
else if("object"==typeof URL)tt=URL,e.protocolForURL=lt
else{if("function"!=typeof t.require)throw new Error("Could not find valid URL parsing mechanism for URL Sanitization")
tt=(0,t.require)("url"),e.protocolForURL=lt}}((0,n.assertThisInitialized)(o)),o}(0,n.inheritsLoose)(r,e),r.create=function(e){return new this(e)}
var o=r.prototype
return o.protocolForURL=function(e){return e},o.lookupComponent=function(e,t){return(0,p.lookupComponent)(t.owner,e,t)},o.toConditionalReference=function(e){return ne.create(e)},o.iterableFor=function(e,t){return Me(e,t)},o.scheduleInstallModifier=function(t,n){this.isInteractive&&e.prototype.scheduleInstallModifier.call(this,t,n)},o.scheduleUpdateModifier=function(t,n){this.isInteractive&&e.prototype.scheduleUpdateModifier.call(this,t,n)},o.didDestroy=function(e){e.destroy()},o.begin=function(){this.inTransaction=!0,e.prototype.begin.call(this)},o.commit=function(){var t=this.destroyedComponents
this.destroyedComponents=[]
for(var n=0;n<t.length;n++)t[n].destroy()
try{e.prototype.commit.call(this)}finally{this.inTransaction=!1}},r}(f.Environment)
e.Environment=ht
var ft=function(){function e(){this.debugStack=void 0}var t=e.prototype
return t.prepareArgs=function(e,t){return null},t.didCreateElement=function(e,t,n){},t.didRenderLayout=function(e,t){},t.didCreate=function(e){},t.update=function(e,t){},t.didUpdateLayout=function(e,t){},t.didUpdate=function(e){},e}()
function dt(e){return{object:e.name+":"+e.outlet}}e.AbstractComponentManager=ft
var pt={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,createCaller:!0,dynamicScope:!0,updateHook:!1,createInstance:!0},vt=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.create=function(e,t,n,r){r.outletState=t.ref
var i=t.controller
return{self:void 0===i?f.UNDEFINED_REFERENCE:new Q(i),finalize:(0,m._instrumentStart)("render.outlet",dt,t)}},r.getLayout=function(e,t){var n=e.template.asLayout()
return{handle:n.compile(),symbolTable:n.symbolTable}},r.getCapabilities=function(){return pt},r.getSelf=function(e){return e.self},r.getTag=function(){return c.CONSTANT_TAG},r.didRenderLayout=function(e){e.finalize()},r.getDestructor=function(){return null},t}(ft),mt=new vt,gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt
this.state=e,this.manager=t}
function yt(){}var bt=function(){function e(e,t,n,r,i){this.environment=e,this.component=t,this.args=n,this.finalizer=r,this.hasWrappedElement=i,this.classRef=null,this.classRef=null,this.argsRevision=null===n?0:n.tag.value()}var t=e.prototype
return t.destroy=function(){var e=this.component,t=this.environment
if(t.isInteractive){e.trigger("willDestroyElement"),e.trigger("willClearRender")
var n=(0,p.getViewElement)(e)
n&&((0,p.clearElementView)(n),(0,p.clearViewElement)(e))}t.destroyedComponents.push(e)},t.finalize=function(){(0,this.finalizer)(),this.finalizer=yt},e}()
function xt(e,t){return e[ve].get(t)}function wt(e,t){return"attrs"===t[0]&&(t.shift(),1===t.length)?xt(e,t[0]):ue(e[ve],t)}function _t(e){if(null!==e){var t=e[0],n=e[1],r=null===t?-1:t.indexOf("class")
if(-1!==r){var i=n[r]
if(!Array.isArray(i))return
var o=i[0]
if(o===x.Ops.Get||o===x.Ops.MaybeLocal){var a=i[i.length-1],s=a[a.length-1]
n[r]=[x.Ops.Helper,"-class",[i,s],null]}}}}var Rt={parse:function(e){var t=e.indexOf(":")
if(-1===t)return[e,e,!0]
var n=e.substring(0,t),r=e.substring(t+1)
return[n,r,!1]},install:function(e,t,n,r){var i=n[0],o=n[1]
n[2]
if("id"===o){var a=(0,l.get)(t,i)
return null==a&&(a=t.elementId),a=f.PrimitiveReference.create(a),void r.setAttribute("id",a,!0,null)}var s=i.indexOf(".")>-1,u=s?wt(t,i.split(".")):xt(t,i)
"style"===o&&(u=new Ct(u,xt(t,"isVisible"))),r.setAttribute(o,u,!1,null)}},Et=st("display: none;"),Ct=function(e){function t(t,n){var r
return(r=e.call(this)||this).inner=t,r.isVisible=n,r.tag=(0,c.combine)([t.tag,n.tag]),r}return(0,n.inheritsLoose)(t,e),t.prototype.compute=function(){var e=this.inner.value()
if(!1!==this.isVisible.value())return e
if(e){var t=e+" display: none;"
return ut(e)?st(t):t}return Et},t}(c.CachedReference),kt={install:function(e,t,n){n.setAttribute("style",(0,c.map)(xt(t,"isVisible"),this.mapStyleValue),!1,null)},mapStyleValue:function(e){return!1===e?Et:null}},St=function(e,t,n,r){var i=n.split(":"),o=i[0],a=i[1],s=i[2]
if(""===o)r.setAttribute("class",f.PrimitiveReference.create(a),!0,null)
else{var u,c=o.indexOf(".")>-1,l=c?o.split("."):[],h=c?wt(t,l):xt(t,o)
u=void 0===a?new At(h,c?l[l.length-1]:o):new Tt(h,a,s),r.setAttribute("class",u,!1,null)}},At=function(e){function t(t,n){var r
return(r=e.call(this)||this).inner=t,r.path=n,r.tag=t.tag,r.inner=t,r.path=n,r.dasherizedPath=null,r}return(0,n.inheritsLoose)(t,e),t.prototype.compute=function(){var e=this.inner.value()
if(!0===e){var t=this.path
return this.dasherizedPath||(this.dasherizedPath=(0,b.dasherize)(t))}return e||0===e?String(e):null},t}(c.CachedReference),Tt=function(e){function t(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null
return(n=e.call(this)||this).inner=t,n.truthy=r,n.falsy=i,n.tag=t.tag,n}return(0,n.inheritsLoose)(t,e),t.prototype.compute=function(){var e=this.inner,t=this.truthy,n=this.falsy
return e.value()?t:n},t}(c.CachedReference)
function Ot(e){var t=e.names,n=e.value(),r=Object.create(null),i=Object.create(null)
r[pe]=i
for(var o=0;o<t.length;o++){var a=t[o],s=e.get(a),u=n[a]
"function"==typeof u&&u[$]?n[a]=u:s[G]&&(n[a]=new Nt(s,u)),i[a]=s,r[a]=u}return r.attrs=n,r}var It=(0,s.symbol)("REF"),Nt=function(){function e(e,t){this[p.MUTABLE_CELL]=!0,this[It]=e,this.value=t}return e.prototype.update=function(e){this[It][G](e)},e}()
var Dt=(0,w.privatize)(M()),Pt=[];(0,h.debugFreeze)(Pt)
var Mt=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var o=t.prototype
return o.getLayout=function(e,t){return{handle:e.handle,symbolTable:e.symbolTable}},o.templateFor=function(e,t){var n=e.layout,r=e.layoutName,o=(0,i.getOwner)(e)
if(void 0!==n)return"function"==typeof n.create?t.createTemplate(n,(0,i.getOwner)(e)):n
if(r){var a=o.lookup("template:"+r)
if(a)return a}return o.lookup(Dt)},o.getDynamicLayout=function(e,t){var n=e.component,r=this.templateFor(n,t).asWrappedLayout()
return{handle:r.compile(),symbolTable:r.symbolTable}},o.getTagName=function(e){var t=e.component
return e.hasWrappedElement?t&&t.tagName||"div":null},o.getCapabilities=function(e){return e.capabilities},o.prepareArgs=function(e,t){if(t.named.has("__ARGS__")){var n=t.named.get("__ARGS__").value(),i={positional:Pt,named:(0,r.assign)({},t.named.capture().map,n)}
return i}var o,a=e.ComponentClass.class.positionalParams
if(null==a||0===t.positional.length)return null
if("string"==typeof a){var s;(s={})[a]=t.positional.capture(),o=s,(0,r.assign)(o,t.named.capture().map)}else{if(!(Array.isArray(a)&&a.length>0))return null
var u=Math.min(a.length,t.positional.length)
o={},(0,r.assign)(o,t.named.capture().map)
for(var c=0;c<u;c++){var l=a[c]
o[l]=t.positional.at(c)}}return{positional:d.EMPTY_ARRAY,named:o}},o.create=function(e,t,n,r,i,o){var a=r.view,s=t.ComponentClass,u=n.named.capture(),c=Ot(u);(function(e,t){e.named.has("id")&&(t.elementId=t.id)})(n,c),c.parentView=a,c[ge]=o,c._target=i.value(),t.template&&(c.layout=t.template)
var l=s.create(c),h=(0,m._instrumentStart)("render.component",Ft,l)
r.view=l,null!=a&&(0,p.addChildView)(a,l),l.trigger("didReceiveAttrs")
var f=""!==l.tagName
f||(e.isInteractive&&l.trigger("willRender"),l._transitionTo("hasElement"),e.isInteractive&&l.trigger("willInsertElement"))
var d=new bt(e,l,u,h,f)
return n.named.has("class")&&(d.classRef=n.named.get("class")),e.isInteractive&&f&&l.trigger("willRender"),d},o.getSelf=function(e){return e.component[ve]},o.didCreateElement=function(e,t,n){var r=e.component,i=e.classRef,o=e.environment;(0,p.setViewElement)(r,t),(0,p.setElementView)(t,r)
var a=r.attributeBindings,u=r.classNames,c=r.classNameBindings
if(a&&a.length)(function(e,t,n,r){for(var i=[],o=t.length-1;-1!==o;){var a=t[o],u=Rt.parse(a),c=u[1];-1===i.indexOf(c)&&(i.push(c),Rt.install(e,n,u,r)),o--}if(-1===i.indexOf("id")){var l=n.elementId?n.elementId:(0,s.guidFor)(n)
r.setAttribute("id",f.PrimitiveReference.create(l),!1,null)}-1===i.indexOf("style")&&kt.install(e,n,r)})(t,a,r,n)
else{var l=r.elementId?r.elementId:(0,s.guidFor)(r)
n.setAttribute("id",f.PrimitiveReference.create(l),!1,null),kt.install(t,r,n)}if(i){var h=new At(i,i.propertyKey)
n.setAttribute("class",h,!1,null)}u&&u.length&&u.forEach(function(e){n.setAttribute("class",f.PrimitiveReference.create(e),!1,null)}),c&&c.length&&c.forEach(function(e){St(t,r,e,n)}),n.setAttribute("class",f.PrimitiveReference.create("ember-view"),!1,null),"ariaRole"in r&&n.setAttribute("role",xt(r,"ariaRole"),!1,null),r._transitionTo("hasElement"),o.isInteractive&&r.trigger("willInsertElement")},o.didRenderLayout=function(e,t){e.component[ye]=t,e.finalize()},o.getTag=function(e){var t=e.args,n=e.component
return t?(0,c.combine)([t.tag,n[de]]):n[de]},o.didCreate=function(e){var t=e.component
e.environment.isInteractive&&(t._transitionTo("inDOM"),t.trigger("didInsertElement"),t.trigger("didRender"))},o.update=function(e){var t=e.component,n=e.args,r=e.argsRevision,i=e.environment
if(e.finalizer=(0,m._instrumentStart)("render.component",Lt,t),n&&!n.tag.validate(r)){var o=Ot(n)
e.argsRevision=n.tag.value(),t[me]=!0,t.setProperties(o),t[me]=!1,t.trigger("didUpdateAttrs"),t.trigger("didReceiveAttrs")}i.isInteractive&&(t.trigger("willUpdate"),t.trigger("willRender"))},o.didUpdateLayout=function(e){e.finalize()},o.didUpdate=function(e){var t=e.component
e.environment.isInteractive&&(t.trigger("didUpdate"),t.trigger("didRender"))},o.getDestructor=function(e){return e},t}(ft)
function Ft(e){return e.instrumentDetails({initialRender:!0})}function Lt(e){return e.instrumentDetails({initialRender:!1})}var Bt={dynamicLayout:!0,dynamicTag:!0,prepareArgs:!0,createArgs:!0,attributeHook:!0,elementHook:!0,createCaller:!0,dynamicScope:!0,updateHook:!0,createInstance:!0},jt=new Mt,zt=function(e,t,n,r,i){this.name=e,this.ComponentClass=t,this.handle=n,this.manager=jt
var o=r&&r.asLayout(),a=o?o.symbolTable:void 0
this.symbolTable=a,this.template=r,this.args=i,this.state={name:e,ComponentClass:t,handle:n,template:r,capabilities:Bt,symbolTable:a}},Ut=function(e){function t(t){var n
return(n=e.call(this)||this).component=t,n}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.getLayout=function(e,t){var n=this.templateFor(this.component,t).asWrappedLayout()
return{handle:n.compile(),symbolTable:n.symbolTable}},r.create=function(e,t,n,r){var i=this.component
var o=(0,m._instrumentStart)("render.component",Ft,i)
r.view=i
var a=""!==i.tagName
return a||(e.isInteractive&&i.trigger("willRender"),i._transitionTo("hasElement"),e.isInteractive&&i.trigger("willInsertElement")),new bt(e,i,null,o,a)},t}(Mt),Wt={dynamicLayout:!1,dynamicTag:!0,prepareArgs:!1,createArgs:!1,attributeHook:!0,elementHook:!0,createCaller:!0,dynamicScope:!0,updateHook:!0,createInstance:!0},Vt=function(){function e(e){this.component=e
var t=new Ut(e)
this.manager=t
var n=w.FACTORY_FOR.get(e)
this.state={name:n.fullName.slice(10),capabilities:Wt,ComponentClass:n,handle:null}}return e.prototype.getTag=function(e){return e.component[de]},e}(),qt=function(){function e(e,t){this.view=e,this.outletState=t}var t=e.prototype
return t.child=function(){return new e(this.view,this.outletState)},t.get=function(e){return this.outletState},t.set=function(e,t){return this.outletState=t,t},e}(),Ht=function(){function e(e,t,n,r,i,o,a){var s=this
this.id=(0,p.getViewId)(e),this.env=t,this.root=e,this.result=void 0,this.shouldReflush=!1,this.destroyed=!1
var u=this.options={alwaysRevalidate:!1}
this.render=function(){var e,c=n.asLayout(),l=c.compile(),h=(0,f.renderMain)(c.compiler.program,t,r,o,a(t,{element:i,nextSibling:null}),l)
do{e=h.next()}while(!e.done)
var d=s.result=e.value
s.render=function(){return d.rerender(u)}}}var t=e.prototype
return t.isFor=function(e){return this.root===e},t.destroy=function(){var e=this.result,t=this.env
if(this.destroyed=!0,this.env=void 0,this.root=null,this.result=void 0,this.render=void 0,e){var n=!t.inTransaction
n&&t.begin()
try{e.destroy()}finally{n&&t.commit()}}},e}(),Gt=[]
function Kt(e){var t=Gt.indexOf(e)
Gt.splice(t,1)}function $t(){}var Xt=null
var Yt=0
u.backburner.on("begin",function(){for(var e=0;e<Gt.length;e++)Gt[e]._scheduleRevalidate()}),u.backburner.on("end",function(){for(var e=0;e<Gt.length;e++)if(!Gt[e]._isValid()){if(Yt>y.ENV._RERENDER_LOOP_LIMIT)throw Yt=0,Gt[e].destroy(),new Error("infinite rendering invalidation detected")
return Yt++,u.backburner.join(null,$t)}Yt=0,function(){if(null!==Xt){var e=Xt.resolve
Xt=null,u.backburner.join(null,e)}}()})
var Qt=function(){function e(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.clientBuilder
this._env=e,this._rootTemplate=t,this._viewRegistry=n,this._destinedForDOM=r,this._destroyed=!1,this._roots=[],this._lastRevision=-1,this._isRenderingRoots=!1,this._removedRoots=[],this._builder=i}var t=e.prototype
return t.appendOutletView=function(e,t){var i=function(e){if(y.ENV._APPLICATION_TEMPLATE_WRAPPER){var t=(0,r.assign)({},pt,{dynamicTag:!0,elementHook:!0}),i=new(function(e){function r(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(r,e)
var i=r.prototype
return i.getTagName=function(e){return"div"},i.getLayout=function(e){var t=e.template.asWrappedLayout()
return{handle:t.compile(),symbolTable:t.symbolTable}},i.getCapabilities=function(){return t},i.didCreateElement=function(e,t,n){t.setAttribute("class","ember-view"),t.setAttribute("id",(0,s.guidFor)(e))},r}(vt))
return new gt(e.state,i)}return new gt(e.state)}(e)
this._appendDefinition(e,(0,f.curry)(i),t)},t.appendTo=function(e,t){var n=new Vt(e)
this._appendDefinition(e,(0,f.curry)(n),t)},t._appendDefinition=function(e,t,n){var r=new ae(t),i=new qt(null,f.UNDEFINED_REFERENCE),o=new Ht(e,this._env,this._rootTemplate,r,n,i,this._builder)
this._renderRoot(o)},t.rerender=function(){this._scheduleRevalidate()},t.register=function(e){var t=(0,p.getViewId)(e)
this._viewRegistry[t]=e},t.unregister=function(e){delete this._viewRegistry[(0,p.getViewId)(e)]},t.remove=function(e){e._transitionTo("destroying"),this.cleanupRootFor(e),this._destinedForDOM&&e.trigger("didDestroyElement")},t.cleanupRootFor=function(e){if(!this._destroyed)for(var t=this._roots,n=this._roots.length;n--;){var r=t[n]
r.isFor(e)&&(r.destroy(),t.splice(n,1))}},t.destroy=function(){this._destroyed||(this._destroyed=!0,this._clearAllRoots())},t.getBounds=function(e){var t=e[ye]
return{parentElement:t.parentElement(),firstNode:t.firstNode(),lastNode:t.lastNode()}},t.createElement=function(e){return this._env.getAppendOperations().createElement(e)},t._renderRoot=function(e){var t,n=this._roots
n.push(e),1===n.length&&(t=this,Gt.push(t)),this._renderRootsTransaction()},t._renderRoots=function(){var e,t=this._roots,n=this._env,r=this._removedRoots,i=!1
do{n.begin()
try{e=t.length,i=!1
for(var o=0;o<t.length;o++){var a=t[o]
if(a.destroyed)r.push(a)
else{var s=a.shouldReflush
o>=e&&!s||(a.options.alwaysRevalidate=s,s=a.shouldReflush=(0,l.runInTransaction)(a,"render"),i=i||s)}}this._lastRevision=c.CURRENT_TAG.value()}finally{n.commit()}}while(i||t.length>e)
for(;r.length;){var u=r.pop(),h=t.indexOf(u)
t.splice(h,1)}0===this._roots.length&&Kt(this)},t._renderRootsTransaction=function(){if(!this._isRenderingRoots){this._isRenderingRoots=!0
var e=!1
try{this._renderRoots(),e=!0}finally{e||(this._lastRevision=c.CURRENT_TAG.value(),!0===this._env.inTransaction&&this._env.commit()),this._isRenderingRoots=!1}}},t._clearAllRoots=function(){for(var e=this._roots,t=0;t<e.length;t++){e[t].destroy()}this._removedRoots.length=0,this._roots=[],e.length&&Kt(this)},t._scheduleRevalidate=function(){u.backburner.scheduleOnce("render",this,this._revalidate)},t._isValid=function(){return this._destroyed||0===this._roots.length||c.CURRENT_TAG.validate(this._lastRevision)},t._revalidate=function(){this._isValid()||this._renderRootsTransaction()},e}()
e.Renderer=Qt
var Jt=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.inheritsLoose)(t,e),t.create=function(e){return new this(e.env,e.rootTemplate,e._viewRegistry,!1,e.builder)},t.prototype.getElement=function(e){throw new Error("Accessing `this.element` is not allowed in non-interactive environments (such as FastBoot).")},t}(Qt)
e.InertRenderer=Jt
var Zt=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.inheritsLoose)(t,e),t.create=function(e){return new this(e.env,e.rootTemplate,e._viewRegistry,!0,e.builder)},t.prototype.getElement=function(e){return(0,p.getViewElement)(e)},t}(Qt)
e.InteractiveRenderer=Zt
var en={}
var tn=function(e,t,n){this.manager=e,this.state={ComponentClass:t,layout:n}},nn=function(e){function t(t){var n
return(n=e.call(this)||this).owner=t,n}return(0,n.inheritsLoose)(t,e),t.prototype.getLayout=function(e){var t=e.layout.asLayout()
return{handle:t.compile(),symbolTable:t.symbolTable}},t}(ft),rn={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!0,createArgs:!0,attributeHook:!1,elementHook:!1,createCaller:!0,dynamicScope:!1,updateHook:!0,createInstance:!0},on=[];(0,h.debugFreeze)(on)
var an,sn=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.getCapabilities=function(){return rn},r.prepareArgs=function(e,t){var n=t.named.capture().map
return{positional:on,named:{__ARGS__:new Q(n),type:t.named.get("type")}}},r.create=function(e,t,n,r,i){var o=t.ComponentClass,a=n.named.get("type"),s=o.create({caller:i.value(),type:a.value()})
return{type:a,instance:s}},r.getSelf=function(e){var t=e.instance
return new Q(t)},r.getTag=function(){return c.CONSTANT_TAG},r.update=function(e){var t=e.type,n=e.instance;(0,l.set)(n,"type",t.value())},r.getDestructor=function(e){return e.instance},t}(nn),un=new WeakMap,cn=Object.getPrototypeOf
function ln(e,t){return un.set(t,e),t}function hn(e){for(var t=e;null!=t;){if(un.has(t))return un.get(t)
t=cn(t)}return null}ln({factory:function(e){return new sn(e)},internal:!0,type:"component"},an=a.Object.extend({isCheckbox:(0,l.computed)("type",function(){return"checkbox"===this.type})})),an.toString=function(){return"@ember/component/input"}
var fn=an,dn=q(function(e){return b.loc.apply(null,e)}),pn=function(){function e(e){this.resolver=e}var t=e.prototype
return t.getCapabilities=function(e){var t=this.resolver.resolve(e),n=t.manager,r=t.state
return n.getCapabilities(r)},t.getLayout=function(e){var t=this.resolver.resolve(e),n=t.manager,r=t.state
if(n.getCapabilities(r).dynamicLayout)return null
var i=n.getLayout(r,this.resolver)
return{compile:function(){return i.handle},symbolTable:i.symbolTable}},t.lookupHelper=function(e,t){return this.resolver.lookupHelper(e,t)},t.lookupModifier=function(e,t){return this.resolver.lookupModifier(e,t)},t.lookupComponentDefinition=function(e,t){return this.resolver.lookupComponentHandle(e,t)},t.lookupPartial=function(e,t){return this.resolver.lookupPartial(e,t)},e}(),vn={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,createCaller:!1,dynamicScope:!0,updateHook:!0,createInstance:!0}
function mn(e){return e.capabilities.asyncLifeCycleCallbacks}function gn(e){return e.capabilities.destructor}var yn=new(function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var i=t.prototype
return i.create=function(e,t,n){var r,i=t.delegate,o=n.capture(),a={}
r=o.value()
var s=i.createComponent(t.ComponentClass.class,r)
return new bn(i,s,o,a)},i.update=function(e){var t,n=e.delegate,r=e.component,i=e.args
e.namedArgsProxy
t=i.value(),n.updateComponent(r,t)},i.didCreate=function(e){var t=e.delegate,n=e.component
mn(t)&&t.didCreateComponent(n)},i.didUpdate=function(e){var t=e.delegate,n=e.component
mn(t)&&t.didUpdateComponent(n)},i.getContext=function(e){var t=e.delegate,n=e.component
t.getContext(n)},i.getSelf=function(e){var t=e.delegate,n=e.component
return Q.create(t.getContext(n))},i.getDestructor=function(e){return gn(e.delegate)?e:null},i.getCapabilities=function(e){var t=e.delegate
return(0,r.assign)({},vn,{updateHook:t.capabilities.updateHook})},i.getTag=function(e){return e.args.tag},i.didRenderLayout=function(){},i.getLayout=function(e){return{handle:e.template.asLayout().compile(),symbolTable:e.symbolTable}},t}(ft)),bn=function(){function e(e,t,n,r){this.delegate=e,this.component=t,this.args=n,this.namedArgsProxy=r}return e.prototype.destroy=function(){var e=this.delegate,t=this.component
gn(e)&&e.destroyComponent(t)},e}(),xn=function(e,t,n,r){this.name=e,this.ComponentClass=t,this.delegate=n,this.template=r,this.manager=yn
var i=r.asLayout().symbolTable
this.symbolTable=i,this.state={name:e,ComponentClass:t,template:r,symbolTable:i,delegate:n}},wn={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,createCaller:!1,dynamicScope:!1,updateHook:!1,createInstance:!0},_n=new(function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.getLayout=function(e){var t=e.asLayout()
return{handle:t.compile(),symbolTable:t.symbolTable}},r.getCapabilities=function(){return wn},r.create=function(){return null},r.getSelf=function(){return f.NULL_REFERENCE},r.getTag=function(){return c.CONSTANT_TAG},r.getDestructor=function(){return null},t}(ft)),Rn=function(e){this.state=e,this.manager=_n},En=function(e,t){return t.positional.at(0)}
function Cn(e){var t=e.positional,n=t.at(0),r=t.length,i=n.value()
return!0===i?r>1?(0,b.dasherize)(t.at(1).value()):null:!1===i?r>2?(0,b.dasherize)(t.at(2).value()):null:i}function kn(e){return"checkbox"===e.positional.at(0).value()?"-checkbox":"-text-field"}function Sn(e){var t=e.positional,n=t.at(0).value().split("."),r=n[n.length-1],i=t.at(1).value()
return!0===i?(0,b.dasherize)(r):i||0===i?String(i):""}function An(e){return e}function Tn(e,t,n,r,i){var o,a
if("function"==typeof n[K])o=n,a=n[K]
else{var s=typeof n
"string"===s?(o=t,a=t.actions&&t.actions[n]):"function"===s&&(o=e,a=n)}return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var i={target:o,args:t,label:"@glimmer/closure-action"}
return(0,m.flaggedInstrument)("interaction.ember-action",i,function(){return u.join.apply(void 0,[o,a].concat(r(t)))})}}var On=function(e){return function(e){return null==e||"function"!=typeof e.toString}(e)?"":String(e)}
function In(e){return e.positional.value().map(On).join("")}function Nn(e){var t=null
return t}var Dn=Nn()
function Pn(e){var t=e.positional,n=t.at(0)
return function(){for(var e=t.value(),r=e[0],i=e.slice(1),o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s]
return"function"==typeof n[K]?n[K].apply(n,i.concat(a)):r.call.apply(r,[Dn].concat(i,a))}}function Mn(e,t){return null==t||""===t?f.NULL_REFERENCE:"string"==typeof t&&t.indexOf(".")>-1?ue(e,t.split(".")):e.get(t)}var Fn=function(e){function t(t,n){var r;(r=e.call(this)||this).sourceReference=t,r.pathReference=n,r.lastPath=null,r.innerReference=f.NULL_REFERENCE
var i=r.innerTag=c.UpdatableTag.create(c.CONSTANT_TAG)
return r.tag=(0,c.combine)([t.tag,n.tag,i]),r}(0,n.inheritsLoose)(t,e),t.create=function(e,n){return(0,c.isConst)(n)?Mn(e,n.value()):new t(e,n)}
var r=t.prototype
return r.compute=function(){var e=this.lastPath,t=this.innerReference,n=this.innerTag,r=this.pathReference.value()
return r!==e&&(t=Mn(this.sourceReference,r),n.inner.update(t.tag),this.innerReference=t,this.lastPath=r),t.value()},r[G]=function(e){(0,l.set)(this.sourceReference.value(),this.pathReference.value(),e)},t}(Y)
var Ln=function(e){function t(t,n,r){var i
return(i=e.call(this)||this).branchTag=c.UpdatableTag.create(c.CONSTANT_TAG),i.tag=(0,c.combine)([t.tag,i.branchTag]),i.cond=t,i.truthy=n,i.falsy=r,i}return(0,n.inheritsLoose)(t,e),t.create=function(e,n,r){var i=ne.create(e)
return(0,c.isConst)(i)?i.value()?n:r:new t(i,n,r)},t.prototype.compute=function(){var e=this.cond.value()?this.truthy:this.falsy
return this.branchTag.inner.update(e.tag),e.value()},t}(Y)
function Bn(e){var t,n=e.positional;(t=console).log.apply(t,n.value())}var jn=(0,s.symbol)("MUT"),zn=(0,s.symbol)("SOURCE")
function Un(e){e.positional
var t=e.named
return new E.QueryParams((0,r.assign)({},t.value()))}var Wn=["alt","shift","meta","ctrl"],Vn=/^click|mouse|touch/
p.ActionManager.registeredActions
var qn=function(e){var t=e.actionId
return p.ActionManager.registeredActions[t]=e,t},Hn=function(e){var t=e.actionId
delete p.ActionManager.registeredActions[t]},Gn=function(){function e(e,t,n,r,i,o,a,s,u){this.element=e,this.actionId=t,this.actionName=n,this.actionArgs=r,this.namedArgs=i,this.positional=o,this.implicitTarget=a,this.dom=s,this.eventName=this.getEventName(),this.tag=u}var t=e.prototype
return t.getEventName=function(){return this.namedArgs.get("on").value()||"click"},t.getActionArgs=function(){for(var e=new Array(this.actionArgs.length),t=0;t<this.actionArgs.length;t++)e[t]=this.actionArgs[t].value()
return e},t.getTarget=function(){var e=this.implicitTarget,t=this.namedArgs
return t.has("target")?t.get("target").value():e.value()},t.handler=function(e){var t=this,n=this.actionName,r=this.namedArgs,i=r.get("bubbles"),o=r.get("preventDefault"),a=r.get("allowedKeys"),s=this.getTarget(),c=!1!==i.value()
return!function(e,t){if(null==t){if(Vn.test(e.type))return(0,p.isSimpleClick)(e)
t=""}if(t.indexOf("any")>=0)return!0
for(var n=0;n<Wn.length;n++)if(e[Wn[n]+"Key"]&&-1===t.indexOf(Wn[n]))return!1
return!0}(e,a.value())||(!1!==o.value()&&e.preventDefault(),c||e.stopPropagation(),(0,u.join)(function(){var e=t.getActionArgs(),r={args:e,target:s,name:null}
"function"!=typeof n[K]?"function"!=typeof n?(r.name=n,s.send?(0,m.flaggedInstrument)("interaction.ember-action",r,function(){s.send.apply(s,[n].concat(e))}):(0,m.flaggedInstrument)("interaction.ember-action",r,function(){s[n].apply(s,e)})):(0,m.flaggedInstrument)("interaction.ember-action",r,function(){n.apply(s,e)}):(0,m.flaggedInstrument)("interaction.ember-action",r,function(){n[K].apply(n,e)})}),c)},t.destroy=function(){Hn(this)},e}(),Kn=function(){function e(){}var t=e.prototype
return t.create=function(e,t,n,r,i){var o,a,u,c=n.capture(),l=c.named,h=c.positional,f=c.tag
if(h.length>1)if(o=h.at(0),(u=h.at(1))[K])a=u
else{u.propertyKey
a=u.value()}for(var d=[],p=2;p<h.length;p++)d.push(h.at(p))
var v=(0,s.uuid)()
return new Gn(e,v,a,d,l,h,o,i,f)},t.install=function(e){var t=e.dom,n=e.element,r=e.actionId
qn(e),t.setAttribute(n,"data-ember-action",""),t.setAttribute(n,"data-ember-action-"+r,r)},t.update=function(e){var t=e.positional.at(1)
t[K]||(e.actionName=t.value()),e.eventName=e.getEventName()},t.getTag=function(e){return e.tag},t.getDestructor=function(e){return e},e}()
var $n=function(e,t,n,r){this.name=e,this.ModifierClass=t,this.delegate=n,this.state={ModifierClass:t,name:e,delegate:n},this.manager=r?Jn:Zn},Xn=function(){function e(e,t,n,r){this.element=e,this.delegate=t,this.modifier=n,this.args=r}return e.prototype.destroy=function(){var e=this.delegate,t=this.modifier,n=this.args
e.destroyModifier(t,n.value())},e}(),Yn=function(){function e(){}var t=e.prototype
return t.create=function(e,t,n){var r=n.capture(),i=t.delegate.createModifier(t.ModifierClass,r.value())
return new Xn(e,t.delegate,i,r)},t.getTag=function(e){return e.args.tag},t.install=function(e){var t=e.element,n=e.args,r=e.delegate,i=e.modifier
r.installModifier(i,t,n.value())},t.update=function(e){var t=e.args,n=e.delegate,r=e.modifier
n.updateModifier(r,t.value())},t.getDestructor=function(e){return e},e}(),Qn=function(){function e(){}var t=e.prototype
return t.create=function(){return null},t.getTag=function(){return c.CONSTANT_TAG},t.install=function(){},t.update=function(){},t.getDestructor=function(){return null},e}(),Jn=new Yn,Zn=new Qn,er=Nn(),tr=function(){try{var e,t=document.createElement("div"),n=0
return t.addEventListener("click",function(){return n++},{once:!0}),"function"==typeof Event?e=new Event("click"):(e=document.createEvent("Event")).initEvent("click",!0,!0),t.dispatchEvent(e),t.dispatchEvent(e),1===n}catch(r){return!1}}(),nr=function(){function e(e,t){this.shouldUpdate=!0,this.element=e,this.args=t,this.tag=t.tag}var t=e.prototype
return t.updateFromArgs=function(){var e,t=this.args,n=t.named.value(),r=n.once,i=n.passive,o=n.capture
r!==this.once&&(this.once=r,this.shouldUpdate=!0),i!==this.passive&&(this.passive=i,this.shouldUpdate=!0),o!==this.capture&&(this.capture=o,this.shouldUpdate=!0),r||i||o?e=this.options={once:r,passive:i,capture:o}:this.options=void 0
var a=t.positional.at(0).value()
a!==this.eventName&&(this.eventName=a,this.shouldUpdate=!0)
var s=t.positional.at(1).value()
s!==this.userProvidedCallback&&(this.userProvidedCallback=s,this.shouldUpdate=!0)
var u=!1===tr&&r||!1
if(this.shouldUpdate)if(u)var c=this.callback=function(t){return!tr&&r&&or(this,a,c,e),s.call(er,t)}
else this.callback=s},t.destroy=function(){or(this.element,this.eventName,this.callback,this.options)},e}(),rr=0,ir=0
function or(e,t,n,r){ir++,tr?e.removeEventListener(t,n,r):void 0!==r&&r.capture?e.removeEventListener(t,n,!0):e.removeEventListener(t,n)}function ar(e,t,n,r){rr++,tr?e.addEventListener(t,n,r):void 0!==r&&r.capture?e.addEventListener(t,n,!0):e.addEventListener(t,n)}var sr=function(){function e(e){this.SUPPORTS_EVENT_OPTIONS=tr,this.isInteractive=e}var t=e.prototype
return t.create=function(e,t,n){if(!this.isInteractive)return null
var r=n.capture()
return new nr(e,r)},t.getTag=function(e){return null===e?c.CONSTANT_TAG:e.tag},t.install=function(e){null!==e&&(e.updateFromArgs(),ar(e.element,e.eventName,e.callback,e.options),e.shouldUpdate=!1)},t.update=function(e){if(null!==e){var t=e.element,n=e.eventName,r=e.callback,i=e.options
e.updateFromArgs(),e.shouldUpdate&&(or(t,n,r,i),ar(e.element,e.eventName,e.callback,e.options),e.shouldUpdate=!1)}},t.getDestructor=function(e){return e},(0,n.createClass)(e,[{key:"counters",get:function(){return{adds:rr,removes:ir}}}]),e}()
function ur(e){return null===e?null:[e[0].map(function(e){return"@"+e}),e[1]]}function cr(e,t,n,r,i){return null!==n&&(null!==e?(i.compileParams(e),i.invokeStaticBlock(n,e.length)):i.invokeStatic(n)),!0}var lr={dynamicLayout:!0,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,createCaller:!0,dynamicScope:!0,updateHook:!0,createInstance:!0},hr=new(function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.getDynamicLayout=function(e,t){var n=e.engine.lookup("template:application").asLayout()
return{handle:n.compile(),symbolTable:n.symbolTable}},r.getCapabilities=function(){return lr},r.create=function(e,t){var n=e.owner.buildChildEngineInstance(t.name)
n.boot()
var r,i,o=n.factoryFor("controller:application")||(0,E.generateControllerFactory)(n,"application"),a=t.modelRef
if(void 0===a)i={engine:n,controller:r=o.create(),self:new Q(r),tag:c.CONSTANT_TAG}
else{var s=a.value(),u=a.tag.value()
i={engine:n,controller:r=o.create({model:s}),self:new Q(r),tag:a.tag,modelRef:a,modelRev:u}}return i},r.getSelf=function(e){return e.self},r.getTag=function(e){return e.tag},r.getDestructor=function(e){return e.engine},r.didRenderLayout=function(){0},r.update=function(e){var t=e.controller,n=e.modelRef,r=e.modelRev
if(!n.tag.validate(r)){var i=n.value()
e.modelRev=n.tag.value(),t.set("model",i)}},t}(ft)),fr=function(e,t){this.manager=hr,this.state={name:e,modelRef:t}}
function dr(e,t,n,r){var i=[x.Ops.Helper,"-mount",t||[],n]
return r.dynamicComponent(i,null,[],null,!1,null,null),!0}var pr=function(){function e(e,t,n){this.tag=e.tag,this.nameRef=e,this.modelRef=n,this.env=t,this._lastName=null,this._lastDef=null}var t=e.prototype
return t.value=function(){var e=this.env,t=this.nameRef,n=this.modelRef,r=t.value()
return"string"==typeof r?this._lastName===r?this._lastDef:e.owner.hasRegistration("engine:"+r)?(this._lastName=r,this._lastDef=(0,f.curry)(new fr(r,n)),this._lastDef):null:(this._lastDef=null,this._lastName=null,null)},t.get=function(){return f.UNDEFINED_REFERENCE},e}(),vr=function(){function e(e){this.outletState=e,this.tag=c.DirtyableTag.create()}var t=e.prototype
return t.get=function(e){return new gr(this,e)},t.value=function(){return this.outletState},t.update=function(e){this.outletState.outlets.main=e,this.tag.inner.dirty()},e}(),mr=function(){function e(e,t){this.parentStateRef=e,this.outletNameRef=t,this.tag=(0,c.combine)([e.tag,t.tag])}var t=e.prototype
return t.value=function(){var e=this.parentStateRef.value(),t=void 0===e?void 0:e.outlets
return void 0===t?void 0:t[this.outletNameRef.value()]},t.get=function(e){return new gr(this,e)},e}(),gr=function(){function e(e,t){this.parent=e,this.key=t,this.tag=e.tag}var t=e.prototype
return t.get=function(t){return new e(this,t)},t.value=function(){var e=this.parent.value()
return e&&e[this.key]},e}()
function yr(e,t,n,r){var i=[x.Ops.Helper,"-outlet",t||[],n]
return r.dynamicComponent(i,null,[],null,!1,null,null),!0}var br=function(){function e(e){this.outletRef=e,this.definition=null,this.lastState=null,this.tag=e.tag}var t=e.prototype
return t.value=function(){var e=function(e){var t=e.value()
if(void 0===t)return null
var n=t.render
if(void 0===n)return null
var r=n.template
return void 0===r?null:{ref:e,name:n.name,outlet:n.outlet,template:r,controller:n.controller}}(this.outletRef)
if(function(e,t){if(null===e)return null===t
if(null===t)return!1
return e.template===t.template&&e.controller===t.controller}(e,this.lastState))return this.definition
this.lastState=e
var t=null
return null!==e&&(t=(0,f.curry)(new gt(e))),this.definition=t},t.get=function(e){return f.UNDEFINED_REFERENCE},e}()
function xr(e,t,n,r){var i=r.compiler.resolver.lookupComponentDefinition(e,r.referrer)
return null!==i&&(r.component.static(i,[null===t?[]:t,ur(n),null,null]),!0)}function wr(e,t,n,r,i,o){var a=o.compiler.resolver.lookupComponentDefinition(e,o.referrer)
return null!==a&&(_t(n),o.component.static(a,[t,ur(n),r,i]),!0)}var _r=[]
function Rr(e){var t=hn(e)
return t&&!t.internal&&"modifier"===t.type?t.factory:void 0}function Er(e){return{object:"component:"+e}}function Cr(e,t){return{source:void 0!==e?"template:"+e:void 0,namespace:t}}e._experimentalMacros=_r
var kr={if:function(e,t){var n=t.positional
return Ln.create(n.at(0),n.at(1),n.at(2))},action:function(e,t){var n,r=t.named,i=t.positional.capture().references,o=i[0],a=i[1],s=i.slice(2),u=(a.propertyKey,r.has("target")?r.get("target"):o),h=(f=r.has("value")&&r.get("value"),d=s,d.length>0&&(p=function(e){return d.map(function(e){return e.value()}).concat(e)}),f&&(v=function(e){var t=f.value()
return t&&e.length>0&&(e[0]=(0,l.get)(e[0],t)),e}),p&&v?function(e){return v(p(e))}:p||v||An)
var f,d,p,v
return(n="function"==typeof a[K]?Tn(a,a,a[K],h):(0,c.isConst)(u)&&(0,c.isConst)(a)?Tn(o.value(),u.value(),a.value(),h):function(e,t,n,r,i){return function(){return Tn(e,t.value(),n.value(),r).apply(void 0,arguments)}}(o.value(),u,a,h))[$]=!0,new ae(n)},array:function(e,t){return t.positional.capture()},concat:function(e,t){return new oe(In,t.capture())},get:function(e,t){return Fn.create(t.positional.at(0),t.positional.at(1))},hash:function(e,t){return t.named.capture()},log:function(e,t){return new oe(Bn,t.capture())},mut:function(e,t){var n,r=t.positional.at(0)
if((n=r)&&n[jn])return r
var i=Object.create(r)
return i[zn]=r,i[K]=r[G],i[jn]=!0,i},"query-params":function(e,t){return new oe(Un,t.capture())},readonly:function(e,t){var n=function(e){return e[zn]||e}(t.positional.at(0))
return new se(n)},unbound:function(e,t){return ae.create(t.positional.at(0).value())},unless:function(e,t){var n=t.positional
return Ln.create(n.at(0),n.at(2),n.at(1))},"-class":function(e,t){return new oe(Cn,t.capture())},"-each-in":function(e,t){return new De(t.positional.at(0))},"-input-type":function(e,t){return new oe(kn,t.capture())},"-normalize-class":function(e,t){return new oe(Sn,t.capture())},"-get-dynamic-var":f.getDynamicVar,"-mount":function(e,t){var n=e.env,r=t.positional.at(0),i=t.named.has("model")?t.named.get("model"):void 0
return new pr(r,n,i)},"-outlet":function(e,t){var n,r=e.dynamicScope()
return n=0===t.positional.length?new c.ConstReference("main"):t.positional.at(0),new br(new mr(r.outletState,n))},"-assert-implicit-component-helper-argument":En,fn:void 0}
kr.fn=function(e,t){return new oe(Pn,t.capture())}
var Sr=function(){function e(e){this.handles=[void 0],this.objToHandle=new WeakMap,this.builtInHelpers=kr,this.templateCache=new Map,this.componentDefinitionCache=new Map,this.customManagerCache=new Map,this.templateCacheHits=0,this.templateCacheMisses=0,this.componentDefinitionCount=0,this.helperDefinitionCount=0
var t=new o.Macros;(function(e){var t=e.inlines,n=e.blocks
t.add("outlet",yr),t.add("mount",dr),t.addMissing(xr),n.add("let",cr),n.addMissing(wr)
for(var r=0;r<_r.length;r++)(0,_r[r])(n,t)})(t),this.compiler=new o.LazyCompiler(new pn(this),this,t),this.isInteractive=e,this.builtInModifiers={action:{manager:new Kn,state:null}},this.builtInModifiers.on={manager:new sr(e),state:null}}var t=e.prototype
return t.lookupComponentDefinition=function(e,t){var n=this.lookupComponentHandle(e,t)
return null===n?null:this.resolve(n)},t.lookupComponentHandle=function(e,t){var n=this.handles.length,r=this.handle(this._lookupComponentDefinition(e,t))
return n===r&&this.componentDefinitionCount++,r},t.resolve=function(e){return this.handles[e]},t.lookupHelper=function(e,t){var n=this.handles.length,r=this._lookupHelper(e,t)
if(null!==r){var i=this.handle(r)
return n===i&&this.helperDefinitionCount++,i}return null},t.lookupModifier=function(e,t){return this.handle(this._lookupModifier(e,t))},t.lookupPartial=function(e,t){var n=this._lookupPartial(e,t)
return this.handle(n)},t.createTemplate=function(e,t){var n,r=this.templateCache.get(t)
if(void 0===r?(r=new Map,this.templateCache.set(t,r)):n=r.get(e),void 0===n){var o={compiler:this.compiler};(0,i.setOwner)(o,t),n=e.create(o),r.set(e,n),this.templateCacheMisses++}else this.templateCacheHits++
return n},t.handle=function(e){if(null==e)return null
var t=this.objToHandle.get(e)
return void 0===t&&(t=this.handles.push(e)-1,this.objToHandle.set(e,t)),t},t._lookupHelper=function(e,t){var n=this.builtInHelpers[e]
if(void 0!==n)return n
var r,i=t.owner,o=e,a=void 0,s=Cr(t.moduleName,a),u=i.factoryFor("helper:"+o,s)||i.factoryFor("helper:"+o)
return"object"==typeof(r=u)&&null!==r&&r.class&&r.class.isHelperFactory?function(e,t){var n=u.create()
return void 0===n.destroy?re.create(n.compute,t.capture()):(e.newDestroyable(n),ie.create(n,t.capture()))}:null},t._lookupPartial=function(e,t){var n=(0,p.lookupPartial)(e,t.owner)
if(n)return new o.PartialDefinition(e,n)
throw new Error(e+" is not a partial")},t._lookupModifier=function(e,t){var n=this.builtInModifiers[e]
if(void 0===n){var r=t.owner,i=r.factoryFor("modifier:"+e)
if(void 0!==i){var o=Rr(i.class)(r)
return new $n(e,i,o,this.isInteractive)}}return n},t._parseNameForNamespace=function(e){var t=e,n=void 0,r=e.indexOf("::")
return-1!==r&&(t=e.slice(r+2),n=e.slice(0,r)),{name:t,namespace:n}},t._lookupComponentDefinition=function(e,t){var n=t.moduleName,r=t.owner,i=e,o=void 0,a=(0,p.lookupComponent)(r,i,Cr(n,o)),s=a.layout,u=a.component,c=void 0===u?s:u
if(void 0===c)return null
var l=this.componentDefinitionCache.get(c)
if(void 0!==l)return l
var h=(0,m._instrumentStart)("render.getComponentDefinition",Er,i),f=null
if(void 0!==s&&void 0===u&&y.ENV._TEMPLATE_ONLY_GLIMMER_COMPONENTS&&(f=new Rn(s)),void 0!==u&&void 0!==u.class){var d=hn(u.class)
if(d&&"component"===d.type){var v=d.factory
f=d.internal?new tn(v(r),u.class,s):new xn(i,u,v(r),s||r.lookup((0,w.privatize)(P())))}}return null===f&&(f=new zt(i,u||r.factoryFor((0,w.privatize)(D())),null,s)),h(),this.componentDefinitionCache.set(c,f),f},t._lookupComponentManager=function(e,t){if(this.customManagerCache.has(t))return this.customManagerCache.get(t)
var n=e.lookup("component-manager:"+t)
return this.customManagerCache.set(t,n),n},e}(),Ar={create:function(e){var t=e.environment
return new Sr(t.isInteractive).compiler}},Tr=B({id:"chfQcH83",block:'{"symbols":["&default"],"statements":[[14,1]],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/component.hbs"}}),Or=B({id:"NWZzLSII",block:'{"symbols":["Checkbox","TextField","@__ARGS__","&attrs"],"statements":[[4,"let",[[28,"component",["-checkbox"],null],[28,"component",["-text-field"],null]],null,{"statements":[[4,"if",[[23,0,["isCheckbox"]]],null,{"statements":[[6,[23,1,[]],[[13,4]],[["@target","@__ARGS__"],[[23,0,["caller"]],[23,3,[]]]]]],"parameters":[]},{"statements":[[6,[23,2,[]],[[13,4]],[["@target","@__ARGS__"],[[23,0,["caller"]],[23,3,[]]]]]],"parameters":[]}]],"parameters":[1,2]},null]],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/input.hbs"}}),Ir=B({id:"ffAL6HDl",block:'{"symbols":[],"statements":[[1,[22,"outlet"],false]],"hasEval":false}',meta:{moduleName:"packages/@ember/-internals/glimmer/lib/templates/outlet.hbs"}}),Nr="-top-level",Dr="main",Pr=function(){function e(e,t,n,r){this._environment=e,this.renderer=t,this.owner=n,this.template=r
var i=this.ref=new vr({outlets:{main:void 0},render:{owner:n,into:void 0,outlet:Dr,name:Nr,controller:void 0,template:r}})
this.state={ref:i,name:Nr,outlet:Dr,template:r,controller:void 0}}e.extend=function(t){return function(e){function i(){return e.apply(this,arguments)||this}return(0,n.inheritsLoose)(i,e),i.create=function(n){return n?e.create.call(this,(0,r.assign)({},t,n)):e.create.call(this,t)},i}(e)},e.reopenClass=function(e){(0,r.assign)(this,e)},e.create=function(t){var n=t._environment,r=t.renderer,o=t.template
return new e(n,r,t[i.OWNER],o)}
var t=e.prototype
return t.appendTo=function(e){var t
t=this._environment.hasDOM&&"string"==typeof e?document.querySelector(e):e,(0,u.schedule)("render",this.renderer,"appendOutletView",this,t)},t.rerender=function(){},t.setOutletState=function(e){this.ref.update(e)},t.destroy=function(){},e}()
e.OutletView=Pr}),e("@ember/-internals/meta/index",["exports","@ember/-internals/meta/lib/meta"],function(e,t){"use strict"
Object.defineProperty(e,"counters",{enumerable:!0,get:function(){return t.counters}}),Object.defineProperty(e,"deleteMeta",{enumerable:!0,get:function(){return t.deleteMeta}}),Object.defineProperty(e,"Meta",{enumerable:!0,get:function(){return t.Meta}}),Object.defineProperty(e,"meta",{enumerable:!0,get:function(){return t.meta}}),Object.defineProperty(e,"peekMeta",{enumerable:!0,get:function(){return t.peekMeta}}),Object.defineProperty(e,"setMeta",{enumerable:!0,get:function(){return t.setMeta}}),Object.defineProperty(e,"UNDEFINED",{enumerable:!0,get:function(){return t.UNDEFINED}})}),e("@ember/-internals/meta/lib/meta",["exports","ember-babel","@ember/-internals/utils","@ember/debug"],function(e,t,n,r){"use strict"
e.setMeta=h,e.peekMeta=f,e.deleteMeta=function(e){0
var t=f(e)
null!==t&&t.destroy()},e.counters=e.meta=e.Meta=e.UNDEFINED=void 0
var i,o=Object.prototype
e.counters=i
var a=(0,n.symbol)("undefined")
e.UNDEFINED=a
var s=1,u=function(){function e(e){this._listenersVersion=1,this._inheritedEnd=-1,this._flattenedVersion=0,this._parent=void 0,this._descriptors=void 0,this._watching=void 0,this._mixins=void 0,this._deps=void 0,this._chainWatchers=void 0,this._chains=void 0,this._tag=void 0,this._tags=void 0,this._flags=0,this.source=e,this.proto=void 0===e.constructor?void 0:e.constructor.prototype,this._listeners=void 0}var n=e.prototype
return n.setInitializing=function(){this._flags|=8},n.unsetInitializing=function(){this._flags^=8},n.isInitializing=function(){return this._hasFlag(8)},n.isPrototypeMeta=function(e){return this.proto===this.source&&this.source===e},n.destroy=function(){if(!this.isMetaDestroyed()){this.setMetaDestroyed()
var e=this.readableChains()
void 0!==e&&e.destroy()}},n.isSourceDestroying=function(){return this._hasFlag(1)},n.setSourceDestroying=function(){this._flags|=1},n.isSourceDestroyed=function(){return this._hasFlag(2)},n.setSourceDestroyed=function(){this._flags|=2},n.isMetaDestroyed=function(){return this._hasFlag(4)},n.setMetaDestroyed=function(){this._flags|=4},n._hasFlag=function(e){return(this._flags&e)===e},n._getOrCreateOwnMap=function(e){return this[e]||(this[e]=Object.create(null))},n._getOrCreateOwnSet=function(e){return this[e]||(this[e]=new Set)},n._findInherited1=function(e){for(var t=this;null!==t;){var n=t[e]
if(void 0!==n)return n
t=t.parent}},n._findInherited2=function(e,t){for(var n=this;null!==n;){var r=n[e]
if(void 0!==r){var i=r[t]
if(void 0!==i)return i}n=n.parent}},n._findInherited3=function(e,t,n){for(var r=this;null!==r;){var i=r[e]
if(void 0!==i){var o=i[t]
if(void 0!==o){var a=o[n]
if(void 0!==a)return a}}r=r.parent}},n._findInheritedMap=function(e,t){for(var n=this;null!==n;){var r=n[e]
if(void 0!==r){var i=r.get(t)
if(void 0!==i)return i}n=n.parent}},n._hasInInheritedSet=function(e,t){for(var n=this;null!==n;){var r=n[e]
if(void 0!==r&&r.has(t))return!0
n=n.parent}return!1},n.writeDeps=function(e,t,n){var r=this._getOrCreateOwnMap("_deps"),i=r[e]
void 0===i&&(i=r[e]=Object.create(null)),i[t]=n},n.peekDeps=function(e,t){var n=this._findInherited3("_deps",e,t)
return void 0===n?0:n},n.hasDeps=function(e){return void 0!==this._findInherited2("_deps",e)},n.forEachInDeps=function(e,t){for(var n,r=this;null!==r;){var i=r._deps
if(void 0!==i){var o=i[e]
if(void 0!==o)for(var a in n=void 0===n?new Set:n,o)n.has(a)||(n.add(a),o[a]>0&&t(a))}r=r.parent}},n.writableTags=function(){return this._getOrCreateOwnMap("_tags")},n.readableTags=function(){return this._tags},n.writableTag=function(e){var t=this._tag
return void 0===t&&(t=this._tag=e(this.source)),t},n.readableTag=function(){return this._tag},n.writableLazyChainsFor=function(e){var t=this._getOrCreateOwnMap("_lazyChains")
return e in t||(t[e]=[]),t[e]},n.readableLazyChainsFor=function(e){var t=this._lazyChains
if(void 0!==t)return t[e]},n.writableChainWatchers=function(e){var t=this._chainWatchers
return void 0===t&&(t=this._chainWatchers=e(this.source)),t},n.readableChainWatchers=function(){return this._chainWatchers},n.writableChains=function(e){var t=this._chains
if(void 0===t){this._chains=t=e(this.source)
var n=this.parent
if(null!==n)n.writableChains(e).copyTo(t)}return t},n.readableChains=function(){return this._findInherited1("_chains")},n.writeWatching=function(e,t){this._getOrCreateOwnMap("_watching")[e]=t},n.peekWatching=function(e){var t=this._findInherited2("_watching",e)
return void 0===t?0:t},n.addMixin=function(e){this._getOrCreateOwnSet("_mixins").add(e)},n.hasMixin=function(e){return this._hasInInheritedSet("_mixins",e)},n.forEachMixins=function(e){for(var t,n=this;null!==n;){var r=n._mixins
void 0!==r&&(t=void 0===t?new Set:t,r.forEach(function(n){t.has(n)||(t.add(n),e(n))})),n=n.parent}},n.writeDescriptors=function(e,t){(this._descriptors||(this._descriptors=new Map)).set(e,t)},n.peekDescriptors=function(e){var t=this._findInheritedMap("_descriptors",e)
return t===a?void 0:t},n.removeDescriptors=function(e){this.writeDescriptors(e,a)},n.forEachDescriptors=function(e){for(var t,n=this;null!==n;){var r=n._descriptors
void 0!==r&&(t=void 0===t?new Set:t,r.forEach(function(n,r){t.has(r)||(t.add(r),n!==a&&e(r,n))})),n=n.parent}},n.addToListeners=function(e,t,n,r,i){this.pushListener(e,t,n,r?1:0,i)},n.removeFromListeners=function(e,t,n){this.pushListener(e,t,n,2)},n.pushListener=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.writableListeners(),a=p(o,e,t,n)
if(-1!==a&&a<this._inheritedEnd&&(o.splice(a,1),this._inheritedEnd--,a=-1),-1===a)o.push({event:e,target:t,method:n,kind:r,sync:i})
else{var s=o[a]
2===r&&2!==s.kind?o.splice(a,1):(s.kind=r,s.sync=i)}},n.writableListeners=function(){return this._flattenedVersion!==s||this.source!==this.proto&&-1!==this._inheritedEnd||s++,-1===this._inheritedEnd&&(this._inheritedEnd=0,this._listeners=[]),this._listeners},n.flattenedListeners=function(){if(this._flattenedVersion<s){0
var e=this.parent
if(null!==e){var t=e.flattenedListeners()
if(void 0!==t)if(void 0===this._listeners)this._listeners=t
else{var n=this._listeners
this._inheritedEnd>0&&(n.splice(0,this._inheritedEnd),this._inheritedEnd=0)
for(var r=0;r<t.length;r++){var i=t[r];-1===p(n,i.event,i.target,i.method)&&(n.unshift(i),this._inheritedEnd++)}}}this._flattenedVersion=s}return this._listeners},n.matchingListeners=function(e){var t,n=this.flattenedListeners()
if(void 0!==n)for(var r=0;r<n.length;r++){var i=n[r]
i.event!==e||0!==i.kind&&1!==i.kind||(void 0===t&&(t=[]),t.push(i.target,i.method,1===i.kind))}return t},n.observerEvents=function(){var e,t=this.flattenedListeners()
if(void 0!==t)for(var n=0;n<t.length;n++){var r=t[n]
0!==r.kind&&1!==r.kind||-1===r.event.indexOf(":change")||(void 0===e&&(e=[]),e.push(r))}return e},(0,t.createClass)(e,[{key:"parent",get:function(){var e=this._parent
if(void 0===e){var t=c(this.source)
this._parent=e=null===t||t===o?null:d(t)}return e}}]),e}()
e.Meta=u
var c=Object.getPrototypeOf,l=new WeakMap
function h(e,t){l.set(e,t)}function f(e){var t=l.get(e)
if(void 0!==t)return t
for(var n=c(e);null!==n;){if(void 0!==(t=l.get(n)))return t.proto!==n&&(t.proto=n),t
n=c(n)}return null}var d=function(e){var t=f(e)
if(null!==t&&t.source===e)return t
var n=new u(e)
return h(e,n),n}
function p(e,t,n,r){for(var i=e.length-1;i>=0;i--){var o=e[i]
if(o.event===t&&o.target===n&&o.method===r)return i}return-1}e.meta=d}),e("@ember/-internals/metal",["exports","ember-babel","@ember/polyfills","@ember/-internals/meta","@ember/debug","@ember/-internals/utils","@ember/runloop","@glimmer/reference","@ember/-internals/environment","@ember/error","ember/version","@ember/deprecated-features","@ember/-internals/owner"],function(e,t,n,r,i,o,a,s,u,c,l,h,f){"use strict"
e.computed=ot,e.isComputed=function(e,t){return Boolean(b(e,t))},e.getCacheFor=v,e.getCachedValueFor=m,e.peekCacheFor=g,e.alias=function(e){return Ue(new ct(e),ut)},e.deprecateProperty=function(e,t,n,r){function i(){}Object.defineProperty(e,t,{configurable:!0,enumerable:!1,set:function(e){i(),tt(this,n,e)},get:function(){return i(),Ye(this,n)}})},e._getPath=Qe,e.get=Ye,e.getWithDefault=function(e,t,n){var r=Ye(e,t)
if(void 0===r)return n
return r},e.set=tt,e.trySet=function(e,t,n){return tt(e,t,n,!0)},e.objectAt=de,e.replace=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe
Array.isArray(e)?ve(e,t,n,r):e.replace(t,n,r)},e.replaceInNativeArray=ve,e.addArrayObserver=function(e,t,n){return me(e,t,n,P,!1)},e.removeArrayObserver=function(e,t,n){return me(e,t,n,M,!0)},e.arrayContentWillChange=le,e.arrayContentDidChange=he,e.eachProxyFor=ge,e.eachProxyArrayWillChange=ue,e.eachProxyArrayDidChange=ce,e.addListener=P,e.hasListeners=function(e,t){var n=(0,r.peekMeta)(e)
if(null===n)return!1
var i=n.matchingListeners(t)
return void 0!==i&&i.length>0},e.on=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=t.pop(),i=t
return(0,o.setListeners)(r,i),r},e.removeListener=M,e.sendEvent=F,e.isNone=function(e){return null==e},e.isEmpty=ft,e.isBlank=dt
e.isPresent=function(e){return!dt(e)},e.beginPropertyChanges=te,e.changeProperties=re,e.endPropertyChanges=ne,e.notifyPropertyChange=Q,e.overrideChains=ee,e.defineProperty=ie,e.isElementDescriptor=Fe,e.nativeDescDecorator=je,e.descriptorForDecorator=x,e.descriptorForProperty=b,e.isClassicDecorator=w,e.setClassicDecorator=_,e.watchKey=oe,e.unwatchKey=ae,e.finishChains=function(e){var t=e.readableChainWatchers()
void 0!==t&&t.revalidateAll()
void 0!==e.readableChains()&&e.writableChains(Ee)},e.removeChainWatcher=ke,e.getChainTagsForKey=Je,e.watchPath=Ie,e.unwatchPath=Ne,e.isWatching=function(e,t){return Pe(e,t)>0},e.unwatch=Me,e.watch=De,e.watcherCount=Pe,e.getProperties=function(e,t){var n={},r=arguments,i=1
2===arguments.length&&Array.isArray(t)&&(i=0,r=arguments[1])
for(;i<r.length;i++)n[r[i]]=Ye(e,r[i])
return n},e.setProperties=function(e,t){if(null===t||"object"!=typeof t)return t
return re(function(){for(var n,r=Object.keys(t),i=0;i<r.length;i++)n=r[i],tt(e,n,t[n])}),t},e.expandProperties=et,e.addObserver=z,e.activateObserver=W,e.removeObserver=U
e.flushAsyncObservers=function(){if(V===s.CURRENT_TAG.value())return
V=s.CURRENT_TAG.value(),j.forEach(function(e,t){var n=(0,r.peekMeta)(t)
n&&(n.isSourceDestroying()||n.isMetaDestroyed())?j.delete(t):e.forEach(function(e,n){e.tag.validate(e.lastRevision)||(0,a.schedule)("actions",function(){try{F(t,n,[t,e.path])}finally{e.tag=Je(t,e.path),e.lastRevision=e.tag.value()}})})})},e.mixin=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return Lt(e,n),e},e.observer=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r,i,a,s=t.pop()
"function"==typeof s?(r=s,i=t,a=!u.ENV._DEFAULT_ASYNC_OBSERVERS):(r=s.fn,i=s.dependentKeys,a=s.sync)
for(var c=[],l=function(e){return c.push(e)},h=0;h<i.length;++h)et(i[h],l)
return(0,o.setObservers)(r,{paths:c,sync:a}),r},e.applyMixin=Lt,e.inject=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
var i,o,a=Fe(n),s=a?void 0:n[0]
a||n[1]
var u=function(t){var n=(0,f.getOwner)(this)||this.container
return n.lookup(e+":"+(s||t),{source:i,namespace:o})}
0
var c=ot({get:u,set:function(e,t){ie(this,e,null,t)}})
return a?c(n[0],n[1],n[2]):c},e.tagForProperty=T,e.tagFor=O,e.markObjectAsDirty=I,e.consume=Ke,e.tracked=Ve,e.track=Ge,e.addNamespace=function(e){yt.unprocessedNamespaces=!0,xt.push(e)},e.classToString=Ct,e.findNamespace=function(e){gt||Et()
return wt[e]},e.findNamespaces=_t,e.processNamespace=Rt,e.processAllNamespaces=Et,e.removeNamespace=function(e){var t=(0,o.getName)(e)
delete wt[t],xt.splice(xt.indexOf(e),1),t in u.context.lookup&&e===u.context.lookup[t]&&(u.context.lookup[t]=void 0)},e.isNamespaceSearchDisabled=function(){return gt},e.setNamespaceSearchDisabled=function(e){gt=Boolean(e)},e.NAMESPACES_BY_ID=e.NAMESPACES=e.Tracker=e.assertNotRendered=e.didRender=e.runInTransaction=e.update=e.UNKNOWN_PROPERTY_TAG=e.DEBUG_INJECTION_FUNCTIONS=e.aliasMethod=e.Mixin=e.Libraries=e.libraries=e.ChainNode=e.PROPERTY_DID_CHANGE=e.PROXY_CONTENT=e.ComputedProperty=e._globalsComputed=void 0
var d,p=new WeakMap
function v(e){var t=p.get(e)
return void 0===t&&(t=new Map,p.set(e,t)),t}function m(e,t){var n=p.get(e)
if(void 0!==n)return n.get(t)}function g(e){return p.get(e)}var y=new WeakMap
function b(e,t,n){var i=void 0===n?(0,r.peekMeta)(e):n
if(null!==i)return i.peekDescriptors(t)}function x(e){return y.get(e)}function w(e){return null!=e&&y.has(e)}function _(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]
y.set(e,t)}var R=new o.Cache(1e3,function(e){return e.indexOf(".")})
function E(e){return"string"==typeof e&&-1!==R.get(e)}var C,k,S=(0,o.symbol)("UNKNOWN_PROPERTY_TAG")
function A(){return s.DirtyableTag.create()}function T(e,t,n){var i=typeof e
if("function"!==i&&("object"!==i||null===e))return s.CONSTANT_TAG
var a=void 0===n?(0,r.meta)(e):n
if((0,o.isProxy)(e))return O(e,a)
var u=a.writableTags(),c=u[t]
return c||(u[t]=A())}function O(e,t){if("object"==typeof e&&null!==e){var n=void 0===t?(0,r.meta)(e):t
if(!n.isMetaDestroyed())return n.writableTag(A)}return s.CONSTANT_TAG}function I(e,t,n){var i=void 0===n?(0,r.meta)(e):n,s=i.readableTag()
void 0!==s&&((0,o.isProxy)(e)?s.inner.first.inner.dirty():s.inner.dirty())
var u=i.readableTags(),c=void 0!==u?u[t]:void 0
void 0!==c&&C(c),void 0===s&&void 0===c||a.backburner.ensureInstance()}e.UNKNOWN_PROPERTY_TAG=S,e.update=k,C=function(e){e.inner.dirty()}
var N=":change"
function D(e){return e+N}function P(e,t,n,i,o){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5]
i||"function"!=typeof n||(i=n,n=null),(0,r.meta)(e).addToListeners(t,n,i,!0===o,a)}function M(e,t,n,i){var o,a
"object"==typeof n?(o=n,a=i):(o=null,a=n),(0,r.meta)(e).removeFromListeners(t,o,a)}function F(e,t,n,i,o){if(void 0===i){var a=void 0===o?(0,r.peekMeta)(e):o
i="object"==typeof a&&null!==a?a.matchingListeners(t):void 0}if(void 0===i||0===i.length)return!1
for(var s=i.length-3;s>=0;s-=3){var u=i[s],c=i[s+1],l=i[s+2]
c&&(l&&M(e,t,u,c),u||(u=e),"string"==typeof c&&(c=u[c]),c.apply(u,n))}return!0}var L=!u.ENV._DEFAULT_ASYNC_OBSERVERS,B=new Map,j=new Map
function z(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L,o=D(t)
P(e,o,n,r,!1,i),De(e,t)}function U(e,t,n,r){arguments.length>4&&void 0!==arguments[4]&&arguments[4]
var i=D(t)
Me(e,t),M(e,i,n,r)}function W(e,t){var n=function(e,t){var n=!0===t?B:j
return n.has(e)||n.set(e,new Map),n.get(e)}(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2])
if(n.has(t))n.get(t).count++
else{var r=t.split(":")[0],i=Je(e,r)
n.set(t,{count:1,path:r,tag:i,lastRevision:i.value(),suspended:!1})}}var V=0
var q,H,G,K=function(){function e(){this.added=new Map,this.queue=[]}var t=e.prototype
return t.add=function(e,t,n){var r=this.added.get(e)
void 0===r&&(r=new Set,this.added.set(e,r)),r.has(t)||(this.queue.push(e,t,n),r.add(t))},t.flush=function(){var e=this.queue
this.added.clear(),this.queue=[]
for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2]
n.isDestroying||n.isDestroyed||F(n,i,[n,r])}},e}()
e.runInTransaction=q,e.didRender=H,e.assertNotRendered=G,e.runInTransaction=q=function(e,t){return e[t](),!1}
var $=(0,o.symbol)("PROPERTY_DID_CHANGE")
e.PROPERTY_DID_CHANGE=$
var X=new K,Y=0
function Q(e,t,n){var i=void 0===n?(0,r.peekMeta)(e):n
if(null===i||!i.isInitializing()&&!i.isPrototypeMeta(e)){var o=b(e,t,i)
void 0!==o&&"function"==typeof o.didChange&&o.didChange(e,t),null!==i&&i.peekWatching(t)>0&&(function(e,t,n){if(n.isSourceDestroying()||!n.hasDeps(t))return
var r=Z
r&&(Z=!1);(function(e,t,n,r,i){var o,a=r.get(t)
void 0===a&&(a=new Set,r.set(t,a)),a.has(n)||i.forEachInDeps(n,function(n){void 0!==(o=b(t,n,i))&&o._suspended===t||e(t,n,i)})})(Q,e,t,J,n),r&&(J.clear(),Z=!0)}(e,t,i),function(e,t,n){var r=n.readableChainWatchers()
void 0!==r&&r.notify(t,!0,Q)}(0,t,i),function(e,t,n){if(n.isSourceDestroying())return
var r=D(t)
Y>0?X.add(e,t,r):F(e,r,[e,t])}(e,t,i)),null!==i&&I(e,t,i),$ in e&&e[$](t)}}var J=new Map,Z=!0
function ee(e,t,n){var r=n.readableChainWatchers()
void 0!==r&&r.revalidate(t)}function te(){Y++}function ne(){--Y<=0&&X.flush()}function re(e){te()
try{e()}finally{ne()}}function ie(e,t,n,i,o){void 0===o&&(o=(0,r.meta)(e))
var a=o.peekWatching(t)>0,s=b(e,t,o),u=void 0!==s
u&&s.teardown(e,t,o)
var c,l,h=!0
if(e===Array.prototype&&(h=!1),w(n))l=n(e,t,void 0,o),Object.defineProperty(e,t,l),c=n
else if(null==n){c=i,u||!1===h?Object.defineProperty(e,t,{configurable:!0,enumerable:h,writable:!0,value:c}):e[t]=i}else c=n,Object.defineProperty(e,t,n)
a&&ee(0,t,o),"function"==typeof e.didDefineProperty&&e.didDefineProperty(e,t,c)}function oe(e,t,n){var i=void 0===n?(0,r.meta)(e):n,o=i.peekWatching(t)
if(i.writeWatching(t,o+1),0===o){var a=b(e,t,i)
void 0!==a&&void 0!==a.willWatch&&a.willWatch(e,t,i),"function"==typeof e.willWatchProperty&&e.willWatchProperty(t)}}function ae(e,t,n){var i=void 0===n?(0,r.peekMeta)(e):n
if(null!==i&&!i.isSourceDestroyed()){var o=i.peekWatching(t)
if(1===o){i.writeWatching(t,0)
var a=b(e,t,i),s=void 0!==a
s&&void 0!==a.didUnwatch&&a.didUnwatch(e,t,i),"function"==typeof e.didUnwatchProperty&&e.didUnwatchProperty(t)}else o>1&&i.writeWatching(t,o-1)}}var se=new WeakMap
function ue(e,t,n,r){var i=se.get(e)
void 0!==i&&i.arrayWillChange(e,t,n,r)}function ce(e,t,n,r){var i=se.get(e)
void 0!==i&&i.arrayDidChange(e,t,n,r)}function le(e,t,n,r){return void 0===t?(t=0,n=r=-1):(void 0===n&&(n=-1),void 0===r&&(r=-1)),ue(e,t,n,r),F(e,"@array:before",[e,t,n,r]),e}function he(e,t,n,i){void 0===t?(t=0,n=i=-1):(void 0===n&&(n=-1),void 0===i&&(i=-1))
var o=(0,r.peekMeta)(e);(i<0||n<0||i-n!=0)&&Q(e,"length",o),Q(e,"[]",o),ce(e,t,n,i),F(e,"@array:change",[e,t,n,i])
var a=g(e)
if(void 0!==a){var s=-1===n?0:n,u=e.length-((-1===i?0:i)-s),c=t<0?u+t:t
if(a.has("firstObject")&&0===c&&Q(e,"firstObject",o),a.has("lastObject"))u-1<c+s&&Q(e,"lastObject",o)}return e}var fe=Object.freeze([])
function de(e,t){return Array.isArray(e)?e[t]:e.objectAt(t)}var pe=6e4
function ve(e,t,n,r){if(le(e,t,n,r.length),r.length<=pe)e.splice.apply(e,[t,n].concat(r))
else{e.splice(t,n)
for(var i=0;i<r.length;i+=pe){var o=r.slice(i,i+pe)
e.splice.apply(e,[t+i,0].concat(o))}}he(e,t,n,r.length)}function me(e,t,n,r,i){var o=n&&n.willChange||"arrayWillChange",a=n&&n.didChange||"arrayDidChange",s=Ye(e,"hasArrayObservers")
return r(e,"@array:before",t,o),r(e,"@array:change",t,a),s===i&&Q(e,"hasArrayObservers"),e}function ge(e){var t=se.get(e)
return void 0===t&&(t=new ye(e),se.set(e,t)),t}var ye=function(){function e(e){this._content=e,this._keys=void 0,(0,r.meta)(this)}var t=e.prototype
return t.arrayWillChange=function(e,t,n){var r=this._keys
if(r){var i=n>0?t+n:-1
if(i>0)for(var o in r)xe(e,o,this,t,i)}},t.arrayDidChange=function(e,t,n,i){var o=this._keys
if(o){var a=i>0?t+i:-1,s=(0,r.peekMeta)(this)
for(var u in o)a>0&&be(e,u,this,t,a),Q(this,u,s)}},t.willWatchProperty=function(e){this.beginObservingContentKey(e)},t.didUnwatchProperty=function(e){this.stopObservingContentKey(e)},t.beginObservingContentKey=function(e){var t=this._keys
if(void 0===t&&(t=this._keys=Object.create(null)),t[e])t[e]++
else{t[e]=1
var n=this._content
be(n,e,this,0,n.length)}},t.stopObservingContentKey=function(e){var t=this._keys
if(void 0!==t&&t[e]>0&&--t[e]<=0){var n=this._content
xe(n,e,this,0,n.length)}},t.contentKeyDidChange=function(e,t){Q(this,t)},e}()
function be(e,t,n,r,i){for(;--i>=r;){var o=de(e,i)
o&&z(o,t,n,"contentKeyDidChange")}}function xe(e,t,n,r,i){for(;--i>=r;){var o=de(e,i)
o&&U(o,t,n,"contentKeyDidChange")}}function we(e){return"object"==typeof e&&null!==e}var _e=function(){function e(){this.chains=Object.create(null)}var t=e.prototype
return t.add=function(e,t){var n=this.chains[e]
void 0===n?this.chains[e]=[t]:n.push(t)},t.remove=function(e,t){var n=this.chains[e]
if(void 0!==n)for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1)
break}},t.has=function(e,t){var n=this.chains[e]
if(void 0!==n)for(var r=0;r<n.length;r++)if(n[r]===t)return!0
return!1},t.revalidateAll=function(){for(var e in this.chains)this.notify(e,!0,void 0)},t.revalidate=function(e){this.notify(e,!0,void 0)},t.notify=function(e,t,n){var r=this.chains[e]
if(void 0!==r&&0!==r.length){var i=void 0
void 0!==n&&(i=[])
for(var o=0;o<r.length;o++)r[o].notify(t,i)
if(void 0!==n)for(var a=0;a<i.length;a+=2){n(i[a],i[a+1])}}},e}()
function Re(){return new _e}function Ee(e){return new Oe(null,null,e)}function Ce(e,t,n){var i=(0,r.meta)(e)
i.writableChainWatchers(Re).add(t,n),oe(e,t,i)}function ke(e,t,n,i){if(we(e)){var o=void 0===i?(0,r.peekMeta)(e):i
null===o||o.isSourceDestroying()||o.isMetaDestroyed()||void 0===o.readableChainWatchers()||((o=(0,r.meta)(e)).readableChainWatchers().remove(t,n),ae(e,t,o))}}var Se=[]
function Ae(e){e.isWatching&&(ke(e.object,e.key,e),e.isWatching=!1)}function Te(e){var t=e.chains
if(void 0!==t)for(var n in t)void 0!==t[n]&&Se.push(t[n])}var Oe=function(){function e(e,t,n){if(this.paths=void 0,this.isWatching=!1,this.chains=void 0,this.object=void 0,this.count=0,this.parent=e,this.key=t,this.content=n,this.isWatching=null!==e){var r=e.value()
we(r)&&(this.object=r,Ce(r,t,this))}}var t=e.prototype
return t.value=function(){if(void 0===this.content&&this.isWatching){var e=this.parent.value()
this.content=function(e,t){if(!we(e))return
var n=(0,r.peekMeta)(e)
if(null!==n&&n.proto===e)return
return"@each"===t?ge(e):function(e,t,n){var r=b(e,t,n)
return!(void 0!==r&&!1===r._volatile)}(e,t,n)?Ye(e,t):m(e,t)}(e,this.key)}return this.content},t.destroy=function(){null===this.parent?function(e){for(Te(e);Se.length>0;){var t=Se.pop()
Te(t),Ae(t)}}(this):Ae(this)},t.copyTo=function(e){var t,n=this.paths
if(void 0!==n)for(t in n)n[t]>0&&e.add(t)},t.add=function(e){var t=this.paths||(this.paths={})
t[e]=(t[e]||0)+1
var n=e.split(".")
this.chain(n.shift(),n)},t.remove=function(e){var t=this.paths
if(void 0!==t){t[e]>0&&t[e]--
var n=e.split(".")
this.unchain(n.shift(),n)}},t.chain=function(t,n){var r=this.chains
void 0===r&&(r=this.chains=Object.create(null))
var i=r[t]
void 0===i&&(i=r[t]=new e(this,t,void 0)),i.count++,n.length>0&&i.chain(n.shift(),n)},t.unchain=function(e,t){var n=this.chains,r=n[e]
t.length>0&&r.unchain(t.shift(),t),r.count--,r.count<=0&&(n[r.key]=void 0,r.destroy())},t.notify=function(e,t){if(e&&this.isWatching){var n=this.parent.value()
n!==this.object&&(ke(this.object,this.key,this),we(n)?(this.object=n,Ce(n,this.key,this)):this.object=void 0),this.content=void 0}var r,i=this.chains
if(void 0!==i)for(var o in i)void 0!==(r=i[o])&&r.notify(e,t)
void 0!==t&&null!==this.parent&&this.parent.populateAffected(this.key,1,t)},t.populateAffected=function(e,t,n){this.key&&(e=this.key+"."+e),null!==this.parent?this.parent.populateAffected(e,t+1,n):t>1&&n.push(this.value(),e)},e}()
function Ie(e,t,n){var i=void 0===n?(0,r.meta)(e):n,o=i.peekWatching(t)
i.writeWatching(t,o+1),0===o&&i.writableChains(Ee).add(t)}function Ne(e,t,n){var i=void 0===n?(0,r.peekMeta)(e):n
if(null!==i){var o=i.peekWatching(t)
o>0&&(i.writeWatching(t,o-1),1===o&&i.writableChains(Ee).remove(t))}}function De(e,t,n){E(t)?Ie(e,t,n):oe(e,t,n)}function Pe(e,t){var n=(0,r.peekMeta)(e)
return null!==n&&n.peekWatching(t)||0}function Me(e,t,n){E(t)?Ne(e,t,n):ae(e,t,n)}function Fe(e){var t=e[0],n=e[1],r=e[2]
return 3===e.length&&("function"==typeof t||"object"==typeof t&&null!==t)&&"string"==typeof n&&("object"==typeof r&&null!==r&&"enumerable"in r&&"configurable"in r||void 0===r)}function Le(e,t,n,r){var i=e._dependentKeys
if(null!=i)for(var o=0;o<i.length;o++){var a=i[o]
r.writeDeps(a,n,r.peekDeps(a,n)+1),De(t,a,r)}}function Be(e,t,n,r){var i=e._dependentKeys
if(null!=i)for(var o=0;o<i.length;o++){var a=i[o]
r.writeDeps(a,n,r.peekDeps(a,n)-1),Me(t,a,r)}}function je(e){var t=function(){return e}
return _(t),t}e.ChainNode=Oe
var ze=function(){function e(){this.enumerable=!0,this.configurable=!0,this._dependentKeys=void 0,this._meta=void 0}var t=e.prototype
return t.setup=function(e,t,n,r){r.writeDescriptors(t,this)},t.teardown=function(e,t,n){n.removeDescriptors(t)},e}()
function Ue(e,t){var n=function(t,n,i,o,a){var s=3===arguments.length?(0,r.meta)(t):o
e.setup(t,n,i,s)
var u,c,l={enumerable:e.enumerable,configurable:e.configurable,get:(u=n,c=e,function(){return c.get(this,u)})}
return l}
return _(n,e),Object.setPrototypeOf(n,t.prototype),n}var We=function(){function e(){this.tags=new Set,this.last=null}var n=e.prototype
return n.add=function(e){this.tags.add(e),this.last=e},n.combine=function(){if(0===this.tags.size)return s.CONSTANT_TAG
if(1===this.tags.size)return this.last
var e=[]
return this.tags.forEach(function(t){return e.push(t)}),(0,s.combine)(e)},(0,t.createClass)(e,[{key:"size",get:function(){return this.tags.size}}]),e}()
function Ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
if(!Fe(t)){var r=t[0],i=r?r.initializer:void 0,o=r?r.value:void 0,a=function(e,t,n,r,a){return qe([e,t,{initializer:i||function(){return o}}])}
return _(a),a}return qe(t)}function qe(e){e[0]
var t=e[1],n=e[2],r=n?n.initializer:void 0,i=new WeakMap,a="function"==typeof r
return{enumerable:!0,configurable:!0,get:function(){var e,n=T(this,t)
return He&&He.add(n),a&&!i.has(this)?(e=r.call(this),i.set(this,e)):e=i.get(this),(Array.isArray(e)||(0,o.isEmberArray)(e))&&k(n,T(e,"[]")),e},set:function(e){I(this,t),i.set(this,e),null!==$e&&$e()}}}e.Tracker=We
var He=null
function Ge(e){var t=He,n=new We
He=n
try{e()}finally{He=t}return n.combine()}function Ke(e){null!==He&&He.add(e)}var $e=null,Xe=(0,o.symbol)("PROXY_CONTENT")
function Ye(e,t){var n,r=typeof e,i="object"===r,o=i||"function"===r
if(E(t))return o?Qe(e,t):void 0
if(o){0
var a=b(e,t)
if(void 0!==a)return a.get(e,t)
n=e[t]}else n=e[t]
return void 0!==n||!i||t in e||"function"!=typeof e.unknownProperty?n:e.unknownProperty(t)}function Qe(e,t){for(var n=e,r="string"==typeof t?t.split("."):t,i=0;i<r.length;i++){if(null==n||n.isDestroyed)return
n=Ye(n,r[i])}return n}function Je(e,t){for(var n,i,o=[],a=e,u=t.split(".");u.length>0;){if("@each"===(n=u.shift())&&u.length>0){n=u.shift()
var c=a.map(function(e){return T(e,n)})
o.push.apply(o,c.concat([T(a,"[]")]))
break}var l=T(a,n)
if(o.push(l),void 0===(i=b(a,n)))a=n in a||"function"!=typeof a.unknownProperty?a[n]:a.unknownProperty(n)
else{var h=d(a,n)
if(l.validate(h))"string"==typeof i.altKey?Ge(function(){a=Ye(a,i.altKey)}):a=g(a).get(n)
else if(u.length>0){var f=s.UpdatableTag.create(s.CONSTANT_TAG);(0,r.meta)(a).writableLazyChainsFor(n).push([u.join("."),f]),o.push(f)
break}}var p=typeof a
if(null===a||"object"!==p&&"function"!==p)break}return(0,s.combine)(o)}e.PROXY_CONTENT=Xe
var Ze=/\.@each$/
function et(e,t){var n=e.indexOf("{")
n<0?t(e.replace(Ze,".[]")):function e(t,n,r,i){var o,a,s=n.indexOf("}"),u=0
var c=n.substring(r+1,s).split(",")
var l=n.substring(s+1)
t+=n.substring(0,r)
a=c.length
for(;u<a;)(o=l.indexOf("{"))<0?i((t+c[u++]+l).replace(Ze,".[]")):e(t+c[u++],l,o,i)}("",e,n,t)}function tt(e,t,n,i){if(!e.isDestroyed){if(E(t))return function(e,t,n,r){var i=t.split("."),o=i.pop()
var a=Qe(e,i)
if(null!=a)return tt(a,o,n)
if(!r)throw new c.default('Property set failed: object in path "'+i.join(".")+'" could not be found.')}(e,t,n,i)
var o,a=(0,r.peekMeta)(e),s=b(e,t,a)
return void 0!==s?(s.set(e,t,n),n):(void 0!==(o=e[t])||"object"!=typeof e||t in e||"function"!=typeof e.setUnknownProperty?(e[t]=n,o!==n&&Q(e,t,a)):e.setUnknownProperty(t,n),n)}}function nt(){}var rt=function(e){function n(t){var n;(n=e.call(this)||this)._volatile=!1,n._readOnly=!1,n._suspended=void 0,n._hasConfig=!1,n._getter=void 0,n._setter=void 0
var r,i=t[t.length-1]
if("function"==typeof i||null!==i&&"object"==typeof i){n._hasConfig=!0
var o=t.pop()
if("function"==typeof o)n._getter=o
else{var a=o
n._getter=a.get||nt,n._setter=a.set}}t.length>0&&(r=n)._property.apply(r,t)
return n}(0,t.inheritsLoose)(n,e)
var i=n.prototype
return i.setup=function(t,n,r,i){if(e.prototype.setup.call(this,t,n,r,i),!1===this._hasConfig){var o=r.get,a=r.set
void 0!==o&&(this._getter=o),void 0!==a&&(this._setter=function(e,t){var n=a.call(this,t)
return void 0!==o&&void 0===n?o.call(this):n})}},i.volatile=function(){this._volatile=!0},i.readOnly=function(){this._readOnly=!0},i.property=function(){this._property.apply(this,arguments)},i._property=function(){var e=[]
function t(t){e.push(t)}for(var n=0;n<arguments.length;n++)et(n<0||arguments.length<=n?void 0:arguments[n],t)
this._dependentKeys=e},i.didChange=function(e,t){if(!this._volatile&&this._suspended!==e){var n=(0,r.peekMeta)(e)
if(null!==n&&n.source===e){var i=g(e)
void 0!==i&&i.delete(t)&&Be(this,e,t,n)}}},i.get=function(e,t){if(this._volatile)return this._getter.call(e,t)
var n,i=v(e)
if(i.has(t))return i.get(t)
n=this._getter.call(e,t),i.set(t,n)
var o=(0,r.meta)(e),a=o.readableChainWatchers()
return void 0!==a&&a.revalidate(t),Le(this,e,t,o),n},i.set=function(e,t,n){return this._readOnly&&this._throwReadOnlyError(e,t),this._setter?this._volatile?this.volatileSet(e,t,n):this.setWithSuspend(e,t,n):this.clobberSet(e,t,n)},i._throwReadOnlyError=function(e,t){throw new c.default('Cannot set read-only property "'+t+'" on object: '+(0,o.inspect)(e))},i.clobberSet=function(e,t,n){return ie(e,t,null,m(e,t)),tt(e,t,n),n},i.volatileSet=function(e,t,n){return this._setter.call(e,t,n)},i.setWithSuspend=function(e,t,n){var r=this._suspended
this._suspended=e
try{return this._set(e,t,n)}finally{this._suspended=r}},i._set=function(e,t,n){var i,o=v(e),a=o.has(t),s=o.get(t)
if(i=this._setter.call(e,t,n,s),a&&s===i)return i
var u=(0,r.meta)(e)
return a||Le(this,e,t,u),o.set(t,i),Q(e,t,u),i},i.teardown=function(t,n,r){if(!this._volatile){var i=g(t)
void 0!==i&&i.delete(n)&&Be(this,t,n,r)}e.prototype.teardown.call(this,t,n,r)},n}(ze)
e.ComputedProperty=rt
var it=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.readOnly=function(){return x(this).readOnly(),this},r.volatile=function(){return x(this).volatile(),this},r.property=function(){var e
return(e=x(this)).property.apply(e,arguments),this},r.meta=function(e){var t=x(this)
return 0===arguments.length?t._meta||{}:(t._meta=e,this)},(0,t.createClass)(n,[{key:"_getter",get:function(){return x(this)._getter}},{key:"enumerable",set:function(e){x(this).enumerable=e}}]),n}((0,t.wrapNativeSuper)(Function))
function ot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return Fe(t)?Ue(new rt([]),it)(t[0],t[1],t[2]):Ue(new rt(t),it)}var at=ot.bind(null)
e._globalsComputed=at
var st=Object.freeze({})
var ut=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.readOnly=function(){return x(this).readOnly(),this},r.oneWay=function(){return x(this).oneWay(),this},r.meta=function(e){var t=x(this)
if(0===arguments.length)return t._meta||{}
t._meta=e},n}((0,t.wrapNativeSuper)(Function)),ct=function(e){function n(t){var n
return(n=e.call(this)||this).altKey=t,n._dependentKeys=[t],n}(0,t.inheritsLoose)(n,e)
var i=n.prototype
return i.setup=function(t,n,r,i){e.prototype.setup.call(this,t,n,r,i),i.peekWatching(n)>0&&this.consume(t,n,i)},i.teardown=function(t,n,r){this.unconsume(t,n,r),e.prototype.teardown.call(this,t,n,r)},i.willWatch=function(e,t,n){this.consume(e,t,n)},i.get=function(e,t){var n
return n=Ye(e,this.altKey),this.consume(e,t,(0,r.meta)(e)),n},i.unconsume=function(e,t,n){var r=m(e,t)===st;(r||n.peekWatching(t)>0)&&Be(this,e,t,n),r&&v(e).delete(t)},i.consume=function(e,t,n){var r=v(e)
r.get(t)!==st&&(r.set(t,st),Le(this,e,t,n))},i.set=function(e,t,n){return tt(e,this.altKey,n)},i.readOnly=function(){this.set=lt},i.oneWay=function(){this.set=ht},n}(ze)
function lt(e,t){throw new c.default("Cannot set read-only property '"+t+"' on object: "+(0,o.inspect)(e))}function ht(e,t,n){return ie(e,t,null),tt(e,t,n)}function ft(e){var t=null==e
if(t)return t
if("number"==typeof e.size)return!e.size
var n=typeof e
if("object"===n){var r=Ye(e,"size")
if("number"==typeof r)return!r}if("number"==typeof e.length&&"function"!==n)return!e.length
if("object"===n){var i=Ye(e,"length")
if("number"==typeof i)return!i}return!1}function dt(e){return ft(e)||"string"==typeof e&&!1===/\S/.test(e)}var pt=function(){function e(){this._registry=[],this._coreLibIndex=0}var t=e.prototype
return t._getLibraryByName=function(e){for(var t=this._registry,n=t.length,r=0;r<n;r++)if(t[r].name===e)return t[r]},t.register=function(e,t,n){var r=this._registry.length
this._getLibraryByName(e)||(n&&(r=this._coreLibIndex++),this._registry.splice(r,0,{name:e,version:t}))},t.registerCoreLibrary=function(e,t){this.register(e,t,!0)},t.deRegister=function(e){var t,n=this._getLibraryByName(e)
n&&(t=this._registry.indexOf(n),this._registry.splice(t,1))},e}()
e.Libraries=pt
var vt=new pt
e.libraries=vt,vt.registerCoreLibrary("Ember",l.default)
var mt=Object.prototype.hasOwnProperty,gt=!1,yt={_set:0,_unprocessedNamespaces:!1,get unprocessedNamespaces(){return this._unprocessedNamespaces},set unprocessedNamespaces(e){this._set++,this._unprocessedNamespaces=e}},bt=!1,xt=[]
e.NAMESPACES=xt
var wt=Object.create(null)
function _t(){if(yt.unprocessedNamespaces)for(var e,t=u.context.lookup,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r]
if((e=i.charCodeAt(0))>=65&&e<=90){var a=kt(t,i)
a&&(0,o.setName)(a,i)}}}function Rt(e){(function e(t,n,r){var i=t.length
var a=t.join(".")
wt[a]=n;(0,o.setName)(n,a)
for(var s in n)if(mt.call(n,s)){var u=n[s]
if(t[i]=s,u&&u.toString===Ct&&void 0===(0,o.getName)(u))(0,o.setName)(u,t.join("."))
else if(u&&u.isNamespace){if(r.has(u))continue
r.add(u),e(t,u,r)}}t.length=i})([e.toString()],e,new Set)}function Et(){var e=yt.unprocessedNamespaces
if(e&&(_t(),yt.unprocessedNamespaces=!1),e||bt){for(var t=xt,n=0;n<t.length;n++)Rt(t[n])
bt=!1}}function Ct(){var e=(0,o.getName)(this)
return void 0!==e?e:(e=function(e){var t
if(!gt){if(Et(),void 0!==(t=(0,o.getName)(e)))return t
var n=e
do{if((n=Object.getPrototypeOf(n))===Function.prototype||n===Object.prototype)break
if(void 0!==(t=(0,o.getName)(e))){t="(subclass of "+t+")"
break}}while(void 0===t)}return t||"(unknown)"}(this),(0,o.setName)(this,e),e)}function kt(e,t){try{var n=e[t]
return(null!==n&&"object"==typeof n||"function"==typeof n)&&n.isNamespace&&n}catch(r){}}e.NAMESPACES_BY_ID=wt
var St=Array.prototype.concat
Array.isArray
function At(e){return"function"==typeof e&&!1!==e.isMethod&&e!==Boolean&&e!==Object&&e!==Number&&e!==Array&&e!==Date&&e!==String}function Tt(e){return"function"==typeof e.get||"function"==typeof e.set}var Ot,It={}
function Nt(e,t,n,r){var i=n[e]||r[e]
return t[e]&&(i=i?St.call(i,t[e]):t[e]),i}function Dt(e,t,n,r,i){if(void 0!==i[t])return n
var a=r[t]
return void 0===a&&void 0===b(e,t)&&(a=e[t]),"function"==typeof a?(0,o.wrap)(n,a):n}function Pt(e,t,r,i,a,s,u,c){w(r)?(a[t]=function(e,t,n,r,i,a){var s,u=x(n)
if(!(u instanceof rt)||void 0===u._getter)return n
if(void 0===r[t]&&(s=x(i[t])),s||(s=b(a,t,e)),void 0===s||!(s instanceof rt))return n
var c,l=(0,o.wrap)(u._getter,s._getter)
if(c=s._setter?u._setter?(0,o.wrap)(u._setter,s._setter):s._setter:u._setter,l!==u._getter||c!==u._setter){var h=Object.create(u)
return h._getter=l,h._setter=c,Ue(h,rt)}return n}(i,t,r,s,a,e),s[t]=void 0):(u&&u.indexOf(t)>=0||"concatenatedProperties"===t||"mergedProperties"===t?r=function(e,t,n,r){var i=r[t]||e[t],a=(0,o.makeArray)(i).concat((0,o.makeArray)(n))
return a}(e,t,r,s):c&&c.indexOf(t)>-1?r=function(e,t,r,i){var a=i[t]||e[t]
if(!a)return r
var s=(0,n.assign)({},a),u=!1
for(var c in r)if(r.hasOwnProperty(c)){var l=r[c]
At(l)?(u=!0,s[c]=Dt(e,c,l,a,{})):s[c]=l}return u&&(s._super=o.ROOT),s}(e,t,r,s):At(r)&&(r=Dt(e,t,r,s,a)),a[t]=void 0,s[t]=r)}function Mt(e,t,n,r){var i=(0,o.getObservers)(n),a=(0,o.getListeners)(n)
if(void 0!==i)for(var s=r?z:U,u=0;u<i.paths.length;u++)s(e,i.paths[u],null,t,i.sync)
if(void 0!==a)for(var c=r?P:M,l=0;l<a.length;l++)c(e,a[l],null,t)}function Ft(e,t,n,r){"function"==typeof n&&Mt(e,t,n,!1),"function"==typeof r&&Mt(e,t,r,!0)}function Lt(e,t){var n,i,a,s={},u={},c=(0,r.meta)(e),l=[]
e._super=o.ROOT,function e(t,n,r,i,o,a){var s,u,c,l,h,f,d
function p(e){delete r[e],delete i[e]}for(var v=0;v<t.length;v++)if(s=t[v],f=n,(u=(d=s)instanceof Ut?f.hasMixin(d)?It:(f.addMixin(d),d.properties):d)!==It)if(u){for(c in o.willMergeMixin&&o.willMergeMixin(u),l=Nt("concatenatedProperties",u,i,o),h=Nt("mergedProperties",u,i,o),u)u.hasOwnProperty(c)&&(a.push(c),Pt(o,c,u[c],n,r,i,l,h))
u.hasOwnProperty("toString")&&(o.toString=u.toString)}else s.mixins&&(e(s.mixins,n,r,i,o,a),s._without&&s._without.forEach(p))}(t,c,s,u,e,l)
for(var f=0;f<l.length;f++)if("constructor"!==(n=l[f])&&u.hasOwnProperty(n)){if(a=s[n],i=u[n],h.ALIAS_METHOD)for(;i&&i instanceof Bt;){var d=Ot(e,i,s,u)
a=d.desc,i=d.value}void 0===a&&void 0===i||(void 0!==b(e,n)?Ft(e,n,null,i):Ft(e,n,e[n],i),ie(e,n,a,i,c))}return e}h.ALIAS_METHOD&&(Ot=function(e,t,n,r){var i,o=t.methodName,a=n[o],s=r[o]
return void 0!==a||void 0!==s||(void 0!==(i=b(e,o))?(a=i,s=void 0):(a=void 0,s=e[o])),{desc:a,value:s}})
var Bt,jt,zt,Ut=function(){function e(e,t){this.properties=function(e){if(void 0!==e){var t=(0,o.getOwnPropertyDescriptors)(e),n=Object.keys(t)
if(n.some(function(e){return Tt(t[e])})){var r={}
return n.forEach(function(n){var i=t[n]
Tt(i)?r[n]=je(i):r[n]=e[n]}),r}}return e}(t),this.mixins=Wt(e),this.ownerConstructor=void 0,this._without=void 0}e.create=function(){bt=!0
for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return new this(t,void 0)},e.mixins=function(e){var t=(0,r.peekMeta)(e),n=[]
return null===t?n:(t.forEachMixins(function(e){e.properties||n.push(e)}),n)}
var t=e.prototype
return t.reopen=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r]
if(0!==n.length){if(this.properties){var i=new e(void 0,this.properties)
this.properties=void 0,this.mixins=[i]}else this.mixins||(this.mixins=[])
return this.mixins=this.mixins.concat(Wt(n)),this}},t.apply=function(e){return Lt(e,[this])},t.applyPartial=function(e){return Lt(e,[this])},t.detect=function(t){if("object"!=typeof t||null===t)return!1
if(t instanceof e)return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set
if(r.has(t))return!1
r.add(t)
if(t===n)return!0
var i=t.mixins
if(i)return i.some(function(t){return e(t,n,r)})
return!1}(t,this)
var n=(0,r.peekMeta)(t)
return null!==n&&n.hasMixin(this)},t.without=function(){for(var t=new e([this]),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
return t._without=r,t},t.keys=function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set
var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set
if(r.has(t))return
r.add(t)
if(t.properties)for(var i=Object.keys(t.properties),o=0;o<i.length;o++)n.add(i[o])
else t.mixins&&t.mixins.forEach(function(t){return e(t,n,r)})
return n}(this)},t.toString=function(){return"(unknown mixin)"},e}()
function Wt(e){var t=e&&e.length||0,n=void 0
if(t>0){n=new Array(t)
for(var r=0;r<t;r++){var i=e[r]
n[r]=i instanceof Ut?i:new Ut(void 0,i)}}return n}e.Mixin=Ut,Ut.prototype.toString=Ct,h.ALIAS_METHOD&&(Bt=function(e){this.methodName=e}),e.aliasMethod=jt,h.ALIAS_METHOD&&(e.aliasMethod=jt=function(e){return new Bt(e)}),e.DEBUG_INJECTION_FUNCTIONS=zt}),e("@ember/-internals/owner/index",["exports","@ember/-internals/utils"],function(e,t){"use strict"
e.getOwner=function(e){return e[n]},e.setOwner=function(e,t){e[n]=t},e.OWNER=void 0
var n=(0,t.symbol)("OWNER")
e.OWNER=n}),e("@ember/-internals/routing/index",["exports","@ember/-internals/routing/lib/ext/controller","@ember/-internals/routing/lib/location/api","@ember/-internals/routing/lib/location/none_location","@ember/-internals/routing/lib/location/hash_location","@ember/-internals/routing/lib/location/history_location","@ember/-internals/routing/lib/location/auto_location","@ember/-internals/routing/lib/system/generate_controller","@ember/-internals/routing/lib/system/controller_for","@ember/-internals/routing/lib/system/dsl","@ember/-internals/routing/lib/system/router","@ember/-internals/routing/lib/system/route","@ember/-internals/routing/lib/system/query_params","@ember/-internals/routing/lib/services/routing","@ember/-internals/routing/lib/services/router","@ember/-internals/routing/lib/system/cache"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v){"use strict"
Object.defineProperty(e,"Location",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"NoneLocation",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"HashLocation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HistoryLocation",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"AutoLocation",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"generateController",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"generateControllerFactory",{enumerable:!0,get:function(){return s.generateControllerFactory}}),Object.defineProperty(e,"controllerFor",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"RouterDSL",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Router",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Route",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"QueryParams",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"RoutingService",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"RouterService",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"BucketCache",{enumerable:!0,get:function(){return v.default}})}),e("@ember/-internals/routing/lib/ext/controller",["exports","@ember/-internals/metal","@ember/controller/lib/controller_mixin","@ember/-internals/routing/lib/utils"],function(e,t,n,r){"use strict"
e.default=void 0,n.default.reopen({concatenatedProperties:["queryParams"],queryParams:null,_qpDelegate:null,_qpChanged:function(e,n){var r=n.indexOf(".[]"),i=-1===r?n:n.slice(0,r);(0,e._qpDelegate)(i,(0,t.get)(e,i))},transitionToRoute:function(){for(var e=(0,t.get)(this,"target"),n=e.transitionToRoute||e.transitionTo,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a]
return n.apply(e,(0,r.prefixRouteNameArg)(this,o))},replaceRoute:function(){for(var e=(0,t.get)(this,"target"),n=e.replaceRoute||e.replaceWith,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a]
return n.apply(e,(0,r.prefixRouteNameArg)(this,o))}})
var i=n.default
e.default=i}),e("@ember/-internals/routing/lib/location/api",["exports","@ember/debug"],function(e,t){"use strict"
e.default=void 0
var n={create:function(e){var t=e&&e.implementation,n=this.implementations[t]
return n.create.apply(n,arguments)},implementations:{}}
e.default=n}),e("@ember/-internals/routing/lib/location/auto_location",["exports","ember-babel","@ember/-internals/browser-environment","@ember/-internals/metal","@ember/-internals/owner","@ember/-internals/runtime","@ember/-internals/utils","@ember/debug","@ember/-internals/routing/lib/location/util"],function(e,t,n,r,i,o,a,s,u){"use strict"
e.getHistoryPath=h,e.getHashPath=f,e.default=void 0
var c=function(e){function n(){var t
return(t=e.apply(this,arguments)||this).implementation="auto",t}(0,t.inheritsLoose)(n,e)
var o=n.prototype
return o.detect=function(){var e=this.rootURL,t=function(e){var t=e.location,n=e.userAgent,r=e.history,i=e.documentMode,o=e.global,a=e.rootURL,s="none",c=!1,l=(0,u.getFullPath)(t)
if((0,u.supportsHistory)(n,r)){var d=h(a,t)
l===d?s="history":"/#"===l.substr(0,2)?(r.replaceState({path:d},"",d),s="history"):(c=!0,(0,u.replacePath)(t,d))}else if((0,u.supportsHashChange)(i,o)){var p=f(a,t)
l===p||"/"===l&&"/#/"===p?s="hash":(c=!0,(0,u.replacePath)(t,p))}if(c)return!1
return s}({location:this.location,history:this.history,userAgent:this.userAgent,rootURL:e,documentMode:this.documentMode,global:this.global})
!1===t&&((0,r.set)(this,"cancelRouterSetup",!0),t="none")
var n=(0,i.getOwner)(this).lookup("location:"+t);(0,r.set)(n,"rootURL",e),(0,r.set)(this,"concreteImplementation",n)},o.willDestroy=function(){var e=this.concreteImplementation
e&&e.destroy()},n}(o.Object)
function l(e){return function(){for(var t=this.concreteImplementation,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
return(0,a.tryInvoke)(t,e,r)}}function h(e,t){var n,r,i=(0,u.getPath)(t),o=(0,u.getHash)(t),a=(0,u.getQuery)(t)
i.indexOf(e)
return"#/"===o.substr(0,2)?(n=(r=o.substr(1).split("#")).shift(),"/"===i.charAt(i.length-1)&&(n=n.substr(1)),i+=n+a,r.length&&(i+="#"+r.join("#"))):i+=a+o,i}function f(e,t){var n=e,r=h(e,t).substr(e.length)
return""!==r&&("/"!==r[0]&&(r="/"+r),n+="#"+r),n}e.default=c,c.reopen({rootURL:"/",initState:l("initState"),getURL:l("getURL"),setURL:l("setURL"),replaceURL:l("replaceURL"),onUpdateURL:l("onUpdateURL"),formatURL:l("formatURL"),location:n.location,history:n.history,global:n.window,userAgent:n.userAgent,cancelRouterSetup:!1})}),e("@ember/-internals/routing/lib/location/hash_location",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/runtime","@ember/runloop","@ember/-internals/routing/lib/location/util"],function(e,t,n,r,i,o){"use strict"
e.default=void 0
var a=function(e){function r(){var t
return(t=e.apply(this,arguments)||this).implementation="hash",t}(0,t.inheritsLoose)(r,e)
var a=r.prototype
return a.init=function(){(0,n.set)(this,"location",this._location||window.location),this._hashchangeHandler=void 0},a.getHash=function(){return(0,o.getHash)(this.location)},a.getURL=function(){var e=this.getHash().substr(1),t=e
return"/"!==t[0]&&(t="/",e&&(t+="#"+e)),t},a.setURL=function(e){this.location.hash=e,(0,n.set)(this,"lastSetURL",e)},a.replaceURL=function(e){this.location.replace("#"+e),(0,n.set)(this,"lastSetURL",e)},a.onUpdateURL=function(e){this._removeEventListener(),this._hashchangeHandler=(0,i.bind)(this,function(){var t=this.getURL()
this.lastSetURL!==t&&((0,n.set)(this,"lastSetURL",null),e(t))}),window.addEventListener("hashchange",this._hashchangeHandler)},a.formatURL=function(e){return"#"+e},a.willDestroy=function(){this._removeEventListener()},a._removeEventListener=function(){this._hashchangeHandler&&window.removeEventListener("hashchange",this._hashchangeHandler)},r}(r.Object)
e.default=a}),e("@ember/-internals/routing/lib/location/history_location",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/runtime","@ember/-internals/routing/lib/location/util"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=!1
function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t
return t=16*Math.random()|0,("x"===e?t:3&t|8).toString(16)})}var s=function(e){function r(){var t
return(t=e.apply(this,arguments)||this).implementation="history",t.rootURL="/",t}(0,t.inheritsLoose)(r,e)
var s=r.prototype
return s.getHash=function(){return(0,i.getHash)(this.location)},s.init=function(){this._super.apply(this,arguments)
var e=document.querySelector("base"),t=""
e&&(t=e.getAttribute("href")),(0,n.set)(this,"baseURL",t),(0,n.set)(this,"location",this.location||window.location),this._popstateHandler=void 0},s.initState=function(){var e=this.history||window.history;(0,n.set)(this,"history",e),e&&"state"in e&&(this.supportsHistory=!0)
var t=this.getState(),r=this.formatURL(this.getURL())
t&&t.path===r?this._previousURL=this.getURL():this.replaceState(r)},s.getURL=function(){var e=this.location,t=this.rootURL,n=this.baseURL,r=e.pathname
t=t.replace(/\/$/,""),n=n.replace(/\/$/,"")
var i=r.replace(new RegExp("^"+n+"(?=/|$)"),"").replace(new RegExp("^"+t+"(?=/|$)"),"").replace(/\/\//g,"/")
return i+=(e.search||"")+this.getHash()},s.setURL=function(e){var t=this.getState()
e=this.formatURL(e),t&&t.path===e||this.pushState(e)},s.replaceURL=function(e){var t=this.getState()
e=this.formatURL(e),t&&t.path===e||this.replaceState(e)},s.getState=function(){return this.supportsHistory?this.history.state:this._historyState},s.pushState=function(e){var t={path:e,uuid:a()}
this.history.pushState(t,null,e),this._historyState=t,this._previousURL=this.getURL()},s.replaceState=function(e){var t={path:e,uuid:a()}
this.history.replaceState(t,null,e),this._historyState=t,this._previousURL=this.getURL()},s.onUpdateURL=function(e){var t=this
this._removeEventListener(),this._popstateHandler=function(){(o||(o=!0,t.getURL()!==t._previousURL))&&e(t.getURL())},window.addEventListener("popstate",this._popstateHandler)},s.formatURL=function(e){var t=this.rootURL,n=this.baseURL
return""!==e?(t=t.replace(/\/$/,""),n=n.replace(/\/$/,"")):"/"===n[0]&&"/"===t[0]&&(n=n.replace(/\/$/,"")),n+t+e},s.willDestroy=function(){this._removeEventListener()},s._removeEventListener=function(){this._popstateHandler&&window.removeEventListener("popstate",this._popstateHandler)},r}(r.Object)
e.default=s}),e("@ember/-internals/routing/lib/location/none_location",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/runtime","@ember/debug"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=function(e){function r(){var t
return(t=e.apply(this,arguments)||this).implementation="none",t}(0,t.inheritsLoose)(r,e)
var i=r.prototype
return i.detect=function(){this.rootURL},i.getURL=function(){var e=this.path,t=this.rootURL
return t=t.replace(/\/$/,""),e.replace(new RegExp("^"+t+"(?=/|$)"),"")},i.setURL=function(e){(0,n.set)(this,"path",e)},i.onUpdateURL=function(e){this.updateCallback=e},i.handleURL=function(e){(0,n.set)(this,"path",e),this.updateCallback(e)},i.formatURL=function(e){var t=this.rootURL
return""!==e&&(t=t.replace(/\/$/,"")),t+e},r}(r.Object)
e.default=o,o.reopen({path:"",rootURL:"/"})}),e("@ember/-internals/routing/lib/location/util",["exports"],function(e){"use strict"
function t(e){var t=e.pathname
return"/"!==t[0]&&(t="/"+t),t}function n(e){return e.search}function r(e){return void 0!==e.hash?e.hash.substr(0):""}function i(e){var t=e.origin
return t||(t=e.protocol+"//"+e.hostname,e.port&&(t+=":"+e.port)),t}e.getPath=t,e.getQuery=n,e.getHash=r,e.getFullPath=function(e){return t(e)+n(e)+r(e)},e.getOrigin=i,e.supportsHashChange=function(e,t){return t&&"onhashchange"in t&&(void 0===e||e>7)},e.supportsHistory=function(e,t){if((-1!==e.indexOf("Android 2.")||-1!==e.indexOf("Android 4.0"))&&-1!==e.indexOf("Mobile Safari")&&-1===e.indexOf("Chrome")&&-1===e.indexOf("Windows Phone"))return!1
return Boolean(t&&"pushState"in t)},e.replacePath=function(e,t){e.replace(i(e)+t)}}),e("@ember/-internals/routing/lib/services/router",["exports","ember-babel","@ember/-internals/runtime","@ember/debug","@ember/object/computed","@ember/service","@ember/-internals/routing/lib/utils"],function(e,t,n,r,i,o,a){"use strict"
function s(e,t){return"/"===t?e:e.substr(t.length,e.length)}e.default=void 0
var u=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.init=function(){var t=this
e.prototype.init.apply(this,arguments),this._router.on("routeWillChange",function(e){t.trigger("routeWillChange",e)}),this._router.on("routeDidChange",function(e){t.trigger("routeDidChange",e)})},r.transitionTo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
if((0,a.resemblesURL)(t[0]))return this._router._doURLTransition("transitionTo",t[0])
var r=(0,a.extractRouteArgs)(t),i=r.routeName,o=r.models,s=r.queryParams,u=this._router._doTransition(i,o,s,!0)
return u._keepDefaultQueryParamValues=!0,u},r.replaceWith=function(){return this.transitionTo.apply(this,arguments).method("replace")},r.urlFor=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i]
return(t=this._router).generate.apply(t,[e].concat(r))},r.isActive=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=(0,a.extractRouteArgs)(t),i=r.routeName,o=r.models,s=r.queryParams,u=this._router._routerMicrolib
return!!u.isActiveIntent(i,o)&&(!(Object.keys(s).length>0)||(this._router._prepareQueryParams(i,o,s,!0),(0,a.shallowEqual)(s,u.state.queryParams)))},r.recognize=function(e){var t=s(e,this.rootURL)
return this._router._routerMicrolib.recognize(t)},r.recognizeAndLoad=function(e){var t=s(e,this.rootURL)
return this._router._routerMicrolib.recognizeAndLoad(t)},n}(o.default)
e.default=u,u.reopen(n.Evented,{currentRouteName:(0,i.readOnly)("_router.currentRouteName"),currentURL:(0,i.readOnly)("_router.currentURL"),location:(0,i.readOnly)("_router.location"),rootURL:(0,i.readOnly)("_router.rootURL"),currentRoute:(0,i.readOnly)("_router.currentRoute")})}),e("@ember/-internals/routing/lib/services/routing",["exports","ember-babel","@ember/object/computed","@ember/polyfills","@ember/service"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var i=n.prototype
return i.hasRoute=function(e){return this.router.hasRoute(e)},i.transitionTo=function(e,t,n,r){var i=this.router._doTransition(e,t,n)
return r&&i.method("replace"),i},i.normalizeQueryParams=function(e,t,n){this.router._prepareQueryParams(e,t,n)},i.generateURL=function(e,t,n){var i=this.router
if(i._routerMicrolib){var o={}
return n&&((0,r.assign)(o,n),this.normalizeQueryParams(e,t,o)),i.generate.apply(i,[e].concat(t,[{queryParams:o}]))}},i.isActiveForRoute=function(e,t,n,r,i){var o=this.router._routerMicrolib.recognizer.handlersFor(n),a=o[o.length-1].handler,s=function(e,t){for(var n=0,r=0;r<t.length&&(n+=t[r].names.length,t[r].handler!==e);r++);return n}(n,o)
return e.length>s&&(n=a),r.isActiveIntent(n,e,t,!i)},n}(i.default)
e.default=o,o.reopen({targetState:(0,n.readOnly)("router.targetState"),currentState:(0,n.readOnly)("router.currentState"),currentRouteName:(0,n.readOnly)("router.currentRouteName"),currentPath:(0,n.readOnly)("router.currentPath")})}),e("@ember/-internals/routing/lib/system/cache",["exports"],function(e){"use strict"
e.default=void 0
var t=function(){function e(){this.cache=new Map}var t=e.prototype
return t.has=function(e){return this.cache.has(e)},t.stash=function(e,t,n){var r=this.cache.get(e)
void 0===r&&(r=new Map,this.cache.set(e,r)),r.set(t,n)},t.lookup=function(e,t,n){if(!this.has(e))return n
var r=this.cache.get(e)
return r.has(t)?r.get(t):n},e}()
e.default=t}),e("@ember/-internals/routing/lib/system/controller_for",["exports"],function(e){"use strict"
e.default=function(e,t,n){return e.lookup("controller:"+t,n)}}),e("@ember/-internals/routing/lib/system/dsl",["exports","@ember/debug","@ember/polyfills"],function(e,t,n){"use strict"
e.default=void 0
var r=0
function i(e){return"function"==typeof e}var o=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0
this.explicitIndex=!1,this.parent=e,this.enableLoadingSubstates=Boolean(t&&t.enableLoadingSubstates),this.matches=[],this.options=t}var t=e.prototype
return t.route=function(t,n,r){var o,u=null,c="/_unused_dummy_error_path_route_"+t+"/:error"
if(i(n)?(o={},u=n):i(r)?(o=n,u=r):o=n||{},this.enableLoadingSubstates&&(s(this,t+"_loading",{resetNamespace:o.resetNamespace}),s(this,t+"_error",{resetNamespace:o.resetNamespace,path:c})),u){var l=new e(a(this,t,o.resetNamespace),this.options)
s(l,"loading"),s(l,"error",{path:c}),u.call(l),s(this,t,o,l.generate())}else s(this,t,o)},t.push=function(e,t,r,i){var o=t.split(".")
if(this.options.engineInfo){var a=t.slice(this.options.engineInfo.fullName.length+1),s=(0,n.assign)({localFullName:a},this.options.engineInfo)
i&&(s.serializeMethod=i),this.options.addRouteForEngine(t,s)}else if(i)throw new Error("Defining a route serializer on route '"+t+"' outside an Engine is not allowed.")
""!==e&&"/"!==e&&"index"!==o[o.length-1]||(this.explicitIndex=!0),this.matches.push(e,t,r)},t.generate=function(){var e=this.matches
return this.explicitIndex||this.route("index",{path:"/"}),function(t){for(var n=0;n<e.length;n+=3)t(e[n]).to(e[n+1],e[n+2])}},t.mount=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.options.resolveRouteMap(t),u=t
i.as&&(u=i.as)
var c,l=a(this,u,i.resetNamespace),h={name:t,instanceId:r++,mountPoint:l,fullName:l},f=i.path
"string"!=typeof f&&(f="/"+u)
var d="/_unused_dummy_error_path_route_"+u+"/:error"
if(o){var p=!1,v=this.options.engineInfo
v&&(p=!0,this.options.engineInfo=h)
var m=new e(l,(0,n.assign)({engineInfo:h},this.options))
s(m,"loading"),s(m,"error",{path:d}),o.class.call(m),c=m.generate(),p&&(this.options.engineInfo=v)}var g=(0,n.assign)({localFullName:"application"},h)
if(this.enableLoadingSubstates){var y=u+"_loading",b="application_loading",x=(0,n.assign)({localFullName:b},h)
s(this,y,{resetNamespace:i.resetNamespace}),this.options.addRouteForEngine(y,x),y=u+"_error",b="application_error",x=(0,n.assign)({localFullName:b},h),s(this,y,{resetNamespace:i.resetNamespace,path:d}),this.options.addRouteForEngine(y,x)}this.options.addRouteForEngine(l,g),this.push(f,l,c)},e}()
function a(e,t,n){return function(e){return"application"!==e.parent}(e)&&!0!==n?e.parent+"."+t:t}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=a(e,t,n.resetNamespace)
"string"!=typeof n.path&&(n.path="/"+t),e.push(n.path,i,r,n.serialize)}e.default=o}),e("@ember/-internals/routing/lib/system/engines",[],function(){}),e("@ember/-internals/routing/lib/system/generate_controller",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
function r(e,t){var n=e.factoryFor("controller:basic").class
n=n.extend({toString:function(){return"(generated "+t+" controller)"}})
var r="controller:"+t
return e.register(r,n),e.factoryFor(r)}e.generateControllerFactory=r,e.default=function(e,t){r(e,t)
var n="controller:"+t,i=e.lookup(n)
0
return i}})
e("@ember/-internals/routing/lib/system/query_params",["exports"],function(e){"use strict"
e.default=void 0
e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
this.isQueryParams=!0,this.values=e}}),e("@ember/-internals/routing/lib/system/route-info",[],function(){}),e("@ember/-internals/routing/lib/system/route",["exports","@ember/polyfills","ember-babel","@ember/-internals/metal","@ember/-internals/owner","@ember/-internals/runtime","@ember/debug","@ember/deprecated-features","@ember/runloop","@ember/string","router_js","@ember/-internals/routing/lib/utils","@ember/-internals/routing/lib/system/generate_controller"],function(e,t,n,r,i,o,a,s,u,c,l,h,f){"use strict"
e.defaultSerialize=p,e.hasDefaultSerialize=function(e){return e.serialize===p},e.default=e.ROUTER_EVENT_DEPRECATIONS=e.ROUTE_CONNECTIONS=void 0
var d=new WeakMap
function p(e,t){if(!(t.length<1)&&e){var n={}
if(1===t.length){var i=t[0]
i in e?n[i]=(0,r.get)(e,i):/_id$/.test(i)&&(n[i]=(0,r.get)(e,"id"))}else n=(0,r.getProperties)(e,t)
return n}}e.ROUTE_CONNECTIONS=d
var v,m=function(e){function o(){var t
return(t=e.apply(this,arguments)||this).context={},t}(0,n.inheritsLoose)(o,e)
var a=o.prototype
return a._setRouteName=function(e){this.routeName=e,this.fullRouteName=x((0,i.getOwner)(this),e)},a._stashNames=function(e,t){if(!this._names){var n=this._names=e._names
n.length||(n=(e=t)&&e._names||[])
for(var i=(0,r.get)(this,"_qp.qps"),o=new Array(n.length),a=0;a<n.length;++a)o[a]=e.name+"."+n[a]
for(var s=0;s<i.length;++s){var u=i[s]
"model"===u.scope&&(u.parts=o)}}},a._activeQPChanged=function(e,t){this._router._activeQPChanged(e.scopedPropertyName,t)},a._updatingQPChanged=function(e){this._router._updatingQPChanged(e.urlKey)},a.paramsFor=function(e){var n=(0,i.getOwner)(this).lookup("route:"+e)
if(!n)return{}
var r=this._router._routerMicrolib.activeTransition,o=r?r[l.STATE_SYMBOL]:this._router._routerMicrolib.state,a=n.fullRouteName,s=(0,t.assign)({},o.params[a]),u=y(n,o)
return Object.keys(u).reduce(function(e,t){return e[t]=u[t],e},s)},a.serializeQueryParamKey=function(e){return e},a.serializeQueryParam=function(e,t,n){return this._router._serializeQueryParam(e,n)},a.deserializeQueryParam=function(e,t,n){return this._router._deserializeQueryParam(e,n)},a._optionsForQueryParam=function(e){return(0,r.get)(this,"queryParams."+e.urlKey)||(0,r.get)(this,"queryParams."+e.prop)||{}},a.resetController=function(e,t,n){return this},a.exit=function(){this.deactivate(),this.trigger("deactivate"),this.teardownViews()},a._internalReset=function(e,t){var n=this.controller
n._qpDelegate=(0,r.get)(this,"_qp.states.inactive"),this.resetController(n,e,t)},a.enter=function(){d.set(this,[]),this.activate(),this.trigger("activate")},a.deactivate=function(){},a.activate=function(){},a.transitionTo=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r]
return(e=this._router).transitionTo.apply(e,(0,h.prefixRouteNameArg)(this,n))},a.intermediateTransitionTo=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r]
var i=(0,h.prefixRouteNameArg)(this,n),o=i[0],a=i.slice(1);(e=this._router).intermediateTransitionTo.apply(e,[o].concat(a))},a.refresh=function(){return this._router._routerMicrolib.refresh(this)},a.replaceWith=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r]
return(e=this._router).replaceWith.apply(e,(0,h.prefixRouteNameArg)(this,n))},a.setup=function(e,t){var n,i=this.controllerName||this.routeName,o=this.controllerFor(i,!0)
if(n=o||this.generateController(i),!this.controller){var a=(0,r.get)(this,"_qp"),s=void 0!==a?(0,r.get)(a,"propertyNames"):[];(function(e,t){t.forEach(function(t){e.addObserver(t+".[]",e,e._qpChanged)})})(n,s),this.controller=n}var u=(0,r.get)(this,"_qp"),c=u.states
if(n._qpDelegate=c.allowOverrides,t){(0,h.stashParamNames)(this._router,t[l.STATE_SYMBOL].routeInfos)
var f=this._bucketCache,d=t[l.PARAMS_SYMBOL]
u.propertyNames.forEach(function(e){var t=u.map[e]
t.values=d
var i=(0,h.calculateCacheKey)(t.route.fullRouteName,t.parts,t.values),o=f.lookup(i,e,t.undecoratedDefaultValue);(0,r.set)(n,e,o)})
var p=y(this,t[l.STATE_SYMBOL]);(0,r.setProperties)(n,p)}this.setupController(n,e,t),this._environment.options.shouldRender&&this.renderTemplate(n,e)},a._qpChanged=function(e,t,n){if(n){var r=this._bucketCache,i=(0,h.calculateCacheKey)(n.route.fullRouteName,n.parts,n.values)
r.stash(i,e,t)}},a.beforeModel=function(){},a.afterModel=function(){},a.redirect=function(){},a.contextDidChange=function(){this.currentModel=this.context},a.model=function(e,n){var i,o,a,s=(0,r.get)(this,"_qp.map")
for(var u in e)if(!("queryParams"===u||s&&u in s)){var c=u.match(/^(.*)_id$/)
null!==c&&(i=c[1],a=e[u]),o=!0}if(!i){if(o)return(0,t.assign)({},e)
if(n.resolveIndex<1)return
return n[l.STATE_SYMBOL].routeInfos[n.resolveIndex-1].context}return this.findModel(i,a)},a.deserialize=function(e,t){return this.model(this._paramsFor(this.routeName,e),t)},a.findModel=function(){var e
return(e=(0,r.get)(this,"store")).find.apply(e,arguments)},a.setupController=function(e,t,n){e&&void 0!==t&&(0,r.set)(e,"model",t)},a.controllerFor=function(e,t){var n=(0,i.getOwner)(this),r=n.lookup("route:"+e)
return r&&r.controllerName&&(e=r.controllerName),n.lookup("controller:"+e)},a.generateController=function(e){var t=(0,i.getOwner)(this)
return(0,f.default)(t,e)},a.modelFor=function(e){var t,n=(0,i.getOwner)(this),r=this._router&&this._router._routerMicrolib?this._router._routerMicrolib.activeTransition:void 0
t=n.routable&&void 0!==r?x(n,e):e
var o=n.lookup("route:"+t)
if(null!=r){var a=o&&o.routeName||t
if(r.resolvedModels.hasOwnProperty(a))return r.resolvedModels[a]}return o&&o.currentModel},a.renderTemplate=function(e,t){this.render()},a.render=function(e,t){var n,r=0===arguments.length
r||("object"!=typeof e||t?n=e:(n=this.templateName||this.routeName,t=e))
var o=function(e,t,n,r){var o,a,s,u,c,l,h=(0,i.getOwner)(e)
r&&(s=r.into&&r.into.replace(/\//g,"."),u=r.outlet,c=r.controller,l=r.model)
u=u||"main",t?(o=e.routeName,a=e.templateName||o):(o=n.replace(/\//g,"."),a=o)
c||(c=t?e.controllerName||h.lookup("controller:"+o):h.lookup("controller:"+o)||e.controllerName||e.routeName)
if("string"==typeof c){var f=c
c=h.lookup("controller:"+f)}l&&c.set("model",l)
var d,p=h.lookup("template:"+a)
s&&(d=g(e))&&s===d.routeName&&(s=void 0)
var v={owner:h,into:s,outlet:u,name:o,controller:c,template:p||e._topLevelViewTemplate}
return v}(this,r,n,t)
d.get(this).push(o),(0,u.once)(this._router,"_setOutlets")},a.disconnectOutlet=function(e){var t,n
e&&("string"==typeof e?t=e:(t=e.outlet,n=e.parentView?e.parentView.replace(/\//g,"."):void 0)),t=t||"main",this._disconnectOutlet(t,n)
for(var r=this._router._routerMicrolib.currentRouteInfos,i=0;i<r.length;i++)r[i].route._disconnectOutlet(t,n)},a._disconnectOutlet=function(e,t){var n=g(this)
n&&t===n.routeName&&(t=void 0)
for(var r=d.get(this),i=0;i<r.length;i++){var o=r[i]
o.outlet===e&&o.into===t&&(r[i]={owner:o.owner,into:o.into,outlet:o.outlet,name:o.name,controller:void 0,template:void 0},(0,u.once)(this._router,"_setOutlets"))}d.set(this,r)},a.willDestroy=function(){this.teardownViews()},a.teardownViews=function(){var e=d.get(this)
void 0!==e&&e.length>0&&(d.set(this,[]),(0,u.once)(this._router,"_setOutlets"))},a.buildRouteInfoMetadata=function(){},o}(o.Object)
function g(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
if(!t)return
for(var r=0;r<t.length;r++)if(t[r].route===e)return t[r+n]
return}(e,e._router._routerMicrolib.state.routeInfos,-1)
return t&&t.route}function y(e,n){n.queryParamsFor=n.queryParamsFor||{}
var i=e.fullRouteName
if(n.queryParamsFor[i])return n.queryParamsFor[i]
for(var o=function(e,n){return n.fullQueryParams?n.fullQueryParams:(n.fullQueryParams={},(0,t.assign)(n.fullQueryParams,n.queryParams),e._deserializeQueryParams(n.routeInfos,n.fullQueryParams),n.fullQueryParams)}(e._router,n),a=n.queryParamsFor[i]={},s=(0,r.get)(e,"_qp.qps"),u=0;u<s.length;++u){var c=s[u],l=c.prop in o
a[c.prop]=l?o[c.prop]:b(c.defaultValue)}return a}function b(e){return Array.isArray(e)?(0,o.A)(e.slice()):e}function x(e,t){if(e.routable){var n=e.mountPoint
return"application"===t?n:n+"."+t}return t}m.reopenClass({isRouteFactory:!0}),m.prototype.serialize=p,m.reopen(o.ActionHandler,o.Evented,{mergedProperties:["queryParams"],queryParams:{},templateName:null,_names:null,controllerName:null,store:(0,r.computed)({get:function(){var e=(0,i.getOwner)(this)
this.routeName,(0,r.get)(this,"_router.namespace")
return{find:function(t,n){var r=e.factoryFor("model:"+t)
if(r)return(r=r.class).find(n)}}},set:function(e,t){(0,r.defineProperty)(this,e,null,t)}}),_qp:(0,r.computed)(function(){var e,n=this,a=this.controllerName||this.routeName,s=(0,i.getOwner)(this),u=s.lookup("controller:"+a),c=(0,r.get)(this,"queryParams"),l=Object.keys(c).length>0
if(u){var d=(0,r.get)(u,"queryParams")||{}
e=function(e,n){var r={},i={defaultValue:!0,type:!0,scope:!0,as:!0}
for(var o in e)if(e.hasOwnProperty(o)){var a={};(0,t.assign)(a,e[o],n[o]),r[o]=a,i[o]=!0}for(var s in n)if(n.hasOwnProperty(s)&&!i[s]){var u={};(0,t.assign)(u,n[s],e[s]),r[s]=u}return r}((0,h.normalizeControllerQueryParams)(d),c)}else l&&(u=(0,f.default)(s,a),e=c)
var p=[],v={},m=[]
for(var g in e)if(e.hasOwnProperty(g)&&"unknownProperty"!==g&&"_super"!==g){var y=e[g],x=y.scope||"model",w=void 0
"controller"===x&&(w=[])
var _=y.as||this.serializeQueryParamKey(g),R=(0,r.get)(u,g)
R=b(R)
var E=y.type||(0,o.typeOf)(R),C=this.serializeQueryParam(R,_,E),k=a+":"+g,S={undecoratedDefaultValue:(0,r.get)(u,g),defaultValue:R,serializedDefaultValue:C,serializedValue:C,type:E,urlKey:_,prop:g,scopedPropertyName:k,controllerName:a,route:this,parts:w,values:null,scope:x}
v[g]=v[_]=v[k]=S,p.push(S),m.push(g)}return{qps:p,map:v,propertyNames:m,states:{inactive:function(e,t){var r=v[e]
n._qpChanged(e,t,r)},active:function(e,t){var r=v[e]
return n._qpChanged(e,t,r),n._activeQPChanged(r,t)},allowOverrides:function(e,t){var r=v[e]
return n._qpChanged(e,t,r),n._updatingQPChanged(r)}}}}),send:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
if(this._router&&this._router._routerMicrolib||!(0,a.isTesting)()){var r;(r=this._router).send.apply(r,t)}else{var i=t.shift(),o=this.actions[i]
if(o)return o.apply(this,t)}},actions:{queryParamsDidChange:function(e,t,n){for(var i=(0,r.get)(this,"_qp").map,o=Object.keys(e).concat(Object.keys(n)),a=0;a<o.length;++a){var s=i[o[a]]
if(s&&(0,r.get)(this._optionsForQueryParam(s),"refreshModel")&&this._router.currentState){this.refresh()
break}}return!0},finalizeQueryParamChange:function(e,t,n){if("application"!==this.fullRouteName)return!0
if(n){var i,o=n[l.STATE_SYMBOL].routeInfos,a=this._router,s=a._queryParamsFor(o),u=a._qpUpdates;(0,h.stashParamNames)(a,o)
for(var c=0;c<s.qps.length;++c){var f=s.qps[c],d=f.route,p=d.controller,v=f.urlKey in e&&f.urlKey,m=void 0,g=void 0
if(u.has(f.urlKey)?(m=(0,r.get)(p,f.prop),g=d.serializeQueryParam(m,f.urlKey,f.type)):v?void 0!==(g=e[v])&&(m=d.deserializeQueryParam(g,f.urlKey,f.type)):(g=f.serializedDefaultValue,m=b(f.defaultValue)),p._qpDelegate=(0,r.get)(d,"_qp.states.inactive"),g!==f.serializedValue){if(n.queryParamsOnly&&!1!==i){var y=d._optionsForQueryParam(f),x=(0,r.get)(y,"replace")
x?i=!0:!1===x&&(i=!1)}(0,r.set)(p,f.prop,m)}f.serializedValue=g,f.serializedDefaultValue===g&&!n._keepDefaultQueryParamValues||t.push({value:g,visible:!0,key:v||f.urlKey})}i&&n.method("replace"),s.qps.forEach(function(e){var t=(0,r.get)(e.route,"_qp")
e.route.controller._qpDelegate=(0,r.get)(t,"states.active")}),a._qpUpdates.clear()}}}}),e.ROUTER_EVENT_DEPRECATIONS=v,s.ROUTER_EVENTS&&(e.ROUTER_EVENT_DEPRECATIONS=v={on:function(e){this._super.apply(this,arguments)}},m.reopen(v,{_paramsFor:function(e,t){return void 0!==this._router._routerMicrolib.activeTransition?this.paramsFor(e):t}})),(0,o.setFrameworkClass)(m)
var w=m
e.default=w}),e("@ember/-internals/routing/lib/system/router",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/owner","@ember/-internals/runtime","@ember/debug","@ember/deprecated-features","@ember/error","@ember/polyfills","@ember/runloop","@ember/-internals/routing/lib/location/api","@ember/-internals/routing/lib/utils","@ember/-internals/routing/lib/system/dsl","@ember/-internals/routing/lib/system/route","@ember/-internals/routing/lib/system/router_state","router_js"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v){"use strict"
function m(e){A(this),this._cancelSlowTransitionTimer(),this.notifyPropertyChange("url"),this.set("currentState",this.targetState),(0,c.once)(this,this.trigger,"didTransition")}function g(e,t,n){(0,c.once)(this,this.trigger,"willTransition",n)}function y(){return this}e.triggerEvent=k,e.default=void 0
var b=Array.prototype.slice,x=function(e){function o(){var t
return(t=e.apply(this,arguments)||this).currentURL=null,t.currentRouteName=null,t.currentPath=null,t.currentRoute=null,t._qpCache=Object.create(null),t._qpUpdates=new Set,t._handledErrors=new Set,t._engineInstances=Object.create(null),t._engineInfoByRoute=Object.create(null),t.currentState=null,t.targetState=null,t._resetQueuedQueryParameterChanges(),t}(0,t.inheritsLoose)(o,e)
var s=o.prototype
return s._initRouterJs=function(){var e=(0,n.get)(this,"location"),i=this,o=(0,r.getOwner)(this),s=Object.create(null),u=function(r){function u(){return r.apply(this,arguments)||this}(0,t.inheritsLoose)(u,r)
var l=u.prototype
return l.getRoute=function(e){var t=e,n=o,r=i._engineInfoByRoute[t]
r&&(n=i._getEngineInstance(r),t=r.localFullName)
var a="route:"+t,u=n.lookup(a)
if(s[e])return u
if(s[e]=!0,!u){var c=n.factoryFor("route:basic").class
n.register(a,c.extend()),u=n.lookup(a)}if(u._setRouteName(t),r&&!(0,d.hasDefaultSerialize)(u))throw new Error("Defining a custom serialize method on an Engine route is not supported.")
return u},l.getSerializer=function(e){var t=i._engineInfoByRoute[e]
if(t)return t.serializeMethod||d.defaultSerialize},l.updateURL=function(t){(0,c.once)(function(){e.setURL(t),(0,n.set)(i,"currentURL",t)})},l.didTransition=function(e){a.ROUTER_EVENTS&&i.didTransition,i.didTransition(e)},l.willTransition=function(e,t,n){a.ROUTER_EVENTS&&i.willTransition,i.willTransition(e,t,n)},l.triggerEvent=function(e,t,n,r){return k.bind(i)(e,t,n,r)},l.routeWillChange=function(e){i.trigger("routeWillChange",e)},l.routeDidChange=function(e){i.set("currentRoute",e.to),(0,c.once)(function(){i.trigger("routeDidChange",e)})},l.transitionDidError=function(e,t){return e.wasAborted||t.isAborted?(0,v.logAbort)(t):(t.trigger(!1,"error",e.error,t,e.route),i._isErrorHandled(e.error)?(t.rollback(),this.routeDidChange(t),e.error):(t.abort(),e.error))},l._triggerWillChangeContext=function(){return i},l._triggerWillLeave=function(){return i},l.replaceURL=function(t){if(e.replaceURL){(0,c.once)(function(){e.replaceURL(t),(0,n.set)(i,"currentURL",t)})}else this.updateURL(t)},u}(v.default),l=this._routerMicrolib=new u,h=this.constructor.dslCallbacks||[y],f=this._buildDSL()
f.route("application",{path:"/",resetNamespace:!0,overrideNameAssertion:!0},function(){for(var e=0;e<h.length;e++)h[e].call(this)}),l.map(f.generate())},s._buildDSL=function(){var e=this._hasModuleBasedResolver(),t=this,n=(0,r.getOwner)(this),i={enableLoadingSubstates:e,resolveRouteMap:function(e){return n.factoryFor("route-map:"+e)},addRouteForEngine:function(e,n){t._engineInfoByRoute[e]||(t._engineInfoByRoute[e]=n)}}
return new f.default(null,i)},s._resetQueuedQueryParameterChanges=function(){this._queuedQPChanges={}},s._hasModuleBasedResolver=function(){var e=(0,r.getOwner)(this)
if(!e)return!1
var t=(0,n.get)(e,"application.__registry__.resolver.moduleBasedResolver")
return Boolean(t)},s.startRouting=function(){var e=(0,n.get)(this,"initialURL")
if(this.setupRouter()){void 0===e&&(e=(0,n.get)(this,"location").getURL())
var t=this.handleURL(e)
if(t&&t.error)throw t.error}},s.setupRouter=function(){var e=this
this._setupLocation()
var t=(0,n.get)(this,"location")
return!(0,n.get)(t,"cancelRouterSetup")&&(this._initRouterJs(),t.onUpdateURL(function(t){e.handleURL(t)}),!0)},s._setOutlets=function(){if(!this.isDestroying&&!this.isDestroyed){var e,t,n=this._routerMicrolib.currentRouteInfos,i=null
if(n){for(var o=0;o<n.length;o++){e=n[o].route
for(var a=d.ROUTE_CONNECTIONS.get(e),s=void 0,u=0;u<a.length;u++){var c=N(i,t,a[u])
i=c.liveRoutes,c.ownState.render.name!==e.routeName&&"main"!==c.ownState.render.outlet||(s=c.ownState)}0===a.length&&(s=D(i,t,e)),t=s}if(i)if(this._toplevelView)this._toplevelView.setOutletState(i)
else{var l=(0,r.getOwner)(this),h=l.factoryFor("view:-outlet")
this._toplevelView=h.create(),this._toplevelView.setOutletState(i),l.lookup("-application-instance:main").didCreateRootView(this._toplevelView)}}}},s.handleURL=function(e){var t=e.split(/#(.+)?/)[0]
return this._doURLTransition("handleURL",t)},s._doURLTransition=function(e,t){var n=this._routerMicrolib[e](t||"/")
return T(n,this),n},s.transitionTo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
if((0,h.resemblesURL)(t[0]))return this._doURLTransition("transitionTo",t[0])
var r=(0,h.extractRouteArgs)(t),i=r.routeName,o=r.models,a=r.queryParams
return this._doTransition(i,o,a)},s.intermediateTransitionTo=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._routerMicrolib).intermediateTransitionTo.apply(t,[e].concat(r)),A(this)},s.replaceWith=function(){return this.transitionTo.apply(this,arguments).method("replace")},s.generate=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i]
var o=(t=this._routerMicrolib).generate.apply(t,[e].concat(r))
return this.location.formatURL(o)},s.isActive=function(e){return this._routerMicrolib.isActive(e)},s.isActiveIntent=function(e,t,n){return this.currentState.isActiveIntent(e,t,n)},s.send=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._routerMicrolib).trigger.apply(t,[e].concat(r))},s.hasRoute=function(e){return this._routerMicrolib.hasRoute(e)},s.reset=function(){this._routerMicrolib&&this._routerMicrolib.reset()},s.willDestroy=function(){this._toplevelView&&(this._toplevelView.destroy(),this._toplevelView=null),this._super.apply(this,arguments),this.reset()
var e=this._engineInstances
for(var t in e)for(var n in e[t])(0,c.run)(e[t][n],"destroy")},s._activeQPChanged=function(e,t){this._queuedQPChanges[e]=t,(0,c.once)(this,this._fireQueryParamTransition)},s._updatingQPChanged=function(e){this._qpUpdates.add(e)},s._fireQueryParamTransition=function(){this.transitionTo({queryParams:this._queuedQPChanges}),this._resetQueuedQueryParameterChanges()},s._setupLocation=function(){var e=this.location,t=this.rootURL,i=(0,r.getOwner)(this)
if("string"==typeof e&&i){var o=i.lookup("location:"+e)
if(void 0!==o)e=(0,n.set)(this,"location",o)
else{var a={implementation:e}
e=(0,n.set)(this,"location",l.default.create(a))}}null!==e&&"object"==typeof e&&(t&&(0,n.set)(e,"rootURL",t),"function"==typeof e.detect&&e.detect(),"function"==typeof e.initState&&e.initState())},s._serializeQueryParams=function(e,t){var n=this
O(this,e,t,function(e,r,o){if(o)delete t[e],t[o.urlKey]=o.route.serializeQueryParam(r,o.urlKey,o.type)
else{if(void 0===r)return
t[e]=n._serializeQueryParam(r,(0,i.typeOf)(r))}})},s._serializeQueryParam=function(e,t){return null==e?e:"array"===t?JSON.stringify(e):""+e},s._deserializeQueryParams=function(e,t){O(this,e,t,function(e,n,r){r&&(delete t[e],t[r.prop]=r.route.deserializeQueryParam(n,r.urlKey,r.type))})},s._deserializeQueryParam=function(e,t){return null==e?e:"boolean"===t?"true"===e:"number"===t?Number(e).valueOf():"array"===t?(0,i.A)(JSON.parse(e)):e},s._pruneDefaultQueryParamValues=function(e,t){var n=this._queryParamsFor(e)
for(var r in t){var i=n.map[r]
i&&i.serializedDefaultValue===t[r]&&delete t[r]}},s._doTransition=function(e,t,n,r){var i,o=e||(0,h.getActiveTargetName)(this._routerMicrolib),a={}
this._processActiveTransitionQueryParams(o,t,a,n),(0,u.assign)(a,n),this._prepareQueryParams(o,t,a,Boolean(r))
var s=(i=this._routerMicrolib).transitionTo.apply(i,[o].concat(t,[{queryParams:a}]))
return T(s,this),s},s._processActiveTransitionQueryParams=function(e,t,n,r){if(this._routerMicrolib.activeTransition){var i={},o=this._qpUpdates,a=this._routerMicrolib.activeTransition[v.QUERY_PARAMS_SYMBOL]
for(var s in a)o.has(s)||(i[s]=a[s])
this._fullyScopeQueryParams(e,t,r),this._fullyScopeQueryParams(e,t,i),(0,u.assign)(n,i)}},s._prepareQueryParams=function(e,t,n,r){var i=S(this,e,t)
this._hydrateUnsuppliedQueryParams(i,n,Boolean(r)),this._serializeQueryParams(i.routeInfos,n),r||this._pruneDefaultQueryParamValues(i.routeInfos,n)},s._getQPMeta=function(e){var t=e.route
return t&&(0,n.get)(t,"_qp")},s._queryParamsFor=function(e){var t=e.length,n=e[t-1].name,r=this._qpCache[n]
if(void 0!==r)return r
for(var i,o,a=!0,s={},c=[],l=0;l<t;++l)if(i=this._getQPMeta(e[l])){for(var h=0;h<i.qps.length;h++)o=i.qps[h],c.push(o);(0,u.assign)(s,i.map)}else a=!1
var f={qps:c,map:s}
return a&&(this._qpCache[n]=f),f},s._fullyScopeQueryParams=function(e,t,n){for(var r,i=S(this,e,t).routeInfos,o=0,a=i.length;o<a;++o)if(r=this._getQPMeta(i[o]))for(var s=void 0,u=void 0,c=0,l=r.qps.length;c<l;++c)(u=(s=r.qps[c]).prop in n&&s.prop||s.scopedPropertyName in n&&s.scopedPropertyName||s.urlKey in n&&s.urlKey)&&u!==s.scopedPropertyName&&(n[s.scopedPropertyName]=n[u],delete n[u])},s._hydrateUnsuppliedQueryParams=function(e,t,n){for(var r,i,o,a=e.routeInfos,s=this._bucketCache,u=0;u<a.length;++u)if(r=this._getQPMeta(a[u]))for(var c=0,l=r.qps.length;c<l;++c)if(i=r.qps[c],o=i.prop in t&&i.prop||i.scopedPropertyName in t&&i.scopedPropertyName||i.urlKey in t&&i.urlKey)o!==i.scopedPropertyName&&(t[i.scopedPropertyName]=t[o],delete t[o])
else{var f=(0,h.calculateCacheKey)(i.route.fullRouteName,i.parts,e.params)
t[i.scopedPropertyName]=s.lookup(f,i.prop,i.defaultValue)}},s._scheduleLoadingEvent=function(e,t){this._cancelSlowTransitionTimer(),this._slowTransitionTimer=(0,c.scheduleOnce)("routerTransitions",this,"_handleSlowTransition",e,t)},s._handleSlowTransition=function(e,t){if(this._routerMicrolib.activeTransition){var n=new p.default(this,this._routerMicrolib,this._routerMicrolib.activeTransition[v.STATE_SYMBOL])
this.set("targetState",n),e.trigger(!0,"loading",e,t)}},s._cancelSlowTransitionTimer=function(){this._slowTransitionTimer&&(0,c.cancel)(this._slowTransitionTimer),this._slowTransitionTimer=null},s._markErrorAsHandled=function(e){this._handledErrors.add(e)},s._isErrorHandled=function(e){return this._handledErrors.has(e)},s._clearHandledError=function(e){this._handledErrors.delete(e)},s._getEngineInstance=function(e){var t=e.name,n=e.instanceId,i=e.mountPoint,o=this._engineInstances
o[t]||(o[t]=Object.create(null))
var a=o[t][n]
if(!a){var s=(0,r.getOwner)(this);(a=s.buildChildEngineInstance(t,{routable:!0,mountPoint:i})).boot(),o[t][n]=a}return a},o}(i.Object)
function w(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r.route
if(void 0!==i&&!0!==t(i,r))return}}var _={willResolveModel:function(e,t,n){this._scheduleLoadingEvent(t,n)},error:function(e,t,n){var r=this,i=e[e.length-1]
w(e,function(e,n){if(n!==i){var o=E(e,"error")
if(o)return r._markErrorAsHandled(t),r.intermediateTransitionTo(o,t),!1}var a=R(e,"error")
return!a||(r._markErrorAsHandled(t),r.intermediateTransitionTo(a,t),!1)}),function(e,t){var n,r,i=[]
r=e&&"object"==typeof e&&"object"==typeof e.errorThrown?e.errorThrown:e
t&&i.push(t)
r&&(r.message&&i.push(r.message),r.stack&&i.push(r.stack),"string"==typeof r&&i.push(r));(n=console).error.apply(n,i)}(t,"Error while processing route: "+n.targetName)},loading:function(e,t){var n=this,r=e[e.length-1]
w(e,function(e,i){if(i!==r){var o=E(e,"loading")
if(o)return n.intermediateTransitionTo(o),!1}var a=R(e,"loading")
return a?(n.intermediateTransitionTo(a),!1):t.pivotHandler!==e})}}
function R(e,t){var n=(0,r.getOwner)(e),i=e.routeName,o=e.fullRouteName+"_"+t
return C(n,e._router,i+"_"+t,o)?o:""}function E(e,t){var n=(0,r.getOwner)(e),i=e.routeName,o=e.fullRouteName,a="application"===o?t:o+"."+t
return C(n,e._router,"application"===i?t:i+"."+t,a)?a:""}function C(e,t,n,r){var i=t.hasRoute(r),o=e.hasRegistration("template:"+n)||e.hasRegistration("route:"+n)
return i&&o}function k(e,t,n,r){if(!e){if(t)return
throw new s.default("Can't trigger action '"+n+"' because your app hasn't finished transitioning into its first route. To trigger an action on destination routes during a transition, you can call `.send()` on the `Transition` object passed to the `model/beforeModel/afterModel` hooks.")}for(var i,o,a=!1,u=e.length-1;u>=0;u--)if(o=(i=e[u].route)&&i.actions&&i.actions[n]){if(!0!==o.apply(i,r))return void("error"===n&&i._router._markErrorAsHandled(r[0]))
a=!0}var c=_[n]
if(c)c.apply(this,[e].concat(r))
else if(!a&&!t)throw new s.default("Nothing handled the action '"+n+"'. If you did handle the action, this error can be caused by returning true from an action handler in a controller, causing the action to bubble.")}function S(e,t,n){for(var r=e._routerMicrolib.applyIntent(t,n),i=r.routeInfos,o=r.params,a=0;a<i.length;++a){var s=i[a]
s.isResolved?o[s.name]=s.params:o[s.name]=s.serialize(s.context)}return r}function A(e){var t=e._routerMicrolib.currentRouteInfos
if(0!==t.length){var i=x._routePath(t),o=t[t.length-1].name,s=e.get("location").getURL();(0,n.set)(e,"currentPath",i),(0,n.set)(e,"currentRouteName",o),(0,n.set)(e,"currentURL",s)
var u=(0,r.getOwner)(e).lookup("controller:application")
u&&a.APP_CTRL_ROUTER_PROPS&&("currentPath"in u||Object.defineProperty(u,"currentPath",{get:function(){return(0,n.get)(e,"currentPath")}}),(0,n.notifyPropertyChange)(u,"currentPath"),"currentRouteName"in u||Object.defineProperty(u,"currentRouteName",{get:function(){return(0,n.get)(e,"currentRouteName")}}),(0,n.notifyPropertyChange)(u,"currentRouteName"))}}function T(e,t){var n=new p.default(t,t._routerMicrolib,e[v.STATE_SYMBOL])
t.currentState||t.set("currentState",n),t.set("targetState",n),e.promise=e.catch(function(e){if(!t._isErrorHandled(e))throw e
t._clearHandledError(e)},"Transition Error")}function O(e,t,n,r){var i=e._queryParamsFor(t)
for(var o in n){if(n.hasOwnProperty(o))r(o,n[o],i.map[o])}}function I(e,t){if(e)for(var n=[e];n.length>0;){var r=n.shift()
if(r.render.name===t)return r
var i=r.outlets
for(var o in i)n.push(i[o])}}function N(e,t,r){var i,o={render:r,outlets:Object.create(null),wasUsed:!1}
return(i=r.into?I(e,r.into):t)?(0,n.set)(i.outlets,r.outlet,o):e=o,{liveRoutes:e,ownState:o}}function D(e,t,n){var r=I(e,n.routeName)
return r||(t.outlets.main={render:{name:n.routeName,outlet:"main"},outlets:{}},t)}x.reopenClass({map:function(e){return this.dslCallbacks||(this.dslCallbacks=[],this.reopenClass({dslCallbacks:this.dslCallbacks})),this.dslCallbacks.push(e),this},_routePath:function(e){var t,n,r=[]
function i(e,t){for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1
return!0}for(var o=1;o<e.length;o++){for(t=e[o].name.split("."),n=b.call(r);n.length&&!i(n,t);)n.shift()
r.push.apply(r,t.slice(n.length))}return r.join(".")}}),x.reopen(i.Evented,{didTransition:m,willTransition:g,rootURL:"/",location:"hash",url:(0,n.computed)(function(){return(0,n.get)(this,"location").getURL()})}),a.ROUTER_EVENTS&&x.reopen(d.ROUTER_EVENT_DEPRECATIONS)
var P=x
e.default=P}),e("@ember/-internals/routing/lib/system/router_state",["exports","@ember/polyfills","@ember/-internals/routing/lib/utils"],function(e,t,n){"use strict"
e.default=void 0
var r=function(){function e(e,t,n){this.emberRouter=e,this.router=t,this.routerJsState=n}return e.prototype.isActiveIntent=function(e,r,i,o){var a=this.routerJsState
if(!this.router.isActiveIntent(e,r,void 0,a))return!1
if(o&&Object.keys(i).length>0){var s=(0,t.assign)({},i)
return this.emberRouter._prepareQueryParams(e,r,s),(0,n.shallowEqual)(s,a.queryParams)}return!0},e}()
e.default=r}),e("@ember/-internals/routing/lib/system/transition",[],function(){}),e("@ember/-internals/routing/lib/utils",["exports","@ember/-internals/metal","@ember/-internals/owner","@ember/error","@ember/polyfills","router_js"],function(e,t,n,r,i,o){"use strict"
e.extractRouteArgs=function(e){var t,n=(e=e.slice())[e.length-1]
t=n&&n.hasOwnProperty("queryParams")?e.pop().queryParams:{}
return{routeName:e.shift(),models:e,queryParams:t}},e.getActiveTargetName=function(e){var t=e.activeTransition?e.activeTransition[o.STATE_SYMBOL].routeInfos:e.state.routeInfos
return t[t.length-1].name},e.stashParamNames=function(e,t){if(t._namesStashed)return
for(var n,r=t[t.length-1].name,i=e._routerMicrolib.recognizer.handlersFor(r),o=0;o<t.length;++o){var a=t[o],s=i[o].names
s.length&&(n=a),a._names=s
var u=a.route
u._stashNames(a,n)}t._namesStashed=!0},e.calculateCacheKey=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i="",o=0;o<n.length;++o){var u=n[o],c=s(e,u),l=void 0
if(r)if(c&&c in r){var h=0===u.indexOf(c)?u.substr(c.length+1):u
l=(0,t.get)(r[c],h)}else l=(0,t.get)(r,u)
i+="::"+u+":"+l}return e+i.replace(a,"-")},e.normalizeControllerQueryParams=function(e){for(var t={},n=0;n<e.length;++n)u(e[n],t)
return t},e.resemblesURL=c,e.prefixRouteNameArg=function(e,t){var i=t[0],o=(0,n.getOwner)(e),a=o.mountPoint
if(o.routable&&"string"==typeof i){if(c(i))throw new r.default("Programmatic transitions by URL cannot be used within an Engine. Please use the route name instead.")
i=a+"."+i,t[0]=i}return t},e.shallowEqual=function(e,t){var n,r=0,i=0
for(n in e)if(e.hasOwnProperty(n)){if(e[n]!==t[n])return!1
r++}for(n in t)t.hasOwnProperty(n)&&i++
return r===i}
var a=/\./g
function s(e,t){for(var n=e.split("."),r="",i=0;i<n.length;i++){var o=n.slice(0,i+1).join(".")
if(0!==t.indexOf(o))break
r=o}return r}function u(e,t){var n,r=e
for(var o in"string"==typeof r&&((n={})[r]={as:null},r=n),r){if(!r.hasOwnProperty(o))return
var a=r[o]
"string"==typeof a&&(a={as:a}),n=t[o]||{as:null,scope:"model"},(0,i.assign)(n,a),t[o]=n}}function c(e){return"string"==typeof e&&(""===e||"/"===e[0])}}),e("@ember/-internals/runtime/index",["exports","@ember/-internals/runtime/lib/system/object","@ember/-internals/runtime/lib/mixins/registry_proxy","@ember/-internals/runtime/lib/mixins/container_proxy","@ember/-internals/runtime/lib/copy","@ember/-internals/runtime/lib/compare","@ember/-internals/runtime/lib/is-equal","@ember/-internals/runtime/lib/mixins/array","@ember/-internals/runtime/lib/mixins/comparable","@ember/-internals/runtime/lib/system/namespace","@ember/-internals/runtime/lib/system/array_proxy","@ember/-internals/runtime/lib/system/object_proxy","@ember/-internals/runtime/lib/system/core_object","@ember/-internals/runtime/lib/mixins/action_handler","@ember/-internals/runtime/lib/mixins/copyable","@ember/-internals/runtime/lib/mixins/enumerable","@ember/-internals/runtime/lib/mixins/-proxy","@ember/-internals/runtime/lib/mixins/observable","@ember/-internals/runtime/lib/mixins/mutable_enumerable","@ember/-internals/runtime/lib/mixins/target_action_support","@ember/-internals/runtime/lib/mixins/evented","@ember/-internals/runtime/lib/mixins/promise_proxy","@ember/-internals/runtime/lib/ext/rsvp","@ember/-internals/runtime/lib/type-of","@ember/-internals/runtime/lib/ext/function"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_,R,E){"use strict"
Object.defineProperty(e,"Object",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"FrameworkObject",{enumerable:!0,get:function(){return t.FrameworkObject}}),Object.defineProperty(e,"RegistryProxyMixin",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"ContainerProxyMixin",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"copy",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"compare",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Array",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"NativeArray",{enumerable:!0,get:function(){return s.NativeArray}}),Object.defineProperty(e,"A",{enumerable:!0,get:function(){return s.A}}),Object.defineProperty(e,"MutableArray",{enumerable:!0,get:function(){return s.MutableArray}}),Object.defineProperty(e,"removeAt",{enumerable:!0,get:function(){return s.removeAt}}),Object.defineProperty(e,"uniqBy",{enumerable:!0,get:function(){return s.uniqBy}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return s.isArray}}),Object.defineProperty(e,"Comparable",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Namespace",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"ArrayProxy",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"ObjectProxy",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"CoreObject",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"setFrameworkClass",{enumerable:!0,get:function(){return f.setFrameworkClass}}),Object.defineProperty(e,"ActionHandler",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"Copyable",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"Enumerable",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"_ProxyMixin",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"_contentFor",{enumerable:!0,get:function(){return m.contentFor}}),Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"MutableEnumerable",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"TargetActionSupport",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"Evented",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"PromiseProxyMixin",{enumerable:!0,get:function(){return w.default}})
Object.defineProperty(e,"RSVP",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"onerrorDefault",{enumerable:!0,get:function(){return _.onerrorDefault}}),Object.defineProperty(e,"typeOf",{enumerable:!0,get:function(){return R.typeOf}})}),e("@ember/-internals/runtime/lib/compare",["exports","@ember/-internals/runtime/lib/type-of","@ember/-internals/runtime/lib/mixins/comparable"],function(e,t,n){"use strict"
e.default=function e(o,a){if(o===a)return 0
var s=(0,t.typeOf)(o)
var u=(0,t.typeOf)(a)
if("instance"===s&&n.default.detect(o)&&o.constructor.compare)return o.constructor.compare(o,a)
if("instance"===u&&n.default.detect(a)&&a.constructor.compare)return-1*a.constructor.compare(a,o)
var c=i(r[s],r[u])
if(0!==c)return c
switch(s){case"boolean":case"number":return i(o,a)
case"string":return i(o.localeCompare(a),0)
case"array":for(var l=o.length,h=a.length,f=Math.min(l,h),d=0;d<f;d++){var p=e(o[d],a[d])
if(0!==p)return p}return i(l,h)
case"instance":return n.default.detect(o)?o.compare(o,a):0
case"date":return i(o.getTime(),a.getTime())
default:return 0}}
var r={undefined:0,null:1,boolean:2,number:3,string:4,array:5,object:6,instance:7,function:8,class:9,date:10}
function i(e,t){var n=e-t
return(n>0)-(n<0)}}),e("@ember/-internals/runtime/lib/copy",["exports","@ember/debug","@ember/-internals/runtime/lib/system/object","@ember/-internals/runtime/lib/mixins/copyable"],function(e,t,n,r){"use strict"
e.default=function(e,t){if("object"!=typeof e||null===e)return e
if(!Array.isArray(e)&&r.default.detect(e))return e.copy(t)
return function e(t,n,i,o){if("object"!=typeof t||null===t)return t
var a,s
if(n&&(s=i.indexOf(t))>=0)return o[s]
n&&i.push(t)
if(Array.isArray(t)){if(a=t.slice(),n)for(o.push(a),s=a.length;--s>=0;)a[s]=e(a[s],n,i,o)}else if(r.default.detect(t))a=t.copy(n,i,o),n&&o.push(a)
else if(t instanceof Date)a=new Date(t.getTime()),n&&o.push(a)
else{var u
for(u in a={},n&&o.push(a),t)Object.prototype.hasOwnProperty.call(t,u)&&"__"!==u.substring(0,2)&&(a[u]=n?e(t[u],n,i,o):t[u])}return a}(e,t,t?[]:null,t?[]:null)}}),e("@ember/-internals/runtime/lib/ext/function",["@ember/-internals/environment","@ember/-internals/metal","@ember/debug","@ember/deprecated-features"],function(e,t,n,r){"use strict"
r.FUNCTION_PROTOTYPE_EXTENSIONS&&e.ENV.EXTEND_PROTOTYPES.Function&&Object.defineProperties(Function.prototype,{property:{configurable:!0,enumerable:!1,writable:!0,value:function(){return t.computed.apply(void 0,Array.prototype.slice.call(arguments).concat([this]))}},observes:{configurable:!0,enumerable:!1,writable:!0,value:function(){return t.observer.apply(void 0,Array.prototype.slice.call(arguments).concat([this]))}},on:{configurable:!0,enumerable:!1,writable:!0,value:function(){return t.on.apply(void 0,Array.prototype.slice.call(arguments).concat([this]))}}})}),e("@ember/-internals/runtime/lib/ext/rsvp",["exports","rsvp","@ember/runloop","@ember/-internals/error-handling","@ember/debug"],function(e,t,n,r,i){"use strict"
function o(e){var t=function(e){if(!e)return
if(e.errorThrown)return function(e){var t=e.errorThrown
"string"==typeof t&&(t=new Error(t))
return Object.defineProperty(t,"__reason_with_error_thrown__",{value:e,enumerable:!1}),t}(e)
if("UnrecognizedURLError"===e.name)return
if("TransitionAborted"===e.name)return
return e}(e)
if(t){var n=(0,r.getDispatchOverride)()
if(!n)throw t
n(t)}}e.onerrorDefault=o,e.default=void 0,t.configure("async",function(e,t){n.backburner.schedule("actions",null,e,t)}),t.configure("after",function(e){n.backburner.schedule(n._rsvpErrorQueue,null,e)}),t.on("error",o)
var a=t
e.default=a}),e("@ember/-internals/runtime/lib/is-equal",["exports"],function(e){"use strict"
e.default=function(e,t){if(e&&"function"==typeof e.isEqual)return e.isEqual(t)
if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime()
return e===t}}),e("@ember/-internals/runtime/lib/mixins/-proxy",["exports","@glimmer/reference","@ember/-internals/meta","@ember/-internals/metal","@ember/-internals/utils","@ember/debug"],function(e,t,n,r,i,o){"use strict"
var a
function s(e,t){var i=(0,r.get)(e,"content"),o=(void 0===t?(0,n.meta)(e):t).readableTag()
return void 0!==o&&o.inner.second.inner.update((0,r.tagFor)(i)),i}e.contentFor=s,e.default=void 0
var u=r.Mixin.create(((a={content:null,init:function(){this._super.apply(this,arguments),(0,i.setProxy)(this),(0,n.meta)(this).writableTag(function(){return(0,t.combine)([t.DirtyableTag.create(),t.UpdatableTag.create(t.CONSTANT_TAG)])})},willDestroy:function(){this.set("content",null),this._super.apply(this,arguments)},isTruthy:(0,r.computed)("content",function(){return Boolean((0,r.get)(this,"content"))}),willWatchProperty:function(e){var t="content."+e;(0,r.addObserver)(this,t,null,"_contentPropertyDidChange")},didUnwatchProperty:function(e){var t="content."+e;(0,r.removeObserver)(this,t,null,"_contentPropertyDidChange")},_contentPropertyDidChange:function(e,t){var n=t.slice(8)
n in this||(0,r.notifyPropertyChange)(this,n)}})[r.UNKNOWN_PROPERTY_TAG]=function(e){return(0,r.getChainTagsForKey)(this,"content."+e)},a.unknownProperty=function(e){var t=s(this)
if(t)return(0,r.get)(t,e)},a.setUnknownProperty=function(e,t){var i=(0,n.meta)(this)
if(i.isInitializing()||i.isPrototypeMeta(this))return(0,r.defineProperty)(this,e,null,t),t
var o=s(this,i)
return(0,r.set)(o,e,t)},a))
e.default=u}),e("@ember/-internals/runtime/lib/mixins/action_handler",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
e.default=void 0
var r=t.Mixin.create({mergedProperties:["actions"],send:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i]
if(this.actions&&this.actions[e]&&!(!0===this.actions[e].apply(this,r)))return
var o=(0,t.get)(this,"target")
o&&o.send.apply(o,arguments)}})
e.default=r}),e("@ember/-internals/runtime/lib/mixins/array",["exports","@ember/-internals/metal","@ember/-internals/utils","@ember/debug","@ember/-internals/runtime/lib/mixins/enumerable","@ember/-internals/runtime/lib/compare","@ember/-internals/environment","@ember/-internals/runtime/lib/mixins/observable","@ember/-internals/runtime/lib/mixins/mutable_enumerable","@ember/-internals/runtime/lib/type-of"],function(e,t,n,r,i,o,a,s,u,c){"use strict"
var l,h
e.uniqBy=p,e.removeAt=w,e.isArray=R,e.default=e.MutableArray=e.NativeArray=e.A=void 0
var f=Object.freeze([]),d=function(e){return e}
function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,r=T(),i=new Set,o="function"==typeof n?n:function(e){return(0,t.get)(e,n)}
return e.forEach(function(e){var t=o(e)
i.has(t)||(i.add(t),r.push(e))}),r}function v(e,n){return 2===arguments.length?function(r){return n===(0,t.get)(r,e)}:function(n){return Boolean((0,t.get)(n,e))}}function m(e,n,r){for(var i=e.length,o=r;o<i;o++){if(n((0,t.objectAt)(e,o),o,e))return o}return-1}function g(e,n,r){var i=m(e,n.bind(r),0)
return-1===i?void 0:(0,t.objectAt)(e,i)}function y(e,t,n){return-1!==m(e,t.bind(n),0)}function b(e,t,n){var r=t.bind(n)
return-1===m(e,function(e,t,n){return!r(e,t,n)},0)}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e.length
return n<0&&(n+=i),m(e,r&&t!=t?function(e){return e!=e}:function(e){return e===t},n)}function w(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1
return(0,t.replace)(e,n,r,f),e}function _(e,n,r){return(0,t.replace)(e,n,0,[r]),r}function R(e){var t=e
if(!t||t.setInterval)return!1
if(Array.isArray(t)||k.detect(t))return!0
var n=(0,c.typeOf)(t)
if("array"===n)return!0
var r=t.length
return"number"==typeof r&&r==r&&"object"===n}function E(){var e=t.computed.apply(void 0,arguments)
return e.enumerable=!1,e}function C(e){return this.map(function(n){return(0,t.get)(n,e)})}var k=t.Mixin.create(i.default,((l={})[n.EMBER_ARRAY]=!0,l.objectsAt=function(e){var n=this
return e.map(function(e){return(0,t.objectAt)(n,e)})},l["[]"]=E({get:function(){return this},set:function(e,t){return this.replace(0,this.length,t),this}}),l.firstObject=E(function(){return(0,t.objectAt)(this,0)}).readOnly(),l.lastObject=E(function(){return(0,t.objectAt)(this,this.length-1)}).readOnly(),l.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,r=T(),i=this.length
for(e<0&&(e=i+e),void 0===n||n>i?n=i:n<0&&(n=i+n);e<n;)r[r.length]=(0,t.objectAt)(this,e++)
return r},l.indexOf=function(e,t){return x(this,e,t,!1)},l.lastIndexOf=function(e,n){var r=this.length;(void 0===n||n>=r)&&(n=r-1),n<0&&(n+=r)
for(var i=n;i>=0;i--)if((0,t.objectAt)(this,i)===e)return i
return-1},l.addArrayObserver=function(e,n){return(0,t.addArrayObserver)(this,e,n)},l.removeArrayObserver=function(e,n){return(0,t.removeArrayObserver)(this,e,n)},l.hasArrayObservers=E(function(){return(0,t.hasListeners)(this,"@array:change")||(0,t.hasListeners)(this,"@array:before")}),l.arrayContentWillChange=function(e,n,r){return(0,t.arrayContentWillChange)(this,e,n,r)},l.arrayContentDidChange=function(e,n,r){return(0,t.arrayContentDidChange)(this,e,n,r)},l.forEach=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.length,r=0;r<n;r++){var i=this.objectAt(r)
e.call(t,i,r,this)}return this},l.getEach=C,l.setEach=function(e,n){return this.forEach(function(r){return(0,t.set)(r,e,n)})},l.map=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=T()
return this.forEach(function(r,i,o){return n[i]=e.call(t,r,i,o)}),n},l.mapBy=C,l.filter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=T()
return this.forEach(function(r,i,o){e.call(t,r,i,o)&&n.push(r)}),n},l.reject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return this.filter(function(){return!e.apply(t,arguments)})},l.filterBy=function(){return this.filter(v.apply(void 0,arguments))},l.rejectBy=function(){return this.reject(v.apply(void 0,arguments))},l.find=function(e){return g(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},l.findBy=function(){return g(this,v.apply(void 0,arguments))},l.every=function(e){return b(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},l.isEvery=function(){return b(this,v.apply(void 0,arguments))},l.any=function(e){return y(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},l.isAny=function(){return y(this,v.apply(void 0,arguments))},l.reduce=function(e,t){var n=t
return this.forEach(function(t,r){n=e(n,t,r,this)},this),n},l.invoke=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i]
var o=T()
return this.forEach(function(t){return o.push((0,n.tryInvoke)(t,e,r))}),o},l.toArray=function(){return this.map(function(e){return e})},l.compact=function(){return this.filter(function(e){return null!=e})},l.includes=function(e,t){return-1!==x(this,e,t,!0)},l.sortBy=function(){var e=arguments
return this.toArray().sort(function(n,r){for(var i=0;i<e.length;i++){var a=e[i],s=(0,t.get)(n,a),u=(0,t.get)(r,a),c=(0,o.default)(s,u)
if(c)return c}return 0})},l.uniq=function(){return p(this)},l.uniqBy=function(e){return p(this,e)},l.without=function(e){if(!this.includes(e))return this
var t=e==e?function(t){return t!==e}:function(e){return e==e}
return this.filter(t)},l)),S=t.Mixin.create(k,u.default,{clear:function(){var e=this.length
return 0===e?this:(this.replace(0,e,f),this)},insertAt:function(e,t){return _(this,e,t),this},removeAt:function(e,t){return w(this,e,t)},pushObject:function(e){return _(this,this.length,e)},pushObjects:function(e){return this.replace(this.length,0,e),this},popObject:function(){var e=this.length
if(0===e)return null
var n=(0,t.objectAt)(this,e-1)
return this.removeAt(e-1,1),n},shiftObject:function(){if(0===this.length)return null
var e=(0,t.objectAt)(this,0)
return this.removeAt(0),e},unshiftObject:function(e){return _(this,0,e)},unshiftObjects:function(e){return this.replace(0,0,e),this},reverseObjects:function(){var e=this.length
if(0===e)return this
var t=this.toArray().reverse()
return this.replace(0,e,t),this},setObjects:function(e){if(0===e.length)return this.clear()
var t=this.length
return this.replace(0,t,e),this},removeObject:function(e){for(var n=this.length||0;--n>=0;){(0,t.objectAt)(this,n)===e&&this.removeAt(n)}return this},removeObjects:function(e){(0,t.beginPropertyChanges)()
for(var n=e.length-1;n>=0;n--)this.removeObject(e[n])
return(0,t.endPropertyChanges)(),this},addObject:function(e){return this.includes(e)||this.pushObject(e),this},addObjects:function(e){var n=this
return(0,t.beginPropertyChanges)(),e.forEach(function(e){return n.addObject(e)}),(0,t.endPropertyChanges)(),this}})
e.MutableArray=S
var A=t.Mixin.create(S,s.default,{objectAt:function(e){return this[e]},replace:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f
return(0,t.replaceInNativeArray)(this,e,n,r),this}})
e.NativeArray=A
var T,O=["length"]
A.keys().forEach(function(e){Array.prototype[e]&&O.push(e)}),e.NativeArray=A=(h=A).without.apply(h,O),e.A=T,a.ENV.EXTEND_PROTOTYPES.Array?(A.apply(Array.prototype),e.A=T=function(e){return e||[]}):e.A=T=function(e){return e||(e=[]),k.detect(e)?e:A.apply(e)}
var I=k
e.default=I}),e("@ember/-internals/runtime/lib/mixins/comparable",["exports","@ember/-internals/metal"],function(e,t){"use strict"
e.default=void 0
var n=t.Mixin.create({compare:null})
e.default=n}),e("@ember/-internals/runtime/lib/mixins/container_proxy",["exports","@ember/runloop","@ember/-internals/metal"],function(e,t,n){"use strict"
e.default=void 0
var r={__container__:null,ownerInjection:function(){return this.__container__.ownerInjection()},lookup:function(e,t){return this.__container__.lookup(e,t)},destroy:function(){var e=this.__container__
e&&(0,t.join)(function(){e.destroy(),(0,t.schedule)("destroy",e,"finalizeDestroy")}),this._super()},factoryFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return this.__container__.factoryFor(e,t)}},i=n.Mixin.create(r)
e.default=i}),e("@ember/-internals/runtime/lib/mixins/copyable",["exports","@ember/-internals/metal"],function(e,t){"use strict"
e.default=void 0
var n=t.Mixin.create({copy:null})
e.default=n}),e("@ember/-internals/runtime/lib/mixins/enumerable",["exports","@ember/-internals/metal"],function(e,t){"use strict"
e.default=void 0
var n=t.Mixin.create()
e.default=n}),e("@ember/-internals/runtime/lib/mixins/evented",["exports","@ember/-internals/metal"],function(e,t){"use strict"
e.default=void 0
var n=t.Mixin.create({on:function(e,n,r){return(0,t.addListener)(this,e,n,r),this},one:function(e,n,r){return(0,t.addListener)(this,e,n,r,!0),this},trigger:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(0,t.sendEvent)(this,e,r)},off:function(e,n,r){return(0,t.removeListener)(this,e,n,r),this},has:function(e){return(0,t.hasListeners)(this,e)}})
e.default=n}),e("@ember/-internals/runtime/lib/mixins/mutable_enumerable",["exports","@ember/-internals/runtime/lib/mixins/enumerable","@ember/-internals/metal"],function(e,t,n){"use strict"
e.default=void 0
var r=n.Mixin.create(t.default)
e.default=r}),e("@ember/-internals/runtime/lib/mixins/observable",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
e.default=void 0
var r=t.Mixin.create({get:function(e){return(0,t.get)(this,e)},getProperties:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r]
return t.getProperties.apply(void 0,[this].concat(n))},set:function(e,n){return(0,t.set)(this,e,n)},setProperties:function(e){return(0,t.setProperties)(this,e)},beginPropertyChanges:function(){return(0,t.beginPropertyChanges)(),this},endPropertyChanges:function(){return(0,t.endPropertyChanges)(),this},notifyPropertyChange:function(e){return(0,t.notifyPropertyChange)(this,e),this},addObserver:function(e,n,r){return(0,t.addObserver)(this,e,n,r),this},removeObserver:function(e,n,r){return(0,t.removeObserver)(this,e,n,r),this},hasObserverFor:function(e){return(0,t.hasListeners)(this,e+":change")},getWithDefault:function(e,n){return(0,t.getWithDefault)(this,e,n)},incrementProperty:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1
return(0,t.set)(this,e,(parseFloat((0,t.get)(this,e))||0)+n)},decrementProperty:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1
return(0,t.set)(this,e,((0,t.get)(this,e)||0)-n)},toggleProperty:function(e){return(0,t.set)(this,e,!(0,t.get)(this,e))},cacheFor:function(e){return(0,t.getCachedValueFor)(this,e)}})
e.default=r}),e("@ember/-internals/runtime/lib/mixins/promise_proxy",["exports","@ember/-internals/metal","@ember/error"],function(e,t,n){"use strict"
e.default=void 0
var r=t.Mixin.create({reason:null,isPending:(0,t.computed)("isSettled",function(){return!(0,t.get)(this,"isSettled")}).readOnly(),isSettled:(0,t.computed)("isRejected","isFulfilled",function(){return(0,t.get)(this,"isRejected")||(0,t.get)(this,"isFulfilled")}).readOnly(),isRejected:!1,isFulfilled:!1,promise:(0,t.computed)({get:function(){throw new n.default("PromiseProxy's promise must be set")},set:function(e,n){return function(e,n){return(0,t.setProperties)(e,{isFulfilled:!1,isRejected:!1}),n.then(function(n){return e.isDestroyed||e.isDestroying||(0,t.setProperties)(e,{content:n,isFulfilled:!0}),n},function(n){throw e.isDestroyed||e.isDestroying||(0,t.setProperties)(e,{reason:n,isRejected:!0}),n},"Ember: PromiseProxy")}(this,n)}}),then:i("then"),catch:i("catch"),finally:i("finally")})
function i(e){return function(){var n=(0,t.get)(this,"promise")
return n[e].apply(n,arguments)}}e.default=r}),e("@ember/-internals/runtime/lib/mixins/registry_proxy",["exports","@ember/debug","@ember/-internals/metal"],function(e,t,n){"use strict"
e.default=void 0
var r=n.Mixin.create({__registry__:null,resolveRegistration:function(e,t){return this.__registry__.resolve(e,t)},register:i("register"),unregister:i("unregister"),hasRegistration:i("has"),registeredOption:i("getOption"),registerOptions:i("options"),registeredOptions:i("getOptions"),registerOptionsForType:i("optionsForType"),registeredOptionsForType:i("getOptionsForType"),inject:i("injection")})
function i(e){return function(){var t
return(t=this.__registry__)[e].apply(t,arguments)}}e.default=r}),e("@ember/-internals/runtime/lib/mixins/target_action_support",["exports","@ember/-internals/environment","@ember/-internals/metal","@ember/debug"],function(e,t,n,r){"use strict"
e.default=void 0
var i=n.Mixin.create({target:null,action:null,actionContext:null,actionContextObject:(0,n.computed)("actionContext",function(){var e=(0,n.get)(this,"actionContext")
if("string"==typeof e){var r=(0,n.get)(this,e)
return void 0===r&&(r=(0,n.get)(t.context.lookup,e)),r}return e}),triggerAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.action,i=e.target,o=e.actionContext
if(r=r||(0,n.get)(this,"action"),i=i||function(e){var r=(0,n.get)(e,"target")
if(r){if("string"==typeof r){var i=(0,n.get)(e,r)
return void 0===i&&(i=(0,n.get)(t.context.lookup,r)),i}return r}if(e._target)return e._target
return null}(this),void 0===o&&(o=(0,n.get)(this,"actionContextObject")||this),i&&r){var a,s,u
if(i.send)a=(s=i).send.apply(s,[r].concat(o))
else a=(u=i)[r].apply(u,[].concat(o))
if(!1!==a)return!0}return!1}})
e.default=i}),e("@ember/-internals/runtime/lib/system/array_proxy",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/runtime/lib/system/object","@ember/-internals/runtime/lib/mixins/array","@ember/debug"],function(e,t,n,r,i,o){"use strict"
e.default=void 0
var a,s={willChange:"_arrangedContentArrayWillChange",didChange:"_arrangedContentArrayDidChange"},u=function(e){function r(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(r,e)
var i=r.prototype
return i.init=function(){e.prototype.init.apply(this,arguments),this._objectsDirtyIndex=0,this._objects=null,this._lengthDirty=!0,this._length=0,this._arrangedContent=null,this._addArrangedContentArrayObsever()},i.willDestroy=function(){this._removeArrangedContentArrayObsever()},i.objectAtContent=function(e){return(0,n.objectAt)((0,n.get)(this,"arrangedContent"),e)},i.replace=function(e,t,n){this.replaceContent(e,t,n)},i.replaceContent=function(e,t,r){(0,n.get)(this,"content").replace(e,t,r)},i.objectAt=function(e){if(null===this._objects&&(this._objects=[]),-1!==this._objectsDirtyIndex&&e>=this._objectsDirtyIndex){var t=(0,n.get)(this,"arrangedContent")
if(t)for(var r=this._objects.length=(0,n.get)(t,"length"),i=this._objectsDirtyIndex;i<r;i++)this._objects[i]=this.objectAtContent(i)
else this._objects.length=0
this._objectsDirtyIndex=-1}return this._objects[e]},i[n.PROPERTY_DID_CHANGE]=function(e){"arrangedContent"===e?this._updateArrangedContentArray():"content"===e&&this._invalidate()},i._updateArrangedContentArray=function(){var e=null===this._objects?0:this._objects.length,t=(0,n.get)(this,"arrangedContent"),r=t?(0,n.get)(t,"length"):0
this._removeArrangedContentArrayObsever(),this.arrayContentWillChange(0,e,r),this._invalidate(),this.arrayContentDidChange(0,e,r),this._addArrangedContentArrayObsever()},i._addArrangedContentArrayObsever=function(){var e=(0,n.get)(this,"arrangedContent")
e&&!e.isDestroyed&&((0,n.addArrayObserver)(e,this,s),this._arrangedContent=e)},i._removeArrangedContentArrayObsever=function(){this._arrangedContent&&(0,n.removeArrayObserver)(this._arrangedContent,this,s)},i._arrangedContentArrayWillChange=function(){},i._arrangedContentArrayDidChange=function(e,t,r,i){this.arrayContentWillChange(t,r,i)
var o=t
o<0&&(o+=(0,n.get)(this._arrangedContent,"length")+r-i);(-1===this._objectsDirtyIndex||this._objectsDirtyIndex>o)&&(this._objectsDirtyIndex=o),this._lengthDirty=!0,this.arrayContentDidChange(t,r,i)},i._invalidate=function(){this._objectsDirtyIndex=0,this._lengthDirty=!0},(0,t.createClass)(r,[{key:"length",get:function(){if(this._lengthDirty){var e=(0,n.get)(this,"arrangedContent")
this._length=e?(0,n.get)(e,"length"):0,this._lengthDirty=!1}return this._length},set:function(e){var t,r=this.length-e
if(0!==r){r<0&&(t=new Array(-r),r=0)
var i=(0,n.get)(this,"content")
i&&((0,n.replace)(i,e,r,t),this._invalidate())}}}]),r}(r.default)
e.default=u,u.reopen(i.MutableArray,{arrangedContent:(0,n.alias)("content"),_revalidate:a})}),e("@ember/-internals/runtime/lib/system/core_object",["exports","ember-babel","@ember/-internals/container","@ember/-internals/owner","@ember/polyfills","@ember/-internals/utils","@ember/runloop","@ember/-internals/meta","@ember/-internals/metal","@ember/-internals/runtime/lib/mixins/action_handler","@ember/debug"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict"
e.setFrameworkClass=function(e){e[m]=!0},e.default=void 0
var h=u.Mixin.prototype.reopen,f=new i._WeakSet,d=new WeakMap,p=new WeakMap,v=void 0,m=(0,o.symbol)("FRAMEWORK_CLASS")
function g(e,t){var n=(0,s.meta)(e)
if(void 0!==t)for(var r=e.concatenatedProperties,a=e.mergedProperties,c=void 0!==r&&r.length>0,l=void 0!==a&&a.length>0,h=Object.keys(t),f=0;f<h.length;f++){var d=h[f],p=t[d],v=(0,u.descriptorForProperty)(e,d,n),m=void 0!==v
if(!m){var g=e[d]
c&&r.indexOf(d)>-1&&(p=g?(0,o.makeArray)(g).concat(p):(0,o.makeArray)(p)),l&&a.indexOf(d)>-1&&(p=(0,i.assign)({},g,p))}m?v.set(e,d,p):"function"!=typeof e.setUnknownProperty||d in e?e[d]=p:e.setUnknownProperty(d,p)}e.init(t),n.unsetInitializing(),(0,u.finishChains)(n),(0,u.sendEvent)(e,"init",void 0,void 0,void 0,n)}var y=function(){function e(e){var t=d.get(this.constructor)
void 0!==t&&(d.delete(this.constructor),n.FACTORY_FOR.set(this,t)),this.constructor.proto()
var r=this;(0,s.meta)(r).setInitializing()}e._initFactory=function(e){d.set(this,e)}
var c=e.prototype
return c.reopen=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return(0,u.applyMixin)(this,t),this},c.init=function(){},c.destroy=function(){var e=(0,s.peekMeta)(this)
if(!e.isSourceDestroying())return e.setSourceDestroying(),(0,a.schedule)("actions",this,this.willDestroy),(0,a.schedule)("destroy",this,this._scheduledDestroy,e),this},c.willDestroy=function(){},c._scheduledDestroy=function(e){e.isSourceDestroyed()||((0,s.deleteMeta)(this),e.setSourceDestroyed())},c.toString=function(){var e="function"==typeof this.toStringExtension?":"+this.toStringExtension():""
return"<"+((0,o.getName)(this)||n.FACTORY_FOR.get(this)||this.constructor.toString())+":"+(0,o.guidFor)(this)+e+">"},e.extend=function(){var e=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n}(this)
return h.apply(e.PrototypeMixin,arguments),e},e.create=function(e,t){var n,a=this
if(this[m]){var s,u=d.get(this)
void 0!==u?s=u.owner:void 0!==e&&(s=(0,r.getOwner)(e)),void 0===s&&(s=v),n=new a(s)}else n=new a
return g(n,void 0===t?e:function(){for(var e=this.concatenatedProperties,t=this.mergedProperties,n=void 0!==e&&e.length>0,r=void 0!==t&&t.length>0,a={},s=0;s<arguments.length;s++)for(var u=s<0||arguments.length<=s?void 0:arguments[s],c=Object.keys(u),l=0,h=c.length;l<h;l++){var f=c[l],d=u[f]
if(n&&e.indexOf(f)>-1){var p=a[f]
d=p?(0,o.makeArray)(p).concat(d):(0,o.makeArray)(d)}if(r&&t.indexOf(f)>-1){var v=a[f]
d=(0,i.assign)({},v,d)}a[f]=d}return a}.apply(this,arguments)),n},e.reopen=function(){return this.willReopen(),h.apply(this.PrototypeMixin,arguments),this},e.willReopen=function(){var e=this.prototype
f.has(e)&&(f.delete(e),p.has(this)&&p.set(this,u.Mixin.create(this.PrototypeMixin)))},e.reopenClass=function(){return(0,u.applyMixin)(this,arguments),this},e.detect=function(e){if("function"!=typeof e)return!1
for(;e;){if(e===this)return!0
e=e.superclass}return!1},e.detectInstance=function(e){return e instanceof this},e.metaForProperty=function(e){var t=this.proto(),n=(0,u.descriptorForProperty)(t,e)
return n._meta||{}},e.eachComputedProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this
this.proto()
var n={};(0,s.meta)(this.prototype).forEachDescriptors(function(r,i){if(i.enumerable){var o=i._meta||n
e.call(t,r,o)}})},e.proto=function(){var e=this.prototype
if(!f.has(e)){f.add(e)
var t=this.superclass
t&&t.proto(),p.has(this)&&this.PrototypeMixin.apply(e)}return e},(0,t.createClass)(e,[{key:"isDestroyed",get:function(){return(0,s.peekMeta)(this).isSourceDestroyed()},set:function(e){}},{key:"isDestroying",get:function(){return(0,s.peekMeta)(this).isSourceDestroying()},set:function(e){}}],[{key:"PrototypeMixin",get:function(){var e=p.get(this)
return void 0===e&&((e=u.Mixin.create()).ownerConstructor=this,p.set(this,e)),e}},{key:"superclass",get:function(){var e=Object.getPrototypeOf(this)
return e!==Function.prototype?e:void 0}}]),e}()
y.toString=u.classToString,(0,o.setName)(y,"Ember.CoreObject"),y.isClass=!0,y.isMethod=!1
var b=y
e.default=b}),e("@ember/-internals/runtime/lib/system/namespace",["exports","ember-babel","@ember/-internals/metal","@ember/-internals/utils","@ember/-internals/runtime/lib/system/object"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=function(e){function i(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(i,e)
var o=i.prototype
return o.init=function(){(0,n.addNamespace)(this)},o.toString=function(){var e=(0,n.get)(this,"name")||(0,n.get)(this,"modulePrefix")
return e||((0,n.findNamespaces)(),void 0===(e=(0,r.getName)(this))&&(e=(0,r.guidFor)(this),(0,r.setName)(this,e)),e)},o.nameClasses=function(){(0,n.processNamespace)(this)},o.destroy=function(){(0,n.removeNamespace)(this),e.prototype.destroy.call(this)},i}(i.default)
e.default=o,o.prototype.isNamespace=!0,o.NAMESPACES=n.NAMESPACES,o.NAMESPACES_BY_ID=n.NAMESPACES_BY_ID,o.processAll=n.processAllNamespaces,o.byName=n.findNamespace}),e("@ember/-internals/runtime/lib/system/object",["exports","ember-babel","@ember/-internals/container","@ember/-internals/owner","@ember/-internals/utils","@ember/-internals/metal","@ember/-internals/runtime/lib/system/core_object","@ember/-internals/runtime/lib/mixins/observable","@ember/debug"],function(e,t,n,r,i,o,a,s,u){"use strict"
e.FrameworkObject=e.default=void 0
var c,l=(0,i.symbol)("OVERRIDE_OWNER"),h=function(e){function i(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(i,e),(0,t.createClass)(i,[{key:"_debugContainerKey",get:function(){var e=n.FACTORY_FOR.get(this)
return void 0!==e&&e.fullName}},{key:r.OWNER,get:function(){if(this[l])return this[l]
var e=n.FACTORY_FOR.get(this)
return void 0!==e&&e.owner},set:function(e){this[l]=e}}]),i}(a.default)
e.default=h,(0,i.setName)(h,"Ember.Object"),s.default.apply(h.prototype),e.FrameworkObject=c,e.FrameworkObject=c=function(e){function i(n){var i
return i=e.call(this)||this,(0,r.setOwner)((0,t.assertThisInitialized)(i),n),i}return(0,t.inheritsLoose)(i,e),(0,t.createClass)(i,[{key:"_debugContainerKey",get:function(){var e=n.FACTORY_FOR.get(this)
return void 0!==e&&e.fullName}}]),i}(a.default),s.default.apply(c.prototype)})
e("@ember/-internals/runtime/lib/system/object_proxy",["exports","ember-babel","@ember/-internals/runtime/lib/system/object","@ember/-internals/runtime/lib/mixins/-proxy"],function(e,t,n,r){"use strict"
e.default=void 0
var i=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n}(n.default)
e.default=i,i.PrototypeMixin.reopen(r.default)}),e("@ember/-internals/runtime/lib/type-of",["exports","@ember/-internals/runtime/lib/system/core_object"],function(e,t){"use strict"
e.typeOf=function(e){if(null===e)return"null"
if(void 0===e)return"undefined"
var i=n[r.call(e)]||"object"
"function"===i?t.default.detect(e)&&(i="class"):"object"===i&&(e instanceof Error?i="error":e instanceof t.default?i="instance":e instanceof Date&&(i="date"))
return i}
var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object FileList]":"filelist"},r=Object.prototype.toString}),e("@ember/-internals/utils",["exports","@ember/polyfills","@ember/debug"],function(e,t,n){"use strict"
function r(e){var t={}
for(var n in t[e]=1,t)if(n===e)return n
return e}function i(e){return null!==e&&("object"==typeof e||"function"==typeof e)}e.symbol=f,e.isInternalSymbol=function(e){return-1!==h.indexOf(e)},e.dictionary=function(e){var t=Object.create(e)
return t._dict=null,delete t._dict,t},e.uuid=a,e.generateGuid=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s)+a()
i(e)&&u.set(e,t)
return t},e.guidFor=function(e){var t
if(i(e))void 0===(t=u.get(e))&&(t=s+a(),u.set(e,t))
else if(void 0===(t=c.get(e))){var n=typeof e
t="string"===n?"st"+a():"number"===n?"nu"+a():"symbol"===n?"sy"+a():"("+e+")",c.set(e,t)}return t},e.intern=r,e.wrap=function(e,t){if(!b(e))return e
if(!k.has(t)&&b(t))return S(e,S(t,y))
return S(e,t)},e.getObservers=_,e.getListeners=C,e.setObservers=w,e.setListeners=E,e.inspect=function(e){if("number"==typeof e&&2===arguments.length)return this
return F(e,0)},e.lookupDescriptor=function(e,t){var n=e
do{var r=Object.getOwnPropertyDescriptor(n,t)
if(void 0!==r)return r
n=Object.getPrototypeOf(n)}while(null!==n)
return null},e.canInvoke=B,e.tryInvoke=function(e,t,n){if(B(e,t)){var r=e[t]
return r.apply(e,n)}},e.makeArray=function(e){if(null==e)return[]
return j(e)?e:[e]},e.getName=function(e){return z.get(e)},e.setName=function(e,t){i(e)&&z.set(e,t)},e.toString=function e(t){if("string"==typeof t)return t
if(null===t)return"null"
if(void 0===t)return"undefined"
if(Array.isArray(t)){for(var n="",r=0;r<t.length;r++)r>0&&(n+=","),W(t[r])||(n+=e(t[r]))
return n}if("function"==typeof t.toString)return t.toString()
return U.call(t)},e.isProxy=function(e){if(i(e))return H.has(e)
return!1},e.setProxy=function(e){i(e)&&H.add(e)},e.isEmberArray=function(e){return e&&e[Y]},e.setWithMandatorySetter=e.teardownMandatorySetter=e.setupMandatorySetter=e.EMBER_ARRAY=e.Cache=e.HAS_NATIVE_PROXY=e.HAS_NATIVE_SYMBOL=e.ROOT=e.checkHasSuper=e.GUID_KEY=e.getOwnPropertyDescriptors=void 0
var o=0
function a(){return++o}var s="ember",u=new WeakMap,c=new Map,l=r("__ember"+Date.now())
e.GUID_KEY=l
var h=[]
function f(e){var t=r("__"+e+(l+Math.floor(Math.random()*Date.now()))+"__")
return h.push(t),t}var d=void 0!==Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(e){var t={}
return Object.keys(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t}
e.getOwnPropertyDescriptors=d
var p=/\.(_super|call\(this|apply\(this)/,v=Function.prototype.toString,m=v.call(function(){return this}).indexOf("return this")>-1?function(e){return p.test(v.call(e))}:function(){return!0}
e.checkHasSuper=m
var g=new WeakMap,y=Object.freeze(function(){})
function b(e){var t=g.get(e)
return void 0===t&&(t=m(e),g.set(e,t)),t}e.ROOT=y,g.set(y,!1)
var x=new WeakMap
function w(e,t){x.set(e,t)}function _(e){return x.get(e)}var R=new WeakMap
function E(e,t){t&&R.set(e,t)}function C(e){return R.get(e)}var k=new t._WeakSet
function S(e,t){function n(){var n=this._super
this._super=t
var r=e.apply(this,arguments)
return this._super=n,r}return k.add(n),w(n,_(e)),E(n,C(e)),n}var A=Object.prototype.toString,T=Function.prototype.toString,O=Array.isArray,I=Object.keys,N=JSON.stringify,D=100,P=4,M=/^[\w$]+$/
function F(e,n,r){var i=!1
switch(typeof e){case"undefined":return"undefined"
case"object":if(null===e)return"null"
if(O(e)){i=!0
break}if(e.toString===A||void 0===e.toString)break
return e.toString()
case"function":return e.toString===T?e.name?"[Function:"+e.name+"]":"[Function]":e.toString()
case"string":return N(e)
case"symbol":case"boolean":case"number":default:return e.toString()}if(void 0===r)r=new t._WeakSet
else if(r.has(e))return"[Circular]"
return r.add(e),i?function(e,t,n){if(t>P)return"[Array]"
for(var r="[",i=0;i<e.length;i++){if(r+=0===i?" ":", ",i>=D){r+="... "+(e.length-D)+" more items"
break}r+=F(e[i],t,n)}return r+=" ]"}(e,n+1,r):function(e,t,n){if(t>P)return"[Object]"
for(var r="{",i=I(e),o=0;o<i.length;o++){if(r+=0===o?" ":", ",o>=D){r+="... "+(i.length-D)+" more keys"
break}var a=i[o]
r+=L(a)+": "+F(e[a],t,n)}return r+=" }"}(e,n+1,r)}function L(e){return M.test(e)?e:N(e)}function B(e,t){return null!=e&&"function"==typeof e[t]}var j=Array.isArray
var z=new WeakMap
var U=Object.prototype.toString
function W(e){return null==e}var V="function"==typeof Symbol&&"[object Symbol]"===Object.prototype.toString.call(Symbol())
e.HAS_NATIVE_SYMBOL=V
var q="function"==typeof Proxy
e.HAS_NATIVE_PROXY=q
var H=new t._WeakSet
var G=function(){function e(e,t,n){this.limit=e,this.func=t,this.store=n,this.size=0,this.misses=0,this.hits=0,this.store=n||new Map}var t=e.prototype
return t.get=function(e){return this.store.has(e)?(this.hits++,this.store.get(e)):(this.misses++,this.set(e,this.func(e)))},t.set=function(e,t){return this.limit>this.size&&(this.size++,this.store.set(e,t)),t},t.purge=function(){this.store.clear(),this.size=0,this.hits=0,this.misses=0},e}()
e.Cache=G
var K,$,X,Y=f("EMBER_ARRAY")
e.EMBER_ARRAY=Y,e.setupMandatorySetter=K,e.teardownMandatorySetter=$,e.setWithMandatorySetter=X}),e("@ember/-internals/views/index",["exports","@ember/-internals/views/lib/system/jquery","@ember/-internals/views/lib/system/utils","@ember/-internals/views/lib/system/event_dispatcher","@ember/-internals/views/lib/component_lookup","@ember/-internals/views/lib/mixins/text_support","@ember/-internals/views/lib/views/core_view","@ember/-internals/views/lib/mixins/class_names_support","@ember/-internals/views/lib/mixins/child_views_support","@ember/-internals/views/lib/mixins/view_state_support","@ember/-internals/views/lib/mixins/view_support","@ember/-internals/views/lib/mixins/action_support","@ember/-internals/views/lib/compat/attrs","@ember/-internals/views/lib/system/lookup_partial","@ember/-internals/views/lib/utils/lookup-component","@ember/-internals/views/lib/system/action_manager"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v){"use strict"
Object.defineProperty(e,"jQuery",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"jQueryDisabled",{enumerable:!0,get:function(){return t.jQueryDisabled}}),Object.defineProperty(e,"addChildView",{enumerable:!0,get:function(){return n.addChildView}}),Object.defineProperty(e,"isSimpleClick",{enumerable:!0,get:function(){return n.isSimpleClick}}),Object.defineProperty(e,"getViewBounds",{enumerable:!0,get:function(){return n.getViewBounds}}),Object.defineProperty(e,"getViewClientRects",{enumerable:!0,get:function(){return n.getViewClientRects}}),Object.defineProperty(e,"getViewBoundingClientRect",{enumerable:!0,get:function(){return n.getViewBoundingClientRect}}),Object.defineProperty(e,"getRootViews",{enumerable:!0,get:function(){return n.getRootViews}}),Object.defineProperty(e,"getChildViews",{enumerable:!0,get:function(){return n.getChildViews}}),Object.defineProperty(e,"getViewId",{enumerable:!0,get:function(){return n.getViewId}}),Object.defineProperty(e,"getElementView",{enumerable:!0,get:function(){return n.getElementView}}),Object.defineProperty(e,"getViewElement",{enumerable:!0,get:function(){return n.getViewElement}}),Object.defineProperty(e,"setElementView",{enumerable:!0,get:function(){return n.setElementView}}),Object.defineProperty(e,"setViewElement",{enumerable:!0,get:function(){return n.setViewElement}}),Object.defineProperty(e,"clearElementView",{enumerable:!0,get:function(){return n.clearElementView}}),Object.defineProperty(e,"clearViewElement",{enumerable:!0,get:function(){return n.clearViewElement}}),Object.defineProperty(e,"constructStyleDeprecationMessage",{enumerable:!0,get:function(){return n.constructStyleDeprecationMessage}}),Object.defineProperty(e,"EventDispatcher",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"ComponentLookup",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"TextSupport",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"CoreView",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ClassNamesSupport",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"ChildViewsSupport",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"ViewStateSupport",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"ViewMixin",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"ActionSupport",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"MUTABLE_CELL",{enumerable:!0,get:function(){return f.MUTABLE_CELL}}),Object.defineProperty(e,"lookupPartial",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"hasPartial",{enumerable:!0,get:function(){return d.hasPartial}}),Object.defineProperty(e,"lookupComponent",{enumerable:!0,get:function(){return p.default}})
Object.defineProperty(e,"ActionManager",{enumerable:!0,get:function(){return v.default}})}),e("@ember/-internals/views/lib/compat/attrs",["exports","@ember/-internals/utils"],function(e,t){"use strict"
e.MUTABLE_CELL=void 0
var n=(0,t.symbol)("MUTABLE_CELL")
e.MUTABLE_CELL=n}),e("@ember/-internals/views/lib/compat/fallback-view-registry",["exports","@ember/-internals/utils"],function(e,t){"use strict"
e.default=void 0
var n=(0,t.dictionary)(null)
e.default=n}),e("@ember/-internals/views/lib/component_lookup",["exports","@ember/-internals/runtime"],function(e,t){"use strict"
e.default=void 0
var n=t.Object.extend({componentFor:function(e,t,n){var r="component:"+e
return t.factoryFor(r,n)},layoutFor:function(e,t,n){var r="template:components/"+e
return t.lookup(r,n)}})
e.default=n}),e("@ember/-internals/views/lib/mixins/action_support",["exports","@ember/-internals/utils","@ember/-internals/metal","@ember/debug","@ember/-internals/views/lib/compat/attrs","@ember/deprecated-features"],function(e,t,n,r,i,o){"use strict"
e.default=void 0
var a={send:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i]
var o=this.actions&&this.actions[e]
if(o&&!(!0===o.apply(this,r)))return
var a=(0,n.get)(this,"target")
a&&a.send.apply(a,arguments)}}
if(o.SEND_ACTION){var s=function(e,t){return t&&t[i.MUTABLE_CELL]&&(t=t.value),t}
a.sendAction=function(e){var t
if(void 0===e&&(e="action"),t=(0,n.get)(this,"attrs."+e)||(0,n.get)(this,e),void 0!==(t=s(this,t))){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o]
"function"==typeof t?t.apply(void 0,i):this.triggerAction({action:t,actionContext:i})}}}var u=n.Mixin.create(a)
e.default=u}),e("@ember/-internals/views/lib/mixins/child_views_support",["exports","@ember/-internals/metal","@ember/-internals/views/lib/system/utils"],function(e,t,n){"use strict"
e.default=void 0
var r=t.Mixin.create({childViews:(0,t.nativeDescDecorator)({configurable:!1,enumerable:!1,get:function(){return(0,n.getChildViews)(this)}}),appendChild:function(e){(0,n.addChildView)(this,e)}})
e.default=r}),e("@ember/-internals/views/lib/mixins/class_names_support",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
e.default=void 0
var r=Object.freeze([]),i=t.Mixin.create({concatenatedProperties:["classNames","classNameBindings"],init:function(){this._super.apply(this,arguments)},classNames:r,classNameBindings:r})
e.default=i}),e("@ember/-internals/views/lib/mixins/text_support",["exports","@ember/-internals/metal","@ember/-internals/runtime","@ember/debug","@ember/deprecated-features"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o={13:"insertNewline",27:"cancel"},a=t.Mixin.create(n.TargetActionSupport,{value:"",attributeBindings:["autocapitalize","autocorrect","autofocus","disabled","form","maxlength","minlength","placeholder","readonly","required","selectionDirection","spellcheck","tabindex","title"],placeholder:null,disabled:!1,maxlength:null,init:function(){this._super.apply(this,arguments),this.on("paste",this,this._elementValueDidChange),this.on("cut",this,this._elementValueDidChange),this.on("input",this,this._elementValueDidChange)},bubbles:!1,interpretKeyEvents:function(e){var t=o[e.keyCode]
if(this._elementValueDidChange(),t)return this[t](e)},_elementValueDidChange:function(){(0,t.set)(this,"value",this.element.value)},change:function(e){this._elementValueDidChange(e)},insertNewline:function(e){s("enter",this,e),s("insert-newline",this,e)},cancel:function(e){s("escape-press",this,e)},focusIn:function(e){s("focus-in",this,e)},focusOut:function(e){this._elementValueDidChange(e),s("focus-out",this,e)},keyPress:function(e){s("key-press",this,e)},keyUp:function(e){this.interpretKeyEvents(e),s("key-up",this,e)},keyDown:function(e){s("key-down",this,e)}})
function s(e,n,r){var o=(0,t.get)(n,"attrs."+e)||(0,t.get)(n,e),a=(0,t.get)(n,"value")
if(i.SEND_ACTION&&"string"==typeof o){n.triggerAction({action:o,actionContext:[a,r]})}else"function"==typeof o&&o(a,r)
o&&!(0,t.get)(n,"bubbles")&&r.stopPropagation()}e.default=a}),e("@ember/-internals/views/lib/mixins/view_state_support",["exports","@ember/-internals/metal"],function(e,t){"use strict"
e.default=void 0
var n=t.Mixin.create({_transitionTo:function(e){var t=this._currentState,n=this._currentState=this._states[e]
this._state=e,t&&t.exit&&t.exit(this),n.enter&&n.enter(this)}})
e.default=n}),e("@ember/-internals/views/lib/mixins/view_support",["exports","@ember/-internals/utils","@ember/-internals/metal","@ember/debug","@ember/-internals/browser-environment","@ember/-internals/views/lib/system/utils","@ember/-internals/views/lib/system/jquery","@ember/deprecated-features"],function(e,t,n,r,i,o,a,s){"use strict"
function u(){return this}e.default=void 0
var c={concatenatedProperties:["attributeBindings"],nearestOfType:function(e){for(var t=this.parentView,r=e instanceof n.Mixin?function(t){return e.detect(t)}:function(t){return e.detect(t.constructor)};t;){if(r(t))return t
t=t.parentView}},nearestWithProperty:function(e){for(var t=this.parentView;t;){if(e in t)return t
t=t.parentView}},rerender:function(){return this._currentState.rerender(this)},element:(0,n.nativeDescDecorator)({configurable:!1,enumerable:!1,get:function(){return this.renderer.getElement(this)}}),appendTo:function(e){var t
return t=i.hasDOM&&"string"==typeof e?document.querySelector(e):e,this.renderer.appendTo(this,t),this},append:function(){return this.appendTo(document.body)},elementId:null,willInsertElement:u,didInsertElement:u,willClearRender:u,destroy:function(){this._super.apply(this,arguments),this._currentState.destroy(this)},willDestroyElement:u,didDestroyElement:u,parentViewDidChange:u,tagName:null,init:function(){this._super.apply(this,arguments),this.elementId||""===this.tagName||(this.elementId=(0,t.guidFor)(this))},handleEvent:function(e,t){return this._currentState.handleEvent(this,e,t)}}
s.JQUERY_INTEGRATION&&(c.$=function(e){if(this.element)return e?(0,a.default)(e,this.element):(0,a.default)(this.element)})
var l=n.Mixin.create(c)
e.default=l}),e("@ember/-internals/views/lib/system/action_manager",["exports"],function(e){"use strict"
function t(){}e.default=t,t.registeredActions={}}),e("@ember/-internals/views/lib/system/event_dispatcher",["exports","@ember/-internals/owner","@ember/polyfills","@ember/debug","@ember/-internals/metal","@ember/-internals/runtime","@ember/-internals/views","@ember/-internals/views/lib/system/jquery","@ember/-internals/views/lib/system/action_manager","@ember/-internals/views/lib/system/jquery_event_deprecation","@ember/-internals/views/lib/system/utils","@ember/deprecated-features"],function(e,t,n,r,i,o,a,s,u,c,l,h){"use strict"
e.default=void 0
var f={mouseenter:"mouseover",mouseleave:"mouseout"},d=o.Object.extend({events:{touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"},rootElement:"body",init:function(){this._super(),this._eventHandlers=Object.create(null)},setup:function(e,t){var r=this._finalEvents=(0,n.assign)({},(0,i.get)(this,"events"),e)
null!=t&&(0,i.set)(this,"rootElement",t)
var o,a=(0,i.get)(this,"rootElement")
if(!h.JQUERY_INTEGRATION||s.jQueryDisabled)(o="string"!=typeof a?a:document.querySelector(a)).classList.add("ember-application")
else if((o=(0,s.default)(a)).addClass("ember-application"),!o.is(".ember-application"))throw new TypeError("Unable to add 'ember-application' class to root element ("+(o.selector||o[0].tagName)+"). Make sure you set rootElement to the body or an element in the body.")
for(var u in r)r.hasOwnProperty(u)&&this.setupHandler(o,u,r[u])},setupHandler:function(e,t,n){if(null!==n)if(!h.JQUERY_INTEGRATION||s.jQueryDisabled){var r=function(e,t){var r=(0,a.getElementView)(e),i=!0
return r&&(i=r.handleEvent(n,t)),i},i=function(e,t){var r=e.getAttribute("data-ember-action"),i=u.default.registeredActions[r]
if(""===r){var o=e.attributes,a=o.length
i=[]
for(var s=0;s<a;s++){var c=o.item(s)
0===c.name.indexOf("data-ember-action-")&&(i=i.concat(u.default.registeredActions[c.value]))}}if(i){for(var l=!0,h=0;h<i.length;h++){var f=i[h]
f&&f.eventName===n&&(l=f.handler(t)&&l)}return l}}
if(void 0!==f[t]){var o=f[t],d=t,p=function(e,t){var n=document.createEvent("MouseEvent")
return n.initMouseEvent(e,!1,!1,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),Object.defineProperty(n,"target",{value:t.target,enumerable:!0}),n},v=this._eventHandlers[o]=function(e){for(var t=e.target,n=e.relatedTarget;t&&1===t.nodeType&&(null===n||n!==t&&!(0,l.contains)(t,n));)(0,a.getElementView)(t)?r(t,p(d,e)):t.hasAttribute("data-ember-action")&&i(t,p(d,e)),t=t.parentNode}
e.addEventListener(o,v)}else{var m=this._eventHandlers[t]=function(e){var t=e.target
do{if((0,a.getElementView)(t)){if(!1===r(t,e)){e.preventDefault(),e.stopPropagation()
break}if(!0===e.cancelBubble)break}else if("function"==typeof t.hasAttribute&&t.hasAttribute("data-ember-action")&&!1===i(t,e))break
t=t.parentNode}while(t&&1===t.nodeType)}
e.addEventListener(t,m)}}else e.on(t+".ember",".ember-view",function(e){var t=(0,a.getElementView)(this),r=!0
return t&&(r=t.handleEvent(n,(0,c.default)(e))),r}),e.on(t+".ember","[data-ember-action]",function(e){var t=e.currentTarget.attributes,r=[]
e=(0,c.default)(e)
for(var i=0;i<t.length;i++){var o=t.item(i)
if(-1!==o.name.lastIndexOf("data-ember-action-",0)){var a=u.default.registeredActions[o.value]
a&&a.eventName===n&&-1===r.indexOf(a)&&(a.handler(e),r.push(a))}}})},destroy:function(){var e,t=(0,i.get)(this,"rootElement")
if(e=t.nodeType?t:document.querySelector(t)){if(!h.JQUERY_INTEGRATION||s.jQueryDisabled)for(var n in this._eventHandlers)e.removeEventListener(n,this._eventHandlers[n])
else(0,s.default)(t).off(".ember","**")
return e.classList.remove("ember-application"),this._super.apply(this,arguments)}},toString:function(){return"(EventDispatcher)"}})
e.default=d}),e("@ember/-internals/views/lib/system/jquery",["exports","@ember/-internals/environment","@ember/-internals/browser-environment","@ember/deprecated-features"],function(e,t,n,r){"use strict"
var i
e.default=e.jQueryDisabled=void 0
var o=!r.JQUERY_INTEGRATION||!1===t.ENV._JQUERY_INTEGRATION
e.jQueryDisabled=o,r.JQUERY_INTEGRATION&&n.hasDOM&&(i=t.context.imports.jQuery,!o&&i?i.event.addProp?i.event.addProp("dataTransfer"):["dragstart","drag","dragenter","dragleave","dragover","drop","dragend"].forEach(function(e){i.event.fixHooks[e]={props:["dataTransfer"]}}):e.jQueryDisabled=o=!0)
var a=o?void 0:i
e.default=a}),e("@ember/-internals/views/lib/system/jquery_event_deprecation",["exports","@ember/debug","@ember/-internals/environment","@ember/-internals/utils","@ember/deprecated-features"],function(e,t,n,r,i){"use strict"
e.default=function(e){return e}}),e("@ember/-internals/views/lib/system/lookup_partial",["exports","@ember/debug","@ember/error"],function(e,t,n){"use strict"
function r(e){var t=e.split("/"),n=t[t.length-1]
return t[t.length-1]="_"+n,t.join("/")}e.default=function(e,t){if(null==e)return
var i=function(e,t,r){if(!r)return
if(!e)throw new n.default("Container was not found when looking up a views template. This is most likely due to manually instantiating an Ember.View. See: http://git.io/EKPpnA")
return e.lookup("template:"+t)||e.lookup("template:"+r)}(t,r(e),e)
return i},e.hasPartial=function(e,t){if(!t)throw new n.default("Container was not found when looking up a views template. This is most likely due to manually instantiating an Ember.View. See: http://git.io/EKPpnA")
return t.hasRegistration("template:"+r(e))||t.hasRegistration("template:"+e)}}),e("@ember/-internals/views/lib/system/utils",["exports","@ember/-internals/owner","@ember/-internals/utils"],function(e,t,n){"use strict"
function r(e){return""!==e.tagName&&e.elementId?e.elementId:(0,n.guidFor)(e)}e.isSimpleClick=function(e){var t=e.shiftKey||e.metaKey||e.altKey||e.ctrlKey,n=e.which>1
return!t&&!n},e.constructStyleDeprecationMessage=function(e){return'Binding style attributes may introduce cross-site scripting vulnerabilities; please ensure that values being bound are properly escaped. For more information, including how to disable this warning, see https://emberjs.com/deprecations/v1.x/#toc_binding-style-attributes. Style affected: "'+e+'"'},e.getRootViews=function(e){var t=e.lookup("-view-registry:main"),n=[]
return Object.keys(t).forEach(function(e){var r=t[e]
null===r.parentView&&n.push(r)}),n},e.getViewId=r,e.getElementView=function(e){return i.get(e)||null},e.getViewElement=function(e){return o.get(e)||null},e.setElementView=function(e,t){i.set(e,t)},e.setViewElement=function(e,t){o.set(e,t)},e.clearElementView=function(e){i.delete(e)},e.clearViewElement=function(e){o.delete(e)},e.getChildViews=function(e){var n=(0,t.getOwner)(e).lookup("-view-registry:main")
return u(e,n)},e.initChildViews=s,e.addChildView=function(e,t){var n=a.get(e)
void 0===n&&(n=s(e))
n.add(r(t))},e.collectChildViews=u,e.getViewBounds=c,e.getViewRange=l,e.getViewClientRects=function(e){return l(e).getClientRects()},e.getViewBoundingClientRect=function(e){return l(e).getBoundingClientRect()},e.matches=function(e,t){return h.call(e,t)},e.contains=function(e,t){if(void 0!==e.contains)return e.contains(t)
for(;t=t.parentNode;)if(t===e)return!0
return!1},e.elMatches=void 0
var i=new WeakMap,o=new WeakMap
var a=new WeakMap
function s(e){var t=new Set
return a.set(e,t),t}function u(e,t){var n=[],r=a.get(e)
return void 0!==r&&r.forEach(function(e){var r=t[e]
!r||r.isDestroying||r.isDestroyed||n.push(r)}),n}function c(e){return e.renderer.getBounds(e)}function l(e){var t=c(e),n=document.createRange()
return n.setStartBefore(t.firstNode),n.setEndAfter(t.lastNode),n}var h="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector)
e.elMatches=h}),e("@ember/-internals/views/lib/utils/lookup-component",["exports"],function(e){"use strict"
function t(e,t,n,r){var i=e.componentFor(n,t,r)
return{layout:e.layoutFor(n,t,r),component:i}}e.default=function(e,n,r){var i=e.lookup("component-lookup:main")
if(r&&(r.source||r.namespace)){var o=t(i,e,n,r)
if(o.component||o.layout)return o}return t(i,e,n)}}),e("@ember/-internals/views/lib/views/core_view",["exports","@ember/-internals/runtime","@ember/-internals/views/lib/views/states"],function(e,t,n){"use strict"
e.default=void 0
var r=t.FrameworkObject.extend(t.Evented,t.ActionHandler,{isView:!0,_states:n.default,init:function(){if(this._super.apply(this,arguments),this._state="preRender",this._currentState=this._states.preRender,!this.renderer)throw new Error("Cannot instantiate a component without a renderer. Please ensure that you are creating "+this+" with a proper container/registry.")},parentView:null,instrumentDetails:function(e){return e.object=this.toString(),e.containerKey=this._debugContainerKey,e.view=this,e},trigger:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this._super.apply(this,arguments)
var i=this[e]
if("function"==typeof i)return i.apply(this,n)},has:function(e){return"function"==typeof this[e]||this._super(e)}})
r.reopenClass({isViewFactory:!0})
var i=r
e.default=i}),e("@ember/-internals/views/lib/views/states",["exports","@ember/-internals/views/lib/views/states/pre_render","@ember/-internals/views/lib/views/states/has_element","@ember/-internals/views/lib/views/states/in_dom","@ember/-internals/views/lib/views/states/destroying"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=Object.freeze({preRender:t.default,inDOM:r.default,hasElement:n.default,destroying:i.default})
e.default=o}),e("@ember/-internals/views/lib/views/states/default",["exports","@ember/error"],function(e,t){"use strict"
e.default=void 0
var n={appendChild:function(){throw new t.default("You can't use appendChild outside of the rendering process")},handleEvent:function(){return!0},rerender:function(){},destroy:function(){}},r=Object.freeze(n)
e.default=r}),e("@ember/-internals/views/lib/views/states/destroying",["exports","@ember/polyfills","@ember/error","@ember/-internals/views/lib/views/states/default"],function(e,t,n,r){"use strict"
e.default=void 0
var i=(0,t.assign)({},r.default,{appendChild:function(){throw new n.default("You can't call appendChild on a view being destroyed")},rerender:function(){throw new n.default("You can't call rerender on a view being destroyed")}}),o=Object.freeze(i)
e.default=o}),e("@ember/-internals/views/lib/views/states/has_element",["exports","@ember/polyfills","@ember/-internals/views/lib/views/states/default","@ember/runloop","@ember/instrumentation"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=(0,t.assign)({},n.default,{rerender:function(e){e.renderer.rerender(e)},destroy:function(e){e.renderer.remove(e)},handleEvent:function(e,t,n){return!e.has(t)||(0,i.flaggedInstrument)("interaction."+t,{event:n,view:e},function(){return(0,r.join)(e,e.trigger,t,n)})}}),a=Object.freeze(o)
e.default=a}),e("@ember/-internals/views/lib/views/states/in_dom",["exports","@ember/-internals/utils","@ember/polyfills","@ember/error","@ember/-internals/views/lib/views/states/has_element"],function(e,t,n,r,i){"use strict"
e.default=void 0
var o=(0,n.assign)({},i.default,{enter:function(e){e.renderer.register(e)},exit:function(e){e.renderer.unregister(e)}}),a=Object.freeze(o)
e.default=a}),e("@ember/-internals/views/lib/views/states/pre_render",["exports","@ember/-internals/views/lib/views/states/default","@ember/polyfills"],function(e,t,n){"use strict"
e.default=void 0
var r=(0,n.assign)({},t.default),i=Object.freeze(r)
e.default=i}),e("@ember/application/globals-resolver",["exports","ember-babel","@ember/-internals/utils","@ember/-internals/metal","@ember/debug","@ember/string","@ember/-internals/runtime","@ember/application/lib/validate-type","@ember/-internals/glimmer"],function(e,t,n,r,i,o,a,s,u){"use strict"
e.default=void 0
var c=function(e){function i(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(i,e),i.create=function(t){return e.create.call(this,t)}
var a=i.prototype
return a.init=function(){this._parseNameCache=(0,n.dictionary)(null)},a.normalize=function(e){var t=e.split(":"),n=t[0],r=t[1]
return"template"!==n?n+":"+r.replace(/(\.|_|-)./g,function(e){return e.charAt(1).toUpperCase()}):e},a.resolve=function(e){var t,n=this.parseName(e),r=n.resolveMethodName
return this[r]&&(t=this[r](n)),(t=t||this.resolveOther(n))&&(0,s.default)(t,n),t},a.parseName=function(e){return this._parseNameCache[e]||(this._parseNameCache[e]=this._parseName(e))},a._parseName=function(e){var t=e.split(":"),n=t[0],i=t[1],a=i,s=(0,r.get)(this,"namespace"),u=a.lastIndexOf("/"),c=-1!==u?a.slice(0,u):null
if("template"!==n&&-1!==u){var l=a.split("/")
a=l[l.length-1]
var h=(0,o.capitalize)(l.slice(0,-1).join("."))
s=(0,r.findNamespace)(h)}var f="main"===i?"Main":(0,o.classify)(n)
if(!a||!n)throw new TypeError("Invalid fullName: `"+e+"`, must be of the form `type:name` ")
return{fullName:e,type:n,fullNameWithoutType:i,dirname:c,name:a,root:s,resolveMethodName:"resolve"+f}},a.lookupDescription=function(e){var t,n=this.parseName(e)
return"template"===n.type?"template at "+n.fullNameWithoutType.replace(/\./g,"/"):(t=n.root+"."+(0,o.classify)(n.name).replace(/\./g,""),"model"!==n.type&&(t+=(0,o.classify)(n.type)),t)},a.makeToString=function(e){return e.toString()},a.useRouterNaming=function(e){"basic"===e.name?e.name="":e.name=e.name.replace(/\./g,"_")},a.resolveTemplate=function(e){var t=e.fullNameWithoutType.replace(/\./g,"/")
return(0,u.getTemplate)(t)||(0,u.getTemplate)((0,o.decamelize)(t))},a.resolveView=function(e){return this.useRouterNaming(e),this.resolveOther(e)},a.resolveController=function(e){return this.useRouterNaming(e),this.resolveOther(e)},a.resolveRoute=function(e){return this.useRouterNaming(e),this.resolveOther(e)},a.resolveModel=function(e){var t=(0,o.classify)(e.name)
return(0,r.get)(e.root,t)},a.resolveHelper=function(e){return this.resolveOther(e)},a.resolveOther=function(e){var t=(0,o.classify)(e.name)+(0,o.classify)(e.type)
return(0,r.get)(e.root,t)},a.resolveMain=function(e){var t=(0,o.classify)(e.type)
return(0,r.get)(e.root,t)},a.knownForType=function(e){for(var t=(0,r.get)(this,"namespace"),i=(0,o.classify)(e),a=new RegExp(i+"$"),s=(0,n.dictionary)(null),u=Object.keys(t),c=0;c<u.length;c++){var l=u[c]
if(a.test(l))s[this.translateToContainerFullname(e,l)]=!0}return s},a.translateToContainerFullname=function(e,t){var n=(0,o.classify)(e),r=t.slice(0,-1*n.length)
return e+":"+(0,o.dasherize)(r)},i}(a.Object),l=c
e.default=l}),e("@ember/application/index",["exports","@ember/-internals/owner","@ember/application/lib/lazy_load","@ember/application/lib/application"],function(e,t,n,r){"use strict"
Object.defineProperty(e,"getOwner",{enumerable:!0,get:function(){return t.getOwner}}),Object.defineProperty(e,"setOwner",{enumerable:!0,get:function(){return t.setOwner}}),Object.defineProperty(e,"onLoad",{enumerable:!0,get:function(){return n.onLoad}}),Object.defineProperty(e,"runLoadHooks",{enumerable:!0,get:function(){return n.runLoadHooks}}),Object.defineProperty(e,"_loaded",{enumerable:!0,get:function(){return n._loaded}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}})}),e("@ember/application/instance",["exports","@ember/polyfills","@ember/-internals/metal","@ember/-internals/browser-environment","@ember/-internals/views","@ember/engine/instance","@ember/-internals/glimmer"],function(e,t,n,r,i,o,a){"use strict"
e.default=void 0
var s=o.default.extend({application:null,customEvents:null,rootElement:null,init:function(){this._super.apply(this,arguments),this.application._watchInstance(this),this.register("-application-instance:main",this,{instantiate:!1})},_bootSync:function(e){return this._booted?this:(e=new u(e),this.setupRegistry(e),e.rootElement?this.rootElement=e.rootElement:this.rootElement=this.application.rootElement,e.location&&(0,n.set)(this.router,"location",e.location),this.application.runInstanceInitializers(this),e.isInteractive&&this.setupEventDispatcher(),this._booted=!0,this)},setupRegistry:function(e){this.constructor.setupRegistry(this.__registry__,e)},router:(0,n.computed)(function(){return this.lookup("router:main")}).readOnly(),didCreateRootView:function(e){e.appendTo(this.rootElement)},startRouting:function(){this.router.startRouting(),this._didSetupRouter=!0},setupRouter:function(){this._didSetupRouter||(this._didSetupRouter=!0,this.router.setupRouter())},handleURL:function(e){return this.setupRouter(),this.router.handleURL(e)},setupEventDispatcher:function(){var e=this.lookup("event_dispatcher:main"),r=(0,n.get)(this.application,"customEvents"),i=(0,n.get)(this,"customEvents"),o=(0,t.assign)({},r,i)
return e.setup(o,this.rootElement),e},getURL:function(){return this.router.url},visit:function(e){var t=this
this.setupRouter()
var r=this.__container__.lookup("-environment:main"),i=this.router,o=function(){return r.options.shouldRender?(0,a.renderSettled)().then(function(){return t}):t},s=function(e){if(e.error)throw e.error
if("TransitionAborted"===e.name&&i._routerMicrolib.activeTransition)return i._routerMicrolib.activeTransition.then(o,s)
throw"TransitionAborted"===e.name?new Error(e.message):e},u=(0,n.get)(i,"location")
return u.setURL(e),i.handleURL(u.getURL()).then(o,s)},willDestroy:function(){this._super.apply(this,arguments),this.application._unwatchInstance(this)}})
s.reopenClass({setupRegistry:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
t.toEnvironment||(t=new u(t)),e.register("-environment:main",t.toEnvironment(),{instantiate:!1}),e.register("service:-document",t.document,{instantiate:!1}),this._super(e,t)}})
var u=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this.jQuery=i.jQuery,this.isInteractive=r.hasDOM,this._renderMode=e._renderMode,void 0!==e.isBrowser?this.isBrowser=Boolean(e.isBrowser):this.isBrowser=r.hasDOM,this.isBrowser||(this.jQuery=null,this.isInteractive=!1,this.location="none"),void 0!==e.shouldRender?this.shouldRender=Boolean(e.shouldRender):this.shouldRender=!0,this.shouldRender||(this.jQuery=null,this.isInteractive=!1),e.document?this.document=e.document:this.document="undefined"!=typeof document?document:null,e.rootElement&&(this.rootElement=e.rootElement),void 0!==e.location&&(this.location=e.location),void 0!==e.jQuery&&(this.jQuery=e.jQuery),void 0!==e.isInteractive&&(this.isInteractive=Boolean(e.isInteractive))}return e.prototype.toEnvironment=function(){var e=(0,t.assign)({},r)
return e.hasDOM=this.isBrowser,e.isInteractive=this.isInteractive,e._renderMode=this._renderMode,e.options=this,e},e}(),c=s
e.default=c})
e("@ember/application/lib/application",["exports","@ember/-internals/utils","@ember/-internals/environment","@ember/-internals/browser-environment","@ember/debug","@ember/runloop","@ember/-internals/metal","@ember/application/lib/lazy_load","@ember/-internals/runtime","@ember/-internals/views","@ember/-internals/routing","@ember/application/instance","@ember/engine","@ember/-internals/container","@ember/-internals/glimmer","@ember/deprecated-features"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v){"use strict"
function m(){const e=function(e,t){t||(t=e.slice(0))
return e.raw=t,e}(["-bucket-cache:main"])
return m=function(){return e},e}e.default=void 0
var g=!1,y=f.default.extend({rootElement:"body",eventDispatcher:null,customEvents:null,autoboot:!0,_globalsMode:!0,_applicationInstances:null,init:function(){this._super.apply(this,arguments),this.$||(this.$=c.jQuery),g||(g=!0,v.JQUERY_INTEGRATION&&r.hasDOM&&!c.jQueryDisabled&&a.libraries.registerCoreLibrary("jQuery",(0,c.jQuery)().jquery)),this._readinessDeferrals=1,this._booted=!1,this._applicationInstances=new Set,this.autoboot=this._globalsMode=Boolean(this.autoboot),this._globalsMode&&this._prepareForGlobalsMode(),this.autoboot&&this.waitForDOMReady()},buildInstance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return e.base=this,e.application=this,h.default.create(e)},_watchInstance:function(e){this._applicationInstances.add(e)},_unwatchInstance:function(e){return this._applicationInstances.delete(e)},_prepareForGlobalsMode:function(){this.Router=(this.Router||l.Router).extend(),this._buildDeprecatedInstance()},_buildDeprecatedInstance:function(){var e=this.buildInstance()
this.__deprecatedInstance__=e,this.__container__=e.__container__},waitForDOMReady:function(){!this.$||this.$.isReady?(0,o.schedule)("actions",this,"domReady"):this.$().ready((0,o.bind)(this,"domReady"))},domReady:function(){this.isDestroyed||this._bootSync()},deferReadiness:function(){this._readinessDeferrals++},advanceReadiness:function(){this._readinessDeferrals--,0===this._readinessDeferrals&&(0,o.once)(this,this.didBecomeReady)},boot:function(){if(this._bootPromise)return this._bootPromise
try{this._bootSync()}catch(e){}return this._bootPromise},_bootSync:function(){if(!this._booted){var e=this._bootResolver=u.RSVP.defer()
this._bootPromise=e.promise
try{this.runInitializers(),(0,s.runLoadHooks)("application",this),this.advanceReadiness()}catch(t){throw e.reject(t),t}}},reset:function(){var e=this.__deprecatedInstance__
this._readinessDeferrals=1,this._bootPromise=null,this._bootResolver=null,this._booted=!1,(0,o.join)(this,function(){(0,o.run)(e,"destroy"),this._buildDeprecatedInstance(),(0,o.schedule)("actions",this,"_bootSync")})},didBecomeReady:function(){try{var e
if((0,i.isTesting)()||((0,a.processAllNamespaces)(),(0,a.setNamespaceSearchDisabled)(!0)),this.autoboot)(e=this._globalsMode?this.__deprecatedInstance__:this.buildInstance())._bootSync(),this.ready(),e.startRouting()
this._bootResolver.resolve(this),this._booted=!0}catch(t){throw this._bootResolver.reject(t),t}},ready:function(){return this},willDestroy:function(){this._super.apply(this,arguments),(0,a.setNamespaceSearchDisabled)(!1),this._booted=!1,this._bootPromise=null,this._bootResolver=null,s._loaded.application===this&&(s._loaded.application=void 0),this._applicationInstances.size&&(this._applicationInstances.forEach(function(e){return e.destroy()}),this._applicationInstances.clear())},visit:function(e,t){var n=this
return this.boot().then(function(){var r=n.buildInstance()
return r.boot(t).then(function(){return r.visit(e)}).catch(function(e){throw(0,o.run)(r,"destroy"),e})})}})
y.reopenClass({buildRegistry:function(){var e=this._super.apply(this,arguments)
return function(e){e.register("router:main",l.Router.extend()),e.register("-view-registry:main",{create:function(){return(0,t.dictionary)(null)}}),e.register("route:basic",l.Route),e.register("event_dispatcher:main",c.EventDispatcher),e.injection("router:main","namespace","application:main"),e.register("location:auto",l.AutoLocation),e.register("location:hash",l.HashLocation),e.register("location:history",l.HistoryLocation),e.register("location:none",l.NoneLocation),e.register((0,d.privatize)(m()),{create:function(){return new l.BucketCache}}),e.register("service:router",l.RouterService),e.injection("service:router","_router","router:main")}(e),(0,p.setupApplicationRegistry)(e),e}})
var b=y
e.default=b}),e("@ember/application/lib/lazy_load",["exports","@ember/-internals/environment","@ember/-internals/browser-environment"],function(e,t,n){"use strict"
e.onLoad=function(e,t){var n=i[e]
r[e]=r[e]||[],r[e].push(t),n&&t(n)},e.runLoadHooks=function(e,t){if(i[e]=t,n.window&&"function"==typeof CustomEvent){var o=new CustomEvent(e,{detail:t,name:e})
n.window.dispatchEvent(o)}r[e]&&r[e].forEach(function(e){return e(t)})},e._loaded=void 0
var r=t.ENV.EMBER_LOAD_HOOKS||{},i={},o=i
e._loaded=o}),e("@ember/application/lib/validate-type",["exports","@ember/debug"],function(e,t){"use strict"
e.default=function(e,t){var r=n[t.type]
if(!r)return
r[1],r[2]}
var n={route:["assert","isRouteFactory","Ember.Route"],component:["deprecate","isComponentFactory","Ember.Component"],view:["deprecate","isViewFactory","Ember.View"],service:["deprecate","isServiceFactory","Ember.Service"]}}),e("@ember/canary-features/index",["exports","@ember/-internals/environment","@ember/polyfills"],function(e,t,n){"use strict"
e.isEnabled=function(e){var n=i[e]
return!0===n||!1===n?n:!!t.ENV.ENABLE_OPTIONAL_FEATURES},e.EMBER_FRAMEWORK_OBJECT_OWNER_ARGUMENT=e.EMBER_GLIMMER_ON_MODIFIER=e.EMBER_CUSTOM_COMPONENT_ARG_PROXY=e.EMBER_GLIMMER_FN_HELPER=e.EMBER_NATIVE_DECORATOR_SUPPORT=e.EMBER_GLIMMER_ANGLE_BRACKET_BUILT_INS=e.EMBER_GLIMMER_FORWARD_MODIFIERS_WITH_SPLATTRIBUTES=e.EMBER_METAL_TRACKED_PROPERTIES=e.EMBER_MODULE_UNIFICATION=e.EMBER_IMPROVED_INSTRUMENTATION=e.EMBER_LIBRARIES_ISREGISTERED=e.FEATURES=e.DEFAULT_FEATURES=void 0
var r={EMBER_LIBRARIES_ISREGISTERED:!1,EMBER_IMPROVED_INSTRUMENTATION:!1,EMBER_MODULE_UNIFICATION:!1,EMBER_METAL_TRACKED_PROPERTIES:!1,EMBER_GLIMMER_FORWARD_MODIFIERS_WITH_SPLATTRIBUTES:!0,EMBER_GLIMMER_ANGLE_BRACKET_BUILT_INS:!0,EMBER_NATIVE_DECORATOR_SUPPORT:!0,EMBER_GLIMMER_FN_HELPER:!0,EMBER_CUSTOM_COMPONENT_ARG_PROXY:!1,EMBER_GLIMMER_ON_MODIFIER:!0,EMBER_FRAMEWORK_OBJECT_OWNER_ARGUMENT:!0}
e.DEFAULT_FEATURES=r
var i=(0,n.assign)(r,t.ENV.FEATURES)
function o(e){return!(!t.ENV.ENABLE_OPTIONAL_FEATURES||null!==e)||e}e.FEATURES=i
var a=o(i.EMBER_LIBRARIES_ISREGISTERED)
e.EMBER_LIBRARIES_ISREGISTERED=a
var s=o(i.EMBER_IMPROVED_INSTRUMENTATION)
e.EMBER_IMPROVED_INSTRUMENTATION=s
var u=o(i.EMBER_MODULE_UNIFICATION)
e.EMBER_MODULE_UNIFICATION=u
var c=o(i.EMBER_METAL_TRACKED_PROPERTIES)
e.EMBER_METAL_TRACKED_PROPERTIES=c
var l=o(i.EMBER_GLIMMER_FORWARD_MODIFIERS_WITH_SPLATTRIBUTES)
e.EMBER_GLIMMER_FORWARD_MODIFIERS_WITH_SPLATTRIBUTES=l
var h=o(i.EMBER_GLIMMER_ANGLE_BRACKET_BUILT_INS)
e.EMBER_GLIMMER_ANGLE_BRACKET_BUILT_INS=h
var f=o(i.EMBER_NATIVE_DECORATOR_SUPPORT)
e.EMBER_NATIVE_DECORATOR_SUPPORT=f
var d=o(i.EMBER_GLIMMER_FN_HELPER)
e.EMBER_GLIMMER_FN_HELPER=d
var p=o(i.EMBER_CUSTOM_COMPONENT_ARG_PROXY)
e.EMBER_CUSTOM_COMPONENT_ARG_PROXY=p
var v=o(i.EMBER_GLIMMER_ON_MODIFIER)
e.EMBER_GLIMMER_ON_MODIFIER=v
var m=o(i.EMBER_FRAMEWORK_OBJECT_OWNER_ARGUMENT)
e.EMBER_FRAMEWORK_OBJECT_OWNER_ARGUMENT=m}),e("@ember/controller/index",["exports","@ember/-internals/runtime","@ember/-internals/metal","@ember/controller/lib/controller_mixin"],function(e,t,n,r){"use strict"
e.inject=function(){return n.inject.apply(void 0,["controller"].concat(Array.prototype.slice.call(arguments)))},e.default=void 0
var i=t.FrameworkObject.extend(r.default);(0,t.setFrameworkClass)(i)
var o=i
e.default=o}),e("@ember/controller/lib/controller_mixin",["exports","@ember/-internals/metal","@ember/-internals/runtime"],function(e,t,n){"use strict"
e.default=void 0
var r=t.Mixin.create(n.ActionHandler,{isController:!0,target:null,store:null,model:null})
e.default=r}),e("@ember/debug/index",["exports","@ember/-internals/browser-environment","@ember/error","@ember/debug/lib/deprecate","@ember/debug/lib/testing","@ember/debug/lib/warn"],function(e,t,n,r,i,o){"use strict"
Object.defineProperty(e,"registerDeprecationHandler",{enumerable:!0,get:function(){return r.registerHandler}}),Object.defineProperty(e,"isTesting",{enumerable:!0,get:function(){return i.isTesting}}),Object.defineProperty(e,"setTesting",{enumerable:!0,get:function(){return i.setTesting}}),Object.defineProperty(e,"registerWarnHandler",{enumerable:!0,get:function(){return o.registerHandler}}),e._warnIfUsingStrippedFeatureFlags=e.getDebugFunction=e.setDebugFunction=e.deprecateFunc=e.runInDebug=e.debugFreeze=e.debugSeal=e.deprecate=e.debug=e.warn=e.info=e.assert=void 0
var a=function(){},s=a
e.assert=s
var u=a
e.info=u
var c=a
e.warn=c
var l=a
e.debug=l
var h=a
e.deprecate=h
var f=a
e.debugSeal=f
var d=a
e.debugFreeze=d
var p=a
e.runInDebug=p
var v=a
e.setDebugFunction=v
var m=a
e.getDebugFunction=m
var g=function(){return arguments[arguments.length-1]}
e.deprecateFunc=g,e._warnIfUsingStrippedFeatureFlags=void 0}),e("@ember/debug/lib/deprecate",["exports","@ember/-internals/environment","@ember/debug/index","@ember/debug/lib/handlers"],function(e,t,n,r){"use strict"
e.missingOptionsUntilDeprecation=e.missingOptionsIdDeprecation=e.missingOptionsDeprecation=e.registerHandler=e.default=void 0
var i,o,a,s=function(){}
e.registerHandler=s,e.missingOptionsDeprecation=i,e.missingOptionsIdDeprecation=o,e.missingOptionsUntilDeprecation=a
var u=function(){},c=u
e.default=c}),e("@ember/debug/lib/handlers",["exports"],function(e){"use strict"
e.invoke=e.registerHandler=e.HANDLERS=void 0
var t={}
e.HANDLERS=t
var n=function(){}
e.registerHandler=n
var r=function(){}
e.invoke=r}),e("@ember/debug/lib/testing",["exports"],function(e){"use strict"
e.isTesting=function(){return t},e.setTesting=function(e){t=Boolean(e)}
var t=!1}),e("@ember/debug/lib/warn",["exports","@ember/debug/index","@ember/debug/lib/handlers"],function(e,t,n){"use strict"
e.missingOptionsDeprecation=e.missingOptionsIdDeprecation=e.registerHandler=e.default=void 0
var r=function(){}
e.registerHandler=r
var i,o,a=function(){}
e.missingOptionsDeprecation=i,e.missingOptionsIdDeprecation=o
var s=a
e.default=s}),e("@ember/deprecated-features/index",["exports"],function(e){"use strict"
e.FUNCTION_PROTOTYPE_EXTENSIONS=e.APP_CTRL_ROUTER_PROPS=e.ALIAS_METHOD=e.JQUERY_INTEGRATION=e.COMPONENT_MANAGER_STRING_LOOKUP=e.ROUTER_EVENTS=e.MERGE=e.LOGGER=e.EMBER_EXTEND_PROTOTYPES=e.SEND_ACTION=void 0
e.SEND_ACTION=!0
e.EMBER_EXTEND_PROTOTYPES=!0
e.LOGGER=!0
e.MERGE=!0
e.ROUTER_EVENTS=!0
e.COMPONENT_MANAGER_STRING_LOOKUP=!0
e.JQUERY_INTEGRATION=!0
e.ALIAS_METHOD=!0
e.APP_CTRL_ROUTER_PROPS=!0
e.FUNCTION_PROTOTYPE_EXTENSIONS=!0}),e("@ember/engine/index",["exports","@ember/engine/lib/engine-parent","@ember/-internals/utils","@ember/controller","@ember/-internals/runtime","@ember/-internals/container","dag-map","@ember/debug","@ember/-internals/metal","@ember/application/globals-resolver","@ember/engine/instance","@ember/-internals/routing","@ember/-internals/extension-support","@ember/-internals/views","@ember/-internals/glimmer"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p){"use strict"
function v(){const e=g(["-bucket-cache:main"])
return v=function(){return e},e}function m(){const e=g(["-bucket-cache:main"])
return m=function(){return e},e}function g(e,t){return t||(t=e.slice(0)),e.raw=t,e}Object.defineProperty(e,"getEngineParent",{enumerable:!0,get:function(){return t.getEngineParent}}),Object.defineProperty(e,"setEngineParent",{enumerable:!0,get:function(){return t.setEngineParent}}),e.default=void 0
var y=i.Namespace.extend(i.RegistryProxyMixin,{init:function(){this._super.apply(this,arguments),this.buildRegistry()},_initializersRan:!1,ensureInitializers:function(){this._initializersRan||(this.runInitializers(),this._initializersRan=!0)},buildInstance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return this.ensureInitializers(),e.base=this,l.default.create(e)},buildRegistry:function(){return this.__registry__=this.constructor.buildRegistry(this)},initializer:function(e){this.constructor.initializer(e)},instanceInitializer:function(e){this.constructor.instanceInitializer(e)},runInitializers:function(){var e=this
this._runInitializer("initializers",function(t,n){n.initialize(e)})},runInstanceInitializers:function(e){this._runInitializer("instanceInitializers",function(t,n){n.initialize(e)})},_runInitializer:function(e,t){for(var n,r=(0,u.get)(this.constructor,e),i=function(e){var t=[]
for(var n in e)t.push(n)
return t}(r),o=new a.default,s=0;s<i.length;s++)n=r[i[s]],o.add(n.name,n,n.before,n.after)
o.topsort(t)}})
function b(e){var t={namespace:e}
return((0,u.get)(e,"Resolver")||c.default).create(t)}function x(e,t){return function(t){if(void 0!==this.superclass[e]&&this.superclass[e]===this[e]){var n={}
n[e]=Object.create(this[e]),this.reopenClass(n)}this[e][t.name]=t}}y.reopenClass({initializers:Object.create(null),instanceInitializers:Object.create(null),initializer:x("initializers","initializer"),instanceInitializer:x("instanceInitializers","instance initializer"),buildRegistry:function(e){var t=new o.Registry({resolver:b(e)})
return t.set=u.set,t.register("application:main",e,{instantiate:!1}),function(e){e.optionsForType("component",{singleton:!1}),e.optionsForType("view",{singleton:!1}),e.register("controller:basic",r.default,{instantiate:!1}),e.injection("view","_viewRegistry","-view-registry:main"),e.injection("renderer","_viewRegistry","-view-registry:main"),e.injection("route","_topLevelViewTemplate","template:-outlet"),e.injection("view:-outlet","namespace","application:main"),e.injection("controller","target","router:main"),e.injection("controller","namespace","application:main"),e.injection("router","_bucketCache",(0,o.privatize)(m())),e.injection("route","_bucketCache",(0,o.privatize)(v())),e.injection("route","_router","router:main"),e.register("service:-routing",h.RoutingService),e.injection("service:-routing","router","router:main"),e.register("resolver-for-debugging:main",e.resolver,{instantiate:!1}),e.injection("container-debug-adapter:main","resolver","resolver-for-debugging:main"),e.injection("data-adapter:main","containerDebugAdapter","container-debug-adapter:main"),e.register("container-debug-adapter:main",f.ContainerDebugAdapter),e.register("component-lookup:main",d.ComponentLookup)}(t),(0,p.setupEngineRegistry)(t),t},resolver:null,Resolver:null})
var w=y
e.default=w}),e("@ember/engine/instance",["exports","@ember/-internals/utils","@ember/-internals/runtime","@ember/debug","@ember/error","@ember/-internals/container","@ember/engine/lib/engine-parent"],function(e,t,n,r,i,o,a){"use strict"
function s(){const e=c(["template-compiler:main"])
return s=function(){return e},e}function u(){const e=c(["-bucket-cache:main"])
return u=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),e.raw=t,e}e.default=void 0
var l=n.Object.extend(n.RegistryProxyMixin,n.ContainerProxyMixin,{base:null,init:function(){this._super.apply(this,arguments),(0,t.guidFor)(this)
var e=this.base
e||(e=this.application,this.base=e)
var n=this.__registry__=new o.Registry({fallback:e.__registry__})
this.__container__=n.container({owner:this}),this._booted=!1},boot:function(e){var t=this
return this._bootPromise?this._bootPromise:(this._bootPromise=new n.RSVP.Promise(function(n){return n(t._bootSync(e))}),this._bootPromise)},_bootSync:function(e){return this._booted?this:(this.cloneParentDependencies(),this.setupRegistry(e),this.base.runInstanceInitializers(this),this._booted=!0,this)},setupRegistry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__container__.lookup("-environment:main")
this.constructor.setupRegistry(this.__registry__,e)},unregister:function(e){this.__container__.reset(e),this._super.apply(this,arguments)},buildChildEngineInstance:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.lookup("engine:"+e)
if(!n)throw new i.default("You attempted to mount the engine '"+e+"', but it is not registered with its parent.")
var r=n.buildInstance(t)
return(0,a.setEngineParent)(r,this),r},cloneParentDependencies:function(){var e=this,t=(0,a.getEngineParent)(this);["route:basic","service:-routing","service:-glimmer-environment"].forEach(function(n){return e.register(n,t.resolveRegistration(n))})
var n=t.lookup("-environment:main")
this.register("-environment:main",n,{instantiate:!1})
var r=["router:main",(0,o.privatize)(u()),"-view-registry:main","renderer:-"+(n.isInteractive?"dom":"inert"),"service:-document",(0,o.privatize)(s())]
n.isInteractive&&r.push("event_dispatcher:main"),r.forEach(function(n){return e.register(n,t.lookup(n),{instantiate:!1})}),this.inject("view","_environment","-environment:main"),this.inject("route","_environment","-environment:main")}})
l.reopenClass({setupRegistry:function(e,t){t&&(e.injection("view","_environment","-environment:main"),e.injection("route","_environment","-environment:main"),t.isInteractive?(e.injection("view","renderer","renderer:-dom"),e.injection("component","renderer","renderer:-dom")):(e.injection("view","renderer","renderer:-inert"),e.injection("component","renderer","renderer:-inert")))}})
var h=l
e.default=h}),e("@ember/engine/lib/engine-parent",["exports","@ember/-internals/utils"],function(e,t){"use strict"
e.getEngineParent=function(e){return e[n]},e.setEngineParent=function(e,t){e[n]=t}
var n=(0,t.symbol)("ENGINE_PARENT")}),e("@ember/error/index",["exports"],function(e){"use strict"
e.default=void 0
var t=Error
e.default=t}),e("@ember/instrumentation/index",["exports","@ember/-internals/environment"],function(e,t){"use strict"
e.instrument=u,e._instrumentStart=l,e.subscribe=function(e,t){for(var i,o=e.split("."),a=[],s=0;s<o.length;s++)"*"===(i=o[s])?a.push("[^\\.]*"):a.push(i)
var u=a.join("\\.")
u+="(\\..*)?"
var c={pattern:e,regex:new RegExp("^"+u+"$"),object:t}
return n.push(c),r={},c},e.unsubscribe=function(e){for(var t=0,i=0;i<n.length;i++)n[i]===e&&(t=i)
n.splice(t,1),r={}},e.reset=function(){n.length=0,r={}},e.flaggedInstrument=e.subscribers=void 0
var n=[]
e.subscribers=n
var r={}
var i,o,a,s=(i="undefined"!=typeof window&&window.performance||{},(o=i.now||i.mozNow||i.webkitNow||i.msNow||i.oNow)?o.bind(i):Date.now)
function u(e,t,r,i){var o,a,s
if(arguments.length<=3&&"function"==typeof t?(a=t,s=r):(o=t,a=r,s=i),0===n.length)return a.call(s)
var u=o||{},h=l(e,function(){return u})
return h===c?a.call(s):function(e,t,n,r){try{return e.call(r)}catch(i){throw n.exception=i,i}finally{t()}}(a,h,u,s)}function c(){}function l(e,i,o){if(0===n.length)return c
var a=r[e]
if(a||(a=function(e){for(var t,i=[],o=0;o<n.length;o++)(t=n[o]).regex.test(e)&&i.push(t.object)
return r[e]=i,i}(e)),0===a.length)return c
var u,l=i(o),h=t.ENV.STRUCTURED_PROFILE
h&&(u=e+": "+l.object,console.time(u))
for(var f=[],d=s(),p=0;p<a.length;p++){var v=a[p]
f.push(v.before(e,d,l))}return function(){for(var t=s(),n=0;n<a.length;n++){var r=a[n]
"function"==typeof r.after&&r.after(e,t,l,f[n])}h&&console.timeEnd(u)}}e.flaggedInstrument=a,e.flaggedInstrument=a=function(e,t,n){return n()}}),e("@ember/modifier/index",["exports","@ember/-internals/glimmer"],function(e,t){"use strict"
Object.defineProperty(e,"setModifierManager",{enumerable:!0,get:function(){return t.setModifierManager}}),Object.defineProperty(e,"capabilties",{enumerable:!0,get:function(){return t.modifierCapabilties}})}),e("@ember/object/compat",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
e.dependentKeyCompat=i
var r=function(e,n,r){var i=r.get
return void 0!==i&&(r.get=function(){var e,r=this,o=(0,t.tagForProperty)(this,n),a=(0,t.track)(function(){e=i.call(r)})
return(0,t.update)(o,a),(0,t.consume)(a),e}),r}
function i(e,n,i){if(!(0,t.isElementDescriptor)([e,n,i])){i=e
var o=function(e,t,n,o,a){return r(e,t,i)}
return(0,t.setClassicDecorator)(o),o}return r(e,n,i)}(0,t.setClassicDecorator)(i)}),e("@ember/object/computed",["exports","@ember/object/lib/computed/computed_macros","@ember/object/lib/computed/reduce_computed_macros"],function(e,t,n){"use strict"
Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return t.empty}}),Object.defineProperty(e,"notEmpty",{enumerable:!0,get:function(){return t.notEmpty}}),Object.defineProperty(e,"none",{enumerable:!0,get:function(){return t.none}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return t.not}}),Object.defineProperty(e,"bool",{enumerable:!0,get:function(){return t.bool}}),Object.defineProperty(e,"match",{enumerable:!0,get:function(){return t.match}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return t.equal}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return t.gt}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return t.gte}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return t.lt}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return t.lte}}),Object.defineProperty(e,"oneWay",{enumerable:!0,get:function(){return t.oneWay}}),Object.defineProperty(e,"readOnly",{enumerable:!0,get:function(){return t.readOnly}}),Object.defineProperty(e,"deprecatingAlias",{enumerable:!0,get:function(){return t.deprecatingAlias}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return t.and}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return t.or}}),Object.defineProperty(e,"sum",{enumerable:!0,get:function(){return n.sum}}),Object.defineProperty(e,"min",{enumerable:!0,get:function(){return n.min}}),Object.defineProperty(e,"max",{enumerable:!0,get:function(){return n.max}}),Object.defineProperty(e,"map",{enumerable:!0,get:function(){return n.map}}),Object.defineProperty(e,"sort",{enumerable:!0,get:function(){return n.sort}}),Object.defineProperty(e,"setDiff",{enumerable:!0,get:function(){return n.setDiff}}),Object.defineProperty(e,"mapBy",{enumerable:!0,get:function(){return n.mapBy}}),Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return n.filter}}),Object.defineProperty(e,"filterBy",{enumerable:!0,get:function(){return n.filterBy}}),Object.defineProperty(e,"uniq",{enumerable:!0,get:function(){return n.uniq}}),Object.defineProperty(e,"uniqBy",{enumerable:!0,get:function(){return n.uniqBy}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return n.union}}),Object.defineProperty(e,"intersect",{enumerable:!0,get:function(){return n.intersect}}),Object.defineProperty(e,"collect",{enumerable:!0,get:function(){return n.collect}})}),e("@ember/object/index",["exports","@ember/debug","@ember/polyfills","@ember/-internals/metal"],function(e,t,n,r){"use strict"
var i
e.action=void 0,e.action=i
var o=new WeakMap,a=function(e,t,r){if(void 0!==e.constructor&&"function"==typeof e.constructor.proto&&e.constructor.proto(),!e.hasOwnProperty("actions")){var i=e.actions
e.actions=i?(0,n.assign)({},i):{}}return e.actions[t]=r,{get:function(){var e=o.get(this)
void 0===e&&(e=new Map,o.set(this,e))
var t=e.get(r)
return void 0===t&&(t=r.bind(this),e.set(r,t)),t}}}
e.action=i=function(e,t,n){var i
if(!(0,r.isElementDescriptor)([e,t,n])){i=e
var o=function(e,t,n,r,o){return a(e,t,i)}
return(0,r.setClassicDecorator)(o),o}return i=n.value,a(e,t,i)},(0,r.setClassicDecorator)(i)}),e("@ember/object/lib/computed/computed_macros",["exports","@ember/-internals/metal","@ember/debug"],function(e,t,n){"use strict"
function r(e,n){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i]
var o=function(e,n){var r=[]
function i(e){r.push(e)}for(var o=0;o<n.length;o++){var a=n[o];(0,t.expandProperties)(a,i)}return r}(0,r)
return t.computed.apply(void 0,o.concat([function(){for(var e=o.length-1,r=0;r<e;r++){var i=(0,t.get)(this,o[r])
if(!n(i))return i}return(0,t.get)(this,o[e])}]))}}e.empty=function(e){return(0,t.computed)(e+".length",function(){return(0,t.isEmpty)((0,t.get)(this,e))})},e.notEmpty=function(e){return(0,t.computed)(e+".length",function(){return!(0,t.isEmpty)((0,t.get)(this,e))})},e.none=function(e){return(0,t.computed)(e,function(){return(0,t.isNone)((0,t.get)(this,e))})},e.not=function(e){return(0,t.computed)(e,function(){return!(0,t.get)(this,e)})},e.bool=function(e){return(0,t.computed)(e,function(){return Boolean((0,t.get)(this,e))})},e.match=function(e,n){return(0,t.computed)(e,function(){var r=(0,t.get)(this,e)
return n.test(r)})},e.equal=function(e,n){return(0,t.computed)(e,function(){return(0,t.get)(this,e)===n})},e.gt=function(e,n){return(0,t.computed)(e,function(){return(0,t.get)(this,e)>n})},e.gte=function(e,n){return(0,t.computed)(e,function(){return(0,t.get)(this,e)>=n})},e.lt=function(e,n){return(0,t.computed)(e,function(){return(0,t.get)(this,e)<n})},e.lte=function(e,n){return(0,t.computed)(e,function(){return(0,t.get)(this,e)<=n})},e.oneWay=function(e){return(0,t.alias)(e).oneWay()},e.readOnly=function(e){return(0,t.alias)(e).readOnly()},e.deprecatingAlias=function(e,n){return(0,t.computed)(e,{get:function(n){return(0,t.get)(this,e)},set:function(n,r){return(0,t.set)(this,e,r),r}})},e.or=e.and=void 0
var i=r(0,function(e){return e})
e.and=i
var o=r(0,function(e){return!e})
e.or=o}),e("@ember/object/lib/computed/reduce_computed_macros",["exports","@ember/debug","@ember/-internals/metal","@ember/-internals/runtime"],function(e,t,n,r){"use strict"
function i(e,t,r,i){return(0,n.computed)(e+".[]",function(){var i=(0,n.get)(this,e)
return null===i||"object"!=typeof i?r:i.reduce(t,r,this)}).readOnly()}function o(e,t,i){var o
return/@each/.test(e)?o=e.replace(/\.@each.*$/,""):(o=e,e+=".[]"),n.computed.apply(void 0,[e].concat(t,[function(){var e=(0,n.get)(this,o)
return(0,r.isArray)(e)?(0,r.A)(i.call(this,e)):(0,r.A)()}])).readOnly()}function a(e,t,i){var o=e.map(function(e){return e+".[]"})
return n.computed.apply(void 0,o.concat([function(){return(0,r.A)(t.call(this,e))}])).readOnly()}function s(e,t,n){return void 0===n&&"function"==typeof t&&(n=t,t=[]),o(e,t,function(e){return e.map(n,this)})}function u(e,t,n){return void 0===n&&"function"==typeof t&&(n=t,t=[]),o(e,t,function(e){return e.filter(n,this)})}function c(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i]
return a(t,function(e){var t=this,i=(0,r.A)(),o=new Set
return e.forEach(function(e){var a=(0,n.get)(t,e);(0,r.isArray)(a)&&a.forEach(function(e){o.has(e)||(o.add(e),i.push(e))})}),i})}e.sum=function(e){return i(e,function(e,t){return e+t},0,"sum")},e.max=function(e){return i(e,function(e,t){return Math.max(e,t)},-1/0,"max")},e.min=function(e){return i(e,function(e,t){return Math.min(e,t)},1/0,"min")},e.map=s,e.mapBy=function(e,t){return s(e+".@each."+t,function(e){return(0,n.get)(e,t)})},e.filter=u,e.filterBy=function(e,t,r){var i
i=2===arguments.length?function(e){return(0,n.get)(e,t)}:function(e){return(0,n.get)(e,t)===r}
return u(e+".@each."+t,i)},e.uniq=c,e.uniqBy=function(e,t){return(0,n.computed)(e+".[]",function(){var i=(0,n.get)(this,e)
return(0,r.isArray)(i)?(0,r.uniqBy)(i,t):(0,r.A)()}).readOnly()},e.intersect=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i]
return a(t,function(e){var t=this,i=e.map(function(e){var i=(0,n.get)(t,e)
return(0,r.isArray)(i)?i:[]}),o=i.pop().filter(function(e){for(var t=0;t<i.length;t++){for(var n=!1,r=i[t],o=0;o<r.length;o++)if(r[o]===e){n=!0
break}if(!1===n)return!1}return!0})
return(0,r.A)(o)},"intersect")},e.setDiff=function(e,t){return(0,n.computed)(e+".[]",t+".[]",function(){var n=this.get(e),i=this.get(t)
return(0,r.isArray)(n)?(0,r.isArray)(i)?n.filter(function(e){return-1===i.indexOf(e)}):(0,r.A)(n):(0,r.A)()}).readOnly()},e.collect=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i]
return a(t,function(){var e=this,i=t.map(function(t){var r=(0,n.get)(e,t)
return void 0===r?null:r})
return(0,r.A)(i)},"collect")},e.sort=function(e,t,i){void 0!==i||Array.isArray(t)||(i=t,t=[])
return"function"==typeof i?function(e,t,n){return o(e,t,function(e){var t=this
return e.slice().sort(function(e,r){return n.call(t,e,r)})})}(e,t,i):function(e,t){var i=new WeakMap,o=new WeakMap
return(0,n.computed)(t+".[]",function(a){var s=this,u=(0,n.get)(this,t),c=i.get(this)
o.has(this)||o.set(this,function(){(0,n.notifyPropertyChange)(this,a)})
var l=o.get(this)
void 0!==c&&c.forEach(function(e){return(0,n.removeObserver)(s,e,l)})
var d="@this"===e,p=h(u)
if(0===p.length){var v=d?"[]":e+".[]";(0,n.addObserver)(this,v,l),c=[v]}else c=p.map(function(t){var r=t[0],i=d?"@each."+r:e+".@each."+r
return(0,n.addObserver)(s,i,l),i})
i.set(this,c)
var m=d?this:(0,n.get)(this,e)
return(0,r.isArray)(m)?0===p.length?(0,r.A)(m.slice()):f(m,p):(0,r.A)()}).readOnly()}(e,i)},e.union=void 0
var l=c
function h(e){return e.map(function(e){var t=e.split(":"),n=t[0],r=t[1]
return[n,r=r||"asc"]})}function f(e,t){return(0,r.A)(e.slice().sort(function(e,i){for(var o=0;o<t.length;o++){var a=t[o],s=a[0],u=a[1],c=(0,r.compare)((0,n.get)(e,s),(0,n.get)(i,s))
if(0!==c)return"desc"===u?-1*c:c}return 0}))}e.union=l}),e("@ember/polyfills/index",["exports","@ember/deprecated-features","@ember/polyfills/lib/merge","@ember/polyfills/lib/assign","@ember/polyfills/lib/weak_set"],function(e,t,n,r,i){"use strict"
Object.defineProperty(e,"assign",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"assignPolyfill",{enumerable:!0,get:function(){return r.assign}}),Object.defineProperty(e,"_WeakSet",{enumerable:!0,get:function(){return i.default}}),e.merge=void 0
var o=t.MERGE?n.default:void 0
e.merge=o}),e("@ember/polyfills/lib/assign",["exports"],function(e){"use strict"
function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i]
e[o]=n[o]}}return e}e.assign=t,e.default=void 0
var n=Object.assign||t
e.default=n}),e("@ember/polyfills/lib/merge",["exports","@ember/debug"],function(e,t){"use strict"
e.default=function(e,t){if(null===t||"object"!=typeof t)return e
for(var n,r=Object.keys(t),i=0;i<r.length;i++)n=r[i],e[n]=t[n]
return e}}),e("@ember/polyfills/lib/weak_set",["exports"],function(e){"use strict"
e.default=void 0
var t="function"==typeof WeakSet?WeakSet:function(){function e(){this._map=new WeakMap}var t=e.prototype
return t.add=function(e){return this._map.set(e,!0),this},t.delete=function(e){return this._map.delete(e)},t.has=function(e){return this._map.has(e)},e}()
e.default=t}),e("@ember/runloop/index",["exports","@ember/debug","@ember/-internals/error-handling","@ember/-internals/metal","backburner"],function(e,t,n,r,i){"use strict"
e.getCurrentRunLoop=function(){return a},e.run=l,e.join=f,e.begin=function(){c.begin()},e.end=function(){c.end()},e.schedule=function(){return c.schedule.apply(c,arguments)},e.hasScheduledTimers=function(){return c.hasTimers()},e.cancelTimers=function(){c.cancelTimers()},e.later=function(){return c.later.apply(c,arguments)},e.once=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return t.unshift("actions"),c.scheduleOnce.apply(c,t)},e.scheduleOnce=function(){return c.scheduleOnce.apply(c,arguments)},e.next=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return t.push(1),c.later.apply(c,t)},e.cancel=function(e){return c.cancel(e)},e.debounce=function(){return c.debounce.apply(c,arguments)},e.throttle=function(){return c.throttle.apply(c,arguments)},e.bind=e._globalsRun=e.backburner=e.queues=e._rsvpErrorQueue=void 0
var o,a=null
var s=(""+Math.random()+Date.now()).replace(".","")
e._rsvpErrorQueue=s
var u=["actions","routerTransitions","render","afterRender","destroy",s]
e.queues=u
var c=new i.default(u,{defaultQueue:"actions",onBegin:function(e){a=e},onEnd:function(e,t){a=t},onErrorTarget:n.onErrorTarget,onErrorMethod:"onerror",flush:o})
function l(){return c.run.apply(c,arguments)}e.backburner=c
var h=l.bind(null)
function f(){return c.join.apply(c,arguments)}e._globalsRun=h
e.bind=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r]
return f.apply(void 0,t.concat(n))}}}),e("@ember/service/index",["exports","@ember/-internals/runtime","@ember/-internals/metal"],function(e,t,n){"use strict"
e.inject=function(){return n.inject.apply(void 0,["service"].concat(Array.prototype.slice.call(arguments)))},e.default=void 0
var r=t.FrameworkObject.extend()
r.reopenClass({isServiceFactory:!0}),(0,t.setFrameworkClass)(r)
var i=r
e.default=i}),e("@ember/string/index",["exports","@ember/string/lib/string_registry","@ember/-internals/environment","@ember/-internals/utils"],function(e,t,n,r){"use strict"
e.loc=x,e.w=w,e.decamelize=_,e.dasherize=R,e.camelize=E,e.classify=C,e.underscore=k,e.capitalize=S,Object.defineProperty(e,"_getStrings",{enumerable:!0,get:function(){return t.getStrings}}),Object.defineProperty(e,"_setStrings",{enumerable:!0,get:function(){return t.setStrings}})
var i=/[ _]/g,o=new r.Cache(1e3,function(e){return _(e).replace(i,"-")}),a=/(\-|\_|\.|\s)+(.)?/g,s=/(^|\/)([A-Z])/g,u=new r.Cache(1e3,function(e){return e.replace(a,function(e,t,n){return n?n.toUpperCase():""}).replace(s,function(e){return e.toLowerCase()})}),c=/^(\-|_)+(.)?/,l=/(.)(\-|\_|\.|\s)+(.)?/g,h=/(^|\/|\.)([a-z])/g,f=new r.Cache(1e3,function(e){for(var t=function(e,t,n){return n?"_"+n.toUpperCase():""},n=function(e,t,n,r){return t+(r?r.toUpperCase():"")},r=e.split("/"),i=0;i<r.length;i++)r[i]=r[i].replace(c,t).replace(l,n)
return r.join("/").replace(h,function(e){return e.toUpperCase()})}),d=/([a-z\d])([A-Z]+)/g,p=/\-|\s+/g,v=new r.Cache(1e3,function(e){return e.replace(d,"$1_$2").replace(p,"_").toLowerCase()}),m=/(^|\/)([a-z\u00C0-\u024F])/g,g=new r.Cache(1e3,function(e){return e.replace(m,function(e){return e.toUpperCase()})}),y=/([a-z\d])([A-Z])/g,b=new r.Cache(1e3,function(e){return e.replace(y,"$1_$2").toLowerCase()})
function x(e,n){return(!Array.isArray(n)||arguments.length>2)&&(n=Array.prototype.slice.call(arguments,1)),function(e,t){var n=0
return e.replace(/%@([0-9]+)?/g,function(e,r){var i=r?parseInt(r,10)-1:n++,o=i<t.length?t[i]:void 0
return"string"==typeof o?o:null===o?"(null)":void 0===o?"":String(o)})}(e=(0,t.getString)(e)||e,n)}function w(e){return e.split(/\s+/)}function _(e){return b.get(e)}function R(e){return o.get(e)}function E(e){return u.get(e)}function C(e){return f.get(e)}function k(e){return v.get(e)}function S(e){return g.get(e)}n.ENV.EXTEND_PROTOTYPES.String&&Object.defineProperties(String.prototype,{w:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return w(this)}},loc:{configurable:!0,enumerable:!1,writeable:!0,value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
return x(this,t)}},camelize:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return E(this)}},decamelize:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return _(this)}},dasherize:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return R(this)}},underscore:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return k(this)}},classify:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return C(this)}},capitalize:{configurable:!0,enumerable:!1,writeable:!0,value:function(){return S(this)}}})})
e("@ember/string/lib/string_registry",["exports"],function(e){"use strict"
e.setStrings=function(e){t=e},e.getStrings=function(){return t},e.getString=function(e){return t[e]}
var t={}}),e("@glimmer/encoder",["exports"],function(e){"use strict"
e.InstructionEncoder=void 0
var t=function(){function e(e){this.buffer=e,this.typePos=0,this.size=0}var t=e.prototype
return t.encode=function(e,t){if(e>255)throw new Error("Opcode type over 8-bits. Got "+e+".")
this.buffer.push(e|t|arguments.length-2<<8),this.typePos=this.buffer.length-1
for(var n=2;n<arguments.length;n++){var r=arguments[n]
if("number"==typeof r&&r>4294967295)throw new Error("Operand over 32-bits. Got "+r+".")
this.buffer.push(r)}this.size=this.buffer.length},t.patch=function(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.")
this.buffer[e+1]=t},t.patchWith=function(e,t,n){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.")
this.buffer[e+1]=t,this.buffer[e+2]=n},e}()
e.InstructionEncoder=t}),e("@glimmer/low-level",["exports"],function(e){"use strict"
e.Stack=e.Storage=void 0
var t=function(){function e(){this.array=[],this.next=0}var t=e.prototype
return t.add=function(e){var t=this.next,n=this.array
if(t===n.length)this.next++
else{var r=n[t]
this.next=r}return this.array[t]=e,t},t.deref=function(e){return this.array[e]},t.drop=function(e){this.array[e]=this.next,this.next=e},e}()
e.Storage=t
var n=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]
this.vec=e}var t=e.prototype
return t.clone=function(){return new e(this.vec.slice())},t.sliceFrom=function(t){return new e(this.vec.slice(t))},t.slice=function(t,n){return new e(this.vec.slice(t,n))},t.copy=function(e,t){this.vec[t]=this.vec[e]},t.writeRaw=function(e,t){this.vec[e]=t},t.getRaw=function(e){return this.vec[e]},t.reset=function(){this.vec.length=0},t.len=function(){return this.vec.length},e}()
e.Stack=n}),e("@glimmer/node",["exports","ember-babel","@glimmer/runtime"],function(e,t,n){"use strict"
e.serializeBuilder=function(e,t){return i.forInitialRender(e,t)},e.NodeDOMTreeConstruction=void 0
var r=function(e){function n(t){return e.call(this,t)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.setupUselessElement=function(){},r.createElement=function(e){return this.document.createElement(e)},r.setAttribute=function(e,t,n){e.setAttribute(t,n)},n}(n.DOMTreeConstruction)
e.NodeDOMTreeConstruction=r
var i=function(e){function r(){var t
return(t=e.apply(this,arguments)||this).serializeBlockDepth=0,t}(0,t.inheritsLoose)(r,e)
var i=r.prototype
return i.__openBlock=function(){var t=this.serializeBlockDepth++
this.__appendComment("%+b:"+t+"%"),e.prototype.__openBlock.call(this)},i.__closeBlock=function(){e.prototype.__closeBlock.call(this),this.__appendComment("%-b:"+--this.serializeBlockDepth+"%")},i.__appendHTML=function(t){var r=this.__appendComment("%glmr%")
if("TABLE"===this.element.tagName){var i=t.indexOf("<")
if(i>-1)"tr"===t.slice(i+1,i+3)&&(t="<tbody>"+t+"</tbody>")}""===t?this.__appendComment("% %"):e.prototype.__appendHTML.call(this,t)
var o=this.__appendComment("%glmr%")
return new n.ConcreteBounds(this.element,r,o)},i.__appendText=function(t){var n,r,i,o=(r=(n=this).element,null===(i=n.nextSibling)?r.lastChild:i.previousSibling)
return""===t?this.__appendComment("% %"):(o&&3===o.nodeType&&this.__appendComment("%|%"),e.prototype.__appendText.call(this,t))},i.closeElement=function(){return!0===this.element.needsExtraClose&&(this.element.needsExtraClose=!1,e.prototype.closeElement.call(this)),e.prototype.closeElement.call(this)},i.openElement=function(t){return"tr"===t&&"TBODY"!==this.element.tagName&&(this.openElement("tbody"),this.constructing.needsExtraClose=!0,this.flushElement(null)),e.prototype.openElement.call(this,t)},i.pushRemoteElement=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.dom,o=i.createElement("script")
o.setAttribute("glmr",n),i.insertBefore(t,o,r),e.prototype.pushRemoteElement.call(this,t,n,r)},r}(n.NewElementBuilder)}),e("@glimmer/opcode-compiler",["exports","@ember/polyfills","ember-babel","@glimmer/util","@glimmer/vm","@glimmer/wire-format","@glimmer/encoder","@glimmer/program"],function(e,t,n,r,i,o,a,s){"use strict"
e.compile=w,e.templateFactory=function(e){var t,n=e.id,i=e.meta,o=e.block,a=n||"client-"+D++
return{id:a,meta:i,create:function(e,n){var s=n?(0,r.assign)({},n,i):i
return t||(t=JSON.parse(o)),new P(e,{id:a,block:t,referrer:s})}}},e.debug=function(e,t,n){for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s]
throw(0,r.unreachable)("Missing Opcode Metadata for "+n)
var u=(0,r.dict)()
return null.ops.forEach(function(n,o){var s=a[o]
switch(n.type){case"to":u[n.name]=e+s
break
case"i32":case"symbol":case"block":u[n.name]=s
break
case"handle":u[n.name]=t.resolveHandle(s)
break
case"str":u[n.name]=t.getString(s)
break
case"option-str":u[n.name]=s?t.getString(s):null
break
case"str-array":u[n.name]=t.getStringArray(s)
break
case"array":u[n.name]=t.getArray(s)
break
case"bool":u[n.name]=!!s
break
case"primitive":u[n.name]=function(e,t){var n=e>>3
switch(7&e){case 0:return n
case 1:return t.getNumber(n)
case 2:return t.getString(n)
case 3:switch(n){case 0:return!1
case 1:return!0
case 2:return null
case 3:return}case 4:case 5:return t.getNumber(n)
default:throw(0,r.unreachable)()}}(s,t)
break
case"register":u[n.name]=i.Register[s]
break
case"serializable":u[n.name]=t.getSerializable(s)
break
case"lazy-constant":u[n.name]=t.getOther(s)}}),[null.name,u]},e.debugSlice=function(e,t,n){},e.logOpcode=function(e,t){var n=e
if(t){var r=Object.keys(t).map(function(e){return" "+e+"="+void t[e]}).join("")
n+=r}return"("+n+")"},e.PLACEHOLDER_HANDLE=e.WrappedBuilder=e.PartialDefinition=e.StdOpcodeBuilder=e.OpcodeBuilder=e.EagerOpcodeBuilder=e.LazyOpcodeBuilder=e.CompilableProgram=e.CompilableBlock=e.debugCompiler=e.AbstractCompiler=e.LazyCompiler=e.Macros=e.ATTRS_BLOCK=void 0
var u,c
e.PLACEHOLDER_HANDLE=-1,(c=u||(u={}))[c.OpenComponentElement=0]="OpenComponentElement",c[c.DidCreateElement=1]="DidCreateElement",c[c.DidRenderLayout=2]="DidRenderLayout",c[c.Debugger=3]="Debugger"
var l=o.Ops,h="&attrs"
e.ATTRS_BLOCK=h
var f,d,p=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0
this.offset=e,this.names=(0,r.dict)(),this.funcs=[]}var t=e.prototype
return t.add=function(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1},t.compile=function(e,t){var n=e[this.offset],r=this.names[n];(0,this.funcs[r])(e,t)},e}()
function v(e,t,n){var r=e[1],i=e[2],o=e[3]
n.expr(i),o?n.componentAttr(r,o,t):n.componentAttr(r,null,t)}function m(e,t,n){var r=e[1],i=e[2],o=e[3]
n.expr(i),o?n.dynamicAttr(r,o,t):n.dynamicAttr(r,null,t)}e.Macros=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y
return e.add("if",function(e,t,n,r,i){if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument")
i.replayableIf({args:function(){return i.expr(e[0]),i.toBoolean(),1},ifTrue:function(){i.invokeStaticBlock(n)},ifFalse:function(){r&&i.invokeStaticBlock(r)}})}),e.add("unless",function(e,t,n,r,i){if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument")
i.replayableIf({args:function(){return i.expr(e[0]),i.toBoolean(),1},ifTrue:function(){r&&i.invokeStaticBlock(r)},ifFalse:function(){i.invokeStaticBlock(n)}})}),e.add("with",function(e,t,n,r,i){if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument")
i.replayableIf({args:function(){return i.expr(e[0]),i.dup(),i.toBoolean(),2},ifTrue:function(){i.invokeStaticBlock(n,1)},ifFalse:function(){r&&i.invokeStaticBlock(r)}})}),e.add("each",function(e,t,n,r,o){o.replayable({args:function(){return t&&"key"===t[0][0]?o.expr(t[1][0]):o.pushPrimitiveReference(null),o.expr(e[0]),2},body:function(){o.putIterator(),o.jumpUnless("ELSE"),o.pushFrame(),o.dup(i.Register.fp,1),o.returnTo("ITER"),o.enterList("BODY"),o.label("ITER"),o.iterate("BREAK"),o.label("BODY"),o.invokeStaticBlock(n,2),o.pop(2),o.jump("FINALLY"),o.label("BREAK"),o.exitList(),o.popFrame(),o.jump("FINALLY"),o.label("ELSE"),r&&o.invokeStaticBlock(r)}})}),e.add("in-element",function(e,t,n,r,i){if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument")
i.replayableIf({args:function(){for(var n=t[0],r=t[1],o=0;o<n.length;o++){var a=n[o]
if("nextSibling"!==a&&"guid"!==a)throw new Error("SYNTAX ERROR: #in-element does not take a `"+n[0]+"` option")
i.expr(r[o])}return i.expr(e[0]),i.dup(),4},ifTrue:function(){i.pushRemoteElement(),i.invokeStaticBlock(n),i.popRemoteElement()}})}),e.add("-with-dynamic-vars",function(e,t,n,r,i){if(t){var o=t[0],a=t[1]
i.compileParams(a),i.pushDynamicScope(),i.bindDynamicScope(o),i.invokeStaticBlock(n),i.popDynamicScope()}else i.invokeStaticBlock(n)}),e.add("component",function(e,t,n,r,i){if("string"!=typeof e[0]||!i.staticComponentHelper(e[0],t,n)){var o=e[0],a=e.slice(1)
i.dynamicComponent(o,null,a,t,!0,n,r)}}),t.add("component",function(e,t,n,r){var i=t&&t[0]
if("string"==typeof i&&r.staticComponentHelper(i,n,null))return!0
var o=t[0],a=t.slice(1)
return r.dynamicComponent(o,null,a,n,!0,null,null),!0}),{blocks:e,inlines:t}}(),t=e.blocks,n=e.inlines
this.blocks=t,this.inlines=n}
var g=function(){function e(){this.names=(0,r.dict)(),this.funcs=[]}var t=e.prototype
return t.add=function(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1},t.addMissing=function(e){this.missing=e},t.compile=function(e,t,n,r,i,o){var a=this.names[e]
void 0===a?(0,this.missing)(e,t,n,r,i,o):(0,this.funcs[a])(t,n,r,i,o)},e}(),y=function(){function e(){this.names=(0,r.dict)(),this.funcs=[]}var t=e.prototype
return t.add=function(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1},t.addMissing=function(e){this.missing=e},t.compile=function(e,t){var n,r,i,o=e[1]
if(!Array.isArray(o))return["expr",o]
if(o[0]===l.Helper)n=o[1],r=o[2],i=o[3]
else{if(o[0]!==l.Unknown)return["expr",o]
n=o[1],r=i=null}var a=this.names[n]
if(void 0===a&&this.missing){var s=(0,this.missing)(n,r,i,t)
return!1===s?["expr",o]:s}if(void 0!==a){var u=(0,this.funcs[a])(n,r,i,t)
return!1===u?["expr",o]:u}return["expr",o]},e}()
var b=function(){function e(e,t){this.compiler=e,this.layout=t,this.compiled=null}return e.prototype.compile=function(){if(null!==this.compiled)return this.compiled
this.compiled=-1
var e=this.layout.block.statements
return this.compiled=this.compiler.add(e,this.layout)},(0,n.createClass)(e,[{key:"symbolTable",get:function(){return this.layout.block}}]),e}()
e.CompilableProgram=b
var x=function(){function e(e,t){this.compiler=e,this.parsed=t,this.compiled=null}return e.prototype.compile=function(){if(null!==this.compiled)return this.compiled
this.compiled=-1
var e=this.parsed,t=e.block.statements,n=e.containingLayout
return this.compiled=this.compiler.add(t,n)},(0,n.createClass)(e,[{key:"symbolTable",get:function(){return this.parsed.block}}]),e}()
function w(e,t,n){for(var o=function(){if(f)return f
var e=f=new p
e.add(l.Text,function(e,t){t.text(e[1])}),e.add(l.Comment,function(e,t){t.comment(e[1])}),e.add(l.CloseElement,function(e,t){t.closeElement()}),e.add(l.FlushElement,function(e,t){t.flushElement()}),e.add(l.Modifier,function(e,t){var n=t.referrer,r=e[1],i=e[2],o=e[3],a=t.compiler.resolveModifier(r,n)
if(null===a)throw new Error("Compile Error "+r+" is not a modifier: Helpers may not be used in the element form.")
t.modifier(a,i,o)}),e.add(l.StaticAttr,function(e,t){var n=e[1],r=e[2],i=e[3]
t.staticAttr(n,i,r)}),e.add(l.DynamicAttr,function(e,t){m(e,!1,t)}),e.add(l.ComponentAttr,function(e,t){v(e,!1,t)}),e.add(l.TrustingAttr,function(e,t){m(e,!0,t)}),e.add(l.TrustingComponentAttr,function(e,t){v(e,!0,t)}),e.add(l.OpenElement,function(e,t){var n=e[1]
e[2]||t.putComponentOperations(),t.openPrimitiveElement(n)}),e.add(l.DynamicComponent,function(e,t){var n=e[1],i=e[2],o=e[3],a=e[4],s=t.template(a),u=null
i.length>0&&(u=t.inlineBlock({statements:i,parameters:r.EMPTY_ARRAY})),t.dynamicComponent(n,u,null,o,!1,s,null)}),e.add(l.Component,function(e,t){var n=e[1],i=e[2],o=e[3],a=e[4],s=t.referrer,u=t.compiler.resolveLayoutForTag(n,s),c=u.handle,l=u.capabilities,h=u.compilable
if(null===c||null===l)throw new Error("Compile Error: Cannot find component "+n)
var f=null
i.length>0&&(f=t.inlineBlock({statements:i,parameters:r.EMPTY_ARRAY}))
var d=t.template(a)
h?(t.pushComponentDefinition(c),t.invokeStaticComponent(l,h,f,null,o,!1,d&&d)):(t.pushComponentDefinition(c),t.invokeComponent(l,f,null,o,!1,d&&d))}),e.add(l.Partial,function(e,t){var n=e[1],r=e[2],i=t.referrer
t.replayableIf({args:function(){return t.expr(n),t.dup(),2},ifTrue:function(){t.invokePartial(i,t.evalSymbols(),r),t.popScope(),t.popFrame()}})}),e.add(l.Yield,function(e,t){var n=e[1],r=e[2]
t.yield(n,r)}),e.add(l.AttrSplat,function(e,t){var n=e[1]
t.yield(n,[])}),e.add(l.Debugger,function(e,t){var n=e[1]
t.debugger(t.evalSymbols(),n)}),e.add(l.ClientSideStatement,function(e,n){t.compile(e,n)}),e.add(l.Append,function(e,t){var n=e[1],r=e[2]
!0!==(t.compileInline(e)||n)&&t.guardedAppend(n,r)}),e.add(l.Block,function(e,t){var n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=t.template(o),u=t.template(a),c=s&&s,l=u&&u
t.compileBlock(n,r,i,c,l)})
var t=new p(1)
return t.add(u.OpenComponentElement,function(e,t){t.putComponentOperations(),t.openPrimitiveElement(e[2])}),t.add(u.DidCreateElement,function(e,t){t.didCreateElement(i.Register.s0)}),t.add(u.Debugger,function(){}),t.add(u.DidRenderLayout,function(e,t){t.didRenderLayout(i.Register.s0)}),e}(),a=0;a<e.length;a++)o.compile(e[a],t)
return t.commit()}e.CompilableBlock=x
var _=function(){function e(e,t,n){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=n}return e.compile=function(t){return new e(this.std(t,function(e){return e.main()}),this.std(t,function(e){return e.stdAppend(!0)}),this.std(t,function(e){return e.stdAppend(!1)}))},e.std=function(e,t){return S.build(e,t)},e.prototype.getAppend=function(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend},e}(),R=function(){function e(e,t,n){this.macros=e,this.program=t,this.resolver=n,this.initialize()}var t=e.prototype
return t.initialize=function(){this.stdLib=_.compile(this)},t.compileInline=function(e,t){return this.macros.inlines.compile(e,t)},t.compileBlock=function(e,t,n,r,i,o){this.macros.blocks.compile(e,t,n,r,i,o)},t.add=function(e,t){return w(e,this.builderFor(t))},t.commit=function(e,t){for(var n=this.program.heap,r=n.malloc(),i=0;i<t.length;i++){var o=t[i]
"function"==typeof o?n.pushPlaceholder(o):n.push(o)}return n.finishMalloc(r,e),r},t.resolveLayoutForTag=function(e,t){var n=this.resolver.lookupComponentDefinition(e,t)
return null===n?{handle:null,capabilities:null,compilable:null}:this.resolveLayoutForHandle(n)},t.resolveLayoutForHandle=function(e){var t=this.resolver,n=t.getCapabilities(e),r=null
return n.dynamicLayout||(r=t.getLayout(e)),{handle:e,capabilities:n,compilable:r}},t.resolveModifier=function(e,t){return this.resolver.lookupModifier(e,t)},t.resolveHelper=function(e,t){return this.resolver.lookupHelper(e,t)},(0,n.createClass)(e,[{key:"constants",get:function(){return this.program.constants}}]),e}()
e.AbstractCompiler=R,e.debugCompiler=void 0
var E=function(){function e(e,t){this.compiler=e,this.layout=t,this.compiled=null
var n=t.block,r=n.symbols.slice(),i=r.indexOf(h)
this.attrsBlockNumber=-1===i?r.push(h):i+1,this.symbolTable={hasEval:n.hasEval,symbols:r}}return e.prototype.compile=function(){if(null!==this.compiled)return this.compiled
var e=this.compiler,t=this.layout,n=e.builderFor(t)
n.startLabels(),n.fetch(i.Register.s1),n.getComponentTagName(i.Register.s0),n.primitiveReference(),n.dup(),n.load(i.Register.s1),n.jumpUnless("BODY"),n.fetch(i.Register.s1),n.putComponentOperations(),n.openDynamicElement(),n.didCreateElement(i.Register.s0),n.yield(this.attrsBlockNumber,[]),n.flushElement(),n.label("BODY"),n.invokeStaticBlock(function(e,t){return new x(t,{block:{statements:e.block.statements,parameters:r.EMPTY_ARRAY},containingLayout:e})}(t,e)),n.fetch(i.Register.s1),n.jumpUnless("END"),n.closeElement(),n.label("END"),n.load(i.Register.s1),n.stopLabels()
var o=n.commit()
return this.compiled=o},e}()
e.WrappedBuilder=E
var C=function(){function e(e){this.builder=e}return e.prototype.static=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.builder
if(null!==e){var s=a.compiler.resolveLayoutForHandle(e),u=s.capabilities,c=s.compilable
c?(a.pushComponentDefinition(e),a.invokeStaticComponent(u,c,null,n,r,!1,i,o)):(a.pushComponentDefinition(e),a.invokeComponent(u,null,n,r,!1,i,o))}},e}(),k=function(){function e(){this.labels=(0,r.dict)(),this.targets=[]}var t=e.prototype
return t.label=function(e,t){this.labels[e]=t},t.target=function(e,t){this.targets.push({at:e,target:t})},t.patch=function(e){for(var t=this.targets,n=this.labels,r=0;r<t.length;r++){var i=t[r],o=i.at,a=n[i.target]-o
e.patch(o,a)}},e}(),S=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
this.size=t,this.encoder=new a.InstructionEncoder([]),this.labelsStack=new r.Stack,this.compiler=e}e.build=function(t,n){var r=new e(t)
return n(r),r.commit()}
var t=e.prototype
return t.push=function(e){switch(arguments.length){case 1:return this.encoder.encode(e,0)
case 2:return this.encoder.encode(e,0,arguments[1])
case 3:return this.encoder.encode(e,0,arguments[1],arguments[2])
default:return this.encoder.encode(e,0,arguments[1],arguments[2],arguments[3])}},t.pushMachine=function(e){switch(arguments.length){case 1:return this.encoder.encode(e,1024)
case 2:return this.encoder.encode(e,1024,arguments[1])
case 3:return this.encoder.encode(e,1024,arguments[1],arguments[2])
default:return this.encoder.encode(e,1024,arguments[1],arguments[2],arguments[3])}},t.commit=function(){return this.pushMachine(24),this.compiler.commit(this.size,this.encoder.buffer)},t.reserve=function(e){this.encoder.encode(e,0,-1)},t.reserveWithOperand=function(e,t){this.encoder.encode(e,0,-1,t)},t.reserveMachine=function(e){this.encoder.encode(e,1024,-1)},t.main=function(){this.push(68,i.Register.s0),this.invokePreparedComponent(!1,!1,!0)},t.appendHTML=function(){this.push(28)},t.appendSafeHTML=function(){this.push(29)},t.appendDocumentFragment=function(){this.push(30)},t.appendNode=function(){this.push(31)},t.appendText=function(){this.push(32)},t.beginComponentTransaction=function(){this.push(91)},t.commitComponentTransaction=function(){this.push(92)},t.pushDynamicScope=function(){this.push(44)},t.popDynamicScope=function(){this.push(45)},t.pushRemoteElement=function(){this.push(41)},t.popRemoteElement=function(){this.push(42)},t.pushRootScope=function(e,t){this.push(20,e,t?1:0)},t.pushVirtualRootScope=function(e){this.push(21,e)},t.pushChildScope=function(){this.push(22)},t.popScope=function(){this.push(23)},t.prepareArgs=function(e){this.push(79,e)},t.createComponent=function(e,t){var n=0|t
this.push(81,n,e)},t.registerComponentDestructor=function(e){this.push(82,e)},t.putComponentOperations=function(){this.push(83)},t.getComponentSelf=function(e){this.push(84,e)},t.getComponentTagName=function(e){this.push(85,e)},t.getComponentLayout=function(e){this.push(86,e)},t.setupForEval=function(e){this.push(87,e)},t.invokeComponentLayout=function(e){this.push(90,e)},t.didCreateElement=function(e){this.push(93,e)},t.didRenderLayout=function(e){this.push(94,e)},t.pushFrame=function(){this.pushMachine(57)},t.popFrame=function(){this.pushMachine(58)},t.pushSmallFrame=function(){this.pushMachine(59)},t.popSmallFrame=function(){this.pushMachine(60)},t.invokeVirtual=function(){this.pushMachine(49)},t.invokeYield=function(){this.push(51)},t.toBoolean=function(){this.push(63)},t.invokePreparedComponent=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null
this.beginComponentTransaction(),this.pushDynamicScope(),this.createComponent(i.Register.s0,e),r&&r(),this.registerComponentDestructor(i.Register.s0),this.getComponentSelf(i.Register.s0),this.pushVirtualRootScope(i.Register.s0),this.setVariable(0),this.setupForEval(i.Register.s0),n&&this.setNamedVariables(i.Register.s0),t&&this.setBlocks(i.Register.s0),this.pop(),this.invokeComponentLayout(i.Register.s0),this.didRenderLayout(i.Register.s0),this.popFrame(),this.popScope(),this.popDynamicScope(),this.commitComponentTransaction()},t.compileInline=function(e){return this.compiler.compileInline(e,this)},t.compileBlock=function(e,t,n,r,i){this.compiler.compileBlock(e,t,n,r,i,this)},t.label=function(e){this.labels.label(e,this.nextPos)},t.startLabels=function(){this.labelsStack.push(new k)},t.stopLabels=function(){this.labelsStack.pop().patch(this.encoder)},t.pushCurriedComponent=function(){this.push(74)},t.pushDynamicComponentInstance=function(){this.push(73)},t.openDynamicElement=function(){this.push(34)},t.flushElement=function(){this.push(38)},t.closeElement=function(){this.push(39)},t.putIterator=function(){this.push(66)},t.enterList=function(e){this.reserve(64),this.labels.target(this.pos,e)},t.exitList=function(){this.push(65)},t.iterate=function(e){this.reserve(67),this.labels.target(this.pos,e)},t.setNamedVariables=function(e){this.push(2,e)},t.setBlocks=function(e){this.push(3,e)},t.setVariable=function(e){this.push(4,e)},t.setBlock=function(e){this.push(5,e)},t.getVariable=function(e){this.push(6,e)},t.getBlock=function(e){this.push(8,e)},t.hasBlock=function(e){this.push(9,e)},t.concat=function(e){this.push(11,e)},t.load=function(e){this.push(18,e)},t.fetch=function(e){this.push(19,e)},t.dup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Register.sp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return this.push(16,e,t)},t.pop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1
return this.push(17,e)},t.returnTo=function(e){this.reserveMachine(25),this.labels.target(this.pos,e)},t.primitiveReference=function(){this.push(14)},t.reifyU32=function(){this.push(15)},t.enter=function(e){this.push(61,e)},t.exit=function(){this.push(62)},t.return=function(){this.pushMachine(24)},t.jump=function(e){this.reserveMachine(52),this.labels.target(this.pos,e)},t.jumpIf=function(e){this.reserve(53),this.labels.target(this.pos,e)},t.jumpUnless=function(e){this.reserve(54),this.labels.target(this.pos,e)},t.jumpEq=function(e,t){this.reserveWithOperand(55,e),this.labels.target(this.pos,t)},t.assertSame=function(){this.push(56)},t.pushEmptyArgs=function(){this.push(77)},t.switch=function(e,t){var n=this,r=[],i=0
t(function(e,t){r.push({match:e,callback:t,label:"CLAUSE"+i++})}),this.enter(2),this.assertSame(),this.reifyU32(),this.startLabels(),r.slice(0,-1).forEach(function(e){return n.jumpEq(e.match,e.label)})
for(var o=r.length-1;o>=0;o--){var a=r[o]
this.label(a.label),this.pop(2),a.callback(),0!==o&&this.jump("END")}this.label("END"),this.stopLabels(),this.exit()},t.stdAppend=function(e){var t=this
this.switch(this.contentType(),function(n){n(1,function(){e?(t.assertSame(),t.appendHTML()):t.appendText()}),n(0,function(){t.pushCurriedComponent(),t.pushDynamicComponentInstance(),t.invokeBareComponent()}),n(3,function(){t.assertSame(),t.appendSafeHTML()}),n(4,function(){t.assertSame(),t.appendDocumentFragment()}),n(5,function(){t.assertSame(),t.appendNode()})})},t.populateLayout=function(e){this.push(89,e)},t.invokeBareComponent=function(){var e=this
this.fetch(i.Register.s0),this.dup(i.Register.sp,1),this.load(i.Register.s0),this.pushFrame(),this.pushEmptyArgs(),this.prepareArgs(i.Register.s0),this.invokePreparedComponent(!1,!1,!0,function(){e.getComponentLayout(i.Register.s0),e.populateLayout(i.Register.s0)}),this.load(i.Register.s0)},t.isComponent=function(){this.push(69)},t.contentType=function(){this.push(70)},t.pushBlockScope=function(){this.push(47)},(0,n.createClass)(e,[{key:"pos",get:function(){return this.encoder.typePos}},{key:"nextPos",get:function(){return this.encoder.size}},{key:"labels",get:function(){return this.labelsStack.current}}]),e}()
e.StdOpcodeBuilder=S
var A=function(e){function t(t,r){var i
return(i=e.call(this,t,r?r.block.symbols.length:0)||this).containingLayout=r,i.component=new C((0,n.assertThisInitialized)(i)),i.expressionCompiler=function(){if(d)return d
var e=d=new p
return e.add(l.Unknown,function(e,t){var n=t.compiler,r=t.referrer,i=t.containingLayout.asPartial,o=e[1],a=n.resolveHelper(o,r)
null!==a?t.helper(a,null,null):i?t.resolveMaybeLocal(o):(t.getVariable(0),t.getProperty(o))}),e.add(l.Concat,function(e,t){for(var n=e[1],r=0;r<n.length;r++)t.expr(n[r])
t.concat(n.length)}),e.add(l.Helper,function(e,t){var n=t.compiler,r=t.referrer,i=e[1],o=e[2],a=e[3]
if("component"!==i){var s=n.resolveHelper(i,r)
if(null===s)throw new Error("Compile Error: "+i+" is not a helper")
t.helper(s,o,a)}else{var u=o[0],c=o.slice(1)
t.curryComponent(u,c,a,!0)}}),e.add(l.Get,function(e,t){var n=e[1],r=e[2]
t.getVariable(n)
for(var i=0;i<r.length;i++)t.getProperty(r[i])}),e.add(l.MaybeLocal,function(e,t){var n=e[1]
if(t.containingLayout.asPartial){var r=n[0]
n=n.slice(1),t.resolveMaybeLocal(r)}else t.getVariable(0)
for(var i=0;i<n.length;i++)t.getProperty(n[i])}),e.add(l.Undefined,function(e,t){return t.pushPrimitiveReference(void 0)}),e.add(l.HasBlock,function(e,t){t.hasBlock(e[1])}),e.add(l.HasBlockParams,function(e,t){t.hasBlockParams(e[1])}),e}(),i.constants=t.constants,i.stdLib=t.stdLib,i}(0,n.inheritsLoose)(t,e)
var o=t.prototype
return o.expr=function(e){Array.isArray(e)?this.expressionCompiler.compile(e,this):this.pushPrimitiveReference(e)},o.pushArgs=function(e,t){var n=this.constants.stringArray(e)
this.push(76,n,t)},o.pushYieldableBlock=function(e){this.pushSymbolTable(e&&e.symbolTable),this.pushBlockScope(),this.pushBlock(e)},o.curryComponent=function(e,t,n,r){var o=this.containingLayout.referrer
this.pushFrame(),this.compileArgs(t,n,null,r),this.push(80),this.expr(e),this.push(71,this.constants.serializable(o)),this.popFrame(),this.fetch(i.Register.v0)},o.pushSymbolTable=function(e){if(e){var t=this.constants.serializable(e)
this.push(48,t)}else this.primitive(null)},o.invokeComponent=function(e,t,n,r,o,a){var s=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7?arguments[7]:void 0
this.fetch(i.Register.s0),this.dup(i.Register.sp,1),this.load(i.Register.s0),this.pushFrame()
var l=!!(a||u||t),h=!0===e||e.prepareArgs||!(!r||0===r[0].length),f={main:a,else:u,attrs:t}
this.compileArgs(n,r,f,o),this.prepareArgs(i.Register.s0),this.invokePreparedComponent(null!==a,l,h,function(){c?(s.pushSymbolTable(c.symbolTable),s.pushLayout(c),s.resolveLayout()):s.getComponentLayout(i.Register.s0),s.populateLayout(i.Register.s0)}),this.load(i.Register.s0)},o.invokeStaticComponent=function(e,t,n,o,a,s,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=t.symbolTable
if(l.hasEval||e.prepareArgs)this.invokeComponent(e,n,o,a,s,u,c,t)
else{this.fetch(i.Register.s0),this.dup(i.Register.sp,1),this.load(i.Register.s0)
var f=l.symbols
e.createArgs&&(this.pushFrame(),this.compileArgs(o,a,null,s)),this.beginComponentTransaction(),e.dynamicScope&&this.pushDynamicScope(),e.createInstance&&this.createComponent(i.Register.s0,null!==u),e.createArgs&&this.popFrame(),this.pushFrame(),this.registerComponentDestructor(i.Register.s0)
var d=[]
this.getComponentSelf(i.Register.s0),d.push({symbol:0,isBlock:!1})
for(var p=0;p<f.length;p++){var v=f[p]
switch(v.charAt(0)){case"&":var m=null
if("&default"===v)m=u
else if("&inverse"===v)m=c
else{if(v!==h)throw(0,r.unreachable)()
m=n}m?(this.pushYieldableBlock(m),d.push({symbol:p+1,isBlock:!0})):(this.pushYieldableBlock(null),d.push({symbol:p+1,isBlock:!0}))
break
case"@":if(!a)break
var g=a[0],y=a[1],b=v
s&&(b=v.slice(1))
var x=g.indexOf(b);-1!==x&&(this.expr(y[x]),d.push({symbol:p+1,isBlock:!1}))}}this.pushRootScope(f.length+1,!!(u||c||n))
for(var w=d.length-1;w>=0;w--){var _=d[w],R=_.symbol
_.isBlock?this.setBlock(R):this.setVariable(R)}this.invokeStatic(t),e.createInstance&&this.didRenderLayout(i.Register.s0),this.popFrame(),this.popScope(),e.dynamicScope&&this.popDynamicScope(),this.commitComponentTransaction(),this.load(i.Register.s0)}},o.dynamicComponent=function(e,t,n,r,i,o){var a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null
this.replayable({args:function(){return a.expr(e),a.dup(),2},body:function(){a.jumpUnless("ELSE"),a.resolveDynamicComponent(a.containingLayout.referrer),a.pushDynamicComponentInstance(),a.invokeComponent(!0,t,n,r,i,o,s),a.label("ELSE")}})},o.yield=function(e,t){this.compileArgs(t,null,null,!1),this.getBlock(e),this.resolveBlock(),this.invokeYield(),this.popScope(),this.popFrame()},o.guardedAppend=function(e,t){this.pushFrame(),this.expr(e),this.pushMachine(50,this.stdLib.getAppend(t)),this.popFrame()},o.invokeStaticBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.symbolTable.parameters,r=n.length,o=Math.min(t,r)
if(this.pushFrame(),o){this.pushChildScope()
for(var a=0;a<o;a++)this.dup(i.Register.fp,t-a),this.setVariable(n[a])}this.pushBlock(e),this.resolveBlock(),this.invokeVirtual(),o&&this.popScope(),this.popFrame()},o.string=function(e){return this.constants.string(e)},o.names=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]
t[n]=this.constants.string(r)}return this.constants.array(t)},o.symbols=function(e){return this.constants.array(e)},o.primitive=function(e){var t,n=0
switch(typeof e){case"number":e%1==0?e>-1?t=e:(t=this.constants.number(e),n=4):(t=this.constants.number(e),n=1)
break
case"string":t=this.string(e),n=2
break
case"boolean":t=0|e,n=3
break
case"object":t=2,n=3
break
case"undefined":t=3,n=3
break
default:throw new Error("Invalid primitive passed to pushPrimitive")}var r=this.sizeImmediate(t<<3|n,t)
this.push(13,r)},o.sizeImmediate=function(e,t){return e>=4294967295||e<0?this.constants.number(t)<<3|5:e},o.pushPrimitiveReference=function(e){this.primitive(e),this.primitiveReference()},o.pushComponentDefinition=function(e){this.push(72,this.constants.handle(e))},o.resolveDynamicComponent=function(e){this.push(75,this.constants.serializable(e))},o.staticComponentHelper=function(e,t,n){var r=this.compiler.resolveLayoutForTag(e,this.referrer),i=r.handle,o=r.capabilities,a=r.compilable
if(null!==i&&null!==o&&a){if(t)for(var s=0;s<t.length;s+=2)t[s][0]="@"+t[s][0]
return this.pushComponentDefinition(i),this.invokeStaticComponent(o,a,null,null,t,!1,n&&n),!0}return!1},o.invokePartial=function(e,t,n){var r=this.constants.serializable(e),i=this.constants.stringArray(t),o=this.constants.array(n)
this.push(95,r,i,o)},o.resolveMaybeLocal=function(e){this.push(96,this.string(e))},o.debugger=function(e,t){this.push(97,this.constants.stringArray(e),this.constants.array(t))},o.text=function(e){this.push(26,this.constants.string(e))},o.openPrimitiveElement=function(e){this.push(33,this.constants.string(e))},o.modifier=function(e,t,n){this.pushFrame(),this.compileArgs(t,n,null,!0),this.push(40,this.constants.handle(e)),this.popFrame()},o.comment=function(e){var t=this.constants.string(e)
this.push(27,t)},o.dynamicAttr=function(e,t,n){var r=this.constants.string(e),i=t?this.constants.string(t):0
this.push(36,r,!0===n?1:0,i)},o.componentAttr=function(e,t,n){var r=this.constants.string(e),i=t?this.constants.string(t):0
this.push(37,r,!0===n?1:0,i)},o.staticAttr=function(e,t,n){var r=this.constants.string(e),i=t?this.constants.string(t):0,o=this.constants.string(n)
this.push(35,r,o,i)},o.hasBlockParams=function(e){this.getBlock(e),this.resolveBlock(),this.push(10)},o.getProperty=function(e){this.push(7,this.string(e))},o.helper=function(e,t,n){this.pushFrame(),this.compileArgs(t,n,null,!0),this.push(1,this.constants.handle(e)),this.popFrame(),this.fetch(i.Register.v0)},o.bindDynamicScope=function(e){this.push(43,this.names(e))},o.replayable=function(e){var t=e.args,n=e.body
this.startLabels(),this.pushFrame(),this.returnTo("ENDINITIAL")
var r=t()
this.enter(r),n(),this.label("FINALLY"),this.exit(),this.return(),this.label("ENDINITIAL"),this.popFrame(),this.stopLabels()},o.replayableIf=function(e){var t=this,n=e.args,r=e.ifTrue,i=e.ifFalse
this.replayable({args:n,body:function(){t.jumpUnless("ELSE"),r(),t.jump("FINALLY"),t.label("ELSE"),i&&i()}})},o.inlineBlock=function(e){return new x(this.compiler,{block:e,containingLayout:this.containingLayout})},o.evalSymbols=function(){var e=this.containingLayout.block
return e.hasEval?e.symbols:null},o.compileParams=function(e){if(!e)return 0
for(var t=0;t<e.length;t++)this.expr(e[t])
return e.length},o.compileArgs=function(e,t,n,i){n&&(this.pushYieldableBlock(n.main),this.pushYieldableBlock(n.else),this.pushYieldableBlock(n.attrs))
var o=this.compileParams(e)<<4
i&&(o|=8),n&&(o|=7)
var a=r.EMPTY_ARRAY
if(t){a=t[0]
for(var s=t[1],u=0;u<s.length;u++)this.expr(s[u])}this.pushArgs(a,o)},o.template=function(e){return e?this.inlineBlock(e):null},(0,n.createClass)(t,[{key:"referrer",get:function(){return this.containingLayout&&this.containingLayout.referrer}}]),t}(S)
e.OpcodeBuilder=A
var T=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.pushBlock=function(e){e?this.pushOther(e):this.primitive(null)},r.resolveBlock=function(){this.push(46)},r.pushLayout=function(e){e?this.pushOther(e):this.primitive(null)},r.resolveLayout=function(){this.push(46)},r.invokeStatic=function(e){this.pushOther(e),this.push(46),this.pushMachine(49)},r.pushOther=function(e){this.push(12,this.other(e))},r.other=function(e){return this.constants.other(e)},t}(A)
e.LazyOpcodeBuilder=T
var O=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.pushBlock=function(e){var t=e?e.compile():null
this.primitive(t)},r.resolveBlock=function(){},r.pushLayout=function(e){e?this.primitive(e.compile()):this.primitive(null)},r.resolveLayout=function(){},r.invokeStatic=function(e){var t=e.compile();-1===t?this.pushMachine(50,function(){return e.compile()}):this.pushMachine(50,t)},t}(A)
e.EagerOpcodeBuilder=O
var I=function(e){function t(t,n,r){var i=new s.LazyConstants(n),o=new s.Program(i)
return e.call(this,r,o,t)||this}return(0,n.inheritsLoose)(t,e),t.prototype.builderFor=function(e){return new T(this,e)},t}(R)
e.LazyCompiler=I
var N=function(){function e(e,t){this.name=e,this.template=t}return e.prototype.getPartial=function(){var e=this.template.asPartial(),t=e.compile()
return{symbolTable:e.symbolTable,handle:t}},e}()
e.PartialDefinition=N
var D=0
var P=function(){function e(e,t){this.compiler=e,this.parsedLayout=t,this.layout=null,this.partial=null,this.wrappedLayout=null
var n=t.block
this.symbols=n.symbols,this.hasEval=n.hasEval,this.referrer=t.referrer,this.id=t.id||"client-"+D++}var n=e.prototype
return n.asLayout=function(){return this.layout?this.layout:this.layout=new b(this.compiler,(0,t.assign)({},this.parsedLayout,{asPartial:!1}))},n.asPartial=function(){return this.partial?this.partial:this.layout=new b(this.compiler,(0,t.assign)({},this.parsedLayout,{asPartial:!0}))},n.asWrappedLayout=function(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new E(this.compiler,(0,t.assign)({},this.parsedLayout,{asPartial:!1}))},e}()}),e("@glimmer/program",["exports","ember-babel","@glimmer/util"],function(e,t,n){"use strict"
e.Opcode=e.Program=e.RuntimeProgram=e.WriteOnlyProgram=e.Heap=e.LazyConstants=e.Constants=e.RuntimeConstants=e.WriteOnlyConstants=e.WELL_KNOWN_EMPTY_ARRAY_POSITION=void 0
var r={}
e.WELL_KNOWN_EMPTY_ARRAY_POSITION=0
var i=Object.freeze([]),o=function(){function e(){this.strings=[],this.arrays=[i],this.tables=[],this.handles=[],this.resolved=[],this.numbers=[]}var t=e.prototype
return t.string=function(e){var t=this.strings.indexOf(e)
return t>-1?t:this.strings.push(e)-1},t.stringArray=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=this.string(e[n])
return this.array(t)},t.array=function(e){if(0===e.length)return 0
var t=this.arrays.indexOf(e)
return t>-1?t:this.arrays.push(e)-1},t.handle=function(e){var t=this.handles.indexOf(e)
return t>-1?t:(this.resolved.push(r),this.handles.push(e)-1)},t.serializable=function(e){var t=JSON.stringify(e),n=this.strings.indexOf(t)
return n>-1?n:this.strings.push(t)-1},t.number=function(e){var t=this.numbers.indexOf(e)
return t>-1?t:this.numbers.push(e)-1},t.toPool=function(){return{strings:this.strings,arrays:this.arrays,handles:this.handles,numbers:this.numbers}},e}()
e.WriteOnlyConstants=o
var a=function(){function e(e,t){this.resolver=e,this.strings=t.strings,this.arrays=t.arrays,this.handles=t.handles,this.resolved=this.handles.map(function(){return r}),this.numbers=t.numbers}var t=e.prototype
return t.getString=function(e){return this.strings[e]},t.getNumber=function(e){return this.numbers[e]},t.getStringArray=function(e){for(var t=this.getArray(e),n=new Array(t.length),r=0;r<t.length;r++){var i=t[r]
n[r]=this.getString(i)}return n},t.getArray=function(e){return this.arrays[e]},t.resolveHandle=function(e){var t=this.resolved[e]
if(t===r){var n=this.handles[e]
t=this.resolved[e]=this.resolver.resolve(n)}return t},t.getSerializable=function(e){return JSON.parse(this.strings[e])},e}()
e.RuntimeConstants=a
var s=function(e){function n(t,n){var i
return(i=e.call(this)||this).resolver=t,n&&(i.strings=n.strings,i.arrays=n.arrays,i.handles=n.handles,i.resolved=i.handles.map(function(){return r}),i.numbers=n.numbers),i}(0,t.inheritsLoose)(n,e)
var i=n.prototype
return i.getNumber=function(e){return this.numbers[e]},i.getString=function(e){return this.strings[e]},i.getStringArray=function(e){for(var t=this.getArray(e),n=new Array(t.length),r=0;r<t.length;r++){var i=t[r]
n[r]=this.getString(i)}return n},i.getArray=function(e){return this.arrays[e]},i.resolveHandle=function(e){var t=this.resolved[e]
if(t===r){var n=this.handles[e]
t=this.resolved[e]=this.resolver.resolve(n)}return t},i.getSerializable=function(e){return JSON.parse(this.strings[e])},n}(o)
e.Constants=s
var u=function(e){function n(){var t
return(t=e.apply(this,arguments)||this).others=[],t.serializables=[],t}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.serializable=function(e){var t=this.serializables.indexOf(e)
return t>-1?t:this.serializables.push(e)-1},r.getSerializable=function(e){return this.serializables[e]},r.getOther=function(e){return this.others[e-1]},r.other=function(e){return this.others.push(e)},n}(s)
e.LazyConstants=u
var c=function(){function e(e){this.heap=e,this.offset=0}return(0,t.createClass)(e,[{key:"size",get:function(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}},{key:"isMachine",get:function(){return 1024&this.heap.getbyaddr(this.offset)}},{key:"type",get:function(){return 255&this.heap.getbyaddr(this.offset)}},{key:"op1",get:function(){return this.heap.getbyaddr(this.offset+1)}},{key:"op2",get:function(){return this.heap.getbyaddr(this.offset+2)}},{key:"op3",get:function(){return this.heap.getbyaddr(this.offset+3)}}]),e}()
function l(e,t){return t|e<<2}e.Opcode=c
var h=1048576,f=function(){function e(e){if(this.placeholders=[],this.offset=0,this.handle=0,this.capacity=h,e){var t=e.buffer,n=e.table,r=e.handle
this.heap=new Uint32Array(t),this.table=n,this.offset=this.heap.length,this.handle=r,this.capacity=0}else this.heap=new Uint32Array(h),this.table=[]}var t=e.prototype
return t.push=function(e){this.sizeCheck(),this.heap[this.offset++]=e},t.sizeCheck=function(){if(0===this.capacity){var e=m(this.heap,0,this.offset)
this.heap=new Uint32Array(e.length+h),this.heap.set(e,0),this.capacity=h}this.capacity--},t.getbyaddr=function(e){return this.heap[e]},t.setbyaddr=function(e,t){this.heap[e]=t},t.malloc=function(){this.table.push(this.offset,0,0)
var e=this.handle
return this.handle+=3,e},t.finishMalloc=function(e,t){this.table[e+1]=l(t,0)},t.size=function(){return this.offset},t.getaddr=function(e){return this.table[e]},t.gethandle=function(e){this.table.push(e,l(0,3),0)
var t=this.handle
return this.handle+=3,t},t.sizeof=function(e){return-1},t.scopesizeof=function(e){return this.table[e+1]>>2},t.free=function(e){var t=this.table[e+1]
this.table[e+1]=function(e,t){return e|t<<30}(t,1)},t.pushPlaceholder=function(e){this.sizeCheck()
var t=this.offset++
this.heap[t]=2147483647,this.placeholders.push([t,e])},t.patchPlaceholders=function(){for(var e=this.placeholders,t=0;t<e.length;t++){var n=e[t],r=n[0],i=n[1]
this.setbyaddr(r,i())}},t.capture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.offset
this.patchPlaceholders()
var t=m(this.heap,0,e).buffer
return{handle:this.handle,table:this.table,buffer:t}},e}()
e.Heap=f
var d=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f
this.constants=e,this.heap=t,this._opcode=new c(this.heap)}return e.prototype.opcode=function(e){return this._opcode.offset=e,this._opcode},e}()
e.WriteOnlyProgram=d
var p=function(){function e(e,t){this.constants=e,this.heap=t,this._opcode=new c(this.heap)}return e.hydrate=function(t,n,r){var i=new f(t)
return new e(new a(r,n),i)},e.prototype.opcode=function(e){return this._opcode.offset=e,this._opcode},e}()
e.RuntimeProgram=p
var v=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n}(d)
function m(e,t,n){if(void 0!==e.slice)return e.slice(t,n)
for(var r=new Uint32Array(n);t<n;t++)r[t]=e[t]
return r}e.Program=v}),e("@glimmer/reference",["exports","ember-babel","@glimmer/util"],function(e,t,n){"use strict"
e.isConst=function(e){return e.tag===c},e.isConstTag=function(e){return e===c},e.bump=function(){f++},e.combineTagged=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n].tag
if(i===l)return l
i!==c&&t.push(i)}return p(t)},e.combineSlice=function(e){var t=[],n=e.head()
for(;null!==n;){var r=n.tag
if(r===l)return l
r!==c&&t.push(r),n=e.nextNode(n)}return p(t)},e.combine=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n]
if(i===l)return l
i!==c&&t.push(i)}return p(t)},e.map=function(e,t){return new x(e,t)},e.isModified=function(e){return e!==_},e.ReferenceCache=e.CachedReference=e.UpdatableTag=e.CachedTag=e.DirtyableTag=e.CURRENT_TAG=e.VOLATILE_TAG=e.CONSTANT_TAG=e.TagWrapper=e.RevisionTag=e.VOLATILE=e.INITIAL=e.CONSTANT=e.IteratorSynchronizer=e.ReferenceIterator=e.IterationArtifacts=e.ListItem=e.ConstReference=void 0
e.CONSTANT=0
var r=1
e.INITIAL=r
e.VOLATILE=NaN
var i=function(){function e(){}return e.prototype.validate=function(e){return this.value()===e},e}()
e.RevisionTag=i,i.id=0
var o=[],a=[],s=function(){function e(e,t){this.type=e,this.inner=t}var t=e.prototype
return t.value=function(){return(0,o[this.type])(this.inner)},t.validate=function(e){return(0,a[this.type])(this.inner,e)},e}()
function u(e){var t=o.length
o.push(function(e){return e.value()}),a.push(function(e,t){return e.validate(t)}),e.id=t}e.TagWrapper=s,o.push(function(){return 0}),a.push(function(e,t){return 0===t})
var c=new s(0,null)
e.CONSTANT_TAG=c,o.push(function(){return NaN}),a.push(function(e,t){return NaN===t})
var l=new s(1,null)
e.VOLATILE_TAG=l,o.push(function(){return f}),a.push(function(e,t){return t===f})
var h=new s(2,null)
e.CURRENT_TAG=h
var f=r
var d=function(e){function n(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f
return(t=e.call(this)||this).revision=n,t}(0,t.inheritsLoose)(n,e),n.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f
return new s(this.id,new n(e))}
var r=n.prototype
return r.value=function(){return this.revision},r.dirty=function(){this.revision=++f},n}(i)
function p(e){switch(e.length){case 0:return c
case 1:return e[0]
case 2:return m.create(e[0],e[1])
default:return g.create(e)}}e.DirtyableTag=d,u(d)
var v=function(e){function n(){var t
return(t=e.apply(this,arguments)||this).lastChecked=null,t.lastValue=null,t}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.value=function(){return this.lastChecked!==f&&(this.lastChecked=f,this.lastValue=this.compute()),this.lastValue},r.invalidate=function(){this.lastChecked=null},n}(i)
e.CachedTag=v
var m=function(e){function n(t,n){var r
return(r=e.call(this)||this).first=t,r.second=n,r}return(0,t.inheritsLoose)(n,e),n.create=function(e,t){return new s(this.id,new n(e,t))},n.prototype.compute=function(){return Math.max(this.first.value(),this.second.value())},n}(v)
u(m)
var g=function(e){function n(t){var n
return(n=e.call(this)||this).tags=t,n}return(0,t.inheritsLoose)(n,e),n.create=function(e){return new s(this.id,new n(e))},n.prototype.compute=function(){for(var e=this.tags,t=-1,n=0;n<e.length;n++){var r=e[n].value()
t=Math.max(r,t)}return t},n}(v)
u(g)
var y=function(e){function n(t){var n
return(n=e.call(this)||this).tag=t,n.lastUpdated=r,n}(0,t.inheritsLoose)(n,e),n.create=function(e){return new s(this.id,new n(e))}
var i=n.prototype
return i.compute=function(){return Math.max(this.lastUpdated,this.tag.value())},i.update=function(e){e!==this.tag&&(this.tag=e,this.lastUpdated=f,this.invalidate())},n}(v)
e.UpdatableTag=y,u(y)
var b=function(){function e(){this.lastRevision=null,this.lastValue=null}var t=e.prototype
return t.value=function(){var e=this.tag,t=this.lastRevision,n=this.lastValue
return null!==t&&e.validate(t)||(n=this.lastValue=this.compute(),this.lastRevision=e.value()),n},t.invalidate=function(){this.lastRevision=null},e}()
e.CachedReference=b
var x=function(e){function n(t,n){var r
return(r=e.call(this)||this).tag=t.tag,r.reference=t,r.mapper=n,r}return(0,t.inheritsLoose)(n,e),n.prototype.compute=function(){var e=this.reference
return(0,this.mapper)(e.value())},n}(b)
var w=function(){function e(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}var t=e.prototype
return t.peek=function(){return this.initialized?this.lastValue:this.initialize()},t.revalidate=function(){if(!this.initialized)return this.initialize()
var e=this.reference,t=this.lastRevision,n=e.tag
if(n.validate(t))return _
this.lastRevision=n.value()
var r=this.lastValue,i=e.value()
return i===r?_:(this.lastValue=i,i)},t.initialize=function(){var e=this.reference,t=this.lastValue=e.value()
return this.lastRevision=e.tag.value(),this.initialized=!0,t},e}()
e.ReferenceCache=w
var _="adb3b78e-3d22-4e4b-877a-6317c2c5c145"
var R=function(){function e(e){this.inner=e,this.tag=c}return e.prototype.value=function(){return this.inner},e}()
e.ConstReference=R
var E=function(e){function n(t,n){var r
return(r=e.call(this,t.valueReferenceFor(n))||this).retained=!1,r.seen=!1,r.key=n.key,r.iterable=t,r.memo=t.memoReferenceFor(n),r}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.update=function(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)},r.shouldRemove=function(){return!this.retained},r.reset=function(){this.retained=!1,this.seen=!1},n}(n.ListNode)
e.ListItem=E
var C=function(){function e(e){this.iterator=null,this.map=(0,n.dict)(),this.list=new n.LinkedList,this.tag=e.tag,this.iterable=e}var t=e.prototype
return t.isEmpty=function(){return(this.iterator=this.iterable.iterate()).isEmpty()},t.iterate=function(){var e
return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e},t.has=function(e){return!!this.map[e]},t.get=function(e){return this.map[e]},t.wasSeen=function(e){var t=this.map[e]
return void 0!==t&&t.seen},t.append=function(e){var t=this.map,n=this.list,r=this.iterable,i=t[e.key]=new E(r,e)
return n.append(i),i},t.insertBefore=function(e,t){var n=this.map,r=this.list,i=this.iterable,o=n[e.key]=new E(i,e)
return o.retained=!0,r.insertBefore(o,t),o},t.move=function(e,t){var n=this.list
e.retained=!0,n.remove(e),n.insertBefore(e,t)},t.remove=function(e){this.list.remove(e),delete this.map[e.key]},t.nextNode=function(e){return this.list.nextNode(e)},t.head=function(){return this.list.head()},e}()
e.IterationArtifacts=C
var k,S=function(){function e(e){this.iterator=null
var t=new C(e)
this.artifacts=t}return e.prototype.next=function(){var e=this.artifacts,t=(this.iterator=this.iterator||e.iterate()).next()
return null===t?null:e.append(t)},e}()
e.ReferenceIterator=S,function(e){e[e.Append=0]="Append",e[e.Prune=1]="Prune",e[e.Done=2]="Done"}(k||(k={}))
var A=function(){function e(e){var t=e.target,n=e.artifacts
this.target=t,this.artifacts=n,this.iterator=n.iterate(),this.current=n.head()}var t=e.prototype
return t.sync=function(){for(var e=k.Append;;)switch(e){case k.Append:e=this.nextAppend()
break
case k.Prune:e=this.nextPrune()
break
case k.Done:return void this.nextDone()}},t.advanceToKey=function(e){for(var t=this.current,n=this.artifacts,r=t;null!==r&&r.key!==e;)r.seen=!0,r=n.nextNode(r)
null!==r&&(this.current=n.nextNode(r))},t.nextAppend=function(){var e=this.iterator,t=this.current,n=this.artifacts,r=e.next()
if(null===r)return this.startPrune()
var i=r.key
return null!==t&&t.key===i?this.nextRetain(r):n.has(i)?this.nextMove(r):this.nextInsert(r),k.Append},t.nextRetain=function(e){var t=this.artifacts,n=this.current;(n=n).update(e),this.current=t.nextNode(n),this.target.retain(e.key,n.value,n.memo)},t.nextMove=function(e){var t=this.current,n=this.artifacts,r=this.target,i=e.key,o=n.get(e.key)
o.update(e),n.wasSeen(e.key)?(n.move(o,t),r.move(o.key,o.value,o.memo,t?t.key:null)):this.advanceToKey(i)},t.nextInsert=function(e){var t=this.artifacts,n=this.target,r=this.current,i=t.insertBefore(e,r)
n.insert(i.key,i.value,i.memo,r?r.key:null)},t.startPrune=function(){return this.current=this.artifacts.head(),k.Prune},t.nextPrune=function(){var e=this.artifacts,t=this.target,n=this.current
if(null===n)return k.Done
var r=n
return this.current=e.nextNode(r),r.shouldRemove()?(e.remove(r),t.delete(r.key)):r.reset(),k.Prune},t.nextDone=function(){this.target.done()},e}()
e.IteratorSynchronizer=A}),e("@glimmer/runtime",["exports","ember-babel","@glimmer/util","@glimmer/reference","@glimmer/vm","@glimmer/low-level"],function(e,t,n,r,i,o){"use strict"
e.renderMain=function(e,t,n,r,i,o){var a=pt.initial(e,t,n,r,i,o)
return new vt(a)},e.renderComponent=function(e,t,n,r,i){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=pt.empty(e,t,n,r),u=s.constants.resolver,c=M(u,i,null),l=c.manager,h=c.state
if(!U(B(l.getCapabilities(h)),l))throw new Error("Cannot invoke components with dynamic layouts as a root component.")
o=l.getLayout(h,u)
var f=Object.keys(a).map(function(e){return[e,a[e]]}),d=["main","else","attrs"],p=f.map(function(e){var t=e[0]
return"@"+t})
s.pushFrame()
for(var v=0;v<3*d.length;v++)s.stack.push(null)
return s.stack.push(null),f.forEach(function(e){var t=e[1]
s.stack.push(t)}),s.args.setup(s.stack,p,d,0,!1),s.stack.push(s.args),s.stack.push(o),s.stack.push(c),new vt(s)},e.setDebuggerCallback=function(e){G=e},e.resetDebuggerCallback=function(){G=H},e.getDynamicVar=function(e,t){var n=e.dynamicScope(),r=t.positional.at(0)
return new mt(n,r)},e.isCurriedComponentDefinition=b,e.curry=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return new x(e,t)},e.isWhitespace=function(e){return oe.test(e)},e.normalizeProperty=Re,e.clientBuilder=function(e,t){return We.forInitialRender(e,t)},e.rehydrationBuilder=function(e,t){return xt.forInitialRender(e,t)},e.isSerializationFirstNode=yt,e.capabilityFlagsFrom=B,e.hasCapability=j,e.Cursor=e.ConcreteBounds=e.SERIALIZATION_FIRST_NODE_STRING=e.RehydrateBuilder=e.NewElementBuilder=e.DOMTreeConstruction=e.IDOMChanges=e.SVG_NAMESPACE=e.DOMChanges=e.CurriedComponentDefinition=e.MINIMAL_CAPABILITIES=e.DEFAULT_CAPABILITIES=e.DefaultEnvironment=e.Environment=e.Scope=e.EMPTY_ARGS=e.DynamicAttribute=e.SimpleDynamicAttribute=e.RenderResult=e.UpdatingVM=e.LowLevelVM=e.ConditionalReference=e.PrimitiveReference=e.UNDEFINED_REFERENCE=e.NULL_REFERENCE=void 0
var a=new(function(){function e(){this.evaluateOpcode=(0,n.fillNulls)(98).slice()}var t=e.prototype
return t.add=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"syscall"
this.evaluateOpcode[e]={syscall:"syscall"===n,evaluate:t}},t.debugBefore=function(e,t,n){return{sp:void 0,state:void 0}},t.debugAfter=function(e,t,n,r){r.sp,r.state},t.evaluate=function(e,t,n){var r=this.evaluateOpcode[n]
r.syscall?r.evaluate(e,t):r.evaluate(e.inner,t)},e}()),s=function(e){function n(){var t
return(t=e.apply(this,arguments)||this).next=null,t.prev=null,t}return(0,t.inheritsLoose)(n,e),n}(function(){(0,n.initializeGuid)(this)}),u=function(e){function n(t){return e.call(this,t)||this}return(0,t.inheritsLoose)(n,e),n.create=function(e){return void 0===e?h:null===e?f:!0===e?d:!1===e?p:"number"==typeof e?new l(e):new c(e)},n.prototype.get=function(e){return h},n}(r.ConstReference)
e.PrimitiveReference=u
var c=function(e){function n(){var t
return(t=e.apply(this,arguments)||this).lengthReference=null,t}return(0,t.inheritsLoose)(n,e),n.prototype.get=function(t){if("length"===t){var n=this.lengthReference
return null===n&&(n=this.lengthReference=new l(this.inner.length)),n}return e.prototype.get.call(this,t)},n}(u),l=function(e){function n(t){return e.call(this,t)||this}return(0,t.inheritsLoose)(n,e),n}(u),h=new l(void 0)
e.UNDEFINED_REFERENCE=h
var f=new l(null)
e.NULL_REFERENCE=f
var d=new l(!0),p=new l(!1),v=function(){function e(e){this.inner=e,this.tag=e.tag}var t=e.prototype
return t.value=function(){return this.toBool(this.inner.value())},t.toBool=function(e){return!!e},e}()
e.ConditionalReference=v
var m=function(e){function n(t){var n
return(n=e.call(this)||this).parts=t,n.tag=(0,r.combineTagged)(t),n}return(0,t.inheritsLoose)(n,e),n.prototype.compute=function(){for(var e=new Array,t=0;t<this.parts.length;t++){var n=this.parts[t].value()
null!=n&&(e[t]=g(n))}return e.length>0?e.join(""):null},n}(r.CachedReference)
function g(e){return"function"!=typeof e.toString?"":String(e)}a.add(1,function(e,t){var n=t.op1,r=e.stack,o=e.constants.resolveHandle(n)(e,r.pop())
e.loadValue(i.Register.v0,o)}),a.add(6,function(e,t){var n=t.op1,r=e.referenceForSymbol(n)
e.stack.push(r)}),a.add(4,function(e,t){var n=t.op1,r=e.stack.pop()
e.scope().bindSymbol(n,r)}),a.add(5,function(e,t){var n=t.op1,r=e.stack.pop(),i=e.stack.pop(),o=e.stack.pop(),a=o?[r,i,o]:null
e.scope().bindBlock(n,a)}),a.add(96,function(e,t){var n=t.op1,r=e.constants.getString(n),i=e.scope().getPartialMap()[r]
void 0===i&&(i=e.getSelf().get(r)),e.stack.push(i)}),a.add(20,function(e,t){var n=t.op1,r=t.op2
e.pushRootScope(n,!!r)}),a.add(7,function(e,t){var n=t.op1,r=e.constants.getString(n),i=e.stack.pop()
e.stack.push(i.get(r))}),a.add(8,function(e,t){var n=t.op1,r=e.stack,i=e.scope().getBlock(n)
i?(r.push(i[2]),r.push(i[1]),r.push(i[0])):(r.push(null),r.push(null),r.push(null))}),a.add(9,function(e,t){var n=t.op1,r=!!e.scope().getBlock(n)
e.stack.push(r?d:p)}),a.add(10,function(e){e.stack.pop(),e.stack.pop()
var t=e.stack.pop(),n=t&&t.parameters.length
e.stack.push(n?d:p)}),a.add(11,function(e,t){for(var n=t.op1,r=new Array(n),i=n;i>0;i--){r[i-1]=e.stack.pop()}e.stack.push(new m(r))})
var y="CURRIED COMPONENT DEFINITION [id=6f00feb9-a0ef-4547-99ea-ac328f80acea]"
function b(e){return!(!e||!e[y])}var x=function(){function e(e,t){this.inner=e,this.args=t,this[y]=!0}return e.prototype.unwrap=function(e){e.realloc(this.offset)
for(var t=this;;){var n=t,r=n.args,i=n.inner
if(r&&(e.positional.prepend(r.positional),e.named.merge(r.named)),!b(i))return i
t=i}},(0,t.createClass)(e,[{key:"offset",get:function(){var e=this.inner,t=this.args,n=t?t.positional.length:0
return b(e)?n+e.offset:n}}]),e}()
function w(e){return _(e)?"":String(e)}function _(e){return null==e||"function"!=typeof e.toString}function R(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function E(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function C(e){return"string"==typeof e}e.CurriedComponentDefinition=x
var k=function(e){function n(t,n,r){var i
return(i=e.call(this)||this).node=t,i.reference=n,i.lastValue=r,i.type="dynamic-text",i.tag=n.tag,i.lastRevision=i.tag.value(),i}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.evaluate=function(){var e=this.reference,t=this.tag
t.validate(this.lastRevision)||(this.lastRevision=t.value(),this.update(e.value()))},r.update=function(e){var t,n=this.lastValue
e!==n&&((t=_(e)?"":C(e)?e:String(e))!==n&&(this.node.nodeValue=this.lastValue=t))},n}(s),S=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n.create=function(e){return new n(e)},n.prototype.toBool=function(e){return b(e)},n}(v),A=function(){function e(e){this.inner=e,this.tag=e.tag}return e.prototype.value=function(){var e,t=this.inner.value()
return function(e){return C(e)||_(e)||"boolean"==typeof e||"number"==typeof e}(t)?1:(e=t)&&e[y]?0:R(t)?3:function(e){return E(e)&&11===e.nodeType}(t)?4:E(t)?5:1},e}()
a.add(28,function(e){var t=e.stack.pop().value(),n=_(t)?"":String(t)
e.elements().appendDynamicHTML(n)}),a.add(29,function(e){var t=e.stack.pop().value().toHTML(),n=_(t)?"":t
e.elements().appendDynamicHTML(n)}),a.add(32,function(e){var t=e.stack.pop(),n=t.value(),i=_(n)?"":String(n),o=e.elements().appendDynamicText(i);(0,r.isConst)(t)||e.updateWith(new k(o,t,i))}),a.add(30,function(e){var t=e.stack.pop().value()
e.elements().appendDynamicFragment(t)}),a.add(31,function(e){var t=e.stack.pop().value()
e.elements().appendDynamicNode(t)}),a.add(22,function(e){return e.pushChildScope()}),a.add(23,function(e){return e.popScope()}),a.add(44,function(e){return e.pushDynamicScope()}),a.add(45,function(e){return e.popDynamicScope()}),a.add(12,function(e,t){var n=t.op1
e.stack.push(e.constants.getOther(n))}),a.add(13,function(e,t){var n=t.op1,r=e.stack,i=n>>3
switch(7&n){case 0:r.push(i)
break
case 1:r.push(e.constants.getNumber(i))
break
case 2:r.push(e.constants.getString(i))
break
case 3:r.pushEncodedImmediate(n)
break
case 4:case 5:r.push(e.constants.getNumber(i))}}),a.add(14,function(e){var t=e.stack
t.push(u.create(t.pop()))}),a.add(15,function(e){var t=e.stack
t.push(t.peek().value())}),a.add(16,function(e,t){var n=t.op1,r=t.op2,i=e.fetchValue(n)-r
e.stack.dup(i)}),a.add(17,function(e,t){var n=t.op1
e.stack.pop(n)}),a.add(18,function(e,t){var n=t.op1
e.load(n)}),a.add(19,function(e,t){var n=t.op1
e.fetch(n)}),a.add(43,function(e,t){var n=t.op1,r=e.constants.getArray(n)
e.bindDynamicScope(r)}),a.add(61,function(e,t){var n=t.op1
e.enter(n)}),a.add(62,function(e){e.exit()}),a.add(48,function(e,t){var n=t.op1
e.stack.push(e.constants.getSerializable(n))}),a.add(47,function(e){e.stack.push(e.scope())}),a.add(46,function(e){var t=e.stack,n=t.pop()
n?t.push(n.compile()):t.pushNull()}),a.add(51,function(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),o=t.pop()
if(null===i)return e.pushFrame(),void e.pushScope(r)
var a=r,s=i.parameters,u=s.length
if(u>0){a=a.child()
for(var c=0;c<u;c++)a.bindSymbol(s[c],o.at(c))}e.pushFrame(),e.pushScope(a),e.call(n)}),a.add(53,function(e,t){var n=t.op1,i=e.stack.pop()
if((0,r.isConst)(i))i.value()&&e.goto(n)
else{var o=new r.ReferenceCache(i)
o.peek()&&e.goto(n),e.updateWith(new T(o))}}),a.add(54,function(e,t){var n=t.op1,i=e.stack.pop()
if((0,r.isConst)(i))i.value()||e.goto(n)
else{var o=new r.ReferenceCache(i)
o.peek()||e.goto(n),e.updateWith(new T(o))}}),a.add(55,function(e,t){var n=t.op1,r=t.op2
e.stack.peek()===r&&e.goto(n)}),a.add(56,function(e){var t=e.stack.peek();(0,r.isConst)(t)||e.updateWith(T.initialize(new r.ReferenceCache(t)))}),a.add(63,function(e){var t=e.env,n=e.stack
n.push(t.toConditionalReference(n.pop()))})
var T=function(e){function n(t){var n
return(n=e.call(this)||this).type="assert",n.tag=t.tag,n.cache=t,n}return(0,t.inheritsLoose)(n,e),n.initialize=function(e){var t=new n(e)
return e.peek(),t},n.prototype.evaluate=function(e){var t=this.cache;(0,r.isModified)(t.revalidate())&&e.throw()},n}(s),O=function(e){function n(t,n){var r
return(r=e.call(this)||this).target=n,r.type="jump-if-not-modified",r.tag=t,r.lastRevision=t.value(),r}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.evaluate=function(e){var t=this.tag,n=this.target,r=this.lastRevision
!e.alwaysRevalidate&&t.validate(r)&&e.goto(n)},r.didModify=function(){this.lastRevision=this.tag.value()},n}(s),I=function(e){function n(t){var n
return(n=e.call(this)||this).target=t,n.type="did-modify",n.tag=r.CONSTANT_TAG,n}return(0,t.inheritsLoose)(n,e),n.prototype.evaluate=function(){this.target.didModify()},n}(s),N=function(){function e(e){this.tag=r.CONSTANT_TAG,this.type="label",this.label=null,this.prev=null,this.next=null,(0,n.initializeGuid)(this),this.label=e}var t=e.prototype
return t.evaluate=function(){},t.inspect=function(){return this.label+" ["+this._guid+"]"},e}()
a.add(26,function(e,t){var n=t.op1
e.elements().appendText(e.constants.getString(n))}),a.add(27,function(e,t){var n=t.op1
e.elements().appendComment(e.constants.getString(n))}),a.add(33,function(e,t){var n=t.op1
e.elements().openElement(e.constants.getString(n))}),a.add(34,function(e){var t=e.stack.pop().value()
e.elements().openElement(t)}),a.add(41,function(e){var t,n,i=e.stack.pop(),o=e.stack.pop(),a=e.stack.pop().value()
if((0,r.isConst)(i))t=i.value()
else{var s=new r.ReferenceCache(i)
t=s.peek(),e.updateWith(new T(s))}if((0,r.isConst)(o))n=o.value()
else{var u=new r.ReferenceCache(o)
n=u.peek(),e.updateWith(new T(u))}e.elements().pushRemoteElement(t,a,n)}),a.add(42,function(e){e.elements().popRemoteElement()}),a.add(38,function(e){var t=e.fetchValue(i.Register.t0),n=null
t&&(n=t.flush(e),e.loadValue(i.Register.t0,null)),e.elements().flushElement(n)}),a.add(39,function(e){var t=e.elements().closeElement()
t&&t.forEach(function(t){var n=t[0],r=t[1]
e.env.scheduleInstallModifier(r,n)
var i=n.getDestructor(r)
i&&e.newDestroyable(i)})}),a.add(40,function(e,t){var n=t.op1,o=e.constants.resolveHandle(n),a=o.manager,s=o.state,u=e.stack.pop(),c=e.elements(),l=c.constructing,h=c.updateOperations,f=e.dynamicScope(),d=a.create(l,s,u,f,h)
e.fetchValue(i.Register.t0).addModifier(a,d)
var p=a.getTag(d);(0,r.isConstTag)(p)||e.updateWith(new D(p,a,d))})
var D=function(e){function n(t,n,r){var i
return(i=e.call(this)||this).tag=t,i.manager=n,i.modifier=r,i.type="update-modifier",i.lastUpdated=t.value(),i}return(0,t.inheritsLoose)(n,e),n.prototype.evaluate=function(e){var t=this.manager,n=this.modifier,r=this.tag,i=this.lastUpdated
r.validate(i)||(e.env.scheduleUpdateModifier(n,t),this.lastUpdated=r.value())},n}(s)
a.add(35,function(e,t){var n=t.op1,r=t.op2,i=t.op3,o=e.constants.getString(n),a=e.constants.getString(r),s=i?e.constants.getString(i):null
e.elements().setStaticAttribute(o,a,s)}),a.add(36,function(e,t){var n=t.op1,i=t.op2,o=t.op3,a=e.constants.getString(n),s=e.stack.pop(),u=s.value(),c=o?e.constants.getString(o):null,l=e.elements().setDynamicAttribute(a,u,!!i,c);(0,r.isConst)(s)||e.updateWith(new P(s,l))})
var P=function(e){function n(t,n){var r
return(r=e.call(this)||this).reference=t,r.attribute=n,r.type="patch-element",r.tag=t.tag,r.lastRevision=r.tag.value(),r}return(0,t.inheritsLoose)(n,e),n.prototype.evaluate=function(e){var t=this.attribute,n=this.reference,r=this.tag
r.validate(this.lastRevision)||(this.lastRevision=r.value(),t.update(n.value(),e.env))},n}(s)
function M(e,t,n){return e.lookupComponentDefinition(t,n)}var F=function(){function e(e,t,n,r){this.inner=e,this.resolver=t,this.meta=n,this.args=r,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}var t=e.prototype
return t.value=function(){var e=this.inner,t=this.lastValue,n=e.value()
if(n===t)return this.lastDefinition
var r=null
if(b(n))r=n
else if("string"==typeof n&&n){r=M(this.resolver,n,this.meta)}return r=this.curry(r),this.lastValue=n,this.lastDefinition=r,r},t.get=function(){return h},t.curry=function(e){var t=this.args
return!t&&b(e)?e:e?new x(e,t):null},e}(),L=function(){function e(e){this.list=e,this.tag=(0,r.combineTagged)(e),this.list=e}return e.prototype.value=function(){for(var e=[],t=this.list,n=0;n<t.length;n++){var r=w(t[n].value())
r&&e.push(r)}return 0===e.length?null:e.join(" ")},e}()
function B(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)}function j(e,t){return!!(e&t)}a.add(69,function(e){var t=e.stack,n=t.pop()
t.push(S.create(n))}),a.add(70,function(e){var t=e.stack,n=t.peek()
t.push(new A(n))}),a.add(71,function(e,t){var n=t.op1,r=e.stack,o=r.pop(),a=r.pop(),s=e.constants.getSerializable(n),u=e.constants.resolver
e.loadValue(i.Register.v0,new F(o,u,s,a))}),a.add(72,function(e,t){var n=t.op1,r=e.constants.resolveHandle(n),i=r.manager,o=B(i.getCapabilities(r.state)),a={definition:r,manager:i,capabilities:o,state:null,handle:null,table:null,lookup:null}
e.stack.push(a)}),a.add(75,function(e,t){var r,o=t.op1,a=e.stack,s=a.pop().value(),u=e.constants.getSerializable(o)
if(e.loadValue(i.Register.t1,null),"string"==typeof s){r=M(e.constants.resolver,s,u)}else{if(!b(s))throw(0,n.unreachable)()
r=s}a.push(r)}),a.add(73,function(e){var t,n,r=e.stack,i=r.pop()
b(i)?n=t=null:t=B((n=i.manager).getCapabilities(i.state)),r.push({definition:i,capabilities:t,manager:n,state:null,handle:null,table:null})}),a.add(74,function(e,r){(0,t.objectDestructuringEmpty)(r)
var i,o=e.stack,a=o.pop().value()
if(!b(a))throw(0,n.unreachable)()
i=a,o.push(i)}),a.add(76,function(e,t){var n=t.op1,r=t.op2,i=e.stack,o=e.constants.getStringArray(n),a=r>>4,s=8&r,u=[]
4&r&&u.push("main"),2&r&&u.push("else"),1&r&&u.push("attrs"),e.args.setup(i,o,u,a,!!s),i.push(e.args)}),a.add(77,function(e){var t=e.stack
t.push(e.args.empty(t))}),a.add(80,function(e){var t=e.stack,n=t.pop().capture()
t.push(n)}),a.add(79,function(e,t){var n=t.op1,r=e.stack,i=e.fetchValue(n),o=r.pop(),a=i.definition
b(a)&&(a=function(e,t,n){var r=e.definition=t.unwrap(n),i=r.manager,o=r.state
return e.manager=i,e.capabilities=B(i.getCapabilities(o)),r}(i,a,o))
var s=a,u=s.manager,c=s.state
if(!0===j(i.capabilities,4)){var l=o.blocks.values,h=o.blocks.names,f=u.prepareArgs(c,o)
if(f){o.clear()
for(var d=0;d<l.length;d++)r.push(l[d])
for(var p=f.positional,v=f.named,m=p.length,g=0;g<m;g++)r.push(p[g])
for(var y=Object.keys(v),x=0;x<y.length;x++)r.push(v[y[x]])
o.setup(r,y,h,m,!0)}r.push(o)}else r.push(o)}),a.add(81,function(e,t){var n=t.op1,i=t.op2,o=e.fetchValue(i),a=o.definition,s=o.manager,u=o.capabilities=B(s.getCapabilities(a.state)),c=null
j(u,64)&&(c=e.dynamicScope())
var l=1&n,h=null
j(u,8)&&(h=e.stack.peek())
var f=null
j(u,128)&&(f=e.getSelf())
var d=s.create(e.env,a.state,h,c,f,!!l)
o.state=d
var p=s.getTag(d)
j(u,256)&&!(0,r.isConstTag)(p)&&e.updateWith(new V(p,d,s,c))}),a.add(82,function(e,t){var n=t.op1,r=e.fetchValue(n),i=r.manager,o=r.state,a=i.getDestructor(o)
a&&e.newDestroyable(a)}),a.add(91,function(e){e.beginCacheGroup(),e.elements().pushSimpleBlock()}),a.add(83,function(e){e.loadValue(i.Register.t0,new z)}),a.add(37,function(e,t){var n=t.op1,r=t.op2,o=t.op3,a=e.constants.getString(n),s=e.stack.pop(),u=o?e.constants.getString(o):null
e.fetchValue(i.Register.t0).setAttribute(a,s,!!r,u)})
var z=function(){function e(){this.attributes=(0,n.dict)(),this.classes=[],this.modifiers=[]}var t=e.prototype
return t.setAttribute=function(e,t,n,r){var i={value:t,namespace:r,trusting:n}
"class"===e&&this.classes.push(t),this.attributes[e]=i},t.addModifier=function(e,t){this.modifiers.push([e,t])},t.flush=function(e){for(var t in this.attributes){var n=this.attributes[t],i=n.value,o=n.namespace,a=n.trusting
if("class"===t&&(i=new L(this.classes)),"type"!==t){var s=e.elements().setDynamicAttribute(t,i.value(),a,o);(0,r.isConst)(i)||e.updateWith(new P(i,s))}}if("type"in this.attributes){var u=this.attributes.type,c=(i=u.value,o=u.namespace,a=u.trusting,e.elements().setDynamicAttribute("type",i.value(),a,o));(0,r.isConst)(i)||e.updateWith(new P(i,c))}return this.modifiers},e}()
function U(e,t){return!1===j(e,1)}function W(e,t,n,r,i){var o=n.table.symbols.indexOf(e),a=r.get(t);-1!==o&&i.scope().bindBlock(o+1,a),n.lookup&&(n.lookup[e]=a)}a.add(93,function(e,t){var n=t.op1,r=e.fetchValue(n),o=r.definition,a=r.state,s=o.manager,u=e.fetchValue(i.Register.t0)
s.didCreateElement(a,e.elements().expectConstructing("DidCreateElementOpcode#evaluate"),u)}),a.add(84,function(e,t){var n=t.op1,r=e.fetchValue(n),i=r.definition,o=r.state,a=i.manager
e.stack.push(a.getSelf(o))}),a.add(85,function(e,t){var n=t.op1,r=e.fetchValue(n),i=r.definition,o=r.state,a=i.manager
e.stack.push(a.getTagName(o))}),a.add(86,function(e,t){var r,i=t.op1,o=e.fetchValue(i),a=o.manager,s=o.definition,u=e.constants.resolver,c=e.stack,l=o.state,h=o.capabilities,f=s.state
if(U(h,a))r=a.getLayout(f,u)
else{if(!function(e,t){return!0===j(e,1)}(h))throw(0,n.unreachable)()
r=a.getDynamicLayout(l,u)}c.push(r.symbolTable),c.push(r.handle)}),a.add(68,function(e,t){var n=t.op1,r=e.stack.pop(),i=e.stack.pop(),o=r.manager,a=B(o.getCapabilities(r.state)),s={definition:r,manager:o,capabilities:a,state:null,handle:i.handle,table:i.symbolTable,lookup:null}
e.loadValue(n,s)}),a.add(89,function(e,t){var n=t.op1,r=e.stack,i=r.pop(),o=r.pop(),a=e.fetchValue(n)
a.handle=i,a.table=o}),a.add(21,function(e,t){var n=t.op1,r=e.fetchValue(n).table.symbols
e.pushRootScope(r.length+1,!0)}),a.add(87,function(e,t){var r=t.op1,i=e.fetchValue(r)
if(i.table.hasEval){var o=i.lookup=(0,n.dict)()
e.scope().bindEvalScope(o)}}),a.add(2,function(e,t){for(var n=t.op1,r=e.fetchValue(n),i=e.scope(),o=e.stack.peek(),a=o.named.atNames,s=a.length-1;s>=0;s--){var u=a[s],c=r.table.symbols.indexOf(a[s]),l=o.named.get(u,!1);-1!==c&&i.bindSymbol(c+1,l),r.lookup&&(r.lookup[u]=l)}}),a.add(3,function(e,t){var n=t.op1,r=e.fetchValue(n),i=e.stack.peek().blocks
W("&attrs","attrs",r,i,e),W("&inverse","else",r,i,e),W("&default","main",r,i,e)}),a.add(90,function(e,t){var n=t.op1,r=e.fetchValue(n)
e.call(r.handle)}),a.add(94,function(e,t){var n=t.op1,r=e.fetchValue(n),i=r.manager,o=r.state,a=e.elements().popBlock()
i.didRenderLayout(o,a),e.env.didCreate(o,i),e.updateWith(new q(i,o,a))}),a.add(92,function(e){e.commitCacheGroup()})
var V=function(e){function n(t,n,r,i){var o
return(o=e.call(this)||this).tag=t,o.component=n,o.manager=r,o.dynamicScope=i,o.type="update-component",o}return(0,t.inheritsLoose)(n,e),n.prototype.evaluate=function(e){var t=this.component,n=this.manager,r=this.dynamicScope
n.update(t,r)},n}(s),q=function(e){function n(t,n,i){var o
return(o=e.call(this)||this).manager=t,o.component=n,o.bounds=i,o.type="did-update-layout",o.tag=r.CONSTANT_TAG,o}return(0,t.inheritsLoose)(n,e),n.prototype.evaluate=function(e){var t=this.manager,n=this.component,r=this.bounds
t.didUpdateLayout(n,r),e.env.didUpdate(n,t)},n}(s)
function H(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}var G=H
var K=function(){function e(e,t,r){this.scope=e,this.locals=(0,n.dict)()
for(var i=0;i<r.length;i++){var o=r[i],a=t[o-1],s=e.getSymbol(o)
this.locals[a]=s}}return e.prototype.get=function(e){var t,n=this.scope,r=this.locals,i=e.split("."),o=e.split("."),a=o[0],s=o.slice(1),u=n.getEvalScope()
return"this"===a?t=n.getSelf():r[a]?t=r[a]:0===a.indexOf("@")&&u[a]?t=u[a]:(t=this.scope.getSelf(),s=i),s.reduce(function(e,t){return e.get(t)},t)},e}()
a.add(97,function(e,t){var n=t.op1,r=t.op2,i=e.constants.getStringArray(n),o=e.constants.getArray(r),a=new K(e.scope(),i,o)
G(e.getSelf().value(),function(e){return a.get(e).value()})}),a.add(95,function(e,t){var n=t.op1,r=t.op2,i=t.op3,o=e.constants,a=e.constants.resolver,s=e.stack.pop().value(),u=o.getSerializable(n),c=o.getStringArray(r),l=o.getArray(i),h=a.lookupPartial(s,u),f=a.resolve(h).getPartial(),d=f.symbolTable,p=f.handle,v=d.symbols,m=e.scope(),g=e.pushRootScope(v.length,!1),y=m.getEvalScope()
g.bindCallerScope(m.getCallerScope()),g.bindEvalScope(y),g.bindSelf(m.getSelf())
for(var b=Object.create(m.getPartialMap()),x=0;x<l.length;x++){var w=l[x],_=c[w-1],R=m.getSymbol(w)
b[_]=R}if(y)for(var E=0;E<v.length;E++){var C=E+1,k=y[v[E]]
void 0!==k&&g.bind(C,k)}g.bindPartialMap(b),e.pushFrame(),e.call(p)})
var $=function(){function e(e){this.tag=e.tag,this.artifacts=e}return e.prototype.value=function(){return!this.artifacts.isEmpty()},e}()
a.add(66,function(e){var t=e.stack,n=t.pop(),i=t.pop(),o=e.env.iterableFor(n,i.value()),a=new r.ReferenceIterator(o)
t.push(a),t.push(new $(a.artifacts))}),a.add(64,function(e,t){var n=t.op1
e.enterList(n)}),a.add(65,function(e){e.exitList()}),a.add(67,function(e,t){var n=t.op1,r=e.stack.peek().next()
if(r){var i=e.iterate(r.memo,r.value)
e.enterItem(r.key,i)}else e.goto(n)})
var X=function(e,t){this.element=e,this.nextSibling=t}
e.Cursor=X
var Y=function(){function e(e,t,n){this.parentNode=e,this.first=t,this.last=n}var t=e.prototype
return t.parentElement=function(){return this.parentNode},t.firstNode=function(){return this.first},t.lastNode=function(){return this.last},e}()
e.ConcreteBounds=Y
var Q=function(){function e(e,t){this.parentNode=e,this.node=t}var t=e.prototype
return t.parentElement=function(){return this.parentNode},t.firstNode=function(){return this.node},t.lastNode=function(){return this.node},e}()
function J(e,t){for(var n=e.parentElement(),r=e.firstNode(),i=e.lastNode(),o=r;;){var a=o.nextSibling
if(n.insertBefore(o,t),o===i)return a
o=a}}function Z(e){for(var t=e.parentElement(),n=e.firstNode(),r=e.lastNode(),i=n;;){var o=i.nextSibling
if(t.removeChild(i),i===r)return o
i=o}}function ee(e,n,r){if(!e)return n
if(!function(e,t){var n=e.createElementNS(t,"svg")
try{n.insertAdjacentHTML("beforeend","<circle></circle>")}catch(r){}finally{return 1!==n.childNodes.length||n.firstChild.namespaceURI!==ne}}(e,r))return n
var i=e.createElement("div")
return function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n.prototype.insertHTMLBefore=function(t,n,o){return""===o?e.prototype.insertHTMLBefore.call(this,t,n,o):t.namespaceURI!==r?e.prototype.insertHTMLBefore.call(this,t,n,o):function(e,t,n,r){var i
if("FOREIGNOBJECT"===e.tagName.toUpperCase()){var o="<svg><foreignObject>"+n+"</foreignObject></svg>"
t.innerHTML=o,i=t.firstChild.firstChild}else{var a="<svg>"+n+"</svg>"
t.innerHTML=a,i=t.firstChild}return function(e,t,n){var r=e.firstChild,i=r,o=r
for(;o;){var a=o.nextSibling
t.insertBefore(o,n),i=o,o=a}return new Y(t,r,i)}(i,e,r)}(t,i,o,n)},n}(n)}function te(e,n){return e&&function(e){var t=e.createElement("div")
if(t.innerHTML="first",t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1
return!0}(e)?function(e){function n(t){var n
return(n=e.call(this,t)||this).uselessComment=t.createComment(""),n}return(0,t.inheritsLoose)(n,e),n.prototype.insertHTMLBefore=function(t,n,r){if(""===r)return e.prototype.insertHTMLBefore.call(this,t,n,r)
var i=!1,o=n?n.previousSibling:t.lastChild
o&&o instanceof Text&&(i=!0,t.insertBefore(this.uselessComment,n))
var a=e.prototype.insertHTMLBefore.call(this,t,n,r)
return i&&t.removeChild(this.uselessComment),a},n}(n):n}var ne="http://www.w3.org/2000/svg"
e.SVG_NAMESPACE=ne
var re={foreignObject:1,desc:1,title:1},ie=Object.create(null);["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(function(e){return ie[e]=1})
var oe=/[\t-\r \xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/,ae="undefined"==typeof document?null:document
var se,ue=function(){function e(e){this.document=e,this.setupUselessElement()}var t=e.prototype
return t.setupUselessElement=function(){this.uselessElement=this.document.createElement("div")},t.createElement=function(e,t){var n,r
if(t?(n=t.namespaceURI===ne||"svg"===e,r=re[t.tagName]):(n="svg"===e,r=!1),n&&!r){if(ie[e])throw new Error("Cannot create a "+e+" inside an SVG context")
return this.document.createElementNS(ne,e)}return this.document.createElement(e)},t.insertBefore=function(e,t,n){e.insertBefore(t,n)},t.insertHTMLBefore=function(e,t,n){if(""===n){var r=this.createComment("")
return e.insertBefore(r,t),new Y(e,r,r)}var i,o=t?t.previousSibling:e.lastChild
if(null===t)e.insertAdjacentHTML("beforeend",n),i=e.lastChild
else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",n),i=t.previousSibling
else{var a=this.uselessElement
e.insertBefore(a,t),a.insertAdjacentHTML("beforebegin",n),i=a.previousSibling,e.removeChild(a)}var s=o?o.nextSibling:e.firstChild
return new Y(e,s,i)},t.createTextNode=function(e){return this.document.createTextNode(e)},t.createComment=function(e){return this.document.createComment(e)},e}();(function(e){var n=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.createElementNS=function(e,t){return this.document.createElementNS(e,t)},r.setAttribute=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null
r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)},n}(ue)
e.TreeConstruction=n
var r=n
r=te(ae,r),r=ee(ae,r,ne),e.DOMTreeConstruction=r})(se||(se={}))
var ce=function(e){function n(t){var n
return(n=e.call(this,t)||this).document=t,n.namespace=null,n}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.setAttribute=function(e,t,n){e.setAttribute(t,n)},r.removeAttribute=function(e,t){e.removeAttribute(t)},r.insertAfter=function(e,t,n){this.insertBefore(e,t,n.nextSibling)},n}(ue)
e.IDOMChanges=ce
var le=ce
le=te(ae,le)
var he=le=ee(ae,le,ne)
e.DOMChanges=he
var fe=se.DOMTreeConstruction
e.DOMTreeConstruction=fe
var de=["javascript:","vbscript:"],pe=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],ve=["EMBED"],me=["href","src","background","action"],ge=["src"]
function ye(e,t){return-1!==e.indexOf(t)}function be(e,t){return(null===e||ye(pe,e))&&ye(me,t)}function xe(e,t){return null!==e&&(ye(ve,e)&&ye(ge,t))}function we(e,t){return be(e,t)||xe(e,t)}function _e(e,t,n,r){var i=null
if(null==r)return r
if(R(r))return r.toHTML()
i=t?t.tagName.toUpperCase():null
var o=w(r)
if(be(i,n)){var a=e.protocolForURL(o)
if(ye(de,a))return"unsafe:"+o}return xe(i,n)?"unsafe:"+o:o}function Re(e,t){var n,r,i,o,a
if(t in e)r=t,n="prop"
else{var s=t.toLowerCase()
s in e?(n="prop",r=s):(n="attr",r=t)}return"prop"===n&&("style"===r.toLowerCase()||(i=e.tagName,o=r,(a=Ee[i.toUpperCase()])&&a[o.toLowerCase()]))&&(n="attr"),{normalized:r,type:n}}var Ee={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}}
function Ce(e,t,n){var r=e.tagName,i={element:e,name:t,namespace:n}
if(e.namespaceURI===ne)return ke(r,t,i)
var o=Re(e,t),a=o.type,s=o.normalized
return"attr"===a?ke(r,s,i):function(e,t,n){if(we(e,t))return new Oe(t,n)
if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new Ne(t,n)
if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new De(t,n)
return new Te(t,n)}(r,s,i)}function ke(e,t,n){return we(e,t)?new Ie(n):new Ae(n)}var Se=function(e){this.attribute=e}
e.DynamicAttribute=Se
var Ae=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(e,t,n){var r=Pe(t)
if(null!==r){var i=this.attribute,o=i.name,a=i.namespace
e.__setAttribute(o,r,a)}},r.update=function(e,t){var n=Pe(e),r=this.attribute,i=r.element,o=r.name
null===n?i.removeAttribute(o):i.setAttribute(o,n)},n}(Se)
e.SimpleDynamicAttribute=Ae
var Te=function(e){function n(t,n){var r
return(r=e.call(this,n)||this).normalizedName=t,r}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(e,t,n){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))},r.update=function(e,t){var n=this.attribute.element
this.value!==e&&(n[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())},r.removeAttribute=function(){var e=this.attribute,t=e.element,n=e.namespace
n?t.removeAttributeNS(n,this.normalizedName):t.removeAttribute(this.normalizedName)},n}(Se),Oe=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(t,n,r){var i=this.attribute,o=_e(r,i.element,i.name,n)
e.prototype.set.call(this,t,o,r)},r.update=function(t,n){var r=this.attribute,i=_e(n,r.element,r.name,t)
e.prototype.update.call(this,i,n)},n}(Te),Ie=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(t,n,r){var i=this.attribute,o=_e(r,i.element,i.name,n)
e.prototype.set.call(this,t,o,r)},r.update=function(t,n){var r=this.attribute,i=_e(n,r.element,r.name,t)
e.prototype.update.call(this,i,n)},n}(Ae),Ne=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(e,t){e.__setProperty("value",w(t))},r.update=function(e){var t=this.attribute.element,n=t.value,r=w(e)
n!==r&&(t.value=r)},n}(Te),De=function(e){function n(){return e.apply(this,arguments)||this}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.set=function(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)},r.update=function(e){var t=this.attribute.element
t.selected=!!e},n}(Te)
function Pe(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}var Me=function(){function e(e,t,n,r){this.slots=e,this.callerScope=t,this.evalScope=n,this.partialMap=r}e.root=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Array(n+1),i=0;i<=n;i++)r[i]=h
return new e(r,null,null,null).init({self:t})},e.sized=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=new Array(t+1),r=0;r<=t;r++)n[r]=h
return new e(n,null,null,null)}
var t=e.prototype
return t.init=function(e){var t=e.self
return this.slots[0]=t,this},t.getSelf=function(){return this.get(0)},t.getSymbol=function(e){return this.get(e)},t.getBlock=function(e){var t=this.get(e)
return t===h?null:t},t.getEvalScope=function(){return this.evalScope},t.getPartialMap=function(){return this.partialMap},t.bind=function(e,t){this.set(e,t)},t.bindSelf=function(e){this.set(0,e)},t.bindSymbol=function(e,t){this.set(e,t)},t.bindBlock=function(e,t){this.set(e,t)},t.bindEvalScope=function(e){this.evalScope=e},t.bindPartialMap=function(e){this.partialMap=e},t.bindCallerScope=function(e){this.callerScope=e},t.getCallerScope=function(){return this.callerScope},t.child=function(){return new e(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)},t.get=function(e){if(e>=this.slots.length)throw new RangeError("BUG: cannot get $"+e+" from scope; length="+this.slots.length)
return this.slots[e]},t.set=function(e,t){if(e>=this.slots.length)throw new RangeError("BUG: cannot get $"+e+" from scope; length="+this.slots.length)
this.slots[e]=t},e}()
e.Scope=Me
var Fe=function(){function e(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}var t=e.prototype
return t.didCreate=function(e,t){this.createdComponents.push(e),this.createdManagers.push(t)},t.didUpdate=function(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)},t.scheduleInstallModifier=function(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)},t.scheduleUpdateModifier=function(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)},t.didDestroy=function(e){this.destructors.push(e)},t.commit=function(){for(var e=this.createdComponents,t=this.createdManagers,n=0;n<e.length;n++){var r=e[n]
t[n].didCreate(r)}for(var i=this.updatedComponents,o=this.updatedManagers,a=0;a<i.length;a++){var s=i[a]
o[a].didUpdate(s)}for(var u=this.destructors,c=0;c<u.length;c++)u[c].destroy()
for(var l=this.scheduledInstallManagers,h=this.scheduledInstallModifiers,f=0;f<l.length;f++){var d=h[f]
l[f].install(d)}for(var p=this.scheduledUpdateModifierManagers,v=this.scheduledUpdateModifiers,m=0;m<p.length;m++){var g=v[m]
p[m].update(g)}},e}(),Le=function(){function e(e){var t=e.appendOperations,n=e.updateOperations
this._transaction=null,this.appendOperations=t,this.updateOperations=n}var n=e.prototype
return n.toConditionalReference=function(e){return new v(e)},n.getAppendOperations=function(){return this.appendOperations},n.getDOM=function(){return this.updateOperations},n.begin=function(){this._transaction=new Fe},n.didCreate=function(e,t){this.transaction.didCreate(e,t)},n.didUpdate=function(e,t){this.transaction.didUpdate(e,t)},n.scheduleInstallModifier=function(e,t){this.transaction.scheduleInstallModifier(e,t)},n.scheduleUpdateModifier=function(e,t){this.transaction.scheduleUpdateModifier(e,t)},n.didDestroy=function(e){this.transaction.didDestroy(e)},n.commit=function(){var e=this.transaction
this._transaction=null,e.commit()},n.attributeFor=function(e,t,n){return Ce(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},(0,t.createClass)(e,[{key:"transaction",get:function(){return this._transaction}}]),e}()
e.Environment=Le
var Be=function(e){function n(t){if(!t){var n=window.document
t={appendOperations:new fe(n),updateOperations:new ce(n)}}return e.call(this,t)||this}return(0,t.inheritsLoose)(n,e),n}(Le)
e.DefaultEnvironment=Be
var je=function(){function e(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1
this.stack=e,this.heap=t,this.program=n,this.externs=r,this.pc=i,this.ra=o,this.currentOpSize=0}var t=e.prototype
return t.pushFrame=function(){this.stack.push(this.ra),this.stack.push(this.stack.fp),this.stack.fp=this.stack.sp-1},t.popFrame=function(){this.stack.sp=this.stack.fp-1,this.ra=this.stack.get(0),this.stack.fp=this.stack.get(1)},t.pushSmallFrame=function(){this.stack.push(this.ra)},t.popSmallFrame=function(){this.ra=this.stack.popSmi()},t.goto=function(e){var t=this.pc+e-this.currentOpSize
this.pc=t},t.call=function(e){this.ra=this.pc,this.pc=this.heap.getaddr(e)},t.returnTo=function(e){var t=this.pc+e-this.currentOpSize
this.ra=t},t.return=function(){this.pc=this.ra},t.nextStatement=function(){var e=this.pc,t=this.program
if(-1===e)return null
var n=this.program.opcode(e).size,r=this.currentOpSize=n
return this.pc+=r,t.opcode(e)},t.evaluateOuter=function(e,t){this.evaluateInner(e,t)},t.evaluateInner=function(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)},t.evaluateMachine=function(e){switch(e.type){case 57:return this.pushFrame()
case 58:return this.popFrame()
case 59:return this.pushSmallFrame()
case 60:return this.popSmallFrame()
case 50:return this.call(e.op1)
case 49:return this.call(this.stack.popSmi())
case 52:return this.goto(e.op1)
case 24:return this.return()
case 25:return this.returnTo(e.op1)}},t.evaluateSyscall=function(e,t){a.evaluate(t,e,e.type)},e}(),ze=function(){function e(e){this.node=e}return e.prototype.firstNode=function(){return this.node},e}(),Ue=function(){function e(e){this.node=e}return e.prototype.lastNode=function(){return this.node},e}(),We=function(){function e(e,t,r){this.constructing=null,this.operations=null,this.cursorStack=new n.Stack,this.modifierStack=new n.Stack,this.blockStack=new n.Stack,this.pushElement(t,r),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}e.forInitialRender=function(e,t){var n=new this(e,t.element,t.nextSibling)
return n.pushSimpleBlock(),n},e.resume=function(e,t,n){var r=new this(e,t.parentElement(),n)
return r.pushSimpleBlock(),r.pushBlockTracker(t),r}
var r=e.prototype
return r.expectConstructing=function(e){return this.constructing},r.block=function(){return this.blockStack.current},r.popElement=function(){this.cursorStack.pop(),this.cursorStack.current},r.pushSimpleBlock=function(){return this.pushBlockTracker(new Ve(this.element))},r.pushUpdatableBlock=function(){return this.pushBlockTracker(new He(this.element))},r.pushBlockList=function(e){return this.pushBlockTracker(new Ge(this.element,e))},r.pushBlockTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.blockStack.current
return null!==n&&(n.newDestroyable(e),t||n.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e},r.popBlock=function(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()},r.__openBlock=function(){},r.__closeBlock=function(){},r.openElement=function(e){var t=this.__openElement(e)
return this.constructing=t,t},r.__openElement=function(e){return this.dom.createElement(e,this.element)},r.flushElement=function(e){var t=this.element,n=this.constructing
this.__flushElement(t,n),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(n,null),this.didOpenElement(n)},r.__flushElement=function(e,t){this.dom.insertBefore(e,t,this.nextSibling)},r.closeElement=function(){return this.willCloseElement(),this.popElement(),this.popModifiers()},r.pushRemoteElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null
this.__pushRemoteElement(e,t,n)},r.__pushRemoteElement=function(e,t,n){this.pushElement(e,n)
var r=new qe(e)
this.pushBlockTracker(r,!0)},r.popRemoteElement=function(){this.popBlock(),this.popElement()},r.pushElement=function(e,t){this.cursorStack.push(new X(e,t))},r.pushModifiers=function(e){this.modifierStack.push(e)},r.popModifiers=function(){return this.modifierStack.pop()},r.didAddDestroyable=function(e){this.block().newDestroyable(e)},r.didAppendBounds=function(e){return this.block().didAppendBounds(e),e},r.didAppendNode=function(e){return this.block().didAppendNode(e),e},r.didOpenElement=function(e){return this.block().openElement(e),e},r.willCloseElement=function(){this.block().closeElement()},r.appendText=function(e){return this.didAppendNode(this.__appendText(e))},r.__appendText=function(e){var t=this.dom,n=this.element,r=this.nextSibling,i=t.createTextNode(e)
return t.insertBefore(n,i,r),i},r.__appendNode=function(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e},r.__appendFragment=function(e){var t=e.firstChild
if(t){var n=new Y(this.element,t,e.lastChild)
return this.dom.insertBefore(this.element,e,this.nextSibling),n}return new Q(this.element,this.__appendComment(""))},r.__appendHTML=function(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)},r.appendDynamicHTML=function(e){var t=this.trustedContent(e)
this.didAppendBounds(t)},r.appendDynamicText=function(e){var t=this.untrustedContent(e)
return this.didAppendNode(t),t},r.appendDynamicFragment=function(e){var t=this.__appendFragment(e)
this.didAppendBounds(t)},r.appendDynamicNode=function(e){var t=this.__appendNode(e),n=new Q(this.element,t)
this.didAppendBounds(n)},r.trustedContent=function(e){return this.__appendHTML(e)},r.untrustedContent=function(e){return this.__appendText(e)},r.appendComment=function(e){return this.didAppendNode(this.__appendComment(e))},r.__appendComment=function(e){var t=this.dom,n=this.element,r=this.nextSibling,i=t.createComment(e)
return t.insertBefore(n,i,r),i},r.__setAttribute=function(e,t,n){this.dom.setAttribute(this.constructing,e,t,n)},r.__setProperty=function(e,t){this.constructing[e]=t},r.setStaticAttribute=function(e,t,n){this.__setAttribute(e,t,n)},r.setDynamicAttribute=function(e,t,n,r){var i=this.constructing,o=this.env.attributeFor(i,e,n,r)
return o.set(this,t,this.env),o},(0,t.createClass)(e,[{key:"element",get:function(){return this.cursorStack.current.element}},{key:"nextSibling",get:function(){return this.cursorStack.current.nextSibling}}]),e}()
e.NewElementBuilder=We
var Ve=function(){function e(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}var t=e.prototype
return t.destroy=function(){var e=this.destroyables
if(e&&e.length)for(var t=0;t<e.length;t++)e[t].destroy()},t.parentElement=function(){return this.parent},t.firstNode=function(){return this.first.firstNode()},t.lastNode=function(){return this.last.lastNode()},t.openElement=function(e){this.didAppendNode(e),this.nesting++},t.closeElement=function(){this.nesting--},t.didAppendNode=function(e){0===this.nesting&&(this.first||(this.first=new ze(e)),this.last=new Ue(e))},t.didAppendBounds=function(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)},t.newDestroyable=function(e){this.destroyables=this.destroyables||[],this.destroyables.push(e)},t.finalize=function(e){null===this.first&&e.appendComment("")},e}(),qe=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this),Z(this)},n}(Ve),He=function(e){function n(){return e.apply(this,arguments)||this}return(0,t.inheritsLoose)(n,e),n.prototype.reset=function(e){var t=this.destroyables
if(t&&t.length)for(var n=0;n<t.length;n++)e.didDestroy(t[n])
var r=Z(this)
return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,r},n}(Ve),Ge=function(){function e(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}var t=e.prototype
return t.destroy=function(){this.boundList.forEachNode(function(e){return e.destroy()})},t.parentElement=function(){return this.parent},t.firstNode=function(){return this.boundList.head().firstNode()},t.lastNode=function(){return this.boundList.tail().lastNode()},t.openElement=function(e){},t.closeElement=function(){},t.didAppendNode=function(e){},t.didAppendBounds=function(e){},t.newDestroyable=function(e){},t.finalize=function(e){},e}()
var Ke=268435455,$e=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Stack,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]
this.inner=e,this.js=t}var r=e.prototype
return r.slice=function(t,n){return new e("number"==typeof t&&"number"==typeof n?this.inner.slice(t,n):"number"==typeof t&&void 0===n?this.inner.sliceFrom(t):this.inner.clone(),this.js.slice(t,n))},r.sliceInner=function(e,t){for(var n=[],r=e;r<t;r++)n.push(this.get(r))
return n},r.copy=function(e,t){this.inner.copy(e,t)},r.write=function(e,t){if(function(e){var t=typeof e
if(null==e)return!0
switch(t){case"boolean":case"undefined":return!0
case"number":if(e%1!=0)return!1
var n=Math.abs(e)
return!(n>Ke)
default:return!1}}(t))this.inner.writeRaw(e,function(e){switch(typeof e){case"number":return function(e){if(e<0){var t=Math.abs(e)
if(t>Ke)throw new Error("not smi")
return Math.abs(e)<<3|4}if(e>Ke)throw new Error("not smi")
return e<<3|0}(e)
case"boolean":return e?11:3
case"object":return 19
case"undefined":return 27
default:throw(0,n.unreachable)()}}(t))
else{var r=this.js.length
this.js.push(t),this.inner.writeRaw(e,~r)}},r.writeRaw=function(e,t){this.inner.writeRaw(e,t)},r.get=function(e){var t=this.inner.getRaw(e)
return t<0?this.js[~t]:function(e){switch(e){case 3:return!1
case 11:return!0
case 19:return null
case 27:return
default:return function(e){switch(7&e){case 0:return e>>3
case 4:return-(e>>3)
default:throw(0,n.unreachable)()}}(e)}}(t)},r.reset=function(){this.inner.reset(),this.js.length=0},(0,t.createClass)(e,[{key:"length",get:function(){return this.inner.len()}}]),e}(),Xe=function(){function e(e,t,n){this.stack=e,this.fp=t,this.sp=n}e.empty=function(){return new this(new $e,0,-1)},e.restore=function(e){for(var t=new $e,n=0;n<e.length;n++)t.write(n,e[n])
return new this(t,0,e.length-1)}
var t=e.prototype
return t.push=function(e){this.stack.write(++this.sp,e)},t.pushEncodedImmediate=function(e){this.stack.writeRaw(++this.sp,e)},t.pushNull=function(){this.stack.write(++this.sp,null)},t.dup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sp
this.stack.copy(e,++this.sp)},t.copy=function(e,t){this.stack.copy(e,t)},t.pop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack.get(this.sp)
return this.sp-=e,t},t.popSmi=function(){return this.stack.get(this.sp--)},t.peek=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0
return this.stack.get(this.sp-e)},t.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fp
return this.stack.get(t+e)},t.set=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.fp
this.stack.write(n+t,e)},t.slice=function(e,t){return this.stack.slice(e,t)},t.sliceArray=function(e,t){return this.stack.sliceInner(e,t)},t.capture=function(e){var t=this.sp+1,n=t-e
return this.stack.sliceInner(n,t)},t.reset=function(){this.stack.reset()},t.toArray=function(){return this.stack.sliceInner(this.fp,this.sp+1)},e}()
var Ye=function(){function e(e,t,r){var i=r.alwaysRevalidate,o=void 0!==i&&i
this.frameStack=new n.Stack,this.env=e,this.constants=t.constants,this.dom=e.getDOM(),this.alwaysRevalidate=o}var r=e.prototype
return r.execute=function(e,t){var n=this.frameStack
for(this.try(e,t);!n.isEmpty();){var r=this.frame.nextStatement()
null!==r?r.evaluate(this):this.frameStack.pop()}},r.goto=function(e){this.frame.goto(e)},r.try=function(e,t){this.frameStack.push(new tt(e,t))},r.throw=function(){this.frame.handleException(),this.frameStack.pop()},(0,t.createClass)(e,[{key:"frame",get:function(){return this.frameStack.current}}]),e}()
e.UpdatingVM=Ye
var Qe=function(e){function n(t,n,r,i,o){var a
return(a=e.call(this)||this).start=t,a.state=n,a.runtime=r,a.type="block",a.next=null,a.prev=null,a.children=o,a.bounds=i,a}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.parentElement=function(){return this.bounds.parentElement()},r.firstNode=function(){return this.bounds.firstNode()},r.lastNode=function(){return this.bounds.lastNode()},r.evaluate=function(e){e.try(this.children,null)},r.destroy=function(){this.bounds.destroy()},r.didDestroy=function(){this.runtime.env.didDestroy(this.bounds)},n}(s),Je=function(e){function i(t,n,i,o,a){var s
return(s=e.call(this,t,n,i,o,a)||this).type="try",s.tag=s._tag=r.UpdatableTag.create(r.CONSTANT_TAG),s}(0,t.inheritsLoose)(i,e)
var o=i.prototype
return o.didInitializeChildren=function(){this._tag.inner.update((0,r.combineSlice)(this.children))},o.evaluate=function(e){e.try(this.children,this)},o.handleException=function(){var e=this,t=this.state,r=this.bounds,i=this.children,o=this.start,a=this.prev,s=this.next,u=this.runtime
i.clear()
var c=We.resume(u.env,r,r.reset(u.env)),l=pt.resume(t,u,c),h=new n.LinkedList
l.execute(o,function(n){n.stack=Xe.restore(t.stack),n.updatingOpcodeStack.push(h),n.updateWith(e),n.updatingOpcodeStack.push(i)}),this.prev=a,this.next=s},i}(Qe),Ze=function(){function e(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}var t=e.prototype
return t.insert=function(e,t,r,i){var o=this.map,a=this.opcode,s=this.updating,u=null,c=null
u="string"==typeof i?(c=o[i]).bounds.firstNode():this.marker
var l=a.vmForInsertion(u),h=null,f=a.start
l.execute(f,function(i){o[e]=h=i.iterate(r,t),i.updatingOpcodeStack.push(new n.LinkedList),i.updateWith(h),i.updatingOpcodeStack.push(h.children)}),s.insertBefore(h,c),this.didInsert=!0},t.retain=function(e,t,n){},t.move=function(e,t,n,r){var i=this.map,o=this.updating,a=i[e],s=i[r]||null
J(a,"string"==typeof r?s.firstNode():this.marker),o.remove(a),o.insertBefore(a,s)},t.delete=function(e){var t=this.map,n=t[e]
n.didDestroy(),Z(n),this.updating.remove(n),delete t[e],this.didDelete=!0},t.done=function(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)},e}(),et=function(e){function i(t,i,o,a,s,u){var c;(c=e.call(this,t,i,o,a,s)||this).type="list-block",c.map=(0,n.dict)(),c.lastIterated=r.INITIAL,c.artifacts=u
var l=c._tag=r.UpdatableTag.create(r.CONSTANT_TAG)
return c.tag=(0,r.combine)([u.tag,l]),c}(0,t.inheritsLoose)(i,e)
var o=i.prototype
return o.didInitializeChildren=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]
this.lastIterated=this.artifacts.tag.value(),e&&this._tag.inner.update((0,r.combineSlice)(this.children))},o.evaluate=function(t){var n=this.artifacts,i=this.lastIterated
if(!n.tag.validate(i)){var o=this.bounds,a=t.dom,s=a.createComment("")
a.insertAfter(o.parentElement(),s,o.lastNode())
var u=new Ze(this,s)
new r.IteratorSynchronizer({target:u,artifacts:n}).sync(),this.parentElement().removeChild(s)}e.prototype.evaluate.call(this,t)},o.vmForInsertion=function(e){var t=this.bounds,n=this.state,r=this.runtime,i=We.forInitialRender(r.env,{element:t.parentElement(),nextSibling:e})
return pt.resume(n,r,i)},i}(Qe),tt=function(){function e(e,t){this.ops=e,this.exceptionHandler=t,this.current=e.head()}var t=e.prototype
return t.goto=function(e){this.current=e},t.nextStatement=function(){var e=this.current,t=this.ops
return e&&(this.current=t.nextNode(e)),e},t.handleException=function(){this.exceptionHandler&&this.exceptionHandler.handleException()},e}(),nt=function(){function e(e,t,n,r){this.env=e,this.program=t,this.updating=n,this.bounds=r}var t=e.prototype
return t.rerender=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{alwaysRevalidate:!1}).alwaysRevalidate,t=void 0!==e&&e,n=this.env,r=this.program,i=this.updating
new Ye(n,r,{alwaysRevalidate:t}).execute(i,this)},t.parentElement=function(){return this.bounds.parentElement()},t.firstNode=function(){return this.bounds.firstNode()},t.lastNode=function(){return this.bounds.lastNode()},t.handleException=function(){throw"this should never happen"},t.destroy=function(){this.bounds.destroy(),Z(this.bounds)},e}()
e.RenderResult=nt
var rt=function(){function e(){this.stack=null,this.positional=new ot,this.named=new st,this.blocks=new ct}var n=e.prototype
return n.empty=function(e){var t=e.sp+1
return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this},n.setup=function(e,t,n,r,i){this.stack=e
var o=this.named,a=t.length,s=e.sp-a+1
o.setup(e,s,a,t,i)
var u=s-r
this.positional.setup(e,u,r)
var c=this.blocks,l=n.length,h=u-3*l
c.setup(e,h,l,n)},n.at=function(e){return this.positional.at(e)},n.realloc=function(e){var t=this.stack
if(e>0&&null!==t){for(var n=this.positional,r=this.named,i=n.base+e,o=n.length+r.length-1;o>=0;o--)t.copy(o+n.base,o+i)
n.base+=e,r.base+=e,t.sp+=e}},n.capture=function(){var e=0===this.positional.length?ft:this.positional.capture(),t=0===this.named.length?ht:this.named.capture()
return new it(this.tag,e,t,this.length)},n.clear=function(){var e=this.stack,t=this.length
t>0&&null!==e&&e.pop(t)},(0,t.createClass)(e,[{key:"tag",get:function(){return(0,r.combineTagged)([this.positional,this.named])}},{key:"base",get:function(){return this.blocks.base}},{key:"length",get:function(){return this.positional.length+this.named.length+3*this.blocks.length}}]),e}(),it=function(){function e(e,t,n,r){this.tag=e,this.positional=t,this.named=n,this.length=r}return e.prototype.value=function(){return{named:this.named.value(),positional:this.positional.value()}},e}(),ot=function(){function e(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}var i=e.prototype
return i.empty=function(e,t){this.stack=e,this.base=t,this.length=0,this._tag=r.CONSTANT_TAG,this._references=n.EMPTY_ARRAY},i.setup=function(e,t,i){this.stack=e,this.base=t,this.length=i,0===i?(this._tag=r.CONSTANT_TAG,this._references=n.EMPTY_ARRAY):(this._tag=null,this._references=null)},i.at=function(e){var t=this.base,n=this.length,r=this.stack
return e<0||e>=n?h:r.get(e,t)},i.capture=function(){return new at(this.tag,this.references)},i.prepend=function(e){var t=e.length
if(t>0){var n=this.base,r=this.length,i=this.stack
this.base=n-=t,this.length=r+t
for(var o=0;o<t;o++)i.set(e.at(o),o,n)
this._tag=null,this._references=null}},(0,t.createClass)(e,[{key:"tag",get:function(){var e=this._tag
return e||(e=this._tag=(0,r.combineTagged)(this.references)),e}},{key:"references",get:function(){var e=this._references
if(!e){var t=this.stack,n=this.base,r=this.length
e=this._references=t.sliceArray(n,n+r)}return e}}]),e}(),at=function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length
this.tag=e,this.references=t,this.length=n}e.empty=function(){return new e(r.CONSTANT_TAG,n.EMPTY_ARRAY,0)}
var t=e.prototype
return t.at=function(e){return this.references[e]},t.value=function(){return this.references.map(this.valueOf)},t.get=function(e){var t=this.references,n=this.length
if("length"===e)return u.create(n)
var r=parseInt(e,10)
return r<0||r>=n?h:t[r]},t.valueOf=function(e){return e.value()},e}(),st=function(){function e(){this.base=0,this.length=0,this._references=null,this._names=n.EMPTY_ARRAY,this._atNames=n.EMPTY_ARRAY}var i=e.prototype
return i.empty=function(e,t){this.stack=e,this.base=t,this.length=0,this._references=n.EMPTY_ARRAY,this._names=n.EMPTY_ARRAY,this._atNames=n.EMPTY_ARRAY},i.setup=function(e,t,r,i,o){this.stack=e,this.base=t,this.length=r,0===r?(this._references=n.EMPTY_ARRAY,this._names=n.EMPTY_ARRAY,this._atNames=n.EMPTY_ARRAY):(this._references=null,o?(this._names=i,this._atNames=null):(this._names=null,this._atNames=i))},i.has=function(e){return-1!==this.names.indexOf(e)},i.get=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.base,r=this.stack,i=(t?this.names:this.atNames).indexOf(e)
return-1===i?h:r.get(i,n)},i.capture=function(){return new ut(this.tag,this.names,this.references)},i.merge=function(e){var t=e.length
if(t>0){var n=this.names,r=this.length,i=this.stack,o=e.names
Object.isFrozen(n)&&0===n.length&&(n=[])
for(var a=0;a<t;a++){var s=o[a];-1===n.indexOf(s)&&(r=n.push(s),i.push(e.references[a]))}this.length=r,this._references=null,this._names=n,this._atNames=null}},i.toSyntheticName=function(e){return e.slice(1)},i.toAtName=function(e){return"@"+e},(0,t.createClass)(e,[{key:"tag",get:function(){return(0,r.combineTagged)(this.references)}},{key:"names",get:function(){var e=this._names
return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}},{key:"atNames",get:function(){var e=this._atNames
return e||(e=this._atNames=this._names.map(this.toAtName)),e}},{key:"references",get:function(){var e=this._references
if(!e){var t=this.base,n=this.length,r=this.stack
e=this._references=r.sliceArray(t,t+n)}return e}}]),e}(),ut=function(){function e(e,t,n){this.tag=e,this.names=t,this.references=n,this.length=t.length,this._map=null}var r=e.prototype
return r.has=function(e){return-1!==this.names.indexOf(e)},r.get=function(e){var t=this.names,n=this.references,r=t.indexOf(e)
return-1===r?h:n[r]},r.value=function(){for(var e=this.names,t=this.references,r=(0,n.dict)(),i=0;i<e.length;i++){r[e[i]]=t[i].value()}return r},(0,t.createClass)(e,[{key:"map",get:function(){var e=this._map
if(!e){var t=this.names,r=this.references
e=this._map=(0,n.dict)()
for(var i=0;i<t.length;i++){e[t[i]]=r[i]}}return e}}]),e}(),ct=function(){function e(){this.internalValues=null,this.internalTag=null,this.names=n.EMPTY_ARRAY,this.length=0,this.base=0}var i=e.prototype
return i.empty=function(e,t){this.stack=e,this.names=n.EMPTY_ARRAY,this.base=t,this.length=0,this.internalTag=r.CONSTANT_TAG,this.internalValues=n.EMPTY_ARRAY},i.setup=function(e,t,i,o){this.stack=e,this.names=o,this.base=t,this.length=i,0===i?(this.internalTag=r.CONSTANT_TAG,this.internalValues=n.EMPTY_ARRAY):(this.internalTag=null,this.internalValues=null)},i.has=function(e){return-1!==this.names.indexOf(e)},i.get=function(e){var t=this.base,n=this.stack,r=this.names,i=r.indexOf(e)
if(-1===r.indexOf(e))return null
var o=n.get(3*i,t),a=n.get(3*i+1,t),s=n.get(3*i+2,t)
return null===s?null:[s,a,o]},i.capture=function(){return new lt(this.names,this.values)},(0,t.createClass)(e,[{key:"values",get:function(){var e=this.internalValues
if(!e){var t=this.base,n=this.length,r=this.stack
e=this.internalValues=r.sliceArray(t,t+3*n)}return e}}]),e}(),lt=function(){function e(e,t){this.names=e,this.values=t,this.length=e.length}var t=e.prototype
return t.has=function(e){return-1!==this.names.indexOf(e)},t.get=function(e){var t=this.names.indexOf(e)
return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]},e}(),ht=new ut(r.CONSTANT_TAG,n.EMPTY_ARRAY,n.EMPTY_ARRAY),ft=new at(r.CONSTANT_TAG,n.EMPTY_ARRAY),dt=new it(r.CONSTANT_TAG,ft,ht,0)
e.EMPTY_ARGS=dt
var pt=function(){function e(e,t,r,i){var o=this
this.runtime=e,this.elementStack=i,this.dynamicScopeStack=new n.Stack,this.scopeStack=new n.Stack,this.updatingOpcodeStack=new n.Stack,this.cacheGroups=new n.Stack,this.listBlockStack=new n.Stack,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null,this.heap=this.program.heap,this.constants=this.program.constants,this.elementStack=i,this.scopeStack.push(t),this.dynamicScopeStack.push(r),this.args=new rt,this.inner=new je(Xe.empty(),this.heap,e.program,{debugBefore:function(e){return a.debugBefore(o,e,e.type)},debugAfter:function(e,t){a.debugAfter(o,e,e.type,t)}})}var o=e.prototype
return o.fetch=function(e){this.stack.push(this[i.Register[e]])},o.load=function(e){this[i.Register[e]]=this.stack.pop()},o.fetchValue=function(e){return this[i.Register[e]]},o.loadValue=function(e,t){this[i.Register[e]]=t},o.pushFrame=function(){this.inner.pushFrame()},o.popFrame=function(){this.inner.popFrame()},o.goto=function(e){this.inner.goto(e)},o.call=function(e){this.inner.call(e)},o.returnTo=function(e){this.inner.returnTo(e)},o.return=function(){this.inner.return()},e.initial=function(t,r,i,o,a,s){var u=t.heap.scopesizeof(s),c=new e({program:t,env:r},Me.root(i,u),o,a)
return c.pc=c.heap.getaddr(s),c.updatingOpcodeStack.push(new n.LinkedList),c},e.empty=function(t,r,i,o){var a={get:function(){return h},set:function(){return h},child:function(){return a}},s=new e({program:t,env:r},Me.root(h,0),a,i)
return s.updatingOpcodeStack.push(new n.LinkedList),s.pc=s.heap.getaddr(o),s},e.resume=function(t,n,r){return new e(n,t.scope,t.dynamicScope,r)},o.capture=function(e){return{dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}},o.beginCacheGroup=function(){this.cacheGroups.push(this.updating().tail())},o.commitCacheGroup=function(){var e=new N("END"),t=this.updating(),i=this.cacheGroups.pop(),o=i?t.nextNode(i):t.head(),a=t.tail(),s=(0,r.combineSlice)(new n.ListSlice(o,a)),u=new O(s,e)
t.insertBefore(u,o),t.append(new I(u)),t.append(e)},o.enter=function(e){var t=new n.LinkedList,r=this.capture(e),i=this.elements().pushUpdatableBlock(),o=new Je(this.heap.gethandle(this.pc),r,this.runtime,i,t)
this.didEnter(o)},o.iterate=function(e,t){var r=this.stack
r.push(t),r.push(e)
var i=this.capture(2),o=this.elements().pushUpdatableBlock()
return new Je(this.heap.gethandle(this.pc),i,this.runtime,o,new n.LinkedList)},o.enterItem=function(e,t){this.listBlock().map[e]=t,this.didEnter(t)},o.enterList=function(e){var t=new n.LinkedList,r=this.capture(0),i=this.elements().pushBlockList(t),o=this.stack.peek().artifacts,a=this.pc+e-this.currentOpSize,s=this.heap.gethandle(a),u=new et(s,r,this.runtime,i,t,o)
this.listBlockStack.push(u),this.didEnter(u)},o.didEnter=function(e){this.updateWith(e),this.updatingOpcodeStack.push(e.children)},o.exit=function(){this.elements().popBlock(),this.updatingOpcodeStack.pop(),this.updating().tail().didInitializeChildren()},o.exitList=function(){this.exit(),this.listBlockStack.pop()},o.updateWith=function(e){this.updating().append(e)},o.listBlock=function(){return this.listBlockStack.current},o.updating=function(){return this.updatingOpcodeStack.current},o.elements=function(){return this.elementStack},o.scope=function(){return this.scopeStack.current},o.dynamicScope=function(){return this.dynamicScopeStack.current},o.pushChildScope=function(){this.scopeStack.push(this.scope().child())},o.pushDynamicScope=function(){var e=this.dynamicScope().child()
return this.dynamicScopeStack.push(e),e},o.pushRootScope=function(e,t){var n=Me.sized(e)
return t&&n.bindCallerScope(this.scope()),this.scopeStack.push(n),n},o.pushScope=function(e){this.scopeStack.push(e)},o.popScope=function(){this.scopeStack.pop()},o.popDynamicScope=function(){this.dynamicScopeStack.pop()},o.newDestroyable=function(e){this.elements().didAddDestroyable(e)},o.getSelf=function(){return this.scope().getSelf()},o.referenceForSymbol=function(e){return this.scope().getSymbol(e)},o.execute=function(e,t){var n
for(this.pc=this.heap.getaddr(e),t&&t(this);!(n=this.next()).done;);return n.value},o.next=function(){var e,t=this.env,n=this.program,r=this.updatingOpcodeStack,i=this.elementStack,o=this.inner.nextStatement()
return null!==o?(this.inner.evaluateOuter(o,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new nt(t,n,r.pop(),i.popBlock())}),e},o.bindDynamicScope=function(e){for(var t=this.dynamicScope(),n=e.length-1;n>=0;n--){var r=this.constants.getString(e[n])
t.set(r,this.stack.pop())}},(0,t.createClass)(e,[{key:"stack",get:function(){return this.inner.stack},set:function(e){this.inner.stack=e}},{key:"currentOpSize",set:function(e){this.inner.currentOpSize=e},get:function(){return this.inner.currentOpSize}},{key:"pc",get:function(){return this.inner.pc},set:function(e){this.inner.pc=e}},{key:"ra",get:function(){return this.inner.ra},set:function(e){this.inner.ra=e}},{key:"fp",get:function(){return this.stack.fp},set:function(e){this.stack.fp=e}},{key:"sp",get:function(){return this.stack.sp},set:function(e){this.stack.sp=e}},{key:"program",get:function(){return this.runtime.program}},{key:"env",get:function(){return this.runtime.env}}]),e}()
e.LowLevelVM=pt
var vt=function(){function e(e){this.vm=e}return e.prototype.next=function(){return this.vm.next()},e}()
var mt=function(){function e(e,t){this.scope=e,this.nameRef=t
var n=this.varTag=r.UpdatableTag.create(r.CONSTANT_TAG)
this.tag=(0,r.combine)([t.tag,n])}var t=e.prototype
return t.value=function(){return this.getVar().value()},t.get=function(e){return this.getVar().get(e)},t.getVar=function(){var e=String(this.nameRef.value()),t=this.scope.get(e)
return this.varTag.inner.update(t.tag),t},e}()
e.DEFAULT_CAPABILITIES={dynamicLayout:!0,dynamicTag:!0,prepareArgs:!0,createArgs:!0,attributeHook:!1,elementHook:!1,dynamicScope:!0,createCaller:!1,updateHook:!0,createInstance:!0}
e.MINIMAL_CAPABILITIES={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1}
var gt="%+b:0%"
function yt(e){return e.nodeValue===gt}e.SERIALIZATION_FIRST_NODE_STRING=gt
var bt=function(e){function n(t,n,r){var i
return(i=e.call(this,t,n)||this).startingBlockDepth=r,i.candidate=null,i.injectedOmittedNode=!1,i.openBlockDepth=r-1,i}return(0,t.inheritsLoose)(n,e),n}(X),xt=function(e){function n(t,n,r){var i
if((i=e.call(this,t,n,r)||this).unmatchedAttributes=null,i.blockDepth=0,r)throw new Error("Rehydration with nextSibling not supported")
for(var o=i.currentCursor.element.firstChild;!(null===o||wt(o)&&yt(o));)o=o.nextSibling
return i.candidate=o,i}(0,t.inheritsLoose)(n,e)
var r=n.prototype
return r.pushElement=function(e,t){var n=this.blockDepth,r=new bt(e,t,void 0===n?0:n),i=this.currentCursor
i&&i.candidate&&(r.candidate=e.firstChild,i.candidate=e.nextSibling),this.cursorStack.push(r)},r.clearMismatch=function(e){var t=e,n=this.currentCursor
if(null!==n){var r=n.openBlockDepth
if(r>=n.startingBlockDepth)for(;t&&(!wt(t)||_t(t)!==r);)t=this.remove(t)
else for(;null!==t;)t=this.remove(t)
n.nextSibling=t,n.candidate=null}},r.__openBlock=function(){var e=this.currentCursor
if(null!==e){var t=this.blockDepth
this.blockDepth++
var n,r=e.candidate
if(null!==r)wt(r)&&((n=r.nodeValue.match(/^%\+b:(\d+)%$/))&&n[1]?Number(n[1]):null)===t?(e.candidate=this.remove(r),e.openBlockDepth=t):this.clearMismatch(r)}},r.__closeBlock=function(){var e=this.currentCursor
if(null!==e){var t=e.openBlockDepth
this.blockDepth--
var n=e.candidate
null!==n&&(wt(n)&&_t(n)===t?(e.candidate=this.remove(n),e.openBlockDepth--):this.clearMismatch(n)),e.openBlockDepth===this.blockDepth&&(e.candidate=this.remove(e.nextSibling),e.openBlockDepth--)}},r.__appendNode=function(t){var n=this.candidate
return n||e.prototype.__appendNode.call(this,t)},r.__appendHTML=function(t){var n=this.markerBounds()
if(n){var r=n.firstNode(),i=n.lastNode(),o=new Y(this.element,r.nextSibling,i.previousSibling),a=this.remove(r)
return this.remove(i),null!==a&&Ct(a)&&(this.candidate=this.remove(a),null!==this.candidate&&this.clearMismatch(this.candidate)),o}return e.prototype.__appendHTML.call(this,t)},r.remove=function(e){var t=e.parentNode,n=e.nextSibling
return t.removeChild(e),n},r.markerBounds=function(){var e=this.candidate
if(e&&Et(e)){for(var t=e,n=t.nextSibling;n&&!Et(n);)n=n.nextSibling
return new Y(this.element,t,n)}return null},r.__appendText=function(t){var n=this.candidate
if(n){if(3===n.nodeType)return n.nodeValue!==t&&(n.nodeValue=t),this.candidate=n.nextSibling,n
if(n&&(function(e){return 8===e.nodeType&&"%|%"===e.nodeValue}(n)||Ct(n)))return this.candidate=n.nextSibling,this.remove(n),this.__appendText(t)
if(Ct(n)){var r=this.remove(n)
this.candidate=r
var i=this.dom.createTextNode(t)
return this.dom.insertBefore(this.element,i,r),i}return this.clearMismatch(n),e.prototype.__appendText.call(this,t)}return e.prototype.__appendText.call(this,t)},r.__appendComment=function(t){var n=this.candidate
return n&&wt(n)?(n.nodeValue!==t&&(n.nodeValue=t),this.candidate=n.nextSibling,n):(n&&this.clearMismatch(n),e.prototype.__appendComment.call(this,t))},r.__openElement=function(t){var n=this.candidate
if(n&&Rt(n)&&function(e,t){if(e.namespaceURI===ne)return e.tagName===t
return e.tagName===t.toUpperCase()}(n,t))return this.unmatchedAttributes=[].slice.call(n.attributes),n
if(n){if(Rt(n)&&"TBODY"===n.tagName)return this.pushElement(n,null),this.currentCursor.injectedOmittedNode=!0,this.__openElement(t)
this.clearMismatch(n)}return e.prototype.__openElement.call(this,t)},r.__setAttribute=function(t,n,r){var i=this.unmatchedAttributes
if(i){var o=kt(i,t)
if(o)return o.value!==n&&(o.value=n),void i.splice(i.indexOf(o),1)}return e.prototype.__setAttribute.call(this,t,n,r)},r.__setProperty=function(t,n){var r=this.unmatchedAttributes
if(r){var i=kt(r,t)
if(i)return i.value!==n&&(i.value=n),void r.splice(r.indexOf(i),1)}return e.prototype.__setProperty.call(this,t,n)},r.__flushElement=function(t,n){var r=this.unmatchedAttributes
if(r){for(var i=0;i<r.length;i++)this.constructing.removeAttribute(r[i].name)
this.unmatchedAttributes=null}else e.prototype.__flushElement.call(this,t,n)},r.willCloseElement=function(){var t=this.candidate,n=this.currentCursor
null!==t&&this.clearMismatch(t),n&&n.injectedOmittedNode&&this.popElement(),e.prototype.willCloseElement.call(this)},r.getMarker=function(e,t){var n=e.querySelector('script[glmr="'+t+'"]')
if(n)return n
throw new Error("Cannot find serialized cursor for `in-element`")},r.__pushRemoteElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getMarker(e,t)
if(r.parentNode===e){var i=this.currentCursor,o=i.candidate
this.pushElement(e,n),i.candidate=o,this.candidate=this.remove(r)
var a=new qe(e)
this.pushBlockTracker(a,!0)}},r.didAppendBounds=function(t){if(e.prototype.didAppendBounds.call(this,t),this.candidate){var n=t.lastNode()
this.candidate=n&&n.nextSibling}return t},(0,t.createClass)(n,[{key:"currentCursor",get:function(){return this.cursorStack.current}},{key:"candidate",get:function(){return this.currentCursor?this.currentCursor.candidate:null},set:function(e){this.currentCursor.candidate=e}}]),n}(We)
function wt(e){return 8===e.nodeType}function _t(e){var t=e.nodeValue.match(/^%\-b:(\d+)%$/)
return t&&t[1]?Number(t[1]):null}function Rt(e){return 1===e.nodeType}function Et(e){return 8===e.nodeType&&"%glmr%"===e.nodeValue}function Ct(e){return 8===e.nodeType&&"% %"===e.nodeValue}function kt(e,t){for(var n=0;n<e.length;n++){var r=e[n]
if(r.name===t)return r}}e.RehydrateBuilder=xt}),e("@glimmer/util",["exports","ember-babel"],function(e,t){"use strict"
e.assert=function(e,t){if(!e)throw new Error(t||"assertion failure")},e.assign=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]
if(null!==r&&"object"==typeof r)for(var i=n(r),o=0;o<i.length;o++){var a=i[o]
e[a]=r[a]}}return e},e.fillNulls=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=null
return t},e.ensureGuid=o,e.initializeGuid=i,e.dict=a,e.unwrap=function(e){if(null==e)throw new Error("Expected value to be present")
return e},e.expect=function(e,t){if(null==e)throw new Error(t)
return e},e.unreachable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unreachable"
return new Error(e)},e.EMPTY_ARRAY=e.ListSlice=e.ListNode=e.LinkedList=e.EMPTY_SLICE=e.DictSet=e.Stack=void 0
var n=Object.keys
var r=0
function i(e){return e._guid=++r}function o(e){return e._guid||i(e)}function a(){return Object.create(null)}var s=function(){function e(){this.dict=a()}var t=e.prototype
return t.add=function(e){return"string"==typeof e?this.dict[e]=e:this.dict[o(e)]=e,this},t.delete=function(e){"string"==typeof e?delete this.dict[e]:e._guid&&delete this.dict[e._guid]},e}()
e.DictSet=s
var u=function(){function e(){this.stack=[],this.current=null}var n=e.prototype
return n.push=function(e){this.current=e,this.stack.push(e)},n.pop=function(){var e=this.stack.pop(),t=this.stack.length
return this.current=0===t?null:this.stack[t-1],void 0===e?null:e},n.isEmpty=function(){return 0===this.stack.length},(0,t.createClass)(e,[{key:"size",get:function(){return this.stack.length}}]),e}()
e.Stack=u
e.ListNode=function(e){this.next=null,this.prev=null,this.value=e}
var c=function(){function e(){this.clear()}var t=e.prototype
return t.head=function(){return this._head},t.tail=function(){return this._tail},t.clear=function(){this._head=this._tail=null},t.toArray=function(){var e=[]
return this.forEachNode(function(t){return e.push(t)}),e},t.nextNode=function(e){return e.next},t.forEachNode=function(e){for(var t=this._head;null!==t;)e(t),t=t.next},t.insertBefore=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)},t.append=function(e){var t=this._tail
return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e},t.remove=function(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e},e}()
e.LinkedList=c
var l=function(){function e(e,t){this._head=e,this._tail=t}var t=e.prototype
return t.forEachNode=function(e){for(var t=this._head;null!==t;)e(t),t=this.nextNode(t)},t.head=function(){return this._head},t.tail=function(){return this._tail},t.toArray=function(){var e=[]
return this.forEachNode(function(t){return e.push(t)}),e},t.nextNode=function(e){return e===this._tail?null:e.next},e}()
e.ListSlice=l
var h=new l(null,null)
e.EMPTY_SLICE=h
var f=Object.freeze([])
e.EMPTY_ARRAY=f}),e("@glimmer/vm",["exports"],function(e){"use strict"
var t
e.Register=void 0,e.Register=t,function(e){e[e.pc=0]="pc",e[e.ra=1]="ra",e[e.fp=2]="fp",e[e.sp=3]="sp",e[e.s0=4]="s0",e[e.s1=5]="s1",e[e.t0=6]="t0",e[e.t1=7]="t1",e[e.v0=8]="v0"}(t||(e.Register=t={}))}),e("@glimmer/wire-format",["exports"],function(e){"use strict"
var t
function n(e){return function(t){return Array.isArray(t)&&t[0]===e}}e.is=n,e.isAttribute=function(e){return e[0]===t.StaticAttr||e[0]===t.DynamicAttr||e[0]===t.ComponentAttr||e[0]===t.TrustingAttr||e[0]===t.TrustingComponentAttr||e[0]===t.AttrSplat||e[0]===t.Modifier},e.isArgument=function(e){return e[0]===t.StaticArg||e[0]===t.DynamicArg},e.isMaybeLocal=e.isGet=e.isFlushElement=e.Ops=void 0,e.Ops=t,function(e){e[e.Text=0]="Text",e[e.Append=1]="Append",e[e.Comment=2]="Comment",e[e.Modifier=3]="Modifier",e[e.Block=4]="Block",e[e.Component=5]="Component",e[e.DynamicComponent=6]="DynamicComponent",e[e.OpenElement=7]="OpenElement",e[e.FlushElement=8]="FlushElement",e[e.CloseElement=9]="CloseElement",e[e.StaticAttr=10]="StaticAttr",e[e.DynamicAttr=11]="DynamicAttr",e[e.ComponentAttr=12]="ComponentAttr",e[e.AttrSplat=13]="AttrSplat",e[e.Yield=14]="Yield",e[e.Partial=15]="Partial",e[e.DynamicArg=16]="DynamicArg",e[e.StaticArg=17]="StaticArg",e[e.TrustingAttr=18]="TrustingAttr",e[e.TrustingComponentAttr=19]="TrustingComponentAttr",e[e.Debugger=20]="Debugger",e[e.ClientSideStatement=21]="ClientSideStatement",e[e.Unknown=22]="Unknown",e[e.Get=23]="Get",e[e.MaybeLocal=24]="MaybeLocal",e[e.HasBlock=25]="HasBlock",e[e.HasBlockParams=26]="HasBlockParams",e[e.Undefined=27]="Undefined",e[e.Helper=28]="Helper",e[e.Concat=29]="Concat"
e[e.ClientSideExpression=30]="ClientSideExpression"}(t||(e.Ops=t={}))
var r=n(t.FlushElement)
e.isFlushElement=r
var i=n(t.Get)
e.isGet=i
var o=n(t.MaybeLocal)
e.isMaybeLocal=o}),e("backburner",["exports","ember-babel"],function(e,t){"use strict"
e.buildPlatform=o,e.default=void 0
var n=setTimeout,r=function(){}
function i(e){if("function"==typeof Promise){var t=Promise.resolve()
return function(){return t.then(e)}}if("function"==typeof MutationObserver){var r=0,i=new MutationObserver(e),o=document.createTextNode("")
return i.observe(o,{characterData:!0}),function(){return r=++r%2,o.data=""+r,r}}return function(){return n(e,0)}}function o(e){var t=r
return{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)},now:function(){return Date.now()},next:i(e),clearNext:t}}var a=/\d+/,s=6
function u(e){var t=typeof e
return"number"===t&&e==e||"string"===t&&a.test(e)}function c(e){return e.onError||e.onErrorTarget&&e.onErrorTarget[e.onErrorMethod]}function l(e,t,n){for(var r=-1,i=0,o=n.length;i<o;i+=4)if(n[i]===e&&n[i+1]===t){r=i
break}return r}function h(e,t,n){for(var r=-1,i=2,o=n.length;i<o;i+=6)if(n[i]===e&&n[i+1]===t){r=i-2
break}return r}function f(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[],i=0;i<e.length;i+=t){var o=e[i+3+n],a={target:e[i+0+n],method:e[i+1+n],args:e[i+2+n],stack:void 0!==o&&"stack"in o?o.stack:""}
r.push(a)}return r}function d(e,t){for(var n,r,i=0,o=t.length-s;i<o;)e>=t[n=i+(r=(o-i)/s)-r%s]?i=n+s:o=n
return e>=t[i]?i+s:i}var p=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
this._queueBeingFlushed=[],this.targetQueues=new Map,this.index=0,this._queue=[],this.name=e,this.options=t,this.globalOptions=n}var t=e.prototype
return t.stackFor=function(e){if(e<this._queue.length){var t=this._queue[3*e+4]
return t?t.stack:null}},t.flush=function(e){var t,n,r=this.options,i=r.before,o=r.after
this.targetQueues.clear(),0===this._queueBeingFlushed.length&&(this._queueBeingFlushed=this._queue,this._queue=[]),void 0!==i&&i()
var a=this._queueBeingFlushed
if(a.length>0){var s=c(this.globalOptions)
n=s?this.invokeWithOnError:this.invoke
for(var u=this.index;u<a.length;u+=4)if(this.index+=4,null!==(t=a[u+1])&&n(a[u],t,a[u+2],s,a[u+3]),this.index!==this._queueBeingFlushed.length&&this.globalOptions.mustYield&&this.globalOptions.mustYield())return 1}void 0!==o&&o(),this._queueBeingFlushed.length=0,this.index=0,!1!==e&&this._queue.length>0&&this.flush(!0)},t.hasWork=function(){return this._queueBeingFlushed.length>0||this._queue.length>0},t.cancel=function(e){var t=e.target,n=e.method,r=this._queue,i=this.targetQueues.get(t)
void 0!==i&&i.delete(n)
var o=l(t,n,r)
return o>-1?(r.splice(o,4),!0):(o=l(t,n,r=this._queueBeingFlushed))>-1&&(r[o+1]=null,!0)},t.push=function(e,t,n,r){return this._queue.push(e,t,n,r),{queue:this,target:e,method:t}},t.pushUnique=function(e,t,n,r){var i=this.targetQueues.get(e)
void 0===i&&(i=new Map,this.targetQueues.set(e,i))
var o=i.get(t)
if(void 0===o){var a=this._queue.push(e,t,n,r)-4
i.set(t,a)}else{var s=this._queue
s[o+2]=n,s[o+3]=r}return{queue:this,target:e,method:t}},t._getDebugInfo=function(e){if(e)return f(this._queue,4)},t.invoke=function(e,t,n){void 0===n?t.call(e):t.apply(e,n)},t.invokeWithOnError=function(e,t,n,r,i){try{void 0===n?t.call(e):t.apply(e,n)}catch(o){r(o,i)}},e}(),v=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0
this.queues={},this.queueNameIndex=0,this.queueNames=e,e.reduce(function(e,n){return e[n]=new p(n,t[n],t),e},this.queues)}var t=e.prototype
return t.schedule=function(e,t,n,r,i,o){var a=this.queues[e]
if(void 0===a)throw new Error("You attempted to schedule an action in a queue ("+e+") that doesn't exist")
if(null==n)throw new Error("You attempted to schedule an action in a queue ("+e+") for a method that doesn't exist")
return this.queueNameIndex=0,i?a.pushUnique(t,n,r,o):a.push(t,n,r,o)},t.flush=function(){for(var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.queueNames.length;this.queueNameIndex<r;)if(t=this.queueNames[this.queueNameIndex],!1===(e=this.queues[t]).hasWork()){if(this.queueNameIndex++,n&&this.queueNameIndex<r)return 1}else if(1===e.flush(!1))return 1},t._getDebugInfo=function(e){if(e){for(var t,n,r={},i=this.queueNames.length,o=0;o<i;)n=this.queueNames[o],t=this.queues[n],r[n]=t._getDebugInfo(e),o++
return r}},e}()
function m(e){for(var t=e(),n=t.next();!1===n.done;)n.value(),n=t.next()}var g=function(){},y=Object.freeze([])
function b(){var e,t,n,r=arguments.length
if(0===r);else if(1===r)n=null,t=arguments[0]
else{var i=2,o=arguments[0],a=arguments[1],s=typeof a
if("function"===s?(n=o,t=a):null!==o&&"string"===s&&a in o?t=(n=o)[a]:"function"==typeof o&&(i=1,n=null,t=o),r>i){var u=r-i
e=new Array(u)
for(var c=0;c<u;c++)e[c]=arguments[c+i]}}return[n,t,e]}function x(){var e,t,n,r,i
if(2===arguments.length)t=arguments[0],i=arguments[1],e=null
else{var o=b.apply(void 0,arguments)
e=o[0],t=o[1],void 0===(r=o[2])?i=0:u(i=r.pop())||(n=!0===i,i=r.pop())}return[e,t,r,i=parseInt(i,10),n]}var w=0,_=0,R=0,E=0,C=0,k=0,S=0,A=0,T=0,O=0,I=0,N=0,D=0,P=0,M=0,F=0,L=0,B=0,j=0,z=0,U=0,W=function(){function e(e,t){var n=this
this.DEBUG=!1,this.currentInstance=null,this.instanceStack=[],this._eventCallbacks={end:[],begin:[]},this._timerTimeoutId=null,this._timers=[],this._autorun=!1,this._autorunStack=null,this.queueNames=e,this.options=t||{},"string"==typeof this.options.defaultQueue?this._defaultQueue=this.options.defaultQueue:this._defaultQueue=this.queueNames[0],this._onBegin=this.options.onBegin||g,this._onEnd=this.options.onEnd||g,this._boundRunExpiredTimers=this._runExpiredTimers.bind(this),this._boundAutorunEnd=function(){j++,!1!==n._autorun&&(n._autorun=!1,n._autorunStack=null,n._end(!0))}
var r=this.options._buildPlatform||o
this._platform=r(this._boundAutorunEnd)}var n=e.prototype
return n.begin=function(){_++
var e,t=this.options,n=this.currentInstance
return!1!==this._autorun?(e=n,this._cancelAutorun()):(null!==n&&(U++,this.instanceStack.push(n)),z++,e=this.currentInstance=new v(this.queueNames,t),E++,this._trigger("begin",e,n)),this._onBegin(e,n),e},n.end=function(){R++,this._end(!1)},n.on=function(e,t){if("function"!=typeof t)throw new TypeError("Callback must be a function")
var n=this._eventCallbacks[e]
if(void 0===n)throw new TypeError("Cannot on() event "+e+" because it does not exist")
n.push(t)},n.off=function(e,t){var n=this._eventCallbacks[e]
if(!e||void 0===n)throw new TypeError("Cannot off() event "+e+" because it does not exist")
var r=!1
if(t)for(var i=0;i<n.length;i++)n[i]===t&&(r=!0,n.splice(i,1),i--)
if(!r)throw new TypeError("Cannot off() callback that does not exist")},n.run=function(){C++
var e=b.apply(void 0,arguments),t=e[0],n=e[1],r=e[2]
return this._run(t,n,r)},n.join=function(){k++
var e=b.apply(void 0,arguments),t=e[0],n=e[1],r=e[2]
return this._join(t,n,r)},n.defer=function(e,t,n){S++
for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o]
return this.schedule.apply(this,[e,t,n].concat(i))},n.schedule=function(e){A++
for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
var i=b.apply(void 0,n),o=i[0],a=i[1],s=i[2],u=this.DEBUG?new Error:void 0
return this._ensureInstance().schedule(e,o,a,s,!1,u)},n.scheduleIterable=function(e,t){T++
var n=this.DEBUG?new Error:void 0
return this._ensureInstance().schedule(e,null,m,[t],!1,n)},n.deferOnce=function(e,t,n){O++
for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o]
return this.scheduleOnce.apply(this,[e,t,n].concat(i))},n.scheduleOnce=function(e){I++
for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
var i=b.apply(void 0,n),o=i[0],a=i[1],s=i[2],u=this.DEBUG?new Error:void 0
return this._ensureInstance().schedule(e,o,a,s,!0,u)},n.setTimeout=function(){return N++,this.later.apply(this,arguments)},n.later=function(){D++
var e=function(){var e=b.apply(void 0,arguments),t=e[0],n=e[1],r=e[2],i=0,o=void 0!==r?r.length:0
return o>0&&u(r[o-1])&&(i=parseInt(r.pop(),10)),[t,n,r,i]}.apply(void 0,arguments),t=e[0],n=e[1],r=e[2],i=e[3]
return this._later(t,n,r,i)},n.throttle=function(){P++
var e,t=x.apply(void 0,arguments),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=void 0===a||a,u=h(n,r,this._timers)
if(-1===u)e=this._later(n,r,s?y:i,o),s&&this._join(n,r,i)
else{e=this._timers[u+1]
var c=u+4
this._timers[c]!==y&&(this._timers[c]=i)}return e},n.debounce=function(){M++
var e,t=x.apply(void 0,arguments),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=void 0!==a&&a,c=this._timers,l=h(n,r,c)
if(-1===l)e=this._later(n,r,u?y:i,o),u&&this._join(n,r,i)
else{var f=this._platform.now()+o,p=l+4
c[p]===y&&(i=y),e=c[l+1]
var v=d(f,c)
if(l+s===v)c[l]=f,c[p]=i
else{var m=this._timers[l+5]
this._timers.splice(v,0,f,e,n,r,i,m),this._timers.splice(l,s)}0===l&&this._reinstallTimerTimeout()}return e},n.cancelTimers=function(){F++,this._clearTimerTimeout(),this._timers=[],this._cancelAutorun()},n.hasTimers=function(){return this._timers.length>0||this._autorun},n.cancel=function(e){if(L++,null==e)return!1
var t=typeof e
return"number"===t?this._cancelLaterTimer(e):!("object"!==t||!e.queue||!e.method)&&e.queue.cancel(e)},n.ensureInstance=function(){this._ensureInstance()},n.getDebugInfo=function(){var e=this
if(this.DEBUG)return{autorun:this._autorunStack,counters:this.counters,timers:f(this._timers,s,2),instanceStack:[this.currentInstance].concat(this.instanceStack).map(function(t){return t&&t._getDebugInfo(e.DEBUG)})}},n._end=function(e){var t=this.currentInstance,n=null
if(null===t)throw new Error("end called without begin")
var r,i=!1
try{r=t.flush(e)}finally{if(!i)if(i=!0,1===r){var o=this.queueNames[t.queueNameIndex]
this._scheduleAutorun(o)}else this.currentInstance=null,this.instanceStack.length>0&&(n=this.instanceStack.pop(),this.currentInstance=n),this._trigger("end",t,n),this._onEnd(t,n)}},n._join=function(e,t,n){return null===this.currentInstance?this._run(e,t,n):void 0===e&&void 0===n?t():t.apply(e,n)},n._run=function(e,t,n){var r=c(this.options)
if(this.begin(),r)try{return t.apply(e,n)}catch(i){r(i)}finally{this.end()}else try{return t.apply(e,n)}finally{this.end()}},n._cancelAutorun=function(){this._autorun&&(this._platform.clearNext(),this._autorun=!1,this._autorunStack=null)},n._later=function(e,t,n,r){var i=this.DEBUG?new Error:void 0,o=this._platform.now()+r,a=w++
if(0===this._timers.length)this._timers.push(o,a,e,t,n,i),this._installTimerTimeout()
else{var s=d(o,this._timers)
this._timers.splice(s,0,o,a,e,t,n,i),this._reinstallTimerTimeout()}return a},n._cancelLaterTimer=function(e){for(var t=1;t<this._timers.length;t+=s)if(this._timers[t]===e)return this._timers.splice(t-1,s),1===t&&this._reinstallTimerTimeout(),!0
return!1},n._trigger=function(e,t,n){var r=this._eventCallbacks[e]
if(void 0!==r)for(var i=0;i<r.length;i++)r[i](t,n)},n._runExpiredTimers=function(){this._timerTimeoutId=null,this._timers.length>0&&(this.begin(),this._scheduleExpiredTimers(),this.end())},n._scheduleExpiredTimers=function(){for(var e=this._timers,t=0,n=e.length,r=this._defaultQueue,i=this._platform.now();t<n;t+=s){if(e[t]>i)break
var o=e[t+4]
if(o!==y){var a=e[t+2],u=e[t+3],c=e[t+5]
this.currentInstance.schedule(r,a,u,o,!1,c)}}e.splice(0,t),this._installTimerTimeout()},n._reinstallTimerTimeout=function(){this._clearTimerTimeout(),this._installTimerTimeout()},n._clearTimerTimeout=function(){null!==this._timerTimeoutId&&(this._platform.clearTimeout(this._timerTimeoutId),this._timerTimeoutId=null)},n._installTimerTimeout=function(){if(0!==this._timers.length){var e=this._timers[0],t=this._platform.now(),n=Math.max(0,e-t)
this._timerTimeoutId=this._platform.setTimeout(this._boundRunExpiredTimers,n)}},n._ensureInstance=function(){var e=this.currentInstance
return null===e&&(this._autorunStack=this.DEBUG?new Error:void 0,e=this.begin(),this._scheduleAutorun(this.queueNames[0])),e},n._scheduleAutorun=function(e){B++
var t=this._platform.next,n=this.options.flush
n?n(e,t):t(),this._autorun=!0},(0,t.createClass)(e,[{key:"counters",get:function(){return{begin:_,end:R,events:{begin:E,end:0},autoruns:{created:B,completed:j},run:C,join:k,defer:S,schedule:A,scheduleIterable:T,deferOnce:O,scheduleOnce:I,setTimeout:N,later:D,throttle:P,debounce:M,cancelTimers:F,cancel:L,loops:{total:z,nested:U}}}},{key:"defaultQueue",get:function(){return this._defaultQueue}}]),e}()
W.Queue=p,W.buildPlatform=o,W.buildNext=i
var V=W
e.default=V}),e("dag-map",["exports"],function(e){"use strict"
e.default=void 0
var t=function(){function e(){this._vertices=new n}return e.prototype.add=function(e,t,n,r){if(!e)throw new Error("argument `key` is required")
var i=this._vertices,o=i.add(e)
if(o.val=t,n)if("string"==typeof n)i.addEdge(o,i.add(n))
else for(var a=0;a<n.length;a++)i.addEdge(o,i.add(n[a]))
if(r)if("string"==typeof r)i.addEdge(i.add(r),o)
else for(a=0;a<r.length;a++)i.addEdge(i.add(r[a]),o)},e.prototype.addEdges=function(e,t,n,r){this.add(e,t,n,r)},e.prototype.each=function(e){this._vertices.walk(e)},e.prototype.topsort=function(e){this.each(e)},e}()
e.default=t
var n=function(){function e(){this.length=0,this.stack=new r,this.path=new r,this.result=new r}return e.prototype.add=function(e){if(!e)throw new Error("missing key")
for(var t,n=0|this.length,r=0;r<n;r++)if((t=this[r]).key===e)return t
return this.length=n+1,this[n]={idx:n,key:e,val:void 0,out:!1,flag:!1,length:0}},e.prototype.addEdge=function(e,t){this.check(e,t.key)
for(var n=0|t.length,r=0;r<n;r++)if(t[r]===e.idx)return
t.length=n+1,t[n]=e.idx,e.out=!0},e.prototype.walk=function(e){this.reset()
for(var t=0;t<this.length;t++){var n=this[t]
n.out||this.visit(n,"")}this.each(this.result,e)},e.prototype.check=function(e,t){if(e.key===t)throw new Error("cycle detected: "+t+" <- "+t)
if(0!==e.length){for(var n=0;n<e.length;n++){if(this[e[n]].key===t)throw new Error("cycle detected: "+t+" <- "+e.key+" <- "+t)}if(this.reset(),this.visit(e,t),this.path.length>0){var r="cycle detected: "+t
throw this.each(this.path,function(e){r+=" <- "+e}),new Error(r)}}},e.prototype.reset=function(){this.stack.length=0,this.path.length=0,this.result.length=0
for(var e=0,t=this.length;e<t;e++)this[e].flag=!1},e.prototype.visit=function(e,t){var n=this.stack,r=this.path,i=this.result
for(n.push(e.idx);n.length;){var o=0|n.pop()
if(o>=0){var a=this[o]
if(a.flag)continue
if(a.flag=!0,r.push(o),t===a.key)break
n.push(~o),this.pushIncoming(a)}else r.pop(),i.push(~o)}},e.prototype.pushIncoming=function(e){for(var t=this.stack,n=e.length-1;n>=0;n--){var r=e[n]
this[r].flag||t.push(r)}},e.prototype.each=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=this[e[n]]
t(i.key,i.val)}},e}(),r=function(){function e(){this.length=0}return e.prototype.push=function(e){this[this.length++]=0|e},e.prototype.pop=function(){return 0|this[--this.length]},e}()}),e("ember-babel",["exports"],function(e){"use strict"
e.wrapNativeSuper=function(e){if(n.has(e))return n.get(e)
function r(){}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n.set(e,r),t(r,e)},e.classCallCheck=function(e,t){0},e.inheritsLoose=function(e,n){0
e.prototype=Object.create(null===n?null:n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),null!==n&&t(e,n)},e.taggedTemplateLiteralLoose=function(e,t){t||(t=e.slice(0))
return e.raw=t,e},e.createClass=function(e,t,n){null!=t&&r(e.prototype,t)
null!=n&&r(e,n)
return e},e.assertThisInitialized=i,e.possibleConstructorReturn=function(e,t){if("object"==typeof t&&null!==t||"function"==typeof t)return t
return i(e)},e.objectDestructuringEmpty=function(e){0}
var t=Object.setPrototypeOf,n=new Map
function r(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return e}}),e("ember/index",["exports","require","@ember/-internals/environment","node-module","@ember/-internals/utils","@ember/-internals/container","@ember/instrumentation","@ember/-internals/meta","@ember/-internals/metal","@ember/canary-features","@ember/debug","backburner","@ember/-internals/console","@ember/controller","@ember/controller/lib/controller_mixin","@ember/string","@ember/service","@ember/object","@ember/object/compat","@ember/object/computed","@ember/-internals/runtime","@ember/-internals/glimmer","ember/version","@ember/-internals/views","@ember/-internals/routing","@ember/-internals/extension-support","@ember/error","@ember/runloop","@ember/-internals/error-handling","@ember/-internals/owner","@ember/application","@ember/application/globals-resolver","@ember/application/instance","@ember/engine","@ember/engine/instance","@ember/polyfills","@ember/deprecated-features"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_,R,E,C,k,S,A,T,O,I,N,D,P,M,F){"use strict"
e.default=void 0
var L="object"==typeof n.context.imports.Ember&&n.context.imports.Ember||{}
L.isNamespace=!0,L.toString=function(){return"Ember"},Object.defineProperty(L,"ENV",{get:n.getENV,enumerable:!1}),Object.defineProperty(L,"lookup",{get:n.getLookup,set:n.setLookup,enumerable:!1}),F.EMBER_EXTEND_PROTOTYPES&&Object.defineProperty(L,"EXTEND_PROTOTYPES",{enumerable:!1,get:function(){return n.ENV.EXTEND_PROTOTYPES}}),L.getOwner=T.getOwner,L.setOwner=T.setOwner,L.Application=O.default,L.DefaultResolver=L.Resolver=I.default,L.ApplicationInstance=N.default,L.Engine=D.default,L.EngineInstance=P.default,L.assign=M.assign,L.merge=M.merge,L.generateGuid=i.generateGuid,L.GUID_KEY=i.GUID_KEY,L.guidFor=i.guidFor,L.inspect=i.inspect,L.makeArray=i.makeArray,L.canInvoke=i.canInvoke,L.tryInvoke=i.tryInvoke,L.wrap=i.wrap,L.uuid=i.uuid,L.Container=o.Container,L.Registry=o.Registry,L.assert=l.assert,L.warn=l.warn,L.debug=l.debug,L.deprecate=l.deprecate,L.deprecateFunc=l.deprecateFunc
L.runInDebug=l.runInDebug,L.Error=k.default,L.Debug={registerDeprecationHandler:l.registerDeprecationHandler,registerWarnHandler:l.registerWarnHandler,isComputed:u.isComputed},L.instrument=a.instrument,L.subscribe=a.subscribe,L.Instrumentation={instrument:a.instrument,subscribe:a.subscribe,unsubscribe:a.unsubscribe,reset:a.reset},L.run=S._globalsRun,L.run.backburner=S.backburner,L.run.begin=S.begin,L.run.bind=S.bind,L.run.cancel=S.cancel,L.run.debounce=S.debounce,L.run.end=S.end,L.run.hasScheduledTimers=S.hasScheduledTimers,L.run.join=S.join,L.run.later=S.later,L.run.next=S.next,L.run.once=S.once,L.run.schedule=S.schedule,L.run.scheduleOnce=S.scheduleOnce,L.run.throttle=S.throttle,L.run.cancelTimers=S.cancelTimers,Object.defineProperty(L.run,"currentRunLoop",{get:S.getCurrentRunLoop,enumerable:!1})
var B=u._globalsComputed
if(L.computed=B,L._descriptor=u.nativeDescDecorator,L._tracked=u.tracked,B.alias=u.alias,L.cacheFor=u.getCachedValueFor,L.ComputedProperty=u.ComputedProperty,Object.defineProperty(L,"_setComputedDecorator",{get:function(){return u.setClassicDecorator}}),L._setClassicDecorator=u.setClassicDecorator,L.meta=s.meta,L.get=u.get,L.getWithDefault=u.getWithDefault,L._getPath=u._getPath,L.set=u.set,L.trySet=u.trySet,L.FEATURES=(0,M.assign)({isEnabled:c.isEnabled},c.FEATURES),L._Cache=i.Cache,L.on=u.on,L.addListener=u.addListener,L.removeListener=u.removeListener,L.sendEvent=u.sendEvent,L.hasListeners=u.hasListeners,L.isNone=u.isNone,L.isEmpty=u.isEmpty,L.isBlank=u.isBlank,L.isPresent=u.isPresent,L.notifyPropertyChange=u.notifyPropertyChange,L.overrideChains=u.overrideChains,L.beginPropertyChanges=u.beginPropertyChanges,L.endPropertyChanges=u.endPropertyChanges,L.changeProperties=u.changeProperties,L.platform={defineProperty:!0,hasPropertyAccessors:!0},L.defineProperty=u.defineProperty,L.watchKey=u.watchKey,L.unwatchKey=u.unwatchKey,L.removeChainWatcher=u.removeChainWatcher,L._ChainNode=u.ChainNode,L.finishChains=u.finishChains,L.watchPath=u.watchPath,L.unwatchPath=u.unwatchPath,L.watch=u.watch,L.isWatching=u.isWatching,L.unwatch=u.unwatch,L.destroy=s.deleteMeta,L.libraries=u.libraries,L.getProperties=u.getProperties,L.setProperties=u.setProperties,L.expandProperties=u.expandProperties,L.addObserver=u.addObserver,L.removeObserver=u.removeObserver,L.aliasMethod=u.aliasMethod,L.observer=u.observer,L.mixin=u.mixin,L.Mixin=u.Mixin,Object.defineProperty(L,"onerror",{get:A.getOnerror,set:A.setOnerror,enumerable:!1}),Object.defineProperty(L,"testing",{get:l.isTesting,set:l.setTesting,enumerable:!1}),L._Backburner=h.default,F.LOGGER&&(L.Logger=f.default),L.A=x.A,L.String={loc:v.loc,w:v.w,dasherize:v.dasherize,decamelize:v.decamelize,camelize:v.camelize,classify:v.classify,underscore:v.underscore,capitalize:v.capitalize},L.Object=x.Object,L._RegistryProxyMixin=x.RegistryProxyMixin,L._ContainerProxyMixin=x.ContainerProxyMixin,L.compare=x.compare,L.copy=x.copy,L.isEqual=x.isEqual,L._setFrameworkClass=x.setFrameworkClass,L.inject=function(){},L.inject.service=m.inject,L.inject.controller=d.inject,L.Array=x.Array,L.Comparable=x.Comparable,L.Enumerable=x.Enumerable,L.ArrayProxy=x.ArrayProxy,L.ObjectProxy=x.ObjectProxy,L.ActionHandler=x.ActionHandler,L.CoreObject=x.CoreObject,L.NativeArray=x.NativeArray,L.Copyable=x.Copyable,L.MutableEnumerable=x.MutableEnumerable,L.MutableArray=x.MutableArray,L.TargetActionSupport=x.TargetActionSupport,L.Evented=x.Evented,L.PromiseProxyMixin=x.PromiseProxyMixin,L.Observable=x.Observable,L.typeOf=x.typeOf,L.isArray=x.isArray,L.Object=x.Object,L.onLoad=O.onLoad,L.runLoadHooks=O.runLoadHooks,L.Controller=d.default,L.ControllerMixin=p.default,L.Service=m.default,L._ProxyMixin=x._ProxyMixin,L.RSVP=x.RSVP,L.Namespace=x.Namespace,L._action=g.action,L._dependentKeyCompat=y.dependentKeyCompat,B.empty=b.empty,B.notEmpty=b.notEmpty,B.none=b.none,B.not=b.not,B.bool=b.bool,B.match=b.match,B.equal=b.equal,B.gt=b.gt,B.gte=b.gte,B.lt=b.lt,B.lte=b.lte,B.oneWay=b.oneWay,B.reads=b.oneWay,B.readOnly=b.readOnly,B.deprecatingAlias=b.deprecatingAlias,B.and=b.and,B.or=b.or,B.sum=b.sum,B.min=b.min,B.max=b.max,B.map=b.map,B.sort=b.sort,B.setDiff=b.setDiff,B.mapBy=b.mapBy,B.filter=b.filter,B.filterBy=b.filterBy,B.uniq=b.uniq,B.uniqBy=b.uniqBy,B.union=b.union,B.intersect=b.intersect,B.collect=b.collect,Object.defineProperty(L,"STRINGS",{configurable:!1,get:v._getStrings,set:v._setStrings}),Object.defineProperty(L,"BOOTED",{configurable:!1,enumerable:!1,get:u.isNamespaceSearchDisabled,set:u.setNamespaceSearchDisabled}),L.Component=w.Component,w.Helper.helper=w.helper,L.Helper=w.Helper,L.Checkbox=w.Checkbox,L.TextField=w.TextField,L.TextArea=w.TextArea,L.LinkComponent=w.LinkComponent,L._setComponentManager=w.setComponentManager,L._componentManagerCapabilities=w.capabilities,L._setModifierManager=w.setModifierManager,L._modifierManagerCapabilties=w.modifierCapabilties,L.Handlebars={template:w.template,Utils:{escapeExpression:w.escapeExpression}},L.HTMLBars={template:w.template},n.ENV.EXTEND_PROTOTYPES.String&&(String.prototype.htmlSafe=function(){return(0,w.htmlSafe)(this)}),L.String.htmlSafe=w.htmlSafe,L.String.isHTMLSafe=w.isHTMLSafe,Object.defineProperty(L,"TEMPLATES",{get:w.getTemplates,set:w.setTemplates,configurable:!1,enumerable:!1}),L.VERSION=_.default,F.JQUERY_INTEGRATION&&!R.jQueryDisabled&&Object.defineProperty(L,"$",{get:function(){return R.jQuery},configurable:!0,enumerable:!0}),L.ViewUtils={isSimpleClick:R.isSimpleClick,getElementView:R.getElementView,getViewElement:R.getViewElement,getViewBounds:R.getViewBounds,getViewClientRects:R.getViewClientRects,getViewBoundingClientRect:R.getViewBoundingClientRect,getRootViews:R.getRootViews,getChildViews:R.getChildViews,isSerializationFirstNode:w.isSerializationFirstNode},L.TextSupport=R.TextSupport,L.ComponentLookup=R.ComponentLookup,L.EventDispatcher=R.EventDispatcher,L.Location=E.Location,L.AutoLocation=E.AutoLocation,L.HashLocation=E.HashLocation,L.HistoryLocation=E.HistoryLocation,L.NoneLocation=E.NoneLocation,L.controllerFor=E.controllerFor,L.generateControllerFactory=E.generateControllerFactory,L.generateController=E.generateController,L.RouterDSL=E.RouterDSL,L.Router=E.Router,L.Route=E.Route,(0,O.runLoadHooks)("Ember.Application",O.default),L.DataAdapter=C.DataAdapter,L.ContainerDebugAdapter=C.ContainerDebugAdapter,(0,t.has)("ember-template-compiler")&&(0,t.default)("ember-template-compiler"),(0,t.has)("ember-testing")){var j=(0,t.default)("ember-testing")
L.Test=j.Test,L.Test.Adapter=j.Adapter,L.Test.QUnitAdapter=j.QUnitAdapter,L.setupForTesting=j.setupForTesting}(0,O.runLoadHooks)("Ember")
var z=L
e.default=z,r.IS_NODE?r.module.exports=L:n.context.exports.Ember=n.context.exports.Em=L}),e("ember/version",["exports"],function(e){"use strict"
e.default=void 0
e.default="3.12.0"}),e("node-module",["exports"],function(e){var t="object"==typeof module&&"function"==typeof module.require
t?(e.require=module.require,e.module=module,e.IS_NODE=t):(e.require=null,e.module=null,e.IS_NODE=t)}),e("route-recognizer",["exports"],function(e){"use strict"
e.default=void 0
var t=Object.create
function n(){var e=t(null)
return e.__=void 0,delete e.__,e}var r=function(e,t,n){this.path=e,this.matcher=t,this.delegate=n}
r.prototype.to=function(e,t){var n=this.delegate
if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`")
this.matcher.addChild(this.path,e,t,this.delegate)}}
var i=function(e){this.routes=n(),this.children=n(),this.target=e}
function o(e,t,n){return function(i,a){var s=e+i
if(!a)return new r(s,t,n)
a(o(s,t,n))}}function a(e,t,n){for(var r=0,i=0;i<e.length;i++)r+=e[i].path.length
var o={path:t=t.substr(r),handler:n}
e.push(o)}i.prototype.add=function(e,t){this.routes[e]=t},i.prototype.addChild=function(e,t,n,r){var a=new i(t)
this.children[e]=a
var s=o(e,a,r)
r&&r.contextEntered&&r.contextEntered(t,s),n(s)}
function s(e){return e.split("/").map(c).join("/")}var u=/%|\//g
function c(e){return e.length<3||-1===e.indexOf("%")?e:decodeURIComponent(e).replace(u,encodeURIComponent)}var l=/%(?:2(?:4|6|B|C)|3(?:B|D|A)|40)/g
function h(e){return encodeURIComponent(e).replace(l,decodeURIComponent)}var f=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g,d=Array.isArray,p=Object.prototype.hasOwnProperty
function v(e,t){if("object"!=typeof e||null===e)throw new Error("You must pass an object as the second argument to `generate`.")
if(!p.call(e,t))throw new Error("You must provide param `"+t+"` to `generate`.")
var n=e[t],r="string"==typeof n?n:""+n
if(0===r.length)throw new Error("You must provide a param `"+t+"`.")
return r}var m=[]
m[0]=function(e,t){for(var n=t,r=e.value,i=0;i<r.length;i++){var o=r.charCodeAt(i)
n=n.put(o,!1,!1)}return n},m[1]=function(e,t){return t.put(47,!0,!0)},m[2]=function(e,t){return t.put(-1,!1,!0)},m[4]=function(e,t){return t}
var g=[]
g[0]=function(e){return e.value.replace(f,"\\$1")},g[1]=function(){return"([^/]+)"},g[2]=function(){return"(.+)"},g[4]=function(){return""}
var y=[]
y[0]=function(e){return e.value},y[1]=function(e,t){var n=v(t,e.value)
return A.ENCODE_AND_DECODE_PATH_SEGMENTS?h(n):n},y[2]=function(e,t){return v(t,e.value)},y[4]=function(){return""}
var b=Object.freeze({}),x=Object.freeze([])
function w(e,t,n){t.length>0&&47===t.charCodeAt(0)&&(t=t.substr(1))
for(var r=t.split("/"),i=void 0,o=void 0,a=0;a<r.length;a++){var s,u=r[a],l=0
12&(s=2<<(l=""===u?4:58===u.charCodeAt(0)?1:42===u.charCodeAt(0)?2:0))&&(u=u.slice(1),(i=i||[]).push(u),(o=o||[]).push(0!=(4&s))),14&s&&n[l]++,e.push({type:l,value:c(u)})}return{names:i||x,shouldDecodes:o||x}}function _(e,t,n){return e.char===t&&e.negate===n}var R=function(e,t,n,r,i){this.states=e,this.id=t,this.char=n,this.negate=r,this.nextStates=i?t:null,this.pattern="",this._regex=void 0,this.handlers=void 0,this.types=void 0}
function E(e,t){return e.negate?e.char!==t&&-1!==e.char:e.char===t||-1===e.char}function C(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r]
n=n.concat(o.match(t))}return n}R.prototype.regex=function(){return this._regex||(this._regex=new RegExp(this.pattern)),this._regex},R.prototype.get=function(e,t){var n=this.nextStates
if(null!==n)if(d(n))for(var r=0;r<n.length;r++){var i=this.states[n[r]]
if(_(i,e,t))return i}else{var o=this.states[n]
if(_(o,e,t))return o}},R.prototype.put=function(e,t,n){var r
if(r=this.get(e,t))return r
var i=this.states
return r=new R(i,i.length,e,t,n),i[i.length]=r,null==this.nextStates?this.nextStates=r.id:d(this.nextStates)?this.nextStates.push(r.id):this.nextStates=[this.nextStates,r.id],r},R.prototype.match=function(e){var t=this.nextStates
if(!t)return[]
var n=[]
if(d(t))for(var r=0;r<t.length;r++){var i=this.states[t[r]]
E(i,e)&&n.push(i)}else{var o=this.states[t]
E(o,e)&&n.push(o)}return n}
var k=function(e){this.length=0,this.queryParams=e||{}}
function S(e){var t
e=e.replace(/\+/gm,"%20")
try{t=decodeURIComponent(e)}catch(n){t=""}return t}k.prototype.splice=Array.prototype.splice,k.prototype.slice=Array.prototype.slice,k.prototype.push=Array.prototype.push
var A=function(){this.names=n()
var e=[],t=new R(e,0,-1,!0,!1)
e[0]=t,this.states=e,this.rootState=t}
A.prototype.add=function(e,t){for(var n,r=this.rootState,i="^",o=[0,0,0],a=new Array(e.length),s=[],u=!0,c=0,l=0;l<e.length;l++){for(var h=e[l],f=w(s,h.path,o),d=f.names,p=f.shouldDecodes;c<s.length;c++){var v=s[c]
4!==v.type&&(u=!1,r=r.put(47,!1,!1),i+="/",r=m[v.type](v,r),i+=g[v.type](v))}a[l]={handler:h.handler,names:d,shouldDecodes:p}}u&&(r=r.put(47,!1,!1),i+="/"),r.handlers=a,r.pattern=i+"$",r.types=o,"object"==typeof t&&null!==t&&t.as&&(n=t.as),n&&(this.names[n]={segments:s,handlers:a})},A.prototype.handlersFor=function(e){var t=this.names[e]
if(!t)throw new Error("There is no route named "+e)
for(var n=new Array(t.handlers.length),r=0;r<t.handlers.length;r++){var i=t.handlers[r]
n[r]=i}return n},A.prototype.hasRoute=function(e){return!!this.names[e]},A.prototype.generate=function(e,t){var n=this.names[e],r=""
if(!n)throw new Error("There is no route named "+e)
for(var i=n.segments,o=0;o<i.length;o++){var a=i[o]
4!==a.type&&(r+="/",r+=y[a.type](a,t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams)),r},A.prototype.generateQueryString=function(e){var t=[],n=Object.keys(e)
n.sort()
for(var r=0;r<n.length;r++){var i=n[r],o=e[i]
if(null!=o){var a=encodeURIComponent(i)
if(d(o))for(var s=0;s<o.length;s++){var u=i+"[]="+encodeURIComponent(o[s])
t.push(u)}else a+="="+encodeURIComponent(o),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},A.prototype.parseQueryString=function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var i=t[r].split("="),o=S(i[0]),a=o.length,s=!1,u=void 0
1===i.length?u="true":(a>2&&"[]"===o.slice(a-2)&&(s=!0,n[o=o.slice(0,a-2)]||(n[o]=[])),u=i[1]?S(i[1]):""),s?n[o].push(u):n[o]=u}return n},A.prototype.recognize=function(e){var t,n=[this.rootState],r={},i=!1,o=e.indexOf("#");-1!==o&&(e=e.substr(0,o))
var a=e.indexOf("?")
if(-1!==a){var u=e.substr(a+1,e.length)
e=e.substr(0,a),r=this.parseQueryString(u)}"/"!==e.charAt(0)&&(e="/"+e)
var c=e
A.ENCODE_AND_DECODE_PATH_SEGMENTS?e=s(e):(e=decodeURI(e),c=decodeURI(c))
var l=e.length
l>1&&"/"===e.charAt(l-1)&&(e=e.substr(0,l-1),c=c.substr(0,c.length-1),i=!0)
for(var h=0;h<e.length&&(n=C(n,e.charCodeAt(h))).length;h++);for(var f=[],d=0;d<n.length;d++)n[d].handlers&&f.push(n[d])
n=function(e){return e.sort(function(e,t){var n=e.types||[0,0,0],r=n[0],i=n[1],o=n[2],a=t.types||[0,0,0],s=a[0],u=a[1],c=a[2]
if(o!==c)return o-c
if(o){if(r!==s)return s-r
if(i!==u)return u-i}return i!==u?i-u:r!==s?s-r:0})}(f)
var p=f[0]
return p&&p.handlers&&(i&&p.pattern&&"(.+)$"===p.pattern.slice(-5)&&(c+="/"),t=function(e,t,n){var r=e.handlers,i=e.regex()
if(!i||!r)throw new Error("state not initialized")
var o=t.match(i),a=1,s=new k(n)
s.length=r.length
for(var u=0;u<r.length;u++){var c=r[u],l=c.names,h=c.shouldDecodes,f=b,d=!1
if(l!==x&&h!==x)for(var p=0;p<l.length;p++){d=!0
var v=l[p],m=o&&o[a++]
f===b&&(f={}),A.ENCODE_AND_DECODE_PATH_SEGMENTS&&h[p]?f[v]=m&&decodeURIComponent(m):f[v]=m}s[u]={handler:c.handler,params:f,isDynamic:d}}return s}(p,c,r)),t},A.VERSION="0.3.4",A.ENCODE_AND_DECODE_PATH_SEGMENTS=!0,A.Normalizer={normalizeSegment:c,normalizePath:s,encodePathSegment:h},A.prototype.map=function(e,t){var n=new i
e(o("",n,this.delegate)),function e(t,n,r,i){for(var o=n.routes,s=Object.keys(o),u=0;u<s.length;u++){var c=s[u],l=t.slice()
a(l,c,o[c])
var h=n.children[c]
h?e(l,h,r,i):r.call(i,l)}}([],n,function(e){t?t(this,e):this.add(e)},this)}
var T=A
e.default=T}),e("router_js",["exports","@ember/polyfills","ember-babel","rsvp","route-recognizer"],function(e,t,n,r,i){"use strict"
e.logAbort=w,e.InternalRouteInfo=e.TransitionError=e.TransitionState=e.QUERY_PARAMS_SYMBOL=e.PARAMS_SYMBOL=e.STATE_SYMBOL=e.InternalTransition=e.default=void 0
var o=function(){function e(t){var n=Error.call(this,t)
this.name="TransitionAborted",this.message=t||"TransitionAborted",Error.captureStackTrace?Error.captureStackTrace(this,e):this.stack=n.stack}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}(),a=Array.prototype.slice,s=Object.prototype.hasOwnProperty
function u(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n])}function c(e){var t,n=e&&e.length
if(n&&n>0){var r=e[n-1]
if(function(e){return e&&s.call(e,"queryParams")}(r))return t=r.queryParams,[a.call(e,0,n-1),t]}return[e,null]}function l(e){for(var t in e){var n=e[t]
if("number"==typeof n)e[t]=""+n
else if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++)n[r]=""+n[r]}}function h(e){if(e.log){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
if(2===n.length){var i=n[0],o=n[1]
e.log("Transition #"+i+": "+o)}else{var a=n[0]
e.log(a)}}}function f(e){return"string"==typeof e||e instanceof String||"number"==typeof e||e instanceof Number}function d(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n]);n++);}function p(e,t){var n,r={all:{},changed:{},removed:{}}
u(r.all,t)
var i=!1
for(n in l(e),l(t),e)s.call(e,n)&&(s.call(t,n)||(i=!0,r.removed[n]=e[n]))
for(n in t)if(s.call(t,n)){var o=e[n],a=t[n]
if(v(o)&&v(a))if(o.length!==a.length)r.changed[n]=t[n],i=!0
else for(var c=0,h=o.length;c<h;c++)o[c]!==a[c]&&(r.changed[n]=t[n],i=!0)
else e[n]!==t[n]&&(r.changed[n]=t[n],i=!0)}return i?r:void 0}function v(e){return Array.isArray(e)}function m(e){return"Router: "+e}var g="__STATE__-2619860001345920-3322w3"
e.STATE_SYMBOL=g
var y="__PARAMS__-261986232992830203-23323"
e.PARAMS_SYMBOL=y
var b="__QPS__-2619863929824844-32323"
e.QUERY_PARAMS_SYMBOL=b
var x=function(){function e(e,t,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0
if(this.from=null,this.to=void 0,this.isAborted=!1,this.isActive=!0,this.urlMethod="update",this.resolveIndex=0,this.queryParamsOnly=!1,this.isTransition=!0,this.isCausedByAbortingTransition=!1,this.isCausedByInitialTransition=!1,this.isCausedByAbortingReplaceTransition=!1,this._visibleQueryParams={},this[g]=n||e.state,this.intent=t,this.router=e,this.data=t&&t.data||{},this.resolvedModels={},this[b]={},this.promise=void 0,this.error=void 0,this[y]={},this.routeInfos=[],this.targetName=void 0,this.pivotHandler=void 0,this.sequence=-1,o)return this.promise=r.Promise.reject(o),void(this.error=o)
if(this.isCausedByAbortingTransition=!!a,this.isCausedByInitialTransition=!!a&&(a.isCausedByInitialTransition||0===a.sequence),this.isCausedByAbortingReplaceTransition=!!a&&"replace"===a.urlMethod&&(!a.isCausedByAbortingTransition||a.isCausedByAbortingReplaceTransition),n){this[y]=n.params,this[b]=n.queryParams,this.routeInfos=n.routeInfos
var s=n.routeInfos.length
s&&(this.targetName=n.routeInfos[s-1].name)
for(var u=0;u<s;++u){var c=n.routeInfos[u]
if(!c.isResolved)break
this.pivotHandler=c.route}this.sequence=e.currentSequence++,this.promise=n.resolve(function(){return i.isAborted?r.Promise.reject(!1,m("Transition aborted - reject")):r.Promise.resolve(!0)},this).catch(function(e){return r.Promise.reject(i.router.transitionDidError(e,i))},m("Handle Abort"))}else this.promise=r.Promise.resolve(this[g]),this[y]={}}var t=e.prototype
return t.then=function(e,t,n){return this.promise.then(e,t,n)},t.catch=function(e,t){return this.promise.catch(e,t)},t.finally=function(e,t){return this.promise.finally(e,t)},t.abort=function(){this.rollback()
var t=new e(this.router,void 0,void 0,void 0)
return t.to=this.from,t.from=this.from,t.isAborted=!0,this.router.routeWillChange(t),this.router.routeDidChange(t),this},t.rollback=function(){this.isAborted||(h(this.router,this.sequence,this.targetName+": transition was aborted"),void 0!==this.intent&&null!==this.intent&&(this.intent.preTransitionState=this.router.state),this.isAborted=!0,this.isActive=!1,this.router.activeTransition=void 0)},t.redirect=function(e){this.rollback(),this.router.routeWillChange(e)},t.retry=function(){this.abort()
var e=this.router.transitionByIntent(this.intent,!1)
return null!==this.urlMethod&&e.method(this.urlMethod),e},t.method=function(e){return this.urlMethod=e,this},t.send=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0
this.trigger(e,t,n,r,i)},t.trigger=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0
"string"==typeof e&&(t=e,e=!1)
for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]
this.router.triggerEvent(this[g].routeInfos.slice(0,this.resolveIndex+1),e,t,r)},t.followRedirects=function(){var e=this.router
return this.promise.catch(function(t){return e.activeTransition?e.activeTransition.followRedirects():r.Promise.reject(t)})},t.toString=function(){return"Transition (sequence "+this.sequence+")"},t.log=function(e){h(this.router,this.sequence,e)},e}()
function w(e){return h(e.router,e.sequence,"detected abort."),new o}function _(e){return"object"==typeof e&&e instanceof x&&e.isTransition}e.InternalTransition=x
var R=new WeakMap
function E(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
return e.map(function(i,o){var a=i.name,s=i.params,u=i.paramNames,c=i.context,l=i.route
if(R.has(i)&&r){var h=R.get(i),f=C(h=function(e,n){var r={get metadata(){return k(e)}}
if(Object.isFrozen(n)||n.hasOwnProperty("metadata"))return Object.freeze((0,t.assign)({},n,r))
return(0,t.assign)(n,r)}(l,h),c)
return R.set(i,f),f}var d={find:function(t,n){var r,i=[]
3===t.length&&(i=e.map(function(e){return R.get(e)}))
for(var o=0;e.length>o;o++)if(r=R.get(e[o]),t.call(n,r,o,i))return r},get name(){return a},get paramNames(){return u},get metadata(){return k(i.route)},get parent(){var t=e[o-1]
return void 0===t?null:R.get(t)},get child(){var t=e[o+1]
return void 0===t?null:R.get(t)},get localName(){var e=this.name.split(".")
return e[e.length-1]},get params(){return s},get queryParams(){return n}}
return r&&(d=C(d,c)),R.set(i,d),d})}function C(e,n){var r={get attributes(){return n}}
return Object.isFrozen(e)||e.hasOwnProperty("attributes")?Object.freeze((0,t.assign)({},e,r)):(0,t.assign)(e,r)}function k(e){return null!=e&&void 0!==e.buildRouteInfoMetadata?e.buildRouteInfoMetadata():null}var S=function(){function e(e,t,n,r){this._routePromise=void 0,this._route=null,this.params={},this.isResolved=!1,this.name=t,this.paramNames=n,this.router=e,r&&this._processRoute(r)}var t=e.prototype
return t.getModel=function(e){return r.Promise.resolve(this.context)},t.serialize=function(e){return this.params||{}},t.resolve=function(e,t){var n=this
return r.Promise.resolve(this.routePromise).then(function(t){return n.checkForAbort(e,t)}).then(function(){return n.runBeforeModelHook(t)}).then(function(){return n.checkForAbort(e,null)}).then(function(){return n.getModel(t)}).then(function(t){return n.checkForAbort(e,t)}).then(function(e){return n.runAfterModelHook(t,e)}).then(function(e){return n.becomeResolved(t,e)})},t.becomeResolved=function(e,t){var n,r=this.serialize(t)
e&&(this.stashResolvedModel(e,t),e[y]=e[y]||{},e[y][this.name]=r)
var i=t===this.context;("context"in this||!i)&&(n=t)
var o=R.get(this),a=new A(this.router,this.name,this.paramNames,r,this.route,n)
return void 0!==o&&R.set(a,o),a},t.shouldSupercede=function(e){if(!e)return!0
var t=e.context===this.context
return e.name!==this.name||"context"in this&&!t||this.hasOwnProperty("params")&&!function(e,t){if(!e!=!t)return!1
if(!e)return!0
for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1
return!0}(this.params,e.params)},t.log=function(e,t){e.log&&e.log(this.name+": "+t)},t.updateRoute=function(e){return e._internalName=this.name,this.route=e},t.runBeforeModelHook=function(e){var t
return e.trigger&&e.trigger(!0,"willResolveModel",e,this.route),this.route&&void 0!==this.route.beforeModel&&(t=this.route.beforeModel(e)),_(t)&&(t=null),r.Promise.resolve(t)},t.runAfterModelHook=function(e,t){var n,i,o=this.name
return this.stashResolvedModel(e,t),void 0!==this.route&&void 0!==this.route.afterModel&&(n=this.route.afterModel(t,e)),n=_(i=n)?null:i,r.Promise.resolve(n).then(function(){return e.resolvedModels[o]})},t.checkForAbort=function(e,t){return r.Promise.resolve(e()).then(function(){return t},null)},t.stashResolvedModel=function(e,t){e.resolvedModels=e.resolvedModels||{},e.resolvedModels[this.name]=t},t.fetchRoute=function(){var e=this.router.getRoute(this.name)
return this._processRoute(e)},t._processRoute=function(e){var t,n=this
return this.routePromise=r.Promise.resolve(e),null!==(t=e)&&"object"==typeof t&&"function"==typeof t.then?(this.routePromise=this.routePromise.then(function(e){return n.updateRoute(e)}),this.route=void 0):e?this.updateRoute(e):void 0},(0,n.createClass)(e,[{key:"route",get:function(){return null!==this._route?this._route:this.fetchRoute()},set:function(e){this._route=e}},{key:"routePromise",get:function(){return this._routePromise?this._routePromise:(this.fetchRoute(),this._routePromise)},set:function(e){this._routePromise=e}}]),e}()
e.InternalRouteInfo=S
var A=function(e){function t(t,n,r,i,o,a){var s
return(s=e.call(this,t,n,r,o)||this).params=i,s.isResolved=!0,s.context=a,s}return(0,n.inheritsLoose)(t,e),t.prototype.resolve=function(e,t){return t&&t.resolvedModels&&(t.resolvedModels[this.name]=this.context),r.Promise.resolve(this)},t}(S),T=function(e){function t(t,n,r,i,o){var a
return(a=e.call(this,t,n,r,o)||this).params={},a.params=i,a}return(0,n.inheritsLoose)(t,e),t.prototype.getModel=function(e){var t=this.params
e&&e[b]&&(u(t={},this.params),t.queryParams=e[b])
var n=this.route,i=void 0
return n.deserialize?i=n.deserialize(t,e):n.model&&(i=n.model(t,e)),i&&_(i)&&(i=void 0),r.Promise.resolve(i)},t}(S),O=function(e){function t(t,n,r,i){var o
return(o=e.call(this,t,n,r)||this).context=i,o.serializer=o.router.getSerializer(n),o}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.getModel=function(t){return void 0!==this.router.log&&this.router.log(this.name+": resolving provided model"),e.prototype.getModel.call(this,t)},r.serialize=function(e){var t=this.paramNames,n=this.context
e||(e=n)
var r={}
if(f(e))return r[t[0]]=e,r
if(this.serializer)return this.serializer.call(null,e,t)
if(void 0!==this.route&&this.route.serialize)return this.route.serialize(e,t)
if(1===t.length){var i=t[0]
return/_id$/.test(i)?r[i]=e.id:r[i]=e,r}},t}(S)
var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
this.router=e,this.data=t},N=function(){function e(){this.routeInfos=[],this.queryParams={},this.params={}}var t=e.prototype
return t.promiseLabel=function(e){var t=""
return d(this.routeInfos,function(e){return""!==t&&(t+="."),t+=e.name,!0}),m("'"+t+"': "+e)},t.resolve=function(e,t){var n=this.params
d(this.routeInfos,function(e){return n[e.name]=e.params||{},!0}),t.resolveIndex=0
var i=this,o=!1
return r.Promise.resolve(null,this.promiseLabel("Start transition")).then(u,null,this.promiseLabel("Resolve route")).catch(function(e){var n=i.routeInfos,a=t.resolveIndex>=n.length?n.length-1:t.resolveIndex
return r.Promise.reject(new D(e,i.routeInfos[a].route,o,i))},this.promiseLabel("Handle error"))
function a(){return r.Promise.resolve(e(),i.promiseLabel("Check if should continue")).catch(function(e){return o=!0,r.Promise.reject(e)},i.promiseLabel("Handle abort"))}function s(e){var n=i.routeInfos[t.resolveIndex].isResolved
if(i.routeInfos[t.resolveIndex++]=e,!n){var r=e.route
void 0!==r&&r.redirect&&r.redirect(e.context,t)}return a().then(u,null,i.promiseLabel("Resolve route"))}function u(){return t.resolveIndex===i.routeInfos.length?i:i.routeInfos[t.resolveIndex].resolve(a,t).then(s,null,i.promiseLabel("Proceed"))}},e}()
e.TransitionState=N
var D=function(e,t,n,r){this.error=e,this.route=t,this.wasAborted=n,this.state=r}
e.TransitionError=D
var P=function(e){function t(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5?arguments[5]:void 0
return(i=e.call(this,t,s)||this).preTransitionState=void 0,i.name=n,i.pivotHandler=r,i.contexts=o,i.queryParams=a,i}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r.applyToState=function(e,t){var n=c([this.name].concat(this.contexts))[0],r=this.router.recognizer.handlersFor(n[0]),i=r[r.length-1].handler
return this.applyToHandlers(e,r,i,t,!1)},r.applyToHandlers=function(e,t,n,r,i){var o,a,s=new N,c=this.contexts.slice(0),l=t.length
if(this.pivotHandler)for(o=0,a=t.length;o<a;++o)if(t[o].handler===this.pivotHandler._internalName){l=o
break}for(o=t.length-1;o>=0;--o){var h=t[o],f=h.handler,d=e.routeInfos[o],p=null
if(p=h.names.length>0?o>=l?this.createParamHandlerInfo(f,h.names,c,d):this.getHandlerInfoForDynamicSegment(f,h.names,c,d,n,o):this.createParamHandlerInfo(f,h.names,c,d),i){p=p.becomeResolved(null,p.context)
var v=d&&d.context
h.names.length>0&&void 0!==d.context&&p.context===v&&(p.params=d&&d.params),p.context=v}var m=d;(o>=l||p.shouldSupercede(d))&&(l=Math.min(o,l),m=p),r&&!i&&(m=m.becomeResolved(null,m.context)),s.routeInfos.unshift(m)}if(c.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+n)
return r||this.invalidateChildren(s.routeInfos,l),u(s.queryParams,this.queryParams||{}),s},r.invalidateChildren=function(e,t){for(var n=t,r=e.length;n<r;++n){if(e[n].isResolved){var i=e[n],o=i.name,a=i.params,s=i.route,u=i.paramNames
e[n]=new T(this.router,o,u,a,s)}}},r.getHandlerInfoForDynamicSegment=function(e,t,n,r,i,o){var a
if(n.length>0){if(f(a=n[n.length-1]))return this.createParamHandlerInfo(e,t,n,r)
n.pop()}else{if(r&&r.name===e)return r
if(!this.preTransitionState)return r
var s=this.preTransitionState.routeInfos[o]
a=s&&s.context}return new O(this.router,e,t,a)},r.createParamHandlerInfo=function(e,t,n,r){for(var i={},o=t.length,a=[];o--;){var s=r&&e===r.name&&r.params||{},u=n[n.length-1],c=t[o]
f(u)?i[c]=""+n.pop():s.hasOwnProperty(c)?i[c]=s[c]:a.push(c)}if(a.length>0)throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+e+". Missing params: "+a)
return new T(this.router,e,t,i)},t}(I),M=function(){function e(t){var n=Error.call(this,t)
this.name="UnrecognizedURLError",this.message=t||"UnrecognizedURL",Error.captureStackTrace?Error.captureStackTrace(this,e):this.stack=n.stack}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}(),F=function(e){function t(t,n,r){var i
return(i=e.call(this,t,r)||this).url=n,i.preTransitionState=void 0,i}return(0,n.inheritsLoose)(t,e),t.prototype.applyToState=function(e){var t,n,r=new N,i=this.router.recognizer.recognize(this.url)
if(!i)throw new M(this.url)
var o=!1,a=this.url
function s(e){if(e&&e.inaccessibleByURL)throw new M(a)
return e}for(t=0,n=i.length;t<n;++t){var c=i[t],l=c.handler,h=[]
this.router.recognizer.hasRoute(l)&&(h=this.router.recognizer.handlersFor(l)[t].names)
var f=new T(this.router,l,h,c.params),d=f.route
d?s(d):f.routePromise=f.routePromise.then(s)
var p=e.routeInfos[t]
o||f.shouldSupercede(p)?(o=!0,r.routeInfos[t]=f):r.routeInfos[t]=p}return u(r.queryParams,i.queryParams),r},t}(I)
function L(e,t){if(e.length!==t.length)return!1
for(var n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1
return!0}function B(e,t){if(!e&&!t)return!0
if(!e&&t||e&&!t)return!1
var n=Object.keys(e),r=Object.keys(t)
if(n.length!==r.length)return!1
for(var i=0,o=n.length;i<o;++i){var a=n[i]
if(e[a]!==t[a])return!1}return!0}var j=function(){function e(e){this._lastQueryParams={},this.state=void 0,this.oldState=void 0,this.activeTransition=void 0,this.currentRouteInfos=void 0,this._changedQueryParams=void 0,this.currentSequence=0,this.log=e,this.recognizer=new i.default,this.reset()}var n=e.prototype
return n.map=function(e){this.recognizer.map(e,function(e,t){for(var n=t.length-1,r=!0;n>=0&&r;--n){var i=t[n],o=i.handler
e.add(t,{as:o}),r="/"===i.path||""===i.path||".index"===o.slice(-6)}})},n.hasRoute=function(e){return this.recognizer.hasRoute(e)},n.queryParamsTransition=function(e,t,n,r){var i=this
if(this.fireQueryParamDidChange(r,e),!t&&this.activeTransition)return this.activeTransition
var o=new x(this,void 0,void 0)
return o.queryParamsOnly=!0,n.queryParams=this.finalizeQueryParamChange(r.routeInfos,r.queryParams,o),o[b]=r.queryParams,this.toReadOnlyInfos(o,r),this.routeWillChange(o),o.promise=o.promise.then(function(e){return i._updateURL(o,n),i.didTransition(i.currentRouteInfos),i.toInfos(o,r.routeInfos,!0),i.routeDidChange(o),e},null,m("Transition complete")),o},n.transitionByIntent=function(e,t){try{return this.getTransitionByIntent(e,t)}catch(n){return new x(this,e,void 0,n,void 0)}},n.recognize=function(e){var t=new F(this,e),n=this.generateNewState(t)
if(null===n)return n
var r=E(n.routeInfos,n.queryParams)
return r[r.length-1]},n.recognizeAndLoad=function(e){var t=new F(this,e),n=this.generateNewState(t)
if(null===n)return r.Promise.reject("URL "+e+" was not recognized")
var i=new x(this,t,n,void 0)
return i.then(function(){var e=E(n.routeInfos,i[b],!0)
return e[e.length-1]})},n.generateNewState=function(e){try{return e.applyToState(this.state,!1)}catch(t){return null}},n.getTransitionByIntent=function(e,t){var n,r=this,i=!!this.activeTransition,o=i?this.activeTransition[g]:this.state,a=e.applyToState(o,t),s=p(o.queryParams,a.queryParams)
if(L(a.routeInfos,o.routeInfos)){if(s){var u=this.queryParamsTransition(s,i,o,a)
return u.queryParamsOnly=!0,u}return this.activeTransition||new x(this,void 0,void 0)}if(t){var c=new x(this,void 0,void 0)
return this.toReadOnlyInfos(c,a),this.setupContexts(a),this.routeWillChange(c),this.activeTransition}return n=new x(this,e,a,void 0,this.activeTransition),function(e,t){if(e.length!==t.length)return!1
for(var n=0,r=e.length;n<r;++n){if(e[n].name!==t[n].name)return!1
if(!B(e[n].params,t[n].params))return!1}return!0}(a.routeInfos,o.routeInfos)&&(n.queryParamsOnly=!0),this.toReadOnlyInfos(n,a),this.activeTransition&&this.activeTransition.redirect(n),this.activeTransition=n,n.promise=n.promise.then(function(e){return r.finalizeTransition(n,e)},null,m("Settle transition promise when transition is finalized")),i||this.notifyExistingHandlers(a,n),this.fireQueryParamDidChange(a,s),n},n.doTransition=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n[n.length-1],o={}
if(void 0!==i&&i.hasOwnProperty("queryParams")&&(o=n.pop().queryParams),void 0===e){h(this,"Updating query params")
var a=this.state.routeInfos
t=new P(this,a[a.length-1].name,void 0,[],o)}else"/"===e.charAt(0)?(h(this,"Attempting URL transition to "+e),t=new F(this,e)):(h(this,"Attempting transition to "+e),t=new P(this,e,void 0,n,o))
return this.transitionByIntent(t,r)},n.finalizeTransition=function(e,t){try{h(e.router,e.sequence,"Resolved all models on destination route; finalizing transition.")
var n=t.routeInfos
return this.setupContexts(t,e),e.isAborted?(this.state.routeInfos=this.currentRouteInfos,r.Promise.reject(w(e))):(this._updateURL(e,t),e.isActive=!1,this.activeTransition=void 0,this.triggerEvent(this.currentRouteInfos,!0,"didTransition",[]),this.didTransition(this.currentRouteInfos),this.toInfos(e,t.routeInfos,!0),this.routeDidChange(e),h(this,e.sequence,"TRANSITION COMPLETE."),n[n.length-1].route)}catch(a){if(!(a instanceof o)){var i=e[g].routeInfos
e.trigger(!0,"error",a,e,i[i.length-1].route),e.abort()}throw a}},n.setupContexts=function(e,t){var n,r,i,o=this.partitionRoutes(this.state,e)
for(n=0,r=o.exited.length;n<r;n++)delete(i=o.exited[n].route).context,void 0!==i&&(void 0!==i._internalReset&&i._internalReset(!0,t),void 0!==i.exit&&i.exit(t))
var a=this.oldState=this.state
this.state=e
var s=this.currentRouteInfos=o.unchanged.slice()
try{for(n=0,r=o.reset.length;n<r;n++)void 0!==(i=o.reset[n].route)&&void 0!==i._internalReset&&i._internalReset(!1,t)
for(n=0,r=o.updatedContext.length;n<r;n++)this.routeEnteredOrUpdated(s,o.updatedContext[n],!1,t)
for(n=0,r=o.entered.length;n<r;n++)this.routeEnteredOrUpdated(s,o.entered[n],!0,t)}catch(u){throw this.state=a,this.currentRouteInfos=a.routeInfos,u}this.state.queryParams=this.finalizeQueryParamChange(s,e.queryParams,t)},n.fireQueryParamDidChange=function(e,t){t&&(this._changedQueryParams=t.all,this.triggerEvent(e.routeInfos,!0,"queryParamsDidChange",[t.changed,t.all,t.removed]),this._changedQueryParams=void 0)},n.routeEnteredOrUpdated=function(e,t,n,r){var i=t.route,a=t.context
function s(i){if(n&&void 0!==i.enter&&i.enter(r),r&&r.isAborted)throw new o
if(i.context=a,void 0!==i.contextDidChange&&i.contextDidChange(),void 0!==i.setup&&i.setup(a,r),r&&r.isAborted)throw new o
return e.push(t),i}return void 0===i?t.routePromise=t.routePromise.then(s):s(i),!0},n.partitionRoutes=function(e,t){var n,r,i,o=e.routeInfos,a=t.routeInfos,s={updatedContext:[],exited:[],entered:[],unchanged:[],reset:[]},u=!1
for(r=0,i=a.length;r<i;r++){var c=o[r],l=a[r]
c&&c.route===l.route||(n=!0),n?(s.entered.push(l),c&&s.exited.unshift(c)):u||c.context!==l.context?(u=!0,s.updatedContext.push(l)):s.unchanged.push(c)}for(r=a.length,i=o.length;r<i;r++)s.exited.unshift(o[r])
return s.reset=s.updatedContext.slice(),s.reset.reverse(),s},n._updateURL=function(e,t){var n=e.urlMethod
if(n){for(var r=t.routeInfos,i=r[r.length-1].name,o={},a=r.length-1;a>=0;--a){var s=r[a]
u(o,s.params),s.route.inaccessibleByURL&&(n=null)}if(n){o.queryParams=e._visibleQueryParams||t.queryParams
var c=this.recognizer.generate(i,o),l=e.isCausedByInitialTransition,h="replace"===n&&!e.isCausedByAbortingTransition,f=e.queryParamsOnly&&"replace"===n,d="replace"===n&&e.isCausedByAbortingReplaceTransition
l||h||f||d?this.replaceURL(c):this.updateURL(c)}}},n.finalizeQueryParamChange=function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&null===t[r]&&delete t[r]
var i=[]
this.triggerEvent(e,!0,"finalizeQueryParamChange",[t,i,n]),n&&(n._visibleQueryParams={})
for(var o={},a=0,s=i.length;a<s;++a){var u=i[a]
o[u.key]=u.value,n&&!1!==u.visible&&(n._visibleQueryParams[u.key]=u.value)}return o},n.toReadOnlyInfos=function(e,t){var n=this.state.routeInfos
this.fromInfos(e,n),this.toInfos(e,t.routeInfos),this._lastQueryParams=t.queryParams},n.fromInfos=function(e,n){if(void 0!==e&&n.length>0){var r=E(n,(0,t.assign)({},this._lastQueryParams),!0)
e.from=r[r.length-1]||null}},n.toInfos=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
if(void 0!==e&&n.length>0){var i=E(n,(0,t.assign)({},e[b]),r)
e.to=i[i.length-1]||null}},n.notifyExistingHandlers=function(e,t){var n,r,i,o,a=this.state.routeInfos
for(r=a.length,n=0;n<r&&(i=a[n],(o=e.routeInfos[n])&&i.name===o.name);n++)o.isResolved
this.triggerEvent(a,!0,"willTransition",[t]),this.routeWillChange(t),this.willTransition(a,e.routeInfos,t)},n.reset=function(){this.state&&d(this.state.routeInfos.slice().reverse(),function(e){var t=e.route
return void 0!==t&&void 0!==t.exit&&t.exit(),!0}),this.oldState=void 0,this.state=new N,this.currentRouteInfos=void 0},n.handleURL=function(e){return"/"!==e.charAt(0)&&(e="/"+e),this.doTransition(e).method(null)},n.transitionTo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return"object"==typeof e?(n.push(e),this.doTransition(void 0,n,!1)):this.doTransition(e,n)},n.intermediateTransitionTo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return this.doTransition(e,n,!0)},n.refresh=function(e){var t=this.activeTransition,n=t?t[g]:this.state,r=n.routeInfos
void 0===e&&(e=r[0].route),h(this,"Starting a refresh transition")
var i=r[r.length-1].name,o=new P(this,i,e,[],this._changedQueryParams||n.queryParams),a=this.transitionByIntent(o,!1)
return t&&"replace"===t.urlMethod&&a.method(t.urlMethod),a},n.replaceWith=function(e){return this.doTransition(e).method("replace")},n.generate=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
for(var i=c(n),o=i[0],a=i[1],s=new P(this,e,void 0,o).applyToState(this.state,!1),l={},h=0,f=s.routeInfos.length;h<f;++h){u(l,s.routeInfos[h].serialize())}return l.queryParams=a,this.recognizer.generate(e,l)},n.applyIntent=function(e,t){var n=new P(this,e,void 0,t),r=this.activeTransition&&this.activeTransition[g]||this.state
return n.applyToState(r,!1)},n.isActiveIntent=function(e,t,n,r){var i,o=r||this.state,a=o.routeInfos
if(!a.length)return!1
var s=a[a.length-1].name,c=this.recognizer.handlersFor(s),l=0
for(i=c.length;l<i&&a[l].name!==e;++l);if(l===c.length)return!1
var h=new N
h.routeInfos=a.slice(0,l+1),c=c.slice(0,l+1)
var f=L(new P(this,s,void 0,t).applyToHandlers(h,c,s,!0,!0).routeInfos,h.routeInfos)
if(!n||!f)return f
var d={}
u(d,n)
var v=o.queryParams
for(var m in v)v.hasOwnProperty(m)&&d.hasOwnProperty(m)&&(d[m]=v[m])
return f&&!p(d,n)},n.isActive=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
var i=c(n)
return this.isActiveIntent(e,i[0],i[1])},n.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
this.triggerEvent(this.currentRouteInfos,!1,e,n)},e}()
e.default=j}),e("rsvp",["exports","node-module","ember-babel"],function(e,t,n){"use strict"
function r(e){var t=e._promiseCallbacks
return t||(t=e._promiseCallbacks={}),t}e.asap=Y,e.all=I,e.allSettled=D,e.race=P,e.hash=F,e.hashSettled=B,e.rethrow=j,e.defer=z,e.denodeify=T,e.configure=a,e.on=pe,e.off=ve,e.resolve=V,e.reject=q,e.map=W,e.filter=K,e.async=e.EventTarget=e.Promise=e.cast=e.default=void 0
var i={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){if("function"!=typeof t)throw new TypeError("Callback must be a function")
var n=r(this),i=n[e]
i||(i=n[e]=[]),-1===i.indexOf(t)&&i.push(t)},off:function(e,t){var n=r(this)
if(t){var i=n[e],o=i.indexOf(t);-1!==o&&i.splice(o,1)}else n[e]=[]},trigger:function(e,t,n){var i=r(this)[e]
if(i)for(var o=0;o<i.length;o++)(0,i[o])(t,n)}}
e.EventTarget=i
var o={instrument:!1}
function a(e,t){if(2!==arguments.length)return o[e]
o[e]=t}i.mixin(o)
var s=[]
function u(e,t,n){1===s.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:n&&n._id,label:t._label,timeStamp:Date.now(),error:o["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var e=0;e<s.length;e++){var t=s[e],n=t.payload
n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),o.trigger(t.name,t.payload)}s.length=0},50)}function c(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e
var n=new this(l,t)
return v(n,e),n}function l(){}var h=void 0,f=1,d=2
function p(e,t,n){t.constructor===e.constructor&&n===_&&e.constructor.resolve===c?function(e,t){t._state===f?g(e,t._result):t._state===d?(t._onError=null,y(e,t._result)):b(t,void 0,function(n){t===n?g(e,n):v(e,n)},function(t){return y(e,t)})}(e,t):"function"==typeof n?function(e,t,n){o.async(function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}(n,t,function(n){r||(r=!0,t===n?g(e,n):v(e,n))},function(t){r||(r=!0,y(e,t))},e._label)
!r&&i&&(r=!0,y(e,i))},e)}(e,t,n):g(e,t)}function v(e,t){if(e===t)g(e,t)
else if(i=typeof(r=t),null===r||"object"!==i&&"function"!==i)g(e,t)
else{var n
try{n=t.then}catch(o){return void y(e,o)}p(e,t,n)}var r,i}function m(e){e._onError&&e._onError(e._result),x(e)}function g(e,t){e._state===h&&(e._result=t,e._state=f,0===e._subscribers.length?o.instrument&&u("fulfilled",e):o.async(x,e))}function y(e,t){e._state===h&&(e._state=d,e._result=t,o.async(m,e))}function b(e,t,n,r){var i=e._subscribers,a=i.length
e._onError=null,i[a]=t,i[a+f]=n,i[a+d]=r,0===a&&e._state&&o.async(x,e)}function x(e){var t=e._subscribers,n=e._state
if(o.instrument&&u(n===f?"fulfilled":"rejected",e),0!==t.length){for(var r,i,a=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?w(n,r,i,a):i(a)
e._subscribers.length=0}}function w(e,t,n,r){var i,o,a="function"==typeof n,s=!0
if(a)try{i=n(r)}catch(u){s=!1,o=u}else i=r
t._state!==h||(i===t?y(t,new TypeError("A promises callback cannot return that same promise.")):!1===s?y(t,o):a?v(t,i):e===f?g(t,i):e===d&&y(t,i))}function _(e,t,n){var r=this._state
if(r===f&&!e||r===d&&!t)return o.instrument&&u("chained",this,this),this
this._onError=null
var i=new this.constructor(l,n),a=this._result
if(o.instrument&&u("chained",this,i),r===h)b(this,i,e,t)
else{var s=r===f?e:t
o.async(function(){return w(r,i,s,a)})}return i}var R=function(){function e(e,t,n,r){this._instanceConstructor=e,this.promise=new e(l,r),this._abortOnReject=n,this._isUsingOwnPromise=e===S,this._isUsingOwnResolve=e.resolve===c,this._init.apply(this,arguments)}var t=e.prototype
return t._init=function(e,t){var n=t.length||0
this.length=n,this._remaining=n,this._result=new Array(n),this._enumerate(t)},t._enumerate=function(e){for(var t=this.length,n=this.promise,r=0;n._state===h&&r<t;r++)this._eachEntry(e[r],r,!0)
this._checkFullfillment()},t._checkFullfillment=function(){if(0===this._remaining){var e=this._result
g(this.promise,e),this._result=null}},t._settleMaybeThenable=function(e,t,n){var r=this._instanceConstructor
if(this._isUsingOwnResolve){var i,o,a=!0
try{i=e.then}catch(u){a=!1,o=u}if(i===_&&e._state!==h)e._onError=null,this._settledAt(e._state,t,e._result,n)
else if("function"!=typeof i)this._settledAt(f,t,e,n)
else if(this._isUsingOwnPromise){var s=new r(l)
!1===a?y(s,o):(p(s,e,i),this._willSettleAt(s,t,n))}else this._willSettleAt(new r(function(t){return t(e)}),t,n)}else this._willSettleAt(r.resolve(e),t,n)},t._eachEntry=function(e,t,n){null!==e&&"object"==typeof e?this._settleMaybeThenable(e,t,n):this._setResultAt(f,t,e,n)},t._settledAt=function(e,t,n,r){var i=this.promise
i._state===h&&(this._abortOnReject&&e===d?y(i,n):(this._setResultAt(e,t,n,r),this._checkFullfillment()))},t._setResultAt=function(e,t,n,r){this._remaining--,this._result[t]=n},t._willSettleAt=function(e,t,n){var r=this
b(e,void 0,function(e){return r._settledAt(f,t,e,n)},function(e){return r._settledAt(d,t,e,n)})},e}()
function E(e,t,n){this._remaining--,this._result[t]=e===f?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}var C="rsvp_"+Date.now()+"-",k=0
var S=function(){function e(t,n){this._id=k++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],o.instrument&&u("created",this),l!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var n=!1
try{t(function(t){n||(n=!0,v(e,t))},function(t){n||(n=!0,y(e,t))})}catch(r){y(e,r)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var t=e.prototype
return t._onError=function(e){var t=this
o.after(function(){t._onError&&o.trigger("error",e,t._label)})},t.catch=function(e,t){return this.then(void 0,e,t)},t.finally=function(e,t){var n=this.constructor
return"function"==typeof e?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}()
function A(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function T(e,t){var n=function(){for(var n=arguments.length,r=new Array(n+1),i=!1,o=0;o<n;++o){var a=arguments[o]
if(!i){if(null!==a&&"object"==typeof a)if(a.constructor===S)i=!0
else try{i=a.then}catch(c){var s=new S(l)
return y(s,c),s}else i=!1
i&&!0!==i&&(a=A(i,a))}r[o]=a}var u=new S(l)
return r[n]=function(e,n){e?y(u,e):void 0===t?v(u,n):!0===t?v(u,function(e){for(var t=e.length,n=new Array(t-1),r=1;r<t;r++)n[r-1]=e[r]
return n}(arguments)):Array.isArray(t)?v(u,function(e,t){for(var n={},r=e.length,i=new Array(r),o=0;o<r;o++)i[o]=e[o]
for(var a=0;a<t.length;a++)n[t[a]]=i[a+1]
return n}(arguments,t)):v(u,n)},i?function(e,t,n,r){return S.all(t).then(function(t){return O(e,t,n,r)})}(u,r,e,this):O(u,r,e,this)}
return n.__proto__=e,n}function O(e,t,n,r){try{n.apply(r,t)}catch(i){y(e,i)}return e}function I(e,t){return S.all(e,t)}e.Promise=S,S.cast=c,S.all=function(e,t){return Array.isArray(e)?new R(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},S.race=function(e,t){var n=new this(l,t)
if(!Array.isArray(e))return y(n,new TypeError("Promise.race must be called with an array")),n
for(var r=0;n._state===h&&r<e.length;r++)b(this.resolve(e[r]),void 0,function(e){return v(n,e)},function(e){return y(n,e)})
return n},S.resolve=c,S.reject=function(e,t){var n=new this(l,t)
return y(n,e),n},S.prototype._guidKey=C,S.prototype.then=_
var N=function(e){function t(t,n,r){return e.call(this,t,n,!1,r)||this}return(0,n.inheritsLoose)(t,e),t}(R)
function D(e,t){return Array.isArray(e)?new N(S,e,t).promise:S.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function P(e,t){return S.race(e,t)}N.prototype._setResultAt=E
var M=function(e){function t(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0
return e.call(this,t,n,r,i)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r._init=function(e,t){this._result={},this._enumerate(t)},r._enumerate=function(e){var t,n,r=Object.keys(e),i=r.length,o=this.promise
this._remaining=i
for(var a=0;o._state===h&&a<i;a++)n=e[t=r[a]],this._eachEntry(n,t,!0)
this._checkFullfillment()},t}(R)
function F(e,t){return S.resolve(e,t).then(function(e){if(null===e||"object"!=typeof e)throw new TypeError("Promise.hash must be called with an object")
return new M(S,e,t).promise})}var L=function(e){function t(t,n,r){return e.call(this,t,n,!1,r)||this}return(0,n.inheritsLoose)(t,e),t}(M)
function B(e,t){return S.resolve(e,t).then(function(e){if(null===e||"object"!=typeof e)throw new TypeError("hashSettled must be called with an object")
return new L(S,e,!1,t).promise})}function j(e){throw setTimeout(function(){throw e}),e}function z(e){var t={resolve:void 0,reject:void 0}
return t.promise=new S(function(e,n){t.resolve=e,t.reject=n},e),t}L.prototype._setResultAt=E
var U=function(e){function t(t,n,r,i){return e.call(this,t,n,!0,i,r)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r._init=function(e,t,n,r,i){var o=t.length||0
this.length=o,this._remaining=o,this._result=new Array(o),this._mapFn=i,this._enumerate(t)},r._setResultAt=function(e,t,n,r){if(r)try{this._eachEntry(this._mapFn(n,t),t,!1)}catch(i){this._settledAt(d,t,i,!1)}else this._remaining--,this._result[t]=n},t}(R)
function W(e,t,n){return"function"!=typeof t?S.reject(new TypeError("map expects a function as a second argument"),n):S.resolve(e,n).then(function(e){if(!Array.isArray(e))throw new TypeError("map must be called with an array")
return new U(S,e,t,n).promise})}function V(e,t){return S.resolve(e,t)}function q(e,t){return S.reject(e,t)}var H={},G=function(e){function t(){return e.apply(this,arguments)||this}(0,n.inheritsLoose)(t,e)
var r=t.prototype
return r._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var e=this._result.filter(function(e){return e!==H})
g(this.promise,e),this._result=null}},r._setResultAt=function(e,t,n,r){if(r){this._result[t]=n
var i,o=!0
try{i=this._mapFn(n,t)}catch(a){o=!1,this._settledAt(d,t,a,!1)}o&&this._eachEntry(i,t,!1)}else this._remaining--,n||(this._result[t]=H)},t}(U)
function K(e,t,n){return"function"!=typeof t?S.reject(new TypeError("filter expects function as a second argument"),n):S.resolve(e,n).then(function(e){if(!Array.isArray(e))throw new TypeError("filter must be called with an array")
return new G(S,e,t,n).promise})}var $,X=0
function Y(e,t){le[X]=e,le[X+1]=t,2===(X+=2)&&re()}var Q="undefined"!=typeof window?window:void 0,J=Q||{},Z=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel
function ne(){return function(){return setTimeout(he,1)}}var re,ie,oe,ae,se,ue,ce,le=new Array(1e3)
function he(){for(var e=0;e<X;e+=2){(0,le[e])(le[e+1]),le[e]=void 0,le[e+1]=void 0}X=0}ee?(ue=process.nextTick,ce=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(ce)&&"0"===ce[1]&&"10"===ce[2]&&(ue=setImmediate),re=function(){return ue(he)}):Z?(oe=0,ae=new Z(he),se=document.createTextNode(""),ae.observe(se,{characterData:!0}),re=function(){return se.data=oe=++oe%2}):te?((ie=new MessageChannel).port1.onmessage=he,re=function(){return ie.port2.postMessage(0)}):re=void 0===Q&&"function"==typeof t.require?function(){try{var e=Function("return this")().require("vertx")
return void 0!==($=e.runOnLoop||e.runOnContext)?function(){$(he)}:ne()}catch(t){return ne()}}():ne(),o.async=Y,o.after=function(e){return setTimeout(e,0)}
var fe=V
e.cast=fe
var de=function(e,t){return o.async(e,t)}
function pe(){o.on.apply(o,arguments)}function ve(){o.off.apply(o,arguments)}if(e.async=de,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var me=window.__PROMISE_INSTRUMENTATION__
for(var ge in a("instrument",!0),me)me.hasOwnProperty(ge)&&pe(ge,me[ge])}var ye={asap:Y,cast:fe,Promise:S,EventTarget:i,all:I,allSettled:D,race:P,hash:F,hashSettled:B,rethrow:j,defer:z,denodeify:T,configure:a,on:pe,off:ve,resolve:V,reject:q,map:W,async:de,filter:K}
e.default=ye}),t("ember")}(),function(){define("jquery",[],function(){"use strict"
return{default:self.jQuery,__esModule:!0}})}(),Ember.Component.reopen({$:function(e){if(this.element)return e?jQuery(e,this.element):jQuery(this.element)}}),define("@ember-data/adapter/-private",["exports","require","ember-inflector"],function(e,t,n){"use strict"
var r="default"in t?t.default:t,i=/\r?\n/
var o=/\[\]$/
function a(e,t,n){void 0!==n&&(null===n&&(n=""),n="function"==typeof n?n():n,e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(n))}var s=null
if(t.has("fetch")){var u=r("fetch").default
s=function(){return u}}else{if("function"!=typeof fetch)throw new Error("cannot find the `fetch` module or the `fetch` global. Did you mean to install the `ember-fetch` addon?")
s=function(){return fetch}}var c=s,l=Ember.Mixin.create({buildURL:function(e,t,n,r,i){switch(r){case"findRecord":return this.urlForFindRecord(t,e,n)
case"findAll":return this.urlForFindAll(e,n)
case"query":return this.urlForQuery(i,e)
case"queryRecord":return this.urlForQueryRecord(i,e)
case"findMany":return this.urlForFindMany(t,e,n)
case"findHasMany":return this.urlForFindHasMany(t,e,n)
case"findBelongsTo":return this.urlForFindBelongsTo(t,e,n)
case"createRecord":return this.urlForCreateRecord(e,n)
case"updateRecord":return this.urlForUpdateRecord(t,e,n)
case"deleteRecord":return this.urlForDeleteRecord(t,e,n)
default:return this._buildURL(e,t)}},_buildURL:function(e,t){var n,r=[],i=Ember.get(this,"host"),o=this.urlPrefix()
return e&&(n=this.pathForType(e))&&r.push(n),t&&r.push(encodeURIComponent(t)),o&&r.unshift(o),r=r.join("/"),!i&&r&&"/"!==r.charAt(0)&&(r="/"+r),r},urlForFindRecord:function(e,t,n){return this._buildURL(t,e)},urlForFindAll:function(e,t){return this._buildURL(e)},urlForQuery:function(e,t){return this._buildURL(t)},urlForQueryRecord:function(e,t){return this._buildURL(t)},urlForFindMany:function(e,t,n){return this._buildURL(t)},urlForFindHasMany:function(e,t,n){return this._buildURL(t,e)},urlForFindBelongsTo:function(e,t,n){return this._buildURL(t,e)},urlForCreateRecord:function(e,t){return this._buildURL(e)},urlForUpdateRecord:function(e,t,n){return this._buildURL(t,e)},urlForDeleteRecord:function(e,t,n){return this._buildURL(t,e)},urlPrefix:function(e,t){var n=Ember.get(this,"host"),r=Ember.get(this,"namespace")
if(n&&"/"!==n||(n=""),e)return/^\/\//.test(e)||/http(s)?:\/\//.test(e)?e:"/"===e.charAt(0)?""+n+e:t+"/"+e
var i=[]
return n&&i.push(n),r&&i.push(r),i.join("/")},pathForType:function(e){var t=Ember.String.camelize(e)
return n.pluralize(t)}})
e.BuildURLMixin=l,e.determineBodyPromise=function(e,t){return e.text().then(function(n){var r=n
try{r=JSON.parse(n)}catch(o){if(!(o instanceof SyntaxError))throw o
var i=e.status
!e.ok||204!==i&&205!==i&&"HEAD"!==t.method?console.warn("This response was unable to be parsed as json.",n):r=void 0}return r})},e.fetch=c,e.parseResponseHeaders=function(e){var t=Object.create(null)
if(!e)return t
for(var n=e.split(i),r=0;r<n.length;r++){for(var o=n[r],a=0,s=!1;a<o.length;a++)if(58===o.charCodeAt(a)){s=!0
break}if(!1!==s){var u=o.substring(0,a).trim(),c=o.substring(a+1,o.length).trim()
c&&(t[u.toLowerCase()]=c,t[u]=c)}}return t},e.serializeQueryParams=function(e){var t=[]
return function e(n,r){var i,s,u
if(n)if(Array.isArray(r))for(i=0,s=r.length;i<s;i++)o.test(n)?a(t,n,r[i]):e(n+"["+("object"==typeof r[i]?i:"")+"]",r[i])
else if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(r))for(u in r)e(n+"["+u+"]",r[u])
else a(t,n,r)
else if(Array.isArray(r))for(i=0,s=r.length;i<s;i++)a(t,r[i].name,r[i].value)
else for(u in r)e(u,r[u])
return t}("",e).join("&").replace(/%20/g,"+")},Object.defineProperty(e,"__esModule",{value:!0})}),define("@ember-data/adapter/adapter",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({defaultSerializer:"-default",findRecord:null,findAll:null,query:null,queryRecord:null,generateIdForRecord:null,serialize:function(e,t){return e.serialize(t)},createRecord:null,updateRecord:null,deleteRecord:null,coalesceFindRequests:!0,findMany:null,groupRecordsForFindMany:function(e,t){return[t]},shouldReloadRecord:function(e,t){return!1},shouldReloadAll:function(e,t){return!t.length},shouldBackgroundReloadRecord:function(e,t){return!0},shouldBackgroundReloadAll:function(e,t){return!0}})
e.default=t}),define("@ember-data/adapter/error",["exports","@ember-data/store/-private"],function(e,t){"use strict"
function n(e,t){void 0===t&&(t="Adapter operation failed"),this.isAdapterError=!0
var n=Ember.Error.call(this,t)
n&&(this.stack=n.stack,this.description=n.description,this.fileName=n.fileName,this.lineNumber=n.lineNumber,this.message=n.message,this.name=n.name,this.number=n.number,this.code=n.code),this.errors=e||[{title:"Adapter Error",detail:t}]}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"errorsHashToArray",{enumerable:!0,get:function(){return t.errorsHashToArray}}),Object.defineProperty(e,"errorsArrayToHash",{enumerable:!0,get:function(){return t.errorsArrayToHash}}),e.ServerError=e.ConflictError=e.NotFoundError=e.ForbiddenError=e.UnauthorizedError=e.AbortError=e.TimeoutError=e.InvalidError=e.default=void 0
var r=n
function i(e){return function(t){var n=(void 0===t?{}:t).message
return o(e,n)}}function o(e,t){var n=function(n,r){e.call(this,n,r||t)}
return n.prototype=Object.create(e.prototype),n.extend=i(n),n}e.default=r,n.prototype=Object.create(Ember.Error.prototype),n.extend=i(n)
var a=o(n,"The adapter rejected the commit because it was invalid")
e.InvalidError=a
var s=o(n,"The adapter operation timed out")
e.TimeoutError=s
var u=o(n,"The adapter operation was aborted")
e.AbortError=u
var c=o(n,"The adapter operation is unauthorized")
e.UnauthorizedError=c
var l=o(n,"The adapter operation is forbidden")
e.ForbiddenError=l
var h=o(n,"The adapter could not find the resource")
e.NotFoundError=h
var f=o(n,"The adapter operation failed due to a conflict")
e.ConflictError=f
var d=o(n,"The adapter operation failed due to a server error")
e.ServerError=d}),define("@ember-data/adapter/index",["exports","@ember-data/adapter/-private","@ember-data/adapter/adapter"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BuildURLMixin",{enumerable:!0,get:function(){return t.BuildURLMixin}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("@ember-data/adapter/json-api",["exports","@ember-data/adapter/rest","ember-inflector"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=t.default.extend({defaultSerializer:"-json-api",ajaxOptions:function(e,t,n){void 0===n&&(n={}),n.contentType=n.contentType||"application/vnd.api+json"
var r=this._super(e,t,n)
return r.headers.Accept=r.headers.Accept||"application/vnd.api+json",r},coalesceFindRequests:!1,findMany:function(e,t,n,r){var i=this.buildURL(t.modelName,n,r,"findMany")
return this.ajax(i,"GET",{data:{filter:{id:n.join(",")}}})},pathForType:function(e){var t=Ember.String.dasherize(e)
return(0,n.pluralize)(t)},updateRecord:function(e,t,n){var r={}
e.serializerFor(t.modelName).serializeIntoHash(r,t,n,{includeId:!0})
var i=this.buildURL(t.modelName,n.id,n,"updateRecord")
return this.ajax(i,"PATCH",{data:r})}})
e.default=r}),define("@ember-data/adapter/rest",["exports","@ember-data/adapter","@ember-data/adapter/-private","@ember-data/adapter/error"],function(e,t,n,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.fetchOptions=f,e.default=void 0
var i=Ember.RSVP.Promise,o="undefined"!=typeof jQuery,a="undefined"!=typeof najax
function s(e,t,n,r){var o
try{o=e.handleResponse(r.status,r.headers,t,n)}catch(a){return i.reject(a)}return o&&o.isAdapterError?i.reject(o):o}function u(e,t,n,i){var o
if(i.errorThrown instanceof Error)o=i.errorThrown
else if("timeout"===i.textStatus)o=new r.TimeoutError
else if("abort"===i.textStatus||0===i.status)o=function(e,t){var n=e.method,i=e.url,o=e.errorThrown,a=t.status,s=[{title:"Adapter Error",detail:("Request failed: "+n+" "+i+" "+(o||"")).trim(),status:a}]
return new r.AbortError(s)}(n,i)
else try{o=e.handleResponse(i.status,i.headers,t||i.errorThrown,n)}catch(a){o=a}return o}function c(e){return{status:e.status,textStatus:e.textStatus,headers:h(e.headers)}}function l(e){return{status:e.status,textStatus:e.statusText,headers:(0,n.parseResponseHeaders)(e.getAllResponseHeaders())}}function h(e){var t={}
return e&&e.forEach(function(e,n){return t[n]=e}),t}function f(e,t){if(e.credentials="same-origin",e.data)if("GET"===e.method||"HEAD"===e.method){if(Object.keys(e.data).length){var r=e.url.indexOf("?")>-1?"&":"?"
e.url+=""+r+(0,n.serializeQueryParams)(e.data)}}else e.body=JSON.stringify(e.data)
return e}var d=t.default.extend(t.BuildURLMixin,{defaultSerializer:"-rest",fastboot:Ember.computed(function(){return Ember.getOwner(this).lookup("service:fastboot")}),useFetch:Ember.computed(function(){var e=Ember.getOwner(this).resolveRegistration("config:environment")
return!!(e&&e.EmberENV&&!1===e.EmberENV._JQUERY_INTEGRATION)||!a&&!o}),sortQueryParams:function(e){var t=Object.keys(e),n=t.length
if(n<2)return e
for(var r={},i=t.sort(),o=0;o<n;o++)r[i[o]]=e[i[o]]
return r},coalesceFindRequests:!1,findRecord:function(e,t,n,r){var i=this.buildURL(t.modelName,n,r,"findRecord"),o=this.buildQuery(r)
return this.ajax(i,"GET",{data:o})},findAll:function(e,t,n,r){var i=this.buildQuery(r),o=this.buildURL(t.modelName,null,r,"findAll")
return n&&(i.since=n),this.ajax(o,"GET",{data:i})},query:function(e,t,n){var r=this.buildURL(t.modelName,null,null,"query",n)
return this.sortQueryParams&&(n=this.sortQueryParams(n)),this.ajax(r,"GET",{data:n})},queryRecord:function(e,t,n){var r=this.buildURL(t.modelName,null,null,"queryRecord",n)
return this.sortQueryParams&&(n=this.sortQueryParams(n)),this.ajax(r,"GET",{data:n})},findMany:function(e,t,n,r){var i=this.buildURL(t.modelName,n,r,"findMany")
return this.ajax(i,"GET",{data:{ids:n}})},findHasMany:function(e,t,n,r){var i=t.id,o=t.modelName
return n=this.urlPrefix(n,this.buildURL(o,i,t,"findHasMany")),this.ajax(n,"GET")},findBelongsTo:function(e,t,n,r){var i=t.id,o=t.modelName
return n=this.urlPrefix(n,this.buildURL(o,i,t,"findBelongsTo")),this.ajax(n,"GET")},createRecord:function(e,t,n){var r={},i=e.serializerFor(t.modelName),o=this.buildURL(t.modelName,null,n,"createRecord")
return i.serializeIntoHash(r,t,n,{includeId:!0}),this.ajax(o,"POST",{data:r})},updateRecord:function(e,t,n){var r={}
e.serializerFor(t.modelName).serializeIntoHash(r,t,n)
var i=n.id,o=this.buildURL(t.modelName,i,n,"updateRecord")
return this.ajax(o,"PUT",{data:r})},deleteRecord:function(e,t,n){var r=n.id
return this.ajax(this.buildURL(t.modelName,r,n,"deleteRecord"),"DELETE")},_stripIDFromURL:function(e,t){var n,r,i=this.buildURL(t.modelName,t.id,t).split("/"),o=i[i.length-1],a=t.id
return decodeURIComponent(o)===a?i[i.length-1]="":(n=o,r="?id="+a,("function"!=typeof String.prototype.endsWith?-1!==n.indexOf(r,n.length-r.length):n.endsWith(r))&&(i[i.length-1]=o.substring(0,o.length-a.length-1))),i.join("/")},maxURLLength:2048,groupRecordsForFindMany:function(e,t){var n=new Map,r=this,i=this.maxURLLength
t.forEach(function(t){var i=r._stripIDFromURL(e,t)
n.has(i)||n.set(i,[]),n.get(i).push(t)})
var o=[]
return n.forEach(function(t,n){(function(t,n,i){var o=0,a=r._stripIDFromURL(e,t[0]),s=[[]]
return t.forEach(function(e){var t=encodeURIComponent(e.id).length+i
a.length+o+t>=n&&(o=0,s.push([])),o+=t
var r=s.length-1
s[r].push(e)}),s})(t,i,"&ids%5B%5D=".length).forEach(function(e){return o.push(e)})}),o},handleResponse:function(e,t,n,i){if(this.isSuccess(e,t,n))return n
if(this.isInvalid(e,t,n))return new r.InvalidError(n.errors)
var o=this.normalizeErrorResponse(e,t,n),a=this.generatedDetailedMessage(e,t,n,i)
switch(e){case 401:return new r.UnauthorizedError(o,a)
case 403:return new r.ForbiddenError(o,a)
case 404:return new r.NotFoundError(o,a)
case 409:return new r.ConflictError(o,a)
default:if(e>=500)return new r.ServerError(o,a)}return new r.default(o,a)},isSuccess:function(e,t,n){return e>=200&&e<300||304===e},isInvalid:function(e,t,n){return 422===e},ajax:function(e,t,r){var o=this,a=Ember.get(this,"useFetch"),h={url:e,method:t},f=o.ajaxOptions(e,t,r)
return a?this._fetchRequest(f).then(function(e){return Ember.RSVP.hash({response:e,payload:(0,n.determineBodyPromise)(e,h)})}).then(function(e){var t=e.response,n=e.payload
if(t.ok)return function(e,t,n,r){var i=c(n)
return s(e,t,r,i)}(o,n,t,h)
throw function(e,t,n,r,i){var o=c(n)
return o.errorThrown=r,u(e,t,i,o)}(o,n,t,null,h)}):new i(function(e,t){f.success=function(t,n,r){var i=function(e,t,n,r){var i=l(n)
return s(e,t,r,i)}(o,t,r,h)
Ember.run.join(null,e,i)},f.error=function(e,n,r){var i=function(e,t,n,r){var i=l(t)
i.errorThrown=n
var o=e.parseErrorResponse(t.responseText)
return u(e,o,r,i)}(o,e,r,h)
Ember.run.join(null,t,i)},o._ajax(f)},"DS: RESTAdapter#ajax "+t+" to "+e)},_ajaxRequest:function(e){jQuery.ajax(e)},_najaxRequest:function(e){if(!a)throw new Error("najax does not seem to be defined in your app. Did you override it via `addOrOverrideSandboxGlobals` in the fastboot server?")
najax(e)},_fetchRequest:function(e){var t=(0,n.fetch)()
if(t)return t(e.url,e)
throw new Error("cannot find the `fetch` module or the `fetch` global. Did you mean to install the `ember-fetch` addon?")},_ajax:function(e){Ember.get(this,"useFetch")?this._fetchRequest(e):Ember.get(this,"fastboot.isFastBoot")?this._najaxRequest(e):this._ajaxRequest(e)},ajaxOptions:function(e,t,n){n=Ember.assign({url:e,method:t,type:t},n)
var r=Ember.get(this,"headers")
if(void 0!==r?n.headers=Ember.assign({},n.headers,r):n.headers||(n.headers={}),n.data&&"GET"!==n.type){var i=n.contentType||"application/json; charset=utf-8"
n.headers["content-type"]=i}return(n=Ember.get(this,"useFetch")?f(n,this):function(e,t){e.dataType="json",e.context=t,e.data&&"GET"!==e.type&&(e.data=JSON.stringify(e.data),e.contentType="application/json; charset=utf-8")
return e.beforeSend=function(t){Object.keys(e.headers).forEach(function(n){return t.setRequestHeader(n,e.headers[n])})},e}(n,this)).url=this._ajaxURL(n.url),n},_ajaxURL:function(e){if(Ember.get(this,"fastboot.isFastBoot")){var t=Ember.get(this,"fastboot.request.protocol"),n=Ember.get(this,"fastboot.request.host")
if(/^\/\//.test(e))return""+t+e
if(!/^https?:\/\//.test(e))try{return t+"//"+n+e}catch(r){throw new Error("You are using Ember Data with no host defined in your adapter. This will attempt to use the host of the FastBoot request, which is not configured for the current host of this request. Please set the hostWhitelist property for in your environment.js. FastBoot Error: "+r.message)}}return e},parseErrorResponse:function(e){var t=e
try{t=JSON.parse(e)}catch(n){}return t},normalizeErrorResponse:function(e,t,n){return n&&"object"==typeof n&&n.errors?n.errors:[{status:""+e,title:"The backend responded with an error",detail:""+n}]},generatedDetailedMessage:function(e,t,n,r){var i,o=t["content-type"]||"Empty Content-Type"
return i="text/html"===o&&n.length>250?"[Omitted Lengthy HTML]":n,["Ember Data Request "+(r.method+" "+r.url)+" returned a "+e,"Payload ("+o+")",i].join("\n")},buildQuery:function(e){var t={}
if(e){var n=e.include
n&&(t.include=n)}return t}})
e.default=d}),define("@ember-data/adapter/version",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default="3.12.1"}),define("@ember-data/canary-features/default-features",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={SAMPLE_FEATURE_FLAG:null,RECORD_DATA_ERRORS:null,RECORD_DATA_STATE:null}}),define("@ember-data/canary-features/index",["exports","@ember-data/canary-features/default-features"],function(e,t){"use strict"
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RECORD_DATA_STATE=e.RECORD_DATA_ERRORS=e.SAMPLE_FEATURE_FLAG=e.FEATURES=void 0
var r="object"===("undefined"==typeof EmberDataENV?"undefined":n(EmberDataENV))&&null!==EmberDataENV?EmberDataENV:{}
function i(e){return!(!r.ENABLE_OPTIONAL_FEATURES||null!==e)||e}var o=Ember.assign({},t.default,r.FEATURES)
e.FEATURES=o
var a=i(o.SAMPLE_FEATURE_FLAG)
e.SAMPLE_FEATURE_FLAG=a
var s=i(o.RECORD_DATA_ERRORS)
e.RECORD_DATA_ERRORS=s
var u=i(o.RECORD_DATA_STATE)
e.RECORD_DATA_STATE=u}),define("@ember-data/model/-private",["exports","@ember-data/store/-private","@ember-data/canary-features","@ember-data/store"],function(e,t,n,r){"use strict"
e.attr=function(e,r){"object"==typeof e?(r=e,e=void 0):r=r||{}
var i={type:e,isAttribute:!0,kind:"attribute",options:r}
return Ember.computed({get:function(e){var n=this._internalModel
return function(e,n){return t.recordDataFor(e).hasAttr(n)}(n,e)?n.getAttributeValue(e):function(e,t,n){return"function"==typeof t.defaultValue?t.defaultValue.apply(null,arguments):t.defaultValue}(this,r,e)},set:function(e,t){if(n.RECORD_DATA_ERRORS&&this._internalModel._recordData.getAttr(e)!==t){var r=this.get("errors")
r.get(e)&&r.remove(e),this._markInvalidRequestAsClean()}return this._internalModel.setDirtyAttribute(e,t)}}).meta(i)},e.belongsTo=function(e,t){var n,i
"object"==typeof e?(n=e,i=void 0):(n=t,i=e),"string"==typeof i&&(i=r.normalizeModelName(i))
var o={type:i,isRelationship:!0,options:n=n||{},kind:"belongsTo",name:"Belongs To",key:null}
return Ember.computed({get:function(e){return this._internalModel.getBelongsTo(e)},set:function(e,t){return this._internalModel.setDirtyBelongsTo(e,t),this._internalModel.getBelongsTo(e)}}).meta(o)},e.hasMany=function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{},"string"==typeof e&&(e=r.normalizeModelName(e))
var n={type:e,options:t,isRelationship:!0,kind:"hasMany",name:"Has Many",key:null}
return Ember.computed({get:function(e){return this._internalModel.getHasMany(e)},set:function(e,t){var n=this._internalModel
return n.setDirtyHasMany(e,t),n.getHasMany(e)}}).meta(n)},Object.defineProperty(e,"__esModule",{value:!0})}),define("@ember-data/model/index",["exports","@ember-data/model/-private","@ember-data/store/-private"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"attr",{enumerable:!0,get:function(){return t.attr}}),Object.defineProperty(e,"belongsTo",{enumerable:!0,get:function(){return t.belongsTo}}),Object.defineProperty(e,"hasMany",{enumerable:!0,get:function(){return t.hasMany}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.Model}})}),define("@ember-data/model/version",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default="3.12.1"}),define("@ember-data/serializer/-private",["exports"],function(e){"use strict"
var t=Ember.Mixin.create({normalize:function(e,t,n){var r=this._super(e,t,n)
return this._extractEmbeddedRecords(this,this.store,e,r)},keyForRelationship:function(e,t,n){return"serialize"===n&&this.hasSerializeRecordsOption(e)||"deserialize"===n&&this.hasDeserializeRecordsOption(e)?this.keyForAttribute(e,n):this._super(e,t,n)||e},serializeBelongsTo:function(e,t,n){var r=n.key
if(this.noSerializeOptionSpecified(r))this._super(e,t,n)
else{var i=this.hasSerializeIdsOption(r),o=this.hasSerializeRecordsOption(r),a=e.belongsTo(r)
if(i){var s=this._getMappedKey(n.key,e.type)
s===n.key&&this.keyForRelationship&&(s=this.keyForRelationship(n.key,n.kind,"serialize")),a?(t[s]=a.id,n.options.polymorphic&&this.serializePolymorphicType(e,t,n)):t[s]=null}else o&&this._serializeEmbeddedBelongsTo(e,t,n)}},_serializeEmbeddedBelongsTo:function(e,t,n){var r=e.belongsTo(n.key),i=this._getMappedKey(n.key,e.type)
i===n.key&&this.keyForRelationship&&(i=this.keyForRelationship(n.key,n.kind,"serialize")),r?(t[i]=r.serialize({includeId:!0}),this.removeEmbeddedForeignKey(e,r,n,t[i]),n.options.polymorphic&&this.serializePolymorphicType(e,t,n)):t[i]=null},serializeHasMany:function(e,t,n){var r=n.key
if(this.noSerializeOptionSpecified(r))this._super(e,t,n)
else if(this.hasSerializeIdsOption(r)){var i=this._getMappedKey(n.key,e.type)
i===n.key&&this.keyForRelationship&&(i=this.keyForRelationship(n.key,n.kind,"serialize")),t[i]=e.hasMany(r,{ids:!0})}else this.hasSerializeRecordsOption(r)?this._serializeEmbeddedHasMany(e,t,n):this.hasSerializeIdsAndTypesOption(r)&&this._serializeHasManyAsIdsAndTypes(e,t,n)},_serializeHasManyAsIdsAndTypes:function(e,t,n){var r=this.keyForAttribute(n.key,"serialize"),i=e.hasMany(n.key)
t[r]=Ember.A(i).map(function(e){return{id:e.id,type:e.modelName}})},_serializeEmbeddedHasMany:function(e,t,n){var r=this._getMappedKey(n.key,e.type)
r===n.key&&this.keyForRelationship&&(r=this.keyForRelationship(n.key,n.kind,"serialize")),t[r]=this._generateSerializedHasMany(e,n)},_generateSerializedHasMany:function(e,t){for(var n=e.hasMany(t.key),r=Ember.A(n),i=new Array(r.length),o=0;o<r.length;o++){var a=r[o],s=a.serialize({includeId:!0})
this.removeEmbeddedForeignKey(e,a,t,s),i[o]=s}return i},removeEmbeddedForeignKey:function(e,t,n,r){if("belongsTo"===n.kind){var i=e.type.inverseFor(n.key,this.store)
if(i){var o=i.name,a=this.store.serializerFor(t.modelName).keyForRelationship(o,i.kind,"deserialize")
a&&delete r[a]}}},hasEmbeddedAlwaysOption:function(e){var t=this.attrsOption(e)
return t&&"always"===t.embedded},hasSerializeRecordsOption:function(e){var t=this.hasEmbeddedAlwaysOption(e),n=this.attrsOption(e)
return t||n&&"records"===n.serialize},hasSerializeIdsOption:function(e){var t=this.attrsOption(e)
return t&&("ids"===t.serialize||"id"===t.serialize)},hasSerializeIdsAndTypesOption:function(e){var t=this.attrsOption(e)
return t&&("ids-and-types"===t.serialize||"id-and-type"===t.serialize)},noSerializeOptionSpecified:function(e){var t=this.attrsOption(e)
return!(t&&(t.serialize||t.embedded))},hasDeserializeRecordsOption:function(e){var t=this.hasEmbeddedAlwaysOption(e),n=this.attrsOption(e)
return t||n&&"records"===n.deserialize},attrsOption:function(e){var t=this.get("attrs")
return t&&(t[Ember.String.camelize(e)]||t[e])},_extractEmbeddedRecords:function(e,t,n,r){var i=this
return n.eachRelationship(function(n,o){e.hasDeserializeRecordsOption(n)&&("hasMany"===o.kind&&i._extractEmbeddedHasMany(t,n,r,o),"belongsTo"===o.kind&&i._extractEmbeddedBelongsTo(t,n,r,o))}),r},_extractEmbeddedHasMany:function(e,t,n,r){var i=Ember.get(n,"data.relationships."+t+".data")
if(i){for(var o=new Array(i.length),a=0;a<i.length;a++){var s,u=i[a],c=this._normalizeEmbeddedRelationship(e,r,u),l=c.data,h=c.included
if(n.included=n.included||[],n.included.push(l),h)(s=n.included).push.apply(s,h)
o[a]={id:l.id,type:l.type}}var f={data:o}
Ember.set(n,"data.relationships."+t,f)}},_extractEmbeddedBelongsTo:function(e,t,n,r){var i=Ember.get(n,"data.relationships."+t+".data")
if(i){var o,a=this._normalizeEmbeddedRelationship(e,r,i),s=a.data,u=a.included
if(n.included=n.included||[],n.included.push(s),u)(o=n.included).push.apply(o,u)
var c={data:{id:s.id,type:s.type}}
Ember.set(n,"data.relationships."+t,c)}},_normalizeEmbeddedRelationship:function(e,t,n){var r=t.type
t.options.polymorphic&&(r=n.type)
var i=e.modelFor(r)
return e.serializerFor(r).normalize(i,n,null)},isEmbeddedRecordsMixin:!0})
var n=Ember.Object.extend({serialize:null,deserialize:null}),r=n.extend({deserialize:function(e,t){if(Ember.isNone(e)&&!0===t.allowNull)return null
var n=typeof e
return"boolean"===n?e:"string"===n?/^(true|t|1)$/i.test(e):"number"===n&&1===e},serialize:function(e,t){return Ember.isNone(e)&&!0===t.allowNull?null:Boolean(e)}}),i=n.extend({deserialize:function(e){var t=typeof e
if("string"===t){var n=e.indexOf("+")
return-1!==n&&e.length-5===n?(n+=3,new Date(e.slice(0,n)+":"+e.slice(n))):new Date(e)}return"number"===t?new Date(e):null==e?e:null},serialize:function(e){return e instanceof Date&&!isNaN(e)?e.toISOString():null}})
function o(e){return e==e&&e!==1/0&&e!==-1/0}var a=n.extend({deserialize:function(e){var t
return""===e||null==e?null:o(t=Number(e))?t:null},serialize:function(e){var t
return""===e||null==e?null:o(t=Number(e))?t:null}}),s=n.extend({deserialize:function(e){return Ember.isNone(e)?null:String(e)},serialize:function(e){return Ember.isNone(e)?null:String(e)}})
e.BooleanTransform=r,e.DateTransform=i,e.EmbeddedRecordsMixin=t,e.NumberTransform=a,e.StringTransform=s,e.Transform=n,e.modelHasAttributeOrRelationshipNamedType=function(e){return Ember.get(e,"attributes").has("type")||Ember.get(e,"relationshipsByName").has("type")},Object.defineProperty(e,"__esModule",{value:!0})}),define("@ember-data/serializer/index",["exports","@ember-data/serializer/serializer"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("@ember-data/serializer/json-api",["exports","ember-inflector","@ember-data/serializer/json","@ember-data/store"],function(e,t,n,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=n.default.extend({_normalizeDocumentHelper:function(e){if("object"===Ember.typeOf(e.data))e.data=this._normalizeResourceHelper(e.data)
else if(Array.isArray(e.data)){for(var t=new Array(e.data.length),n=0;n<e.data.length;n++){var r=e.data[n]
t[n]=this._normalizeResourceHelper(r)}e.data=t}if(Array.isArray(e.included)){for(var i=new Array,o=0;o<e.included.length;o++){var a=e.included[o],s=this._normalizeResourceHelper(a)
null!==s&&i.push(s)}e.included=i}return e},_normalizeRelationshipDataHelper:function(e){return e.type=this.modelNameFromPayloadKey(e.type),e},_normalizeResourceHelper:function(e){var t
if(t=this.modelNameFromPayloadKey(e.type),"modelNameFromPayloadKey",!this.store._hasModelFor(t))return null
var n=this.store.modelFor(t)
return this.store.serializerFor(t).normalize(n,e).data},pushPayload:function(e,t){var n=this._normalizeDocumentHelper(t)
e.push(n)},_normalizeResponse:function(e,t,n,r,i,o){return this._normalizeDocumentHelper(n)},normalizeQueryRecordResponse:function(){var e=this._super.apply(this,arguments)
return e},extractAttributes:function(e,t){var n=this,r={}
return t.attributes&&e.eachAttribute(function(e){var i=n.keyForAttribute(e,"deserialize")
void 0!==t.attributes[i]&&(r[e]=t.attributes[i])}),r},extractRelationship:function(e){if("object"===Ember.typeOf(e.data)&&(e.data=this._normalizeRelationshipDataHelper(e.data)),Array.isArray(e.data)){for(var t=new Array(e.data.length),n=0;n<e.data.length;n++){var r=e.data[n]
t[n]=this._normalizeRelationshipDataHelper(r)}e.data=t}return e},extractRelationships:function(e,t){var n=this,r={}
return t.relationships&&e.eachRelationship(function(e,i){var o=n.keyForRelationship(e,i.kind,"deserialize")
if(void 0!==t.relationships[o]){var a=t.relationships[o]
r[e]=n.extractRelationship(a)}}),r},_extractType:function(e,t){return this.modelNameFromPayloadKey(t.type)},modelNameFromPayloadKey:function(e){return(0,t.singularize)((0,r.normalizeModelName)(e))},payloadKeyFromModelName:function(e){return(0,t.pluralize)(e)},normalize:function(e,t){t.attributes&&this.normalizeUsingDeclaredMapping(e,t.attributes),t.relationships&&this.normalizeUsingDeclaredMapping(e,t.relationships)
var n={id:this.extractId(e,t),type:this._extractType(e,t),attributes:this.extractAttributes(e,t),relationships:this.extractRelationships(e,t)}
return this.applyTransforms(e,n.attributes),{data:n}},keyForAttribute:function(e,t){return Ember.String.dasherize(e)},keyForRelationship:function(e,t,n){return Ember.String.dasherize(e)},serialize:function(e,t){var n=this._super.apply(this,arguments)
return n.type=this.payloadKeyFromModelName(e.modelName),{data:n}},serializeAttribute:function(e,t,n,r){var i=r.type
if(this._canSerialize(n)){t.attributes=t.attributes||{}
var o=e.attr(n)
if(i)o=this.transformFor(i).serialize(o,r.options)
var a=this._getMappedKey(n,e.type)
a===n&&(a=this.keyForAttribute(n,"serialize")),t.attributes[a]=o}},serializeBelongsTo:function(e,t,n){var r=n.key
if(this._canSerialize(r)){var i=e.belongsTo(r),o=i&&i.record&&!i.record.get("isNew")
if(null===i||o){t.relationships=t.relationships||{}
var a=this._getMappedKey(r,e.type)
a===r&&(a=this.keyForRelationship(r,"belongsTo","serialize"))
var s=null
if(i)s={type:this.payloadKeyFromModelName(i.modelName),id:i.id}
t.relationships[a]={data:s}}}},serializeHasMany:function(e,t,n){var r=n.key
if(this.shouldSerializeHasMany(e,r,n)){var i=e.hasMany(r)
if(void 0!==i){t.relationships=t.relationships||{}
var o=this._getMappedKey(r,e.type)
o===r&&this.keyForRelationship&&(o=this.keyForRelationship(r,"hasMany","serialize"))
for(var a=i.filter(function(e){return e.record&&!e.record.get("isNew")}),s=new Array(a.length),u=0;u<a.length;u++){var c=i[u],l=this.payloadKeyFromModelName(c.modelName)
s[u]={type:l,id:c.id}}t.relationships[o]={data:s}}}}})
var o=i
e.default=o}),define("@ember-data/serializer/json",["exports","@ember-data/serializer","@ember-data/adapter/error","@ember-data/serializer/-private","@ember-data/store","@ember-data/store/-private"],function(e,t,n,r,i,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.assign||Ember.merge,s=t.default.extend({primaryKey:"id",mergedProperties:["attrs"],applyTransforms:function(e,t){var n=this,r=Ember.get(e,"attributes")
return e.eachTransformedAttribute(function(e,i){if(void 0!==t[e]){var o=n.transformFor(i),a=r.get(e)
t[e]=o.deserialize(t[e],a.options)}}),t},normalizeResponse:function(e,t,n,r,i){switch(i){case"findRecord":return this.normalizeFindRecordResponse.apply(this,arguments)
case"queryRecord":return this.normalizeQueryRecordResponse.apply(this,arguments)
case"findAll":return this.normalizeFindAllResponse.apply(this,arguments)
case"findBelongsTo":return this.normalizeFindBelongsToResponse.apply(this,arguments)
case"findHasMany":return this.normalizeFindHasManyResponse.apply(this,arguments)
case"findMany":return this.normalizeFindManyResponse.apply(this,arguments)
case"query":return this.normalizeQueryResponse.apply(this,arguments)
case"createRecord":return this.normalizeCreateRecordResponse.apply(this,arguments)
case"deleteRecord":return this.normalizeDeleteRecordResponse.apply(this,arguments)
case"updateRecord":return this.normalizeUpdateRecordResponse.apply(this,arguments)}},normalizeFindRecordResponse:function(e,t,n,r,i){return this.normalizeSingleResponse.apply(this,arguments)},normalizeQueryRecordResponse:function(e,t,n,r,i){return this.normalizeSingleResponse.apply(this,arguments)},normalizeFindAllResponse:function(e,t,n,r,i){return this.normalizeArrayResponse.apply(this,arguments)},normalizeFindBelongsToResponse:function(e,t,n,r,i){return this.normalizeSingleResponse.apply(this,arguments)},normalizeFindHasManyResponse:function(e,t,n,r,i){return this.normalizeArrayResponse.apply(this,arguments)},normalizeFindManyResponse:function(e,t,n,r,i){return this.normalizeArrayResponse.apply(this,arguments)},normalizeQueryResponse:function(e,t,n,r,i){return this.normalizeArrayResponse.apply(this,arguments)},normalizeCreateRecordResponse:function(e,t,n,r,i){return this.normalizeSaveResponse.apply(this,arguments)},normalizeDeleteRecordResponse:function(e,t,n,r,i){return this.normalizeSaveResponse.apply(this,arguments)},normalizeUpdateRecordResponse:function(e,t,n,r,i){return this.normalizeSaveResponse.apply(this,arguments)},normalizeSaveResponse:function(e,t,n,r,i){return this.normalizeSingleResponse.apply(this,arguments)},normalizeSingleResponse:function(e,t,n,r,i){return this._normalizeResponse(e,t,n,r,i,!0)},normalizeArrayResponse:function(e,t,n,r,i){return this._normalizeResponse(e,t,n,r,i,!1)},_normalizeResponse:function(e,t,n,r,i,o){var a={data:null,included:[]},s=this.extractMeta(e,t,n)
if(s&&(a.meta=s),o){var u=this.normalize(t,n),c=u.data,l=u.included
a.data=c,l&&(a.included=l)}else{for(var h=new Array(n.length),f=0,d=n.length;f<d;f++){var p,v=n[f],m=this.normalize(t,v),g=m.data,y=m.included
if(y)(p=a.included).push.apply(p,y)
h[f]=g}a.data=h}return a},normalize:function(e,t){var n=null
return t&&(this.normalizeUsingDeclaredMapping(e,t),"object"===Ember.typeOf(t.links)&&this.normalizeUsingDeclaredMapping(e,t.links),n={id:this.extractId(e,t),type:e.modelName,attributes:this.extractAttributes(e,t),relationships:this.extractRelationships(e,t)},this.applyTransforms(e,n.attributes)),{data:n}},extractId:function(e,t){var n=t[Ember.get(this,"primaryKey")]
return(0,o.coerceId)(n)},extractAttributes:function(e,t){var n,r=this,i={}
return e.eachAttribute(function(e){n=r.keyForAttribute(e,"deserialize"),void 0!==t[n]&&(i[e]=t[n])}),i},extractRelationship:function(e,t){if(Ember.isNone(t))return null
if("object"===Ember.typeOf(t)){t.id&&(t.id=(0,o.coerceId)(t.id))
var n=this.store.modelFor(e)
return t.type&&!(0,r.modelHasAttributeOrRelationshipNamedType)(n)&&(t.type=this.modelNameFromPayloadKey(t.type)),t}return{id:(0,o.coerceId)(t),type:e}},extractPolymorphicRelationship:function(e,t,n){return this.extractRelationship(e,t)},extractRelationships:function(e,t){var n=this,r={}
return e.eachRelationship(function(e,i){var o=null,a=n.keyForRelationship(e,i.kind,"deserialize")
if(void 0!==t[a]){var s=null,u=t[a]
if("belongsTo"===i.kind)s=i.options.polymorphic?n.extractPolymorphicRelationship(i.type,u,{key:e,resourceHash:t,relationshipMeta:i}):n.extractRelationship(i.type,u)
else if("hasMany"===i.kind&&!Ember.isNone(u))if(s=new Array(u.length),i.options.polymorphic)for(var c=0,l=u.length;c<l;c++){var h=u[c]
s[c]=n.extractPolymorphicRelationship(i.type,h,{key:e,resourceHash:t,relationshipMeta:i})}else for(var f=0,d=u.length;f<d;f++){var p=u[f]
s[f]=n.extractRelationship(i.type,p)}o={data:s}}var v=n.keyForLink(e,i.kind)
if(t.links&&void 0!==t.links[v]){var m=t.links[v];(o=o||{}).links={related:m}}o&&(r[e]=o)}),r},modelNameFromPayloadKey:function(e){return(0,i.normalizeModelName)(e)},normalizeRelationships:function(e,t){var n,r=this
this.keyForRelationship&&e.eachRelationship(function(e,i){e!==(n=r.keyForRelationship(e,i.kind,"deserialize"))&&void 0!==t[n]&&(t[e]=t[n],delete t[n])})},normalizeUsingDeclaredMapping:function(e,t){var n,r,i=Ember.get(this,"attrs")
if(i)for(var o in i)n=r=this._getMappedKey(o,e),void 0!==t[r]&&(Ember.get(e,"attributes").has(o)&&(n=this.keyForAttribute(o)),Ember.get(e,"relationshipsByName").has(o)&&(n=this.keyForRelationship(o)),r!==n&&(t[n]=t[r],delete t[r]))},_getMappedKey:function(e,t){var n,r=Ember.get(this,"attrs")
return r&&r[e]&&((n=r[e]).key&&(n=n.key),"string"==typeof n&&(e=n)),e},_canSerialize:function(e){var t=Ember.get(this,"attrs")
return!t||!t[e]||!1!==t[e].serialize},_mustSerialize:function(e){var t=Ember.get(this,"attrs")
return t&&t[e]&&!0===t[e].serialize},shouldSerializeHasMany:function(e,t,n){var r=e.type.determineRelationshipType(n,this.store)
return!!this._mustSerialize(t)||this._canSerialize(t)&&("manyToNone"===r||"manyToMany"===r)},serialize:function(e,t){var n=this,r={}
if(t&&t.includeId){var i=e.id
i&&(r[Ember.get(this,"primaryKey")]=i)}return e.eachAttribute(function(t,i){n.serializeAttribute(e,r,t,i)}),e.eachRelationship(function(t,i){"belongsTo"===i.kind?n.serializeBelongsTo(e,r,i):"hasMany"===i.kind&&n.serializeHasMany(e,r,i)}),r},serializeIntoHash:function(e,t,n,r){a(e,this.serialize(n,r))},serializeAttribute:function(e,t,n,r){if(this._canSerialize(n)){var i=r.type,o=e.attr(n)
if(i)o=this.transformFor(i).serialize(o,r.options)
var a=this._getMappedKey(n,e.type)
a===n&&this.keyForAttribute&&(a=this.keyForAttribute(n,"serialize")),t[a]=o}},serializeBelongsTo:function(e,t,n){var r=n.key
if(this._canSerialize(r)){var i=e.belongsTo(r,{id:!0}),o=this._getMappedKey(r,e.type)
o===r&&this.keyForRelationship&&(o=this.keyForRelationship(r,"belongsTo","serialize")),Ember.isNone(i)?t[o]=null:t[o]=i,n.options.polymorphic&&this.serializePolymorphicType(e,t,n)}},serializeHasMany:function(e,t,n){var r=n.key
if(this.shouldSerializeHasMany(e,r,n)){var i=e.hasMany(r,{ids:!0})
if(void 0!==i){var o=this._getMappedKey(r,e.type)
o===r&&this.keyForRelationship&&(o=this.keyForRelationship(r,"hasMany","serialize")),t[o]=i}}},serializePolymorphicType:function(){},extractMeta:function(e,t,n){if(n&&void 0!==n.meta){var r=n.meta
return delete n.meta,r}},extractErrors:function(e,t,r,i){var o=this
return r&&"object"==typeof r&&r.errors&&(r=(0,n.errorsArrayToHash)(r.errors),this.normalizeUsingDeclaredMapping(t,r),t.eachAttribute(function(e){var t=o.keyForAttribute(e,"deserialize")
t!==e&&void 0!==r[t]&&(r[e]=r[t],delete r[t])}),t.eachRelationship(function(e){var t=o.keyForRelationship(e,"deserialize")
t!==e&&void 0!==r[t]&&(r[e]=r[t],delete r[t])})),r},keyForAttribute:function(e,t){return e},keyForRelationship:function(e,t,n){return e},keyForLink:function(e,t){return e},transformFor:function(e,t){var n=Ember.getOwner(this).lookup("transform:"+e)
return n}})
e.default=s}),define("@ember-data/serializer/rest",["exports","ember-inflector","@ember-data/serializer/json","@ember-data/store/-private","@ember-data/serializer/-private","@ember-data/store"],function(e,t,n,r,i,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"EmbeddedRecordsMixin",{enumerable:!0,get:function(){return i.EmbeddedRecordsMixin}}),e.default=void 0
var a=n.default.extend({keyForPolymorphicType:function(e,t,n){return this.keyForRelationship(e)+"Type"},_normalizeArray:function(e,t,n,r){var i=this,o={data:[],included:[]},a=e.modelFor(t),s=e.serializerFor(t)
return Ember.makeArray(n).forEach(function(t){var n,u=i._normalizePolymorphicRecord(e,t,r,a,s),c=u.data,l=u.included;(o.data.push(c),l)&&(n=o.included).push.apply(n,l)}),o},_normalizePolymorphicRecord:function(e,t,n,r,o){var a=o,s=r
if(!(0,i.modelHasAttributeOrRelationshipNamedType)(r)&&t.type){var u=this.modelNameFromPayloadKey(t.type)
e._hasModelFor(u)&&(a=e.serializerFor(u),s=e.modelFor(u))}return a.normalize(s,t,n)},_normalizeResponse:function(e,t,n,i,o,a){var s={data:null,included:[]},u=this.extractMeta(e,t,n)
u&&(s.meta=u)
for(var c=Object.keys(n),l=0,h=c.length;l<h;l++){var f=c[l],d=f,p=!1
"_"===f.charAt(0)&&(p=!0,d=f.substr(1))
var v=this.modelNameFromPayloadKey(d)
if(e._hasModelFor(v)){var m=!p&&this.isPrimaryType(e,v,t),g=n[f]
if(null!==g)if(!m||Array.isArray(g)){var y,b,x=this._normalizeArray(e,v,g,f),w=x.data,_=x.included
if(_)(y=s.included).push.apply(y,_)
if(a)w.forEach(function(e){var t=m&&(0,r.coerceId)(e.id)===i
m&&!i&&!s.data||t?s.data=e:s.included.push(e)})
else if(m)s.data=w
else if(w)(b=s.included).push.apply(b,w)}else{var R,E=this._normalizePolymorphicRecord(e,g,f,t,this),C=E.data,k=E.included
s.data=C,k&&(R=s.included).push.apply(R,k)}}}return s},isPrimaryType:function(e,t,n){return e.modelFor(t)===n},pushPayload:function(e,t){var n={data:[],included:[]}
for(var r in t){var i=this.modelNameFromPayloadKey(r)
if(e._hasModelFor(i)){var o=e.modelFor(i),a=e.serializerFor(o.modelName)
Ember.makeArray(t[r]).forEach(function(e){var t,i=a.normalize(o,e,r),s=i.data,u=i.included;(n.data.push(s),u)&&(t=n.included).push.apply(t,u)})}}e.push(n)},modelNameFromPayloadKey:function(e){return(0,t.singularize)((0,o.normalizeModelName)(e))},serialize:function(e,t){return this._super.apply(this,arguments)},serializeIntoHash:function(e,t,n,r){e[this.payloadKeyFromModelName(t.modelName)]=this.serialize(n,r)},payloadKeyFromModelName:function(e){return Ember.String.camelize(e)},serializePolymorphicType:function(e,t,n){var r=n.key,i=this.keyForPolymorphicType(r,n.type,"serialize"),o=e.belongsTo(r)
Ember.isNone(o)?t[i]=null:t[i]=Ember.String.camelize(o.modelName)},extractPolymorphicRelationship:function(e,t,n){var r=n.key,i=n.resourceHash,o=n.relationshipMeta.options.polymorphic,a=this.keyForPolymorphicType(r,e,"deserialize")
return o&&void 0!==i[a]&&"object"!=typeof t?{id:t,type:this.modelNameFromPayloadKey(i[a])}:this._super.apply(this,arguments)}})
var s=a
e.default=s}),define("@ember-data/serializer/serializer",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({normalizeResponse:null,serialize:null,normalize:function(e,t){return t}})
e.default=t}),define("@ember-data/serializer/transform",["exports","@ember-data/serializer/-private"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.Transform
e.default=n}),define("@ember-data/serializer/version",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default="3.12.1"}),define("@ember-data/store/-private",["exports","ember-inflector","@ember/ordered-set","@ember-data/canary-features","@ember-data/adapter/error"],function(e,t,n,r,i){"use strict"
n=n&&n.hasOwnProperty("default")?n.default:n
var o=Ember.Evented,a=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin,{meta:Ember.computed.reads("content.meta")}),s=Ember.ObjectProxy.extend(Ember.PromiseProxyMixin)
function u(e,t){return s.create({promise:Ember.RSVP.Promise.resolve(e,t)})}function c(e,t){return a.create({promise:Ember.RSVP.Promise.resolve(e,t)})}var l=s.extend({meta:Ember.computed(function(){}),reload:function(e){var t=this,n=this._belongsToState,r=n.key,i=n.store,o=n.originatingInternalModel
return i.reloadBelongsTo(this,o,r,e).then(function(){return t})}})
function h(e){return function(){var t
return(t=Ember.get(this,"content"))[e].apply(t,arguments)}}var f=a.extend({reload:function(e){return this.set("promise",this.get("content").reload(e)),this},createRecord:h("createRecord"),on:h("on"),one:h("one"),trigger:h("trigger"),off:h("off"),has:h("has")}),d=/^\/?data\/(attributes|relationships)\/(.*)/,p=/^\/?data/,v="base"
function m(e){var t=[]
return Ember.isPresent(e)&&Object.keys(e).forEach(function(n){for(var r=Ember.makeArray(e[n]),i=0;i<r.length;i++){var o="Invalid Attribute",a="/data/attributes/"+n
n===v&&(o="Invalid Document",a="/data"),t.push({title:o,detail:r[i],source:{pointer:a}})}}),t}function g(e){var t={}
return Ember.isPresent(e)&&e.forEach(function(e){if(e.source&&e.source.pointer){var n=e.source.pointer.match(d)
n?n=n[2]:-1!==e.source.pointer.search(p)&&(n=v),n&&(t[n]=t[n]||[],t[n].push(e.detail||e.title))}}),t}var y=Ember.ArrayProxy.extend(o,{_registerHandlers:function(e,t){this._registeredHandlers={becameInvalid:e,becameValid:t}},errorsByAttributeName:Ember.computed(function(){return new Map}),errorsFor:function(e){var t=Ember.get(this,"errorsByAttributeName")
return t.has(e)||t.set(e,Ember.A()),t.get(e)},messages:Ember.computed.mapBy("content","message"),content:Ember.computed(function(){return Ember.A()}),unknownProperty:function(e){var t=this.errorsFor(e)
if(0!==t.length)return t},isEmpty:Ember.computed.not("length").readOnly(),add:function(e,t){var n=Ember.get(this,"isEmpty")
this._add(e,t),n&&!Ember.get(this,"isEmpty")&&this._registeredHandlers&&this._registeredHandlers.becameInvalid()},_add:function(e,t){t=this._findOrCreateMessages(e,t),this.addObjects(t),this.errorsFor(e).addObjects(t),this.notifyPropertyChange(e)},_findOrCreateMessages:function(e,t){for(var n=this.errorsFor(e),r=Ember.makeArray(t),i=new Array(r.length),o=0;o<r.length;o++){var a=r[o],s=n.findBy("message",a)
i[o]=s||{attribute:e,message:a}}return i},remove:function(e){Ember.get(this,"isEmpty")||(this._remove(e),Ember.get(this,"isEmpty")&&this._registeredHandlers&&this._registeredHandlers.becameValid())},_remove:function(e){if(!Ember.get(this,"isEmpty")){var t=this.rejectBy("attribute",e)
Ember.get(this,"content").setObjects(t),Ember.get(this,"errorsByAttributeName").delete(e),this.notifyPropertyChange(e),this.notifyPropertyChange("length")}},clear:function(){Ember.get(this,"isEmpty")||(this._clear(),this._registeredHandlers&&this._registeredHandlers.becameValid())},_clear:function(){var e=this
if(!Ember.get(this,"isEmpty")){var t=Ember.get(this,"errorsByAttributeName"),n=[]
t.forEach(function(e,t){n.push(t)}),t.clear(),n.forEach(function(t){e.notifyPropertyChange(t)}),Ember.ArrayProxy.prototype.clear.call(this)}},has:function(e){return this.errorsFor(e).length>0}})
function b(e){return Ember.String.dasherize(e)}var x=("undefined"!=typeof Symbol?Symbol:function(e){return"__"+e+Math.floor(Math.random()*Date.now())+"__"})("DEBUG-ts-brand")
function w(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){var n
return n=b(n=e.type||e.key),"hasMany"===e.kind&&(n=t.singularize(n)),n}var R=function(){function e(e){this.meta=e,this[x]=void 0,this._type="",this.__inverseKey="",this.__inverseIsAsync=!0,this.__hasCalculatedInverse=!1,this.parentModelName=void 0,this.parentModelName=e.parentModelName}var t,n,r,i=e.prototype
return i._inverseKey=function(e,t){return!1===this.__hasCalculatedInverse&&this._calculateInverse(e,t),this.__inverseKey},i._inverseIsAsync=function(e,t){return!1===this.__hasCalculatedInverse&&this._calculateInverse(e,t),this.__inverseIsAsync},i._calculateInverse=function(e,t){var n,r
this.__hasCalculatedInverse=!0
var i,o,a,s,u=null
i=this.meta,(o=i.options)&&null===o.inverse||(u=t.inverseFor(this.key,e)),u?(n=u.name,r=void 0===(s=(a=u).options&&a.options.async)||s):(n=null,r=!1),this.__inverseKey=n,this.__inverseIsAsync=r},t=e,(n=[{key:"key",get:function(){return this.meta.key}},{key:"kind",get:function(){return this.meta.kind}},{key:"type",get:function(){return this._type?this._type:(this._type=_(this.meta),this._type)}},{key:"options",get:function(){return this.meta.options}},{key:"name",get:function(){return this.meta.name}}])&&w(t.prototype,n),r&&w(t,r),e}()
var E=Ember.computed(function(){var e=new Map
return Ember.get(this,"relationshipsByName").forEach(function(t){var n=t.type
e.has(n)||e.set(n,[]),e.get(n).push(t)}),e}).readOnly(),C=Ember.computed(function(){this.modelName
var e=Ember.A()
return this.eachComputedProperty(function(t,n){if(n.isRelationship){n.key=t
var r=_(n)
e.includes(r)||e.push(r)}}),e}).readOnly(),k=Ember.computed(function(){var e=Object.create(null),t=this.modelName
return this.eachComputedProperty(function(n,r){r.isRelationship&&(r.key=n,r.name=n,r.parentModelName=t,e[n]=function(e){return new R(e)}(r))}),e}),S=Ember.computed(function(){for(var e=new Map,t=Ember.get(this,"relationshipsObject"),n=Object.keys(t),r=0;r<n.length;r++){var i=t[n[r]]
e.set(i.key,i)}return e}).readOnly()
function A(e){return(e._internalModel||e.internalModel||e)._recordData||null}function T(e){return(A(e)||e)._relationships}function O(e,t){return T(e).get(t)}function I(e,t){t.isDirty?e.send("becomeDirty"):e.send("propertyWasReset"),e.updateRecordArrays()}var N={initialState:"uncommitted",isDirty:!0,uncommitted:{didSetProperty:I,loadingData:function(){},propertyWasReset:function(e,t){e.hasChangedAttributes()||e.send("rolledBack")},pushedData:function(e){e.hasChangedAttributes()||e.transitionTo("loaded.saved")},becomeDirty:function(){},willCommit:function(e){e.transitionTo("inFlight")},reloadRecord:function(e,t){var n=t.resolve,r=t.options
n(e.store._reloadRecord(e,r))},rolledBack:function(e){e.transitionTo("loaded.saved"),e.triggerLater("rolledBack")},becameInvalid:function(e){e.transitionTo("invalid")},rollback:function(e){e.rollbackAttributes(),e.triggerLater("ready")}},inFlight:{isSaving:!0,didSetProperty:I,becomeDirty:function(){},pushedData:function(){},unloadRecord:B,willCommit:function(){},didCommit:function(e){e.transitionTo("saved"),e.send("invokeLifecycleCallbacks",this.dirtyType)},rolledBack:function(e){e.triggerLater("rolledBack")},becameInvalid:function(e){e.transitionTo("invalid"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)}},invalid:{isValid:!1,deleteRecord:function(e){e.transitionTo("deleted.uncommitted")},didSetProperty:function(e,t){e.removeErrorMessageFromAttribute(t.name),I(e,t),e.hasErrors()||this.becameValid(e)},becameInvalid:function(){},becomeDirty:function(){},pushedData:function(){},willCommit:function(e){e.clearErrorMessages(),e.transitionTo("inFlight")},rolledBack:function(e){e.clearErrorMessages(),e.transitionTo("loaded.saved"),e.triggerLater("ready")},becameValid:function(e){e.transitionTo("uncommitted")},invokeLifecycleCallbacks:function(e){e.triggerLater("becameInvalid",e)}}}
function D(e,t){for(var n in t)e[n]=t[n]
return e}function P(e){return D(function e(t){var n,r={}
for(var i in t)n=t[i],r[i]=n&&"object"==typeof n?e(n):n
return r}(N),e)}var M=P({dirtyType:"created",isNew:!0})
M.invalid.rolledBack=function(e){e.transitionTo("deleted.saved"),e.triggerLater("rolledBack")},M.uncommitted.rolledBack=function(e){e.transitionTo("deleted.saved"),e.triggerLater("rolledBack")}
var F=P({dirtyType:"updated"})
function L(e){e.transitionTo("deleted.saved"),e.send("invokeLifecycleCallbacks")}function B(e){}M.uncommitted.deleteRecord=L,M.invalid.deleteRecord=L,M.uncommitted.rollback=function(e){N.uncommitted.rollback.apply(this,arguments),e.transitionTo("deleted.saved")},M.uncommitted.pushedData=function(e){e.transitionTo("loaded.updated.uncommitted"),e.triggerLater("didLoad")},M.uncommitted.propertyWasReset=function(){},F.invalid.becameValid=function(e){e.transitionTo("loaded.saved")},F.inFlight.unloadRecord=B,F.uncommitted.deleteRecord=function(e){e.transitionTo("deleted.uncommitted")},F.invalid.rolledBack=function(e){e.clearErrorMessages(),e.transitionTo("loaded.saved"),e.triggerLater("rolledBack")}
var j=function e(t,n,r){for(var i in(t=D(n?Object.create(n):{},t)).parentState=n,t.stateName=r,t)t.hasOwnProperty(i)&&"parentState"!==i&&"stateName"!==i&&"object"==typeof t[i]&&(t[i]=e(t[i],t,r+"."+i))
return t}({isEmpty:!1,isLoading:!1,isLoaded:!1,isDirty:!1,isSaving:!1,isDeleted:!1,isNew:!1,isValid:!0,rolledBack:function(){},unloadRecord:function(e){},propertyWasReset:function(){},empty:{isEmpty:!0,loadingData:function(e,t){e._promiseProxy=t,e.transitionTo("loading")},loadedData:function(e){e.transitionTo("loaded.created.uncommitted"),e.triggerLater("ready")},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),e.triggerLater("ready")}},loading:{isLoading:!0,exit:function(e){e._promiseProxy=null},pushedData:function(e){e.transitionTo("loaded.saved"),e.triggerLater("didLoad"),e.triggerLater("ready"),e.didCleanError()},becameError:function(e){e.triggerLater("becameError",e)},notFound:function(e){e.transitionTo("empty")}},loaded:{initialState:"saved",isLoaded:!0,loadingData:function(){},saved:{setup:function(e){e.hasChangedAttributes()&&e.adapterDidDirty()},didSetProperty:I,pushedData:function(){},becomeDirty:function(e){e.transitionTo("updated.uncommitted")},willCommit:function(e){e.transitionTo("updated.inFlight")},reloadRecord:function(e,t){var n=t.resolve,r=t.options
n(e.store._reloadRecord(e,r))},deleteRecord:function(e){e.transitionTo("deleted.uncommitted")},unloadRecord:function(e){},didCommit:function(){},notFound:function(){}},created:M,updated:F},deleted:{initialState:"uncommitted",dirtyType:"deleted",isDeleted:!0,isLoaded:!0,isDirty:!0,setup:function(e){e.updateRecordArrays()},uncommitted:{willCommit:function(e){e.transitionTo("inFlight")},rollback:function(e){e.rollbackAttributes(),e.triggerLater("ready")},pushedData:function(){},becomeDirty:function(){},deleteRecord:function(){},rolledBack:function(e){e.transitionTo("loaded.saved"),e.triggerLater("ready"),e.triggerLater("rolledBack")}},inFlight:{isSaving:!0,unloadRecord:B,willCommit:function(){},didCommit:function(e){e.transitionTo("saved"),e.send("invokeLifecycleCallbacks")},becameError:function(e){e.transitionTo("uncommitted"),e.triggerLater("becameError",e)},becameInvalid:function(e){e.transitionTo("invalid"),e.triggerLater("becameInvalid",e)}},saved:{isDirty:!1,setup:function(e){e.removeFromInverseRelationships()},invokeLifecycleCallbacks:function(e){e.triggerLater("didDelete",e),e.triggerLater("didCommit",e)},willCommit:function(){},didCommit:function(){},pushedData:function(){}},invalid:{isValid:!1,didSetProperty:function(e,t){e.removeErrorMessageFromAttribute(t.name),I(e,t),e.hasErrors()||this.becameValid(e)},becameInvalid:function(){},becomeDirty:function(){},deleteRecord:function(){},willCommit:function(){},rolledBack:function(e){e.clearErrorMessages(),e.transitionTo("loaded.saved"),e.triggerLater("ready")},becameValid:function(e){e.transitionTo("uncommitted")}}},invokeLifecycleCallbacks:function(e,t){"created"===t?e.triggerLater("didCreate",e):e.triggerLater("didUpdate",e),e.triggerLater("didCommit",e)}},null,"root")
function z(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(e,t){void 0===t&&(t={}),this.__attributes=null,this._belongsToRelationships=Object.create(null),this._belongsToIds=Object.create(null),this._hasManyRelationships=Object.create(null),this._hasManyIds=Object.create(null),this._internalModel=e,e.hasRecord&&this._attributes,this.id=e.id,this.adapterOptions=t.adapterOptions,this.include=t.include,this.modelName=e.modelName,this._changedAttributes=e.changedAttributes()}var t,n,r,i=e.prototype
return i.attr=function(e){if(e in this._attributes)return this._attributes[e]
throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no attribute named '"+e+"' defined.")},i.attributes=function(){return Ember.assign({},this._attributes)},i.changedAttributes=function(){for(var e=Object.create(null),t=Object.keys(this._changedAttributes),n=0,r=t.length;n<r;n++){var i=t[n]
e[i]=this._changedAttributes[i].slice()}return e},i.belongsTo=function(e,t){var n,r,i=t&&t.id,o=this._internalModel.store
if(i&&e in this._belongsToIds)return this._belongsToIds[e]
if(!i&&e in this._belongsToRelationships)return this._belongsToRelationships[e]
var a=o._relationshipMetaFor(this.modelName,null,e)
if(!a||"belongsTo"!==a.kind)throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no belongsTo relationship named '"+e+"' defined.")
var s=O(this,e).getData(),u=s&&s.data
return n=u&&o._internalModelForResource(u),s&&void 0!==s.data&&(r=n&&!n.isDeleted()?i?Ember.get(n,"id"):n.createSnapshot():null),i?this._belongsToIds[e]=r:this._belongsToRelationships[e]=r,r},i.hasMany=function(e,t){var n,r=t&&t.ids
if(r&&e in this._hasManyIds)return this._hasManyIds[e]
if(!r&&e in this._hasManyRelationships)return this._hasManyRelationships[e]
var i=this._internalModel.store,o=i._relationshipMetaFor(this.modelName,null,e)
if(!o||"hasMany"!==o.kind)throw new Ember.Error("Model '"+Ember.inspect(this.record)+"' has no hasMany relationship named '"+e+"' defined.")
var a=O(this,e).getData()
return a.data&&(n=[],a.data.forEach(function(e){var t=i._internalModelForResource(e)
t.isDeleted()||(r?n.push(e.id):n.push(t.createSnapshot()))})),r?this._hasManyIds[e]=n:this._hasManyRelationships[e]=n,n},i.eachAttribute=function(e,t){this.record.eachAttribute(e,t)},i.eachRelationship=function(e,t){this.record.eachRelationship(e,t)},i.serialize=function(e){return this.record.store.serializerFor(this.modelName).serialize(this,e)},t=e,(n=[{key:"record",get:function(){return this._internalModel.getRecord()}},{key:"_attributes",get:function(){var e=this.__attributes
if(null===e){var t=this.record
e=this.__attributes=Object.create(null),t.eachAttribute(function(n){return e[n]=Ember.get(t,n)})}return e}},{key:"type",get:function(){return this._internalModel.modelClass}}])&&z(t.prototype,n),r&&z(t,r),e}()
var W=function(e){var t,n
function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.create=function(){return new this},r.prototype.addWithIndex=function(e,t){var n=Ember.guidFor(e),r=this.presenceSet,i=this.list
if(!0!==r[n])return r[n]=!0,null==t?i.push(e):i.splice(t,0,e),this.size+=1,this},r}(n)
function V(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return function(){return e.apply(void 0,n)}}function q(e,t){var n=e.finally(function(){t()||(n._subscribers.length=0)})
return n}function H(e){return!(Ember.get(e,"isDestroyed")||Ember.get(e,"isDestroying"))}function G(e,t,n){return q(Ember.RSVP.resolve(e,n).then(function(t){return e}),function(){return H(t)})}function K(e,t){for(var n=e.length,r=t.length,i=Math.min(n,r),o=null,a=0;a<i;a++)if(e[a]!==t[a]){o=a
break}null===o&&r!==n&&(o=i)
var s=0,u=0
if(null!==o){for(var c=i-o,l=1;l<=i;l++)if(e[n-l]!==t[r-l]){c=l-1
break}s=r-c-o,u=n-c-o}return{firstChangeIndex:o,addedCount:s,removedCount:u}}var $=Ember.Object.extend(Ember.MutableArray,o,{_inverseIsAsync:!1,isLoaded:!1,init:function(){this._super.apply(this,arguments),this.isLoaded=this.isLoaded||!1,this.length=0,this.promise=null,this.meta=this.meta||null,this.isPolymorphic=this.isPolymorphic||!1,this.currentState=[],this.flushCanonical(this.initialState,!1)},anyUnloaded:function(){return!!this.currentState.filter(function(e){return e._isDematerializing||!e.isLoaded()})[0]},removeUnloadedInternalModel:function(){for(var e=0;e<this.currentState.length;++e){var t=this.currentState[e]
if(t._isDematerializing||!t.isLoaded())return this.arrayContentWillChange(e,1,0),this.currentState.splice(e,1),this.set("length",this.currentState.length),this.arrayContentDidChange(e,1,0),!0}return!1},objectAt:function(e){var t=this.currentState[e]
if(void 0!==t)return t.getRecord()},flushCanonical:function(e,t){if(void 0===t&&(t=!0),H(this)){var n=K(this.currentState,e)
null!==n.firstChangeIndex&&(this.arrayContentWillChange(n.firstChangeIndex,n.removedCount,n.addedCount),this.set("length",e.length),this.currentState=e.slice(),this.arrayContentDidChange(n.firstChangeIndex,n.removedCount,n.addedCount),t&&n.addedCount>0&&this.internalModel.manyArrayRecordAdded(this.get("key")))}},replace:function(e,t,n){var r
t>0&&(r=this.currentState.slice(e,e+t),this.get("recordData").removeFromHasMany(this.get("key"),r.map(function(e){return A(e)}))),n&&this.get("recordData").addToHasMany(this.get("key"),n.map(function(e){return A(e)}),e),this.retrieveLatest()},retrieveLatest:function(){var e=this.get("recordData").getHasMany(this.get("key")),t=this.store._getHasManyByJsonApiResource(e)
e.meta&&this.set("meta",e.meta),this.flushCanonical(t,!0)},reload:function(e){return this.get("store").reloadManyArray(this,this.get("internalModel"),this.get("key"),e)},save:function(){var e=this,t="DS: ManyArray#save "+Ember.get(this,"type"),n=Ember.RSVP.all(this.invoke("save"),t).then(function(){return e},null,"DS: ManyArray#save return ManyArray")
return a.create({promise:n})},createRecord:function(e){var t=Ember.get(this,"store"),n=Ember.get(this,"type"),r=t.createRecord(n.modelName,e)
return this.pushObject(r),r}})
function X(e){return e&&e.links&&e.links.related}var Y=function(){function e(e,t){this.store=e,this.internalModel=t,this.recordData=void 0,this.recordData=A(this)}var t=e.prototype
return t._resource=function(){},t.remoteType=function(){return X(this._resource())?"link":"id"},t.link=function(){var e=null,t=this._resource()
return X(t)&&t.links&&(e=t.links.related),e},t.meta=function(){var e=null,t=this._resource()
return t&&t.meta&&"object"==typeof t.meta&&(e=t.meta),e},e}()
function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(e){var t,n
function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
return(t=e.call.apply(e,[this].concat(r))||this).type=t.internalModel.modelName,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n
var i,o,a,s=r.prototype
return s.id=function(){return this._id},s.remoteType=function(){return"identity"},s.push=function(e){var t=this
return Ember.RSVP.resolve(e).then(function(e){return t.store.push(e)})},s.value=function(){return this.internalModel.hasRecord?this.internalModel.getRecord():null},s.load=function(){if(null!==this._id)return this.store.findRecord(this.type,this._id)
throw new Error("Unable to fetch record of type "+this.type+" without an id")},s.reload=function(){var e=this.value()
return e?e.reload():this.load()},i=r,(o=[{key:"_id",get:function(){return this.internalModel.id}}])&&Q(i.prototype,o),a&&Q(i,a),r}(Y)
var Z=function(e){var t,n
function r(t,n,r,i){var o
return(o=e.call(this,t,n)||this).key=i,o.belongsToRelationship=r,o.type=r.relationshipMeta.type,o.parent=n.recordReference,o.parentInternalModel=n,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n
var i=r.prototype
return i.id=function(){var e=null,t=this._resource()
return t&&t.data&&t.data.id&&(e=t.data.id),e},i._resource=function(){return this.recordData.getBelongsTo(this.key)},i.push=function(e){var t=this
return Ember.RSVP.resolve(e).then(function(e){var n
return n=e instanceof Ce?e:t.store.push(e),t.belongsToRelationship.setCanonicalRecordData(A(n)),n})},i.value=function(){var e=this.parentInternalModel.store,t=this._resource()
if(t&&t.data){var n=e._internalModelForResource(t.data)
if(n&&n.isLoaded())return n.getRecord()}return null},i.load=function(e){return this.parentInternalModel.getBelongsTo(this.key,e)},i.reload=function(e){var t=this
return this.parentInternalModel.reloadBelongsTo(this.key,e).then(function(e){return t.value()})},r}(Y)
var ee=function(e){var t,n
function r(t,n,r,i){var o
return(o=e.call(this,t,n)||this).key=i,o.hasManyRelationship=r,o.type=r.relationshipMeta.type,o.parent=n.recordReference,o.parentInternalModel=n,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n
var i=r.prototype
return i._resource=function(){return this.recordData.getHasMany(this.key)},i.remoteType=function(){var e=this._resource()
return e&&e.links&&e.links.related?"link":"ids"},i.ids=function(){var e=this._resource(),t=[]
return e.data&&(t=e.data.map(function(e){return e.id})),t},i.push=function(e){var t=this
return Ember.RSVP.resolve(e).then(function(e){var n=e
"object"==typeof e&&e.data&&(n=e.data)
var r=n.map(function(e){return A(t.store.push(e))})
return t.hasManyRelationship.computeChanges(r),t.internalModel.getHasMany(t.hasManyRelationship.key)})},i._isLoaded=function(){var e=this
return!!Ember.get(this.hasManyRelationship,"hasAnyRelationshipData")&&this.hasManyRelationship.members.toArray().every(function(t){return!0===e.parentInternalModel.store._internalModelForResource(t.getResourceIdentifier()).isLoaded()})},i.value=function(){return this._isLoaded()?this.internalModel.getManyArray(this.key):null},i.load=function(e){return this.internalModel.getHasMany(this.key,e)},i.reload=function(e){return this.internalModel.reloadHasMany(this.key,e)},r}(Y)
function te(e){return null==e||""===e?null:"string"==typeof e?e:"symbol"==typeof e?e.toString():""+e}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(e){this.modelName=e,this._idToModel=Object.create(null),this._models=[],this._metadata=null}var t,n,r,i=e.prototype
return i.get=function(e){return this._idToModel[e]||null},i.has=function(e){return!!this._idToModel[e]},i.set=function(e,t){this._idToModel[e]=t},i.add=function(e,t){t&&(this._idToModel[t]=e),this._models.push(e)},i.remove=function(e,t){delete this._idToModel[t]
var n=this._models.indexOf(e);-1!==n&&this._models.splice(n,1)},i.contains=function(e){return-1!==this._models.indexOf(e)},i.clear=function(){var e=this._models
this._models=[]
for(var t=0;t<e.length;t++){e[t].unloadRecord()}this._metadata=null},t=e,(n=[{key:"length",get:function(){return this._models.length}},{key:"models",get:function(){return this._models}},{key:"metadata",get:function(){return this._metadata||(this._metadata=Object.create(null))}}])&&ne(t.prototype,n),r&&ne(t,r),e}(),ie=function(){function e(){this._map=Object.create(null)}var t=e.prototype
return t.retrieve=function(e){var t=this._map[e]
return void 0===t&&(t=this._map[e]=new re(e)),t},t.clear=function(){for(var e=this._map,t=Object.keys(e),n=0;n<t.length;n++){e[t[n]].clear()}},e}(),oe=new WeakMap,ae=1
function se(e){var t=oe.get(e)
return void 0===t&&(t=new ue(e),oe.set(e,t)),t}var ue=function(){function e(e){this.store=e,this._identityMap=void 0,this._newlyCreated=void 0,this._identityMap=new ie,this._newlyCreated=new ie}var t=e.prototype
return t.lookup=function(e,t,n){var r=null===t?null:te(t),i=this.peekId(e,r,n)
return i?(i.hasScheduledDestroy()&&i.cancelDestroy(),i):this.build(e,r,null,n)},t.peekId=function(e,t,n){var r=null
return n&&(r=this._newlyCreatedModelsFor(e).get(n)),!r&&t&&(r=this.modelMapFor(e).get(t)),r},t.getByResource=function(e){var t=null
return e.clientId&&(t=this._newlyCreatedModelsFor(e.type).get(e.clientId)),null===t&&(t=this.lookup(e.type,e.id,e.clientId)),t},t.setRecordId=function(e,t,n){var r=this.peekId(e,t,n)
if(null===r)throw new Error("Cannot set the id "+t+" on the record "+e+":"+n+" as there is no such record in the cache.")
var i=r.id,o=r.modelName
if(null===i||null!==t){this.peekIdOnly(o,t)
this.modelMapFor(r.modelName).set(t,r),this._newlyCreatedModelsFor(r.modelName).remove(r,n),r.setId(t)}},t.peekIdOnly=function(e,t){var n=this.modelMapFor(e).get(t)
return n&&n.hasScheduledDestroy()&&(n.destroySync(),n=null),n},t.build=function(e,t,n,r){if(t)this.peekIdOnly(e,t)
null!==t||r||(r="client-id:"+this.newClientId())
var i=new ve(e,t,this.store,r)
return r&&this._newlyCreatedModelsFor(e).add(i,r),this.modelMapFor(e).add(i,t),i},t.newClientId=function(){return ae++},t.remove=function(e){var t=this.modelMapFor(e.modelName),n=e.id,r=e.clientId
n&&t.remove(e,n),r&&this._newlyCreatedModelsFor(e.modelName).remove(e,r)},t.modelMapFor=function(e){return this._identityMap.retrieve(e)},t._newlyCreatedModelsFor=function(e){return this._newlyCreated.retrieve(e)},t.clear=function(e){void 0===e?this._identityMap.clear():this.modelMapFor(e).clear()},e}()
function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=Object.create(null),he=Object.create(null),fe=Object.create(null)
function de(e){return fe[e]||(fe[e]=e.split("."))}var pe=1,ve=function(){function e(e,t,n,r){this.modelName=e,this.id=t,this.store=n,this.clientId=r,this.__recordData=void 0,this._isDestroyed=void 0,this.isError=void 0,this._pendingRecordArrayManagerFlush=void 0,this._isDematerializing=void 0,this.isReloading=void 0,this._doNotDestroy=void 0,this.isDestroying=void 0,this._promiseProxy=void 0,this._record=void 0,this._scheduledDestroy=void 0,this._modelClass=void 0,this.__deferredTriggers=void 0,this.__recordArrays=void 0,this._references=void 0,this._recordReference=void 0,this._manyArrayCache=Object.create(null),this._retainedManyArrayCache=Object.create(null),this._relationshipPromisesCache=Object.create(null),this._relationshipProxyCache=Object.create(null),this.currentState=void 0,this.error=void 0,this.__recordData=null,this[Ember.GUID_KEY]=pe+++"internal-model",this._promiseProxy=null,this._record=null
this._isDestroyed=!1,this.isError=!1,this._pendingRecordArrayManagerFlush=!1,this._isDematerializing=!1,this._scheduledDestroy=null,this.resetRecord(),this._modelClass=null,this.__deferredTriggers=null,this.__recordArrays=null,this._references=null,this._recordReference=null}var t,n,i,o=e.prototype
return o.isHiddenFromRecordArrays=function(){return!!this.isEmpty()||(!r.RECORD_DATA_STATE||!this.isLoading())&&(e=r.RECORD_DATA_STATE?this._isRecordFullyDeleted():"root.deleted.saved"===this.currentState.stateName,this._isDematerializing||this.hasScheduledDestroy()||this.isDestroyed||e)
var e},o._isRecordFullyDeleted=function(){return!!r.RECORD_DATA_STATE&&(!(!this._recordData.isDeletionCommitted||!this._recordData.isDeletionCommitted())||(!!(this._recordData.isNew&&this._recordData.isDeleted&&this._recordData.isNew()&&this._recordData.isDeleted())||"root.deleted.saved"===this.currentState.stateName))},o.isRecordInUse=function(){var e=this._record
return e&&!(e.get("isDestroyed")||e.get("isDestroying"))},o.isEmpty=function(){return this.currentState.isEmpty},o.isLoading=function(){return this.currentState.isLoading},o.isLoaded=function(){return this.currentState.isLoaded},o.hasDirtyAttributes=function(){return this.currentState.hasDirtyAttributes},o.isSaving=function(){return this.currentState.isSaving},o.isDeleted=function(){return r.RECORD_DATA_STATE&&this._recordData.isDeleted?this._recordData.isDeleted():this.currentState.isDeleted},o.isNew=function(){return r.RECORD_DATA_STATE&&this._recordData.isNew?this._recordData.isNew():this.currentState.isNew},o.isValid=function(){if(!r.RECORD_DATA_ERRORS)return this.currentState.isValid},o.dirtyType=function(){return this.currentState.dirtyType},o.getRecord=function(e){if(!this._record&&!this._isDematerializing){var t=this.store,n={store:t,_internalModel:this,currentState:this.currentState,isError:this.isError,adapterError:this.error}
if(void 0!==e){if("id"in e){var r=te(e.id)
null!==r&&this.setId(r)}var i=t._relationshipsDefinitionFor(this.modelName)
if(null!==i)for(var o,a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],c=i[u]
void 0!==c&&(o="hasMany"===c.kind?ge(e[u]):ye(e[u]),e[u]=o)}}var l=this._recordData._initRecordCreateOptions(e)
Ember.assign(n,l),Ember.setOwner(n,Ember.getOwner(t)),this._record=t._modelFactoryFor(this.modelName).create(n),this._triggerDeferredTriggers()}return this._record},o.resetRecord=function(){this._record=null,this.isReloading=!1,this.error=null,this.currentState=j.empty},o.dematerializeRecord=function(){var e=this
this._isDematerializing=!0,this._doNotDestroy=!1,this._record&&(this._record.destroy(),Object.keys(this._relationshipProxyCache).forEach(function(t){e._relationshipProxyCache[t].destroy&&e._relationshipProxyCache[t].destroy(),delete e._relationshipProxyCache[t]}),Object.keys(this._manyArrayCache).forEach(function(t){var n=e._retainedManyArrayCache[t]=e._manyArrayCache[t]
delete e._manyArrayCache[t],n&&!n._inverseIsAsync&&n.clear()})),this._recordData.unloadRecord(),this.resetRecord(),this.updateRecordArrays()},o.deleteRecord=function(){r.RECORD_DATA_STATE&&this._recordData.setIsDeleted&&this._recordData.setIsDeleted(!0),this.send("deleteRecord")},o.save=function(e){var t="DS: Model#save "+this,n=Ember.RSVP.defer(t)
return this.store.scheduleSave(this,n,e),n.promise},o.startedReloading=function(){this.isReloading=!0,this.hasRecord&&Ember.set(this._record,"isReloading",!0)},o.linkWasLoadedForRelationship=function(e,t){var n={}
n[e]=t,this._recordData.pushData({id:this.id,type:this.modelName,relationships:n})},o.finishedReloading=function(){this.isReloading=!1,this.hasRecord&&Ember.set(this._record,"isReloading",!1)},o.reload=function(e){this.startedReloading()
var t=this,n="DS: Model#reload of "+this
return new Ember.RSVP.Promise(function(n){t.send("reloadRecord",{resolve:n,options:e})},n).then(function(){return t.didCleanError(),t},function(e){throw t.didError(e),e},"DS: Model#reload complete, update flags").finally(function(){t.finishedReloading(),t.updateRecordArrays()})},o.unloadRecord=function(){this.isDestroyed||(this.send("unloadRecord"),this.dematerializeRecord(),null===this._scheduledDestroy&&(this._scheduledDestroy=Ember.run.backburner.schedule("destroy",this,"_checkForOrphanedInternalModels")))},o.hasScheduledDestroy=function(){return!!this._scheduledDestroy},o.cancelDestroy=function(){this._doNotDestroy=!0,this._isDematerializing=!1,Ember.run.cancel(this._scheduledDestroy),this._scheduledDestroy=null},o.destroySync=function(){this._isDematerializing&&this.cancelDestroy(),this._checkForOrphanedInternalModels(),this.isDestroyed||this.isDestroying||this.destroy()},o._checkForOrphanedInternalModels=function(){this._isDematerializing=!1,this._scheduledDestroy=null,this.isDestroyed},o.eachRelationship=function(e,t){return this.modelClass.eachRelationship(e,t)},o._findBelongsTo=function(e,t,n,r){var i=this
return this.store._findBelongsToByJsonApiResource(t,this,n,r).then(function(n){return me(i,e,t._relationship,n,null)},function(n){return me(i,e,t._relationship,null,n)})},o.getBelongsTo=function(e,t){var n=this._recordData.getBelongsTo(e),r=this.store._relationshipMetaFor(this.modelName,null,e),i=this.store,o=r.options.async,a=void 0===o||o,s={key:e,store:i,originatingInternalModel:this,modelName:r.type}
if(a){var u=n&&n.data?i._internalModelForResource(n.data):null
if(n._relationship.hasFailedLoadAttempt)return this._relationshipProxyCache[e]
var c=this._findBelongsTo(e,n,r,t)
return this._updatePromiseProxyFor("belongsTo",e,{promise:c,content:u?u.getRecord():null,_belongsToState:s})}return n&&n.data?i._internalModelForResource(n.data).getRecord():null},o.getManyArray=function(e,t){void 0===t&&(t=!1)
var n=this.store._relationshipMetaFor(this.modelName,null,e),r=this._recordData.getHasMany(e),i=this._manyArrayCache[e]
if(!i){var o=this.store._getHasManyByJsonApiResource(r),a=!!r._relationship&&r._relationship._inverseIsAsync()
i=$.create({store:this.store,type:this.store.modelFor(n.type),recordData:this._recordData,meta:r.meta,key:e,isPolymorphic:n.options.polymorphic,initialState:o.slice(),_inverseIsAsync:a,internalModel:this,isLoaded:!t}),this._manyArrayCache[e]=i}return this._retainedManyArrayCache[e]&&(this._retainedManyArrayCache[e].destroy(),delete this._retainedManyArrayCache[e]),i},o.fetchAsyncHasMany=function(e,t,n,r,i){var o=this,a=this._relationshipPromisesCache[e]
return a||(a=this.store._findHasManyByJsonApiResource(n,this,t,i).then(function(e){return r.retrieveLatest(),r.set("isLoaded",!0),r}).then(function(t){return me(o,e,n._relationship,t,null)},function(t){return me(o,e,n._relationship,null,t)}),this._relationshipPromisesCache[e]=a,a)},o.getHasMany=function(e,t){var n=this._recordData.getHasMany(e),r=this.store._relationshipMetaFor(this.modelName,null,e),i=r.options.async,o=void 0===i||i,a=this.getManyArray(e,o)
if(o){if(n._relationship.hasFailedLoadAttempt)return this._relationshipProxyCache[e]
var s=this.fetchAsyncHasMany(e,r,n,a,t)
return this._updatePromiseProxyFor("hasMany",e,{promise:s,content:a})}return a},o._updatePromiseProxyFor=function(e,t,n){var r=this._relationshipProxyCache[t]
if(r)void 0!==n.content&&r.set("content",n.content),r.set("promise",n.promise)
else{var i="hasMany"===e?f:l
this._relationshipProxyCache[t]=i.create(n)}return this._relationshipProxyCache[t]},o.reloadHasMany=function(e,t){var n=this._relationshipPromisesCache[e]
if(n)return n
var r=this._recordData.getHasMany(e)
r._relationship&&(r._relationship.setHasFailedLoadAttempt(!1),r._relationship.setShouldForceReload(!0))
var i=this.store._relationshipMetaFor(this.modelName,null,e),o=this.getManyArray(e),a=this.fetchAsyncHasMany(e,i,r,o,t)
return this._relationshipProxyCache[e]?this._updatePromiseProxyFor("hasMany",e,{promise:a}):a},o.reloadBelongsTo=function(e,t){var n=this._relationshipPromisesCache[e]
if(n)return n
var r=this._recordData.getBelongsTo(e)
r._relationship&&(r._relationship.setHasFailedLoadAttempt(!1),r._relationship.setShouldForceReload(!0))
var i=this.store._relationshipMetaFor(this.modelName,null,e),o=this._findBelongsTo(e,r,i,t)
return this._relationshipProxyCache[e]?this._updatePromiseProxyFor("belongsTo",e,{promise:o}):o},o.destroyFromRecordData=function(){this._doNotDestroy?this._doNotDestroy=!1:this.destroy()},o.destroy=function(){var e=this
this.isDestroying=!0,Object.keys(this._retainedManyArrayCache).forEach(function(t){e._retainedManyArrayCache[t].destroy(),delete e._retainedManyArrayCache[t]}),se(this.store).remove(this),this._isDestroyed=!0},o.eachAttribute=function(e,t){return this.modelClass.eachAttribute(e,t)},o.inverseFor=function(e){return this.modelClass.inverseFor(e)},o.setupData=function(e){var t=this._recordData.pushData(e,this.hasRecord)
this.hasRecord&&this._record._notifyProperties(t),this.pushedData()},o.getAttributeValue=function(e){return this._recordData.getAttr(e)},o.setDirtyHasMany=function(e,t){return this._recordData.setDirtyHasMany(e,ge(t))},o.setDirtyBelongsTo=function(e,t){return this._recordData.setDirtyBelongsTo(e,ye(t))},o.setDirtyAttribute=function(e,t){if(this.isDeleted())throw new Ember.Error("Attempted to set '"+e+"' to '"+t+"' on the deleted record "+this)
if(this.getAttributeValue(e)!==t){this._recordData.setDirtyAttribute(e,t)
var n=this._recordData.isAttrDirty(e)
this.send("didSetProperty",{name:e,isDirty:n})}return t},o.createSnapshot=function(e){return new U(this,e)},o.loadingData=function(e){this.send("loadingData",e)},o.loadedData=function(){this.send("loadedData")},o.notFound=function(){this.send("notFound")},o.pushedData=function(){this.send("pushedData")},o.hasChangedAttributes=function(){return!(this.isLoading()&&!this.isReloading)&&this._recordData.hasChangedAttributes()},o.changedAttributes=function(){return this.isLoading()&&!this.isReloading?{}:this._recordData.changedAttributes()},o.adapterWillCommit=function(){this._recordData.willCommit(),this.send("willCommit")},o.adapterDidDirty=function(){this.send("becomeDirty"),this.updateRecordArrays()},o.send=function(e,t){var n=this.currentState
return n[e]||this._unhandledEvent(n,e,t),n[e](this,t)},o.manyArrayRecordAdded=function(e){this.hasRecord&&this._record.notifyHasManyAdded(e)},o.notifyHasManyChange=function(e){if(this.hasRecord){var t=this._manyArrayCache[e]
t&&t.retrieveLatest(),this.updateRecordArrays()}},o.notifyBelongsToChange=function(e){this.hasRecord&&(this._record.notifyBelongsToChange(e,this._record),this.updateRecordArrays())},o.notifyPropertyChange=function(e){this.hasRecord&&(this._record.notifyPropertyChange(e),this.updateRecordArrays())
var t=this._manyArrayCache[e]||this._retainedManyArrayCache[e]
if(t){var n=t.removeUnloadedInternalModel()
this._manyArrayCache[e]&&n&&(this._retainedManyArrayCache[e]=this._manyArrayCache[e],delete this._manyArrayCache[e])}},o.notifyStateChange=function(e){this.hasRecord&&(e&&"isNew"!==e||this.getRecord().notifyPropertyChange("isNew"),e&&"isDeleted"!==e||this.getRecord().notifyPropertyChange("isDeleted")),e&&"isDeletionCommitted"!==e||this.updateRecordArrays()},o.didCreateRecord=function(){this._recordData.clientDidCreate()},o.rollbackAttributes=function(){var e=this._recordData.rollbackAttributes()
Ember.get(this,"isError")&&this.didCleanError(),this.send("rolledBack"),this._record&&e&&e.length>0&&this._record._notifyProperties(e)},o.transitionTo=function(e){var t,n,r,i,o=function(e){return he[e]||(he[e]=de(e)[0])}(e),a=this.currentState,s=a.stateName+"->"+e
do{a.exit&&a.exit(this),a=a.parentState}while(!a[o])
var u=le[s]
if(u)t=u.setups,n=u.enters,a=u.state
else{t=[],n=[]
var c=de(e)
for(r=0,i=c.length;r<i;r++)(a=a[c[r]]).enter&&n.push(a),a.setup&&t.push(a)
le[s]={setups:t,enters:n,state:a}}for(r=0,i=n.length;r<i;r++)n[r].enter(this)
for(this.currentState=a,this.hasRecord&&Ember.set(this._record,"currentState",a),r=0,i=t.length;r<i;r++)t[r].setup(this)
this.updateRecordArrays()},o._unhandledEvent=function(e,t,n){var r="Attempted to handle event `"+t+"` "
throw r+="on "+String(this)+" while in state ",r+=e.stateName+". ",void 0!==n&&(r+="Called with "+Ember.inspect(n)+"."),new Ember.Error(r)},o.triggerLater=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
1===this._deferredTriggers.push(t)&&this.store._updateInternalModel(this)},o._triggerDeferredTriggers=function(){if(this.hasRecord){for(var e=this._deferredTriggers,t=this._record,n=t.trigger,r=0,i=e.length;r<i;r++){var o=e[r]
n.apply(t,o)}e.length=0}},o.removeFromInverseRelationships=function(e){void 0===e&&(e=!1),this._recordData.removeFromInverseRelationships(e)},o.preloadData=function(e){var t=this,n={}
Object.keys(e).forEach(function(r){var i=Ember.get(e,r)
t.modelClass.metaForProperty(r).isRelationship?(n.relationships||(n.relationships={}),n.relationships[r]=t._preloadRelationship(r,i)):(n.attributes||(n.attributes={}),n.attributes[r]=i)}),this._recordData.pushData(n)},o._preloadRelationship=function(e,t){var n=this,r=this.modelClass.metaForProperty(e),i=r.type
return{data:"hasMany"===r.kind?t.map(function(e){return n._convertPreloadRelationshipToJSON(e,i)}):this._convertPreloadRelationshipToJSON(t,i)}},o._convertPreloadRelationshipToJSON=function(e,t){return"string"==typeof e||"number"==typeof e?{type:t,id:e}:{type:(n=e._internalModel?e._internalModel:e).modelName,id:n.id}
var n},o.updateRecordArrays=function(){this.store.recordArrayManager.recordDidChange(this)},o.setId=function(e){var t=e!==this.id
this.id=e,t&&null!==e&&this.store.setRecordId(this.modelName,e,this.clientId),t&&this.hasRecord&&this._record.notifyPropertyChange("id")},o.didError=function(e){this.error=e,this.isError=!0,this.hasRecord&&this._record.setProperties({isError:!0,adapterError:e})},o.didCleanError=function(){this.error=null,this.isError=!1,this.hasRecord&&this._record.setProperties({isError:!1,adapterError:null})},o.adapterDidCommit=function(e){this.didCleanError()
var t=this._recordData.didCommit(e)
this.send("didCommit"),this.updateRecordArrays(),e&&this._record._notifyProperties(t)},o.addErrorMessageToAttribute=function(e,t){Ember.get(this.getRecord(),"errors")._add(e,t)},o.removeErrorMessageFromAttribute=function(e){Ember.get(this.getRecord(),"errors")._remove(e)},o.clearErrorMessages=function(){Ember.get(this.getRecord(),"errors")._clear()},o.hasErrors=function(){return r.RECORD_DATA_ERRORS&&this._recordData.getErrors?this._recordData.getErrors({}).length>0:Ember.get(this.getRecord(),"errors").get("length")>0},o.adapterDidInvalidate=function(e,t){if(r.RECORD_DATA_ERRORS){var n
if(t&&e){if(!this._recordData.getErrors)for(n in e)e.hasOwnProperty(n)&&this.addErrorMessageToAttribute(n,e[n])
var i=m(e)
this.send("becameInvalid"),0===i.length&&(i=[{title:"Invalid Error",detail:"",source:{pointer:"/data"}}]),this._recordData.commitWasRejected({},i)}else this.send("becameError"),this._recordData.commitWasRejected({})}else{var o
for(o in e)e.hasOwnProperty(o)&&this.addErrorMessageToAttribute(o,e[o])
this.send("becameInvalid"),this._recordData.commitWasRejected()}},o.notifyErrorsChange=function(){var e
this._recordData.getErrors&&(e=this._recordData.getErrors({})||[],this.notifyInvalidErrorsChange(e))},o.notifyInvalidErrorsChange=function(e){this.getRecord().invalidErrorsChanged(e)},o.adapterDidError=function(e){this.send("becameError"),this.didError(e),this._recordData.commitWasRejected()},o.toString=function(){return"<"+this.modelName+":"+this.id+">"},o.referenceFor=function(e,t){var n=this.references[t]
if(!n){var r=O(this,t)
"belongsTo"===e?n=new Z(this.store,this,r,t):"hasMany"===e&&(n=new ee(this.store,this,r,t)),this.references[t]=n}return n},t=e,(n=[{key:"modelClass",get:function(){return this._modelClass||(this._modelClass=this.store.modelFor(this.modelName))}},{key:"type",get:function(){return this.modelClass}},{key:"recordReference",get:function(){return null===this._recordReference&&(this._recordReference=new J(this.store,this)),this._recordReference}},{key:"_recordData",get:function(){if(null===this.__recordData){var e=this.store._createRecordData(this.modelName,this.id,this.clientId)
return this._recordData=e,e}return this.__recordData},set:function(e){this.__recordData=e}},{key:"_recordArrays",get:function(){return null===this.__recordArrays&&(this.__recordArrays=new W),this.__recordArrays}},{key:"references",get:function(){return null===this._references&&(this._references=Object.create(null)),this._references}},{key:"_deferredTriggers",get:function(){return null===this.__deferredTriggers&&(this.__deferredTriggers=[]),this.__deferredTriggers}},{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"hasRecord",get:function(){return!!this._record}}])&&ce(t.prototype,n),i&&ce(t,i),e}()
function me(e,t,n,r,i){if(delete e._relationshipPromisesCache[t],n.setShouldForceReload(!1),i){n.setHasFailedLoadAttempt(!0)
var o=e._relationshipProxyCache[t]
throw o&&"belongsTo"===n.kind&&(o.content.isDestroying&&o.set("content",null),o.set("promise",Ember.RSVP.resolve(null))),i}return n.setHasFailedLoadAttempt(!1),n.setRelationshipIsStale(!1),r}function ge(e){return e.map(ye)}function ye(e){if(!e)return null
if(e.then){var t=e.get&&e.get("content")
return t?A(t):null}return A(e)}var be=Ember.changeProperties
var xe,we,_e=Ember.computed("currentState",function(e){return Ember.get(this._internalModel.currentState,e)}).readOnly(),Re=Ember.computed("errors.length",function(e){return!(this.get("errors.length")>0)}).readOnly(),Ee=r.RECORD_DATA_ERRORS?Re:_e
xe=r.RECORD_DATA_STATE?Ember.computed("currentState",function(){var e=A(this)
return e.isDeleted?e.isDeleted():Ember.get(this._internalModel.currentState,"isDeleted")}).readOnly():_e,we=r.RECORD_DATA_STATE?Ember.computed("currentState",function(){var e=A(this)
return e.isNew?e.isNew():Ember.get(this._internalModel.currentState,"isNew")}).readOnly():_e
var Ce=Ember.Object.extend(o,{init:function(){this._super.apply(this,arguments),r.RECORD_DATA_ERRORS&&(this._invalidRequests=[])},_notifyNetworkChanges:function(){this.notifyPropertyChange("isValid")},isEmpty:_e,isLoading:_e,isLoaded:_e,hasDirtyAttributes:Ember.computed("currentState.isDirty",function(){return this.get("currentState.isDirty")}),isSaving:_e,isDeleted:xe,isNew:we,isValid:Ee,_markInvalidRequestAsClean:function(){r.RECORD_DATA_ERRORS&&(this._invalidRequests=[],this._notifyNetworkChanges())},dirtyType:_e,isError:!1,isReloading:!1,currentState:j.empty,_internalModel:null,store:null,errors:Ember.computed(function(){var e=this,t=y.create()
if(t._registerHandlers(function(){e.send("becameInvalid")},function(){e.send("becameValid")}),r.RECORD_DATA_ERRORS){var n,i=A(this)
if(i.getErrors&&(n=i.getErrors()))for(var o=g(n),a=Object.keys(o),s=0;s<a.length;s++)t._add(a[s],o[a[s]])}return t}).readOnly(),invalidErrorsChanged:function(e){if(r.RECORD_DATA_ERRORS){this._clearErrorMessages()
for(var t=g(e),n=Object.keys(t),i=0;i<n.length;i++)this._addErrorMessageToAttribute(n[i],t[n[i]])}},_addErrorMessageToAttribute:function(e,t){this.get("errors")._add(e,t)},_clearErrorMessages:function(){this.get("errors")._clear()},adapterError:null,serialize:function(e){return this._internalModel.createSnapshot().serialize(e)},toJSON:function(e){var t=this._internalModel.store.serializerFor("-default"),n=this._internalModel.createSnapshot()
return t.serialize(n,e)},ready:null,didLoad:null,didUpdate:null,didCreate:null,didDelete:null,becameInvalid:null,becameError:null,rolledBack:null,send:function(e,t){return this._internalModel.send(e,t)},transitionTo:function(e){return this._internalModel.transitionTo(e)},deleteRecord:function(){this._internalModel.deleteRecord()},destroyRecord:function(e){return this.deleteRecord(),this.save(e)},unloadRecord:function(){this.isDestroyed||this._internalModel.unloadRecord()},_notifyProperties:function(e){var t=this
be(function(){for(var n,r=0,i=e.length;r<i;r++)n=e[r],t.notifyPropertyChange(n)})},changedAttributes:function(){return this._internalModel.changedAttributes()},rollbackAttributes:function(){this._internalModel.rollbackAttributes(),r.RECORD_DATA_ERRORS&&this._markInvalidRequestAsClean()},_createSnapshot:function(){return this._internalModel.createSnapshot()},toStringExtension:function(){return this._internalModel&&this._internalModel.id},save:function(e){var t=this
return s.create({promise:this._internalModel.save(e).then(function(){return t})})},reload:function(e){var t,n=this
return"object"==typeof e&&null!==e&&e.adapterOptions&&(t={adapterOptions:e.adapterOptions}),s.create({promise:this._internalModel.reload(t).then(function(){return n})})},trigger:function(e){var t=this[e]
if("function"==typeof t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i]
t.apply(this,r)}this.has(e)&&this._super.apply(this,arguments)},attr:function(){},belongsTo:function(e){return this._internalModel.referenceFor("belongsTo",e)},hasMany:function(e){return this._internalModel.referenceFor("hasMany",e)},_debugInfo:function(){var e=["id"],t={},n=[]
this.eachAttribute(function(t,n){return e.push(t)})
var r=[{name:"Attributes",properties:e,expand:!0}]
return this.eachRelationship(function(e,i){var o=t[i.kind]
void 0===o&&(o=t[i.kind]=[],r.push({name:i.name,properties:o,expand:!0})),o.push(e),n.push(e)}),r.push({name:"Flags",properties:["isLoaded","hasDirtyAttributes","isSaving","isDeleted","isError","isNew","isValid"]}),{propertyInfo:{includeOtherProperties:!0,groups:r,expensiveProperties:n}}},notifyBelongsToChange:function(e){this.notifyPropertyChange(e)},eachRelationship:function(e,t){this.constructor.eachRelationship(e,t)},relationshipFor:function(e){return Ember.get(this.constructor,"relationshipsByName").get(e)},inverseFor:function(e){return this.constructor.inverseFor(e,this._internalModel.store)},notifyHasManyAdded:function(e){this.notifyPropertyChange(e)},eachAttribute:function(e,t){this.constructor.eachAttribute(e,t)}})
Object.defineProperty(Ce.prototype,"data",{configurable:!1,get:function(){return A(this)._data}})
var ke={configurable:!1,set:function(e){var t=te(e)
null!==t&&this._internalModel.setId(t)},get:function(){return this._internalModel&&this._internalModel.id}}
function Se(e){return e}Object.defineProperty(Ce.prototype,"id",ke),Ce.reopenClass({isModel:!0,modelName:null,typeForRelationship:function(e,t){var n=Ember.get(this,"relationshipsByName").get(e)
return n&&t.modelFor(n.type)},inverseMap:Ember.computed(function(){return Object.create(null)}),inverseFor:function(e,t){var n=Ember.get(this,"inverseMap")
if(n[e])return n[e]
var r=this._findInverseFor(e,t)
return n[e]=r,r},_findInverseFor:function(e,t){var n=this.typeForRelationship(e,t)
if(!n)return null
var r,i,o,a,s=this.metaForProperty(e),u=s.options
if(null===u.inverse)return null
if(u.inverse)r=u.inverse,i=(o=Ember.get(n,"relationshipsByName").get(r)).kind,a=o.options
else{s.type,s.parentModelName
var c=function e(t,n,r,i){var o=i||[],a=Ember.get(n,"relationships")
if(!a)return o
var s=a.get(t.modelName),u=Array.isArray(s)?s.filter(function(e){var t=n.metaForProperty(e.name).options
return!t.inverse&&null!==t.inverse||r===t.inverse}):null
return u&&o.push.apply(o,u),t.superclass&&e(t.superclass,n,r,o),o}(this,n,e)
if(0===c.length)return null
var l=c.filter(function(t){var r=n.metaForProperty(t.name).options
return e===r.inverse})
1===l.length&&(c=l),r=c[0].name,i=c[0].kind,a=c[0].options}return{type:n,name:r,kind:i,options:a}},relationships:E,relationshipNames:Ember.computed(function(){var e={hasMany:[],belongsTo:[]}
return this.eachComputedProperty(function(t,n){n.isRelationship&&e[n.kind].push(t)}),e}),relatedTypes:C,relationshipsByName:S,relationshipsObject:k,fields:Ember.computed(function(){var e=new Map
return this.eachComputedProperty(function(t,n){n.isRelationship?e.set(t,n.kind):n.isAttribute&&e.set(t,"attribute")}),e}).readOnly(),eachRelationship:function(e,t){Ember.get(this,"relationshipsByName").forEach(function(n,r){e.call(t,r,n)})},eachRelatedType:function(e,t){for(var n=Ember.get(this,"relatedTypes"),r=0;r<n.length;r++){var i=n[r]
e.call(t,i)}},determineRelationshipType:function(e,t){var n=e.key,r=e.kind,i=this.inverseFor(n,t)
return i?"belongsTo"===i.kind?"belongsTo"===r?"oneToOne":"manyToOne":"belongsTo"===r?"oneToMany":"manyToMany":"belongsTo"===r?"oneToNone":"manyToNone"},attributes:Ember.computed(function(){var e=new Map
return this.eachComputedProperty(function(t,n){n.isAttribute&&(n.name=t,e.set(t,n))}),e}).readOnly(),transformedAttributes:Ember.computed(function(){var e=new Map
return this.eachAttribute(function(t,n){n.type&&e.set(t,n.type)}),e}).readOnly(),eachAttribute:function(e,t){Ember.get(this,"attributes").forEach(function(n,r){e.call(t,r,n)})},eachTransformedAttribute:function(e,t){Ember.get(this,"transformedAttributes").forEach(function(n,r){e.call(t,r,n)})},toString:function(){return"model:"+Ember.get(this,"modelName")}})
var Ae="Either an id or a clientId is required as an argument.",Te=function(){function e(e){this[x]=void 0,this._store=void 0,this._willUpdateManyArrays=void 0,this._pendingManyArrayUpdates=void 0,this._store=e,this._willUpdateManyArrays=!1,this._pendingManyArrayUpdates=[]}var t=e.prototype
return t._hasModelFor=function(e){return this._store._hasModelFor(e)},t._scheduleManyArrayUpdate=function(e,t,n,r){var i=this
if((this._pendingManyArrayUpdates=this._pendingManyArrayUpdates||[]).push(e,t,n,r),!0!==this._willUpdateManyArrays){this._willUpdateManyArrays=!0
var o=this._store._backburner
o.join(function(){o.schedule("syncRelationships",i,i._flushPendingManyArrayUpdates)})}},t.notifyErrorsChange=function(e,t,n){var r=se(this._store).peekId(e,t,n)
r&&r.notifyErrorsChange()},t._flushPendingManyArrayUpdates=function(){if(!1!==this._willUpdateManyArrays){var e=this._pendingManyArrayUpdates
this._pendingManyArrayUpdates=[],this._willUpdateManyArrays=!1
for(var t=se(this._store),n=0;n<e.length;n+=4){var r=e[n],i=e[n+1]||null,o=e[n+2],a=e[n+3],s=t.peekId(r,i,o)
s&&s.notifyHasManyChange(a)}}},t.attributesDefinitionFor=function(e){return this._store._attributesDefinitionFor(e)},t.relationshipsDefinitionFor=function(e){return this._store._relationshipsDefinitionFor(e)},t.inverseForRelationship=function(e,t){var n=this._store.modelFor(e)
return Se(this.relationshipsDefinitionFor(e)[t])._inverseKey(this._store,n)},t.inverseIsAsyncForRelationship=function(e,t){var n=this._store.modelFor(e)
return Se(this.relationshipsDefinitionFor(e)[t])._inverseIsAsync(this._store,n)},t.notifyPropertyChange=function(e,t,n,r){if(!Oe(t,n))throw new Error(Ae)
var i=se(this._store).peekId(e,t,n)
i&&i.notifyPropertyChange(r)},t.notifyHasManyChange=function(e,t,n,r){if(!Oe(t,n))throw new Error(Ae)
this._scheduleManyArrayUpdate(e,t,n,r)},t.notifyBelongsToChange=function(e,t,n,r){if(!Oe(t,n))throw new Error(Ae)
var i=se(this._store).peekId(e,t,n)
i&&i.notifyBelongsToChange(r)},t.notifyStateChange=function(e,t,n,r){var i=se(this._store).peekId(e,t,n)
i&&i.notifyStateChange(r)},t.recordDataFor=function(e,t,n){if(!Oe(t,n))throw new Error(Ae)
return this._store.recordDataFor(e,t,n)},t.setRecordId=function(e,t,n){this._store.setRecordId(e,t,n)},t.isRecordInUse=function(e,t,n){if(!Oe(t,n))throw new Error(Ae)
var r=se(this._store).peekId(e,t,n)
return!!r&&r.isRecordInUse()},t.disconnectRecord=function(e,t,n){if(!Oe(t,n))throw new Error(Ae)
var r=se(this._store).peekId(e,t,n)
r&&r.destroyFromRecordData()},e}()
function Oe(e,t){return!(!e&&!t)}function Ie(e,t,n,r,i,o){return e.normalizeResponse(t,n,r,i,o)}function Ne(e,t,n){var r=t.serializer
return void 0===r&&(r=e.serializerFor(n)),null==r&&(r={extract:function(e,t,n){return n}}),r}function De(e,t,n,r,i,o){var a=Ember.A(i.map(function(e){return e.createSnapshot(o.get(e))})),s=t.modelFor(n),u=e.findMany(t,s,r,a),c="DS: Handle Adapter#findMany of '"+n+"'"
if(void 0===u)throw new Error("adapter.findMany returned undefined, this was very likely a mistake")
return(u=G(u,t,c)).then(function(r){var i=Ie(Ne(t,e,n),t,s,r,null,"findMany")
return t._push(i)},null,"DS: Extract payload of "+n)}function Pe(e,t,n,r){var i,o,a,s=(o=t.data,a=function(t,i){var o=t.id,a=t.type
return function(e,t,n,r,i){e.id
var o=e.type
e.relationships||(e.relationships={})
var a=e.relationships,s=function(e,t,n,r){return function(e,t,n,r){var i=e.storeWrapper,o=n.name,a=t.modelName,s=i.inverseForRelationship(a,o)
if(s){var u=i.relationshipsDefinitionFor(r)[s].meta.kind
return{inverseKey:s,kind:u}}}(e,t,n,r)}(n,t,r,o)
if(s){var u=s.inverseKey,c=s.kind,l=a[u]&&a[u].data
"hasMany"===c&&void 0===l||(a[u]=a[u]||{},a[u].data=function(e,t,n){var r,i=n.id,o=n.modelName,a={id:i,type:o}
"hasMany"===t?(r=e||[]).push(a):(r=e||{},Ember.assign(r,a))
return r}(l,c,t))}}(t,n,e,r),{id:o,type:a}},Array.isArray(o)?o.map(a):a(o))
e.push({data:{id:n.id,type:n.modelName,relationships:(i={},i[r.key]={data:s},i)}})}function Me(e,t,n,r){var i=t.modelFor(n),o=t.peekAll(n),a=o._createSnapshot(r),s=Ember.RSVP.Promise.resolve().then(function(){return e.findAll(t,i,null,a)})
return(s=G(s,t,"DS: Handle Adapter#findAll of "+i)).then(function(r){var a=Ie(Ne(t,e,n),t,i,r,null,"findAll")
return t._push(a),t._didUpdateAll(n),o},null,"DS: Extract payload of findAll ${modelName}")}function Fe(e){var t=Object.create(null)
for(var n in e)t[n]=e[n]
return t}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be=function(){function e(e,t,n){void 0===n&&(n={}),this._snapshots=null,this._recordArray=e,this.length=e.get("length"),this._type=null,this.meta=t,this.adapterOptions=n.adapterOptions,this.include=n.include}var t,n,r
return e.prototype.snapshots=function(){return null!==this._snapshots?this._snapshots:(this._snapshots=this._recordArray._takeSnapshot(),this._snapshots)},t=e,(n=[{key:"type",get:function(){return this._type||(this._type=this._recordArray.get("type"))}}])&&Le(t.prototype,n),r&&Le(t,r),e}(),je=Ember.ArrayProxy.extend(o,{init:function(){this._super.apply(this,arguments),this.set("content",this.content||null),this.isLoaded=this.isLoaded||!1,this.isUpdating=!1,this.store=this.store||null,this._updatingPromise=null},replace:function(){throw new Error("The result of a server query (for all "+this.modelName+" types) is immutable. To modify contents, use toArray()")},type:Ember.computed("modelName",function(){return this.modelName?this.store.modelFor(this.modelName):null}).readOnly(),objectAtContent:function(e){var t=Ember.get(this,"content").objectAt(e)
return t&&t.getRecord()},update:function(){var e=this
if(Ember.get(this,"isUpdating"))return this._updatingPromise
this.set("isUpdating",!0)
var t=this._update().finally(function(){e._updatingPromise=null,e.get("isDestroying")||e.get("isDestroyed")||e.set("isUpdating",!1)})
return this._updatingPromise=t,t},_update:function(){return this.store.findAll(this.modelName,{reload:!0})},_pushInternalModels:function(e){Ember.get(this,"content").pushObjects(e)},_removeInternalModels:function(e){Ember.get(this,"content").removeObjects(e)},save:function(){var e=this,t="DS: RecordArray#save "+this.modelName,n=Ember.RSVP.Promise.all(this.invoke("save"),t).then(function(){return e},null,"DS: RecordArray#save return RecordArray")
return a.create({promise:n})},_dissociateFromOwnRecords:function(){var e=this
this.get("content").forEach(function(t){var n=t.__recordArrays
n&&n.delete(e)})},_unregisterFromManager:function(){this.manager.unregisterRecordArray(this)},willDestroy:function(){this._unregisterFromManager(),this._dissociateFromOwnRecords(),Ember.set(this,"content",null),Ember.set(this,"length",0),this._super.apply(this,arguments)},_createSnapshot:function(e){return new Be(this,this.get("meta"),e)},_takeSnapshot:function(){return Ember.get(this,"content").map(function(e){return e.createSnapshot()})}}),ze=je.extend({init:function(){this.set("content",this.get("content")||Ember.A()),this._super.apply(this,arguments),this.query=this.query||null,this.links=this.links||null},replace:function(){throw new Error("The result of a server query (on "+this.modelName+") is immutable.")},_update:function(){var e=Ember.get(this,"store"),t=Ember.get(this,"query")
return e._query(this.modelName,t,this)},_setInternalModels:function(e,t){this.get("content").setObjects(e),this.setProperties({isLoaded:!0,isUpdating:!1,meta:Fe(t.meta),links:Fe(t.links)}),this.manager._associateWithRecordArray(e,this),this.has("didLoad")&&Ember.run.once(this,"trigger","didLoad")}}),Ue=Ember.run.backburner,We=function(){function e(e){this.store=e.store,this.isDestroying=!1,this.isDestroyed=!1,this._liveRecordArrays=Object.create(null),this._pending=Object.create(null),this._adapterPopulatedRecordArrays=[]}var t=e.prototype
return t.recordDidChange=function(e){this.internalModelDidChange(e)},t.recordWasLoaded=function(e){this.internalModelDidChange(e)},t.internalModelDidChange=function(e){var t=e.modelName
if(!e._pendingRecordArrayManagerFlush){e._pendingRecordArrayManagerFlush=!0
var n=this._pending
1===(n[t]=n[t]||[]).push(e)&&Ue.schedule("actions",this,this._flush)}},t._flushPendingInternalModelsForModelName=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r]
i._pendingRecordArrayManagerFlush=!1,i.isHiddenFromRecordArrays()&&n.push(i)}var o=this._liveRecordArrays[e]
o&&this.updateLiveRecordArray(o,t),n.length>0&&function(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=n._recordArrays.list,i=0;i<r.length;i++)r[i]._removeInternalModels([n])
n._recordArrays.clear()}}(n)},t._flush=function(){var e=this._pending
for(var t in this._pending=Object.create(null),e)this._flushPendingInternalModelsForModelName(t,e[t])},t.updateLiveRecordArray=function(e,t){return function(e,t){for(var n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o.isHiddenFromRecordArrays(),s=o._recordArrays
a||o.isEmpty()||s.has(e)||(n.push(o),s.add(e)),a&&(r.push(o),s.delete(e))}n.length>0&&e._pushInternalModels(n)
r.length>0&&e._removeInternalModels(r)
return(n.length||r.length)>0}(e,t)},t._syncLiveRecordArray=function(e,t){var n=this._pending[t],r=Array.isArray(n),i=!r||0===n.length,o=se(this.store).modelMapFor(t),a=Ember.get(o,"length")===Ember.get(e,"length")
if(!i||!a){r&&(this._flushPendingInternalModelsForModelName(t,n),delete this._pending[t])
for(var s=this._visibleInternalModelsByType(t),u=[],c=0;c<s.length;c++){var l=s[c],h=l._recordArrays
!1===h.has(e)&&(h.add(e),u.push(l))}u.length&&e._pushInternalModels(u)}},t._didUpdateAll=function(e){var t=this._liveRecordArrays[e]
t&&Ember.set(t,"isUpdating",!1)},t.liveRecordArrayFor=function(e){var t=this._liveRecordArrays[e]
if(t)this._syncLiveRecordArray(t,e)
else{var n=this._visibleInternalModelsByType(e)
t=this.createRecordArray(e,n),this._liveRecordArrays[e]=t}return t},t._visibleInternalModelsByType=function(e){for(var t=se(this.store).modelMapFor(e)._models,n=[],r=0;r<t.length;r++){var i=t[r]
!1===i.isHiddenFromRecordArrays()&&n.push(i)}return n},t.createRecordArray=function(e,t){var n=je.create({modelName:e,content:Ember.A(t||[]),store:this.store,isLoaded:!0,manager:this})
return Array.isArray(t)&&qe(t,n),n},t.createAdapterPopulatedRecordArray=function(e,t,n,r){var i
return Array.isArray(n)?qe(n,i=ze.create({modelName:e,query:t,content:Ember.A(n),store:this.store,manager:this,isLoaded:!0,isUpdating:!1,meta:Fe(r.meta),links:Fe(r.links)})):i=ze.create({modelName:e,query:t,content:Ember.A(),store:this.store,manager:this}),this._adapterPopulatedRecordArrays.push(i),i},t.unregisterRecordArray=function(e){var t=e.modelName
if(!function(e,t){var n=e.indexOf(t)
if(-1!==n)return e.splice(n,1),!0
return!1}(this._adapterPopulatedRecordArrays,e)){var n=this._liveRecordArrays[t]
n&&e===n&&delete this._liveRecordArrays[t]}},t._associateWithRecordArray=function(e,t){qe(e,t)},t.willDestroy=function(){var e=this
Object.keys(this._liveRecordArrays).forEach(function(t){return e._liveRecordArrays[t].destroy()}),this._adapterPopulatedRecordArrays.forEach(Ve),this.isDestroyed=!0},t.destroy=function(){this.isDestroying=!0,Ue.schedule("actions",this,this.willDestroy)},e}()
function Ve(e){e.destroy()}function qe(e,t){for(var n=0,r=e.length;n<r;n++){e[n]._recordArrays.add(t)}}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ge=function(){function e(e,t,n,r,i){this.inverseIsAsync=void 0,this.kind=void 0,this.recordData=void 0,this.members=void 0,this.canonicalMembers=void 0,this.store=void 0,this.key=void 0,this.inverseKey=void 0,this.isAsync=void 0,this.isPolymorphic=void 0,this.relationshipMeta=void 0,this.inverseKeyForImplicit=void 0,this.meta=void 0,this.__inverseMeta=void 0,this._tempModelName=void 0,this.shouldForceReload=!1,this.relationshipIsStale=void 0,this.hasDematerializedInverse=void 0,this.hasAnyRelationshipData=void 0,this.relationshipIsEmpty=void 0,this.hasFailedLoadAttempt=!1,this.link=void 0,this.willSync=void 0,this.inverseIsAsync=i,this.kind=n.kind
var o=n.options.async,a=n.options.polymorphic
this.recordData=r,this.members=new W,this.canonicalMembers=new W,this.store=e,this.key=n.key||null,this.inverseKey=t,this.isAsync=void 0===o||o,this.isPolymorphic=void 0!==a&&a,this.relationshipMeta=n,this.inverseKeyForImplicit=this._tempModelName+this.key,this.meta=null,this.__inverseMeta=void 0,this.relationshipIsStale=!1,this.hasDematerializedInverse=!1,this.hasAnyRelationshipData=!1,this.relationshipIsEmpty=!0}var t,n,r,i=e.prototype
return i._inverseIsAsync=function(){return!!this.inverseIsAsync},i._inverseIsSync=function(){return!(!this.inverseKey||this.inverseIsAsync)},i._hasSupportForImplicitRelationships=function(e){return void 0!==e._implicitRelationships&&null!==e._implicitRelationships},i._hasSupportForRelationships=function(e){return void 0!==e._relationships&&null!==e._relationships},i.recordDataDidDematerialize=function(){var e=this,t=this.inverseKey
t&&this.forAllMembers(function(n){if(e._hasSupportForRelationships(n)){var r=O(n,t),i=n.getBelongsTo(t)._relationship
i&&i.inverseRecordData&&e.recordData!==i.inverseRecordData||r.inverseDidDematerialize(e.recordData)}})},i.forAllMembers=function(e){for(var t=Object.create(null),n=0;n<this.members.list.length;n++){var r=this.members.list[n],i=Ember.guidFor(r)
t[i]||(t[i]=!0,e(r))}for(var o=0;o<this.canonicalMembers.list.length;o++){var a=this.canonicalMembers.list[o],s=Ember.guidFor(a)
t[s]||(t[s]=!0,e(a))}},i.inverseDidDematerialize=function(e){!this.isAsync||e&&e.isNew()?(this.removeRecordDataFromOwn(e),this.removeCanonicalRecordDataFromOwn(e),this.setRelationshipIsEmpty(!0)):this.setHasDematerializedInverse(!0)},i.updateMeta=function(e){this.meta=e},i.clear=function(){for(var e=this.members.list;e.length>0;){var t=e[0]
this.removeRecordData(t)}for(var n=this.canonicalMembers.list;n.length>0;){var r=n[0]
this.removeCanonicalRecordData(r)}},i.removeAllRecordDatasFromOwn=function(){this.setRelationshipIsStale(!0),this.members.clear()},i.removeAllCanonicalRecordDatasFromOwn=function(){this.canonicalMembers.clear(),this.flushCanonicalLater()},i.removeRecordDatas=function(e){var t=this
e.forEach(function(e){return t.removeRecordData(e)})},i.addRecordDatas=function(e,t){var n=this
e.forEach(function(e){n.addRecordData(e,t),void 0!==t&&t++})},i.addCanonicalRecordDatas=function(e,t){for(var n=0;n<e.length;n++)void 0!==t?this.addCanonicalRecordData(e[n],n+t):this.addCanonicalRecordData(e[n])},i.addCanonicalRecordData=function(e,t){this.canonicalMembers.has(e)||(this.canonicalMembers.add(e),this.setupInverseRelationship(e)),this.flushCanonicalLater(),this.setHasAnyRelationshipData(!0)},i.setupInverseRelationship=function(t){if(this.inverseKey){if(!this._hasSupportForRelationships(t))return
O(t,this.inverseKey).addCanonicalRecordData(this.recordData)}else{if(!this._hasSupportForImplicitRelationships(t))return
var n=t._implicitRelationships,r=n[this.inverseKeyForImplicit]
r||(r=n[this.inverseKeyForImplicit]=new e(this.store,this.key,{options:{async:this.isAsync}},t)),r.addCanonicalRecordData(this.recordData)}},i.removeCanonicalRecordDatas=function(e,t){for(var n=0;n<e.length;n++)void 0!==t?this.removeCanonicalRecordData(e[n],n+t):this.removeCanonicalRecordData(e[n])},i.removeCanonicalRecordData=function(e,t){this.canonicalMembers.has(e)&&(this.removeCanonicalRecordDataFromOwn(e),this.inverseKey?this.removeCanonicalRecordDataFromInverse(e):this._hasSupportForImplicitRelationships(e)&&e._implicitRelationships[this.inverseKeyForImplicit]&&e._implicitRelationships[this.inverseKeyForImplicit].removeCanonicalRecordData(this.recordData)),this.flushCanonicalLater()},i.addRecordData=function(t,n){this.members.has(t)||(this.members.addWithIndex(t,n),this.notifyRecordRelationshipAdded(t,n),this._hasSupportForRelationships(t)&&this.inverseKey?O(t,this.inverseKey).addRecordData(this.recordData):this._hasSupportForImplicitRelationships(t)&&(t._implicitRelationships[this.inverseKeyForImplicit]||(t._implicitRelationships[this.inverseKeyForImplicit]=new e(this.store,this.key,{options:{async:this.isAsync}},t,this.isAsync)),t._implicitRelationships[this.inverseKeyForImplicit].addRecordData(this.recordData))),this.setHasAnyRelationshipData(!0)},i.removeRecordData=function(e){this.members.has(e)&&(this.removeRecordDataFromOwn(e),this.inverseKey?this.removeRecordDataFromInverse(e):this._hasSupportForImplicitRelationships(e)&&e._implicitRelationships[this.inverseKeyForImplicit]&&e._implicitRelationships[this.inverseKeyForImplicit].removeRecordData(this.recordData))},i.removeRecordDataFromInverse=function(e){if(this._hasSupportForRelationships(e)){var t=O(e,this.inverseKey)
t&&t.removeRecordDataFromOwn(this.recordData)}},i.removeRecordDataFromOwn=function(e,t){this.members.delete(e)},i.removeCanonicalRecordDataFromInverse=function(e){if(this._hasSupportForRelationships(e)){var t=O(e,this.inverseKey)
t&&t.removeCanonicalRecordDataFromOwn(this.recordData)}},i.removeCanonicalRecordDataFromOwn=function(e,t){this.canonicalMembers.delete(e),this.flushCanonicalLater()},i.removeCompletelyFromInverse=function(){var e=this
if(this.inverseKey){var t=Object.create(null),n=this.recordData,r=function(r){var i=Ember.guidFor(r)
e._hasSupportForRelationships(r)&&void 0===t[i]&&(O(r,e.inverseKey).removeCompletelyFromOwn(n),t[i]=!0)}
this.members.forEach(r),this.canonicalMembers.forEach(r),this.isAsync||this.clear()}},i.removeCompletelyFromOwn=function(e){this.canonicalMembers.delete(e),this.members.delete(e)},i.flushCanonical=function(){var e=this.members.list
this.willSync=!1
for(var t=[],n=0;n<e.length;n++)e[n].isNew()&&t.push(e[n])
this.members=this.canonicalMembers.copy()
for(var r=0;r<t.length;r++)this.members.add(t[r])},i.flushCanonicalLater=function(){this.willSync||(this.willSync=!0,this.store._updateRelationshipState(this))},i.updateLink=function(e){this.link=e},i.updateRecordDatasFromAdapter=function(e){this.setHasAnyRelationshipData(!0),this.computeChanges(e)},i.computeChanges=function(e){},i.notifyRecordRelationshipAdded=function(e,t){},i.setHasAnyRelationshipData=function(e){this.hasAnyRelationshipData=e},i.setHasDematerializedInverse=function(e){this.hasDematerializedInverse=e},i.setRelationshipIsStale=function(e){this.relationshipIsStale=e},i.setRelationshipIsEmpty=function(e){this.relationshipIsEmpty=e},i.setShouldForceReload=function(e){this.shouldForceReload=e},i.setHasFailedLoadAttempt=function(e){this.hasFailedLoadAttempt=e},i.push=function(e,t){var n=!1,r=!1
if(e.meta&&this.updateMeta(e.meta),void 0!==e.data)n=!0,this.updateData(e.data,t)
else if(!1===this.isAsync&&!this.hasAnyRelationshipData){n=!0
var i="hasMany"===this.kind?[]:null
this.updateData(i,t)}if(e.links&&e.links.related){var o=function(e){switch(typeof e){case"object":return e
case"string":return{href:e}}return null}(e.links.related)
o&&o.href&&o.href!==this.link&&(r=!0,this.updateLink(o.href))}if(this.setHasFailedLoadAttempt(!1),n){var a=null===e.data||Array.isArray(e.data)&&0===e.data.length
this.setHasAnyRelationshipData(!0),this.setRelationshipIsStale(!1),this.setHasDematerializedInverse(!1),this.setRelationshipIsEmpty(a)}else if(r&&(this.setRelationshipIsStale(!0),!t)){var s=this.recordData
this.recordData.storeWrapper.notifyPropertyChange(s.modelName,s.id,s.clientId,this.key)}},i.localStateIsEmpty=function(){},i.updateData=function(e,t){},i.destroy=function(){},t=e,(n=[{key:"isNew",get:function(){return this.recordData.isNew()}},{key:"_inverseMeta",get:function(){if(void 0===this.__inverseMeta){var e=null
if(this.inverseKey){var t=this.relationshipMeta.type,n=this.store.modelFor(t)
e=Ember.get(n,"relationshipsByName").get(this.inverseKey)}this.__inverseMeta=e}return this.__inverseMeta}}])&&He(t.prototype,n),r&&He(t,r),e}()
function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e=function(e){var t,n
function r(t,n,r,i,o){var a
return(a=e.call(this,t,n,r,i,o)||this).canonicalState=void 0,a.currentState=void 0,a._willUpdateManyArray=void 0,a._pendingManyArrayUpdates=void 0,a.key=void 0,a.canonicalState=[],a.currentState=[],a._willUpdateManyArray=!1,a._pendingManyArrayUpdates=null,a.key=r.key,a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n
var i,o,a,s=r.prototype
return s.addCanonicalRecordData=function(t,n){this.canonicalMembers.has(t)||(void 0!==n?this.canonicalState.splice(n,0,t):this.canonicalState.push(t),e.prototype.addCanonicalRecordData.call(this,t,n))},s.inverseDidDematerialize=function(t){e.prototype.inverseDidDematerialize.call(this,t),this.isAsync&&this.notifyManyArrayIsStale()},s.addRecordData=function(t,n){this.members.has(t)||(e.prototype.addRecordData.call(this,t,n),void 0===n&&(n=this.currentState.length),this.currentState.splice(n,0,t),this.notifyHasManyChange())},s.removeCanonicalRecordDataFromOwn=function(t,n){var r=n
this.canonicalMembers.has(t)&&(void 0===r&&(r=this.canonicalState.indexOf(t)),r>-1&&this.canonicalState.splice(r,1),e.prototype.removeCanonicalRecordDataFromOwn.call(this,t,n))},s.removeAllCanonicalRecordDatasFromOwn=function(){e.prototype.removeAllCanonicalRecordDatasFromOwn.call(this),this.canonicalMembers.clear(),this.canonicalState.splice(0,this.canonicalState.length),e.prototype.removeAllCanonicalRecordDatasFromOwn.call(this)},s.removeCompletelyFromOwn=function(t){e.prototype.removeCompletelyFromOwn.call(this,t)
var n=this.canonicalState.indexOf(t);-1!==n&&this.canonicalState.splice(n,1),this.removeRecordDataFromOwn(t)},s.flushCanonical=function(){var t=this.canonicalState,n=this.currentState.filter(function(e){return e.isNew()&&-1===t.indexOf(e)})
t=t.concat(n),this.currentState=t,e.prototype.flushCanonical.call(this),this.notifyHasManyChange()},s.removeRecordDataFromOwn=function(t,n){e.prototype.removeRecordDataFromOwn.call(this,t,n)
var r=n||this.currentState.indexOf(t);-1!==r&&(this.currentState.splice(r,1),this.notifyHasManyChange())},s.notifyRecordRelationshipAdded=function(){this.notifyHasManyChange()},s.computeChanges=function(e){void 0===e&&(e=[])
var t=this.canonicalMembers,n=[],r=function(e){var t=new W
if(e)for(var n=0,r=e.length;n<r;n++)t.add(e[n])
return t}(e)
t.forEach(function(e){r.has(e)||n.push(e)}),this.removeCanonicalRecordDatas(n)
for(var i=0,o=e.length;i<o;i++){var a=e[i]
this.removeCanonicalRecordData(a),this.addCanonicalRecordData(a,i)}},s.setInitialRecordDatas=function(e){if(!1!==Array.isArray(e)&&e&&0!==e.length){for(var t=0;t<e.length;t++){var n=e[t]
this.canonicalMembers.has(n)||(this.canonicalMembers.add(n),this.members.add(n),this.setupInverseRelationship(n))}this.canonicalState=this.canonicalMembers.toArray()}},s.notifyManyArrayIsStale=function(){var e=this.recordData
e.storeWrapper.notifyPropertyChange(e.modelName,e.id,e.clientId,this.key)},s.notifyHasManyChange=function(){var e=this.recordData
e.storeWrapper.notifyHasManyChange(e.modelName,e.id,e.clientId,this.key)},s.getData=function(){var e={}
return this.hasAnyRelationshipData&&(e.data=this.currentState.map(function(e){return e.getResourceIdentifier()})),this.link&&(e.links={related:this.link}),this.meta&&(e.meta=this.meta),e._relationship=this,e},s.updateData=function(e,t){var n
if(Ember.isNone(e))n=void 0
else{n=new Array(e.length)
for(var r=0;r<e.length;r++)n[r]=this.recordData.storeWrapper.recordDataFor(e[r].type,e[r].id)}t?this.setInitialRecordDatas(n):this.updateRecordDatasFromAdapter(n)},i=r,(o=[{key:"allInverseRecordsAreLoaded",get:function(){var e=this.currentState.reduce(function(e,t){return e||t.isEmpty()},!1)
return!e&&this.willSync&&(e=this.canonicalState.reduce(function(e,t){return e||!t.isEmpty()},!1)),!e}}])&&Ke(i.prototype,o),a&&Ke(i,a),r}(Ge)
function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ye=function(e){var t,n
function r(t,n,r,i,o){var a
return(a=e.call(this,t,n,r,i,o)||this).inverseRecordData=void 0,a.canonicalState=void 0,a.key=void 0,a.key=r.key,a.inverseRecordData=null,a.canonicalState=null,a.key=r.key,a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n
var i,o,a,s=r.prototype
return s.setRecordData=function(e){e?this.addRecordData(e):this.inverseRecordData&&this.removeRecordData(this.inverseRecordData),this.setHasAnyRelationshipData(!0),this.setRelationshipIsStale(!1),this.setRelationshipIsEmpty(!1)},s.setCanonicalRecordData=function(e){e?this.addCanonicalRecordData(e):this.canonicalState&&this.removeCanonicalRecordData(this.canonicalState),this.flushCanonicalLater()},s.setInitialCanonicalRecordData=function(e){e&&(this.canonicalMembers.add(e),this.members.add(e),this.inverseRecordData=this.canonicalState=e,this.setupInverseRelationship(e))},s.addCanonicalRecordData=function(t){this.canonicalMembers.has(t)||(this.canonicalState&&this.removeCanonicalRecordData(this.canonicalState),this.canonicalState=t,e.prototype.addCanonicalRecordData.call(this,t),this.setHasAnyRelationshipData(!0),this.setRelationshipIsEmpty(!1))},s.inverseDidDematerialize=function(){e.prototype.inverseDidDematerialize.call(this,this.inverseRecordData),this.notifyBelongsToChange()},s.removeCompletelyFromOwn=function(t){e.prototype.removeCompletelyFromOwn.call(this,t),this.canonicalState===t&&(this.canonicalState=null),this.inverseRecordData===t&&(this.inverseRecordData=null,this.notifyBelongsToChange())},s.removeCompletelyFromInverse=function(){e.prototype.removeCompletelyFromInverse.call(this),this.inverseRecordData=null},s.flushCanonical=function(){this.inverseRecordData&&this.inverseRecordData.isNew()&&!this.canonicalState?this.willSync=!1:(this.inverseRecordData!==this.canonicalState&&(this.inverseRecordData=this.canonicalState,this.notifyBelongsToChange()),e.prototype.flushCanonical.call(this))},s.addRecordData=function(t){this.members.has(t)||(this.inverseRecordData&&this.removeRecordData(this.inverseRecordData),this.inverseRecordData=t,e.prototype.addRecordData.call(this,t),this.notifyBelongsToChange())},s.removeRecordDataFromOwn=function(t){this.members.has(t)&&(this.inverseRecordData=null,e.prototype.removeRecordDataFromOwn.call(this,t),this.notifyBelongsToChange())},s.removeAllRecordDatasFromOwn=function(){e.prototype.removeAllRecordDatasFromOwn.call(this),this.inverseRecordData=null,this.notifyBelongsToChange()},s.notifyBelongsToChange=function(){var e=this.recordData
this.recordData.storeWrapper.notifyBelongsToChange(e.modelName,e.id,e.clientId,this.key)},s.removeCanonicalRecordDataFromOwn=function(t){this.canonicalMembers.has(t)&&(this.canonicalState=null,this.setHasAnyRelationshipData(!0),this.setRelationshipIsEmpty(!0),e.prototype.removeCanonicalRecordDataFromOwn.call(this,t))},s.removeAllCanonicalRecordDatasFromOwn=function(){e.prototype.removeAllCanonicalRecordDatasFromOwn.call(this),this.canonicalState=null},s.getData=function(){var e,t={}
return this.inverseRecordData&&(e=this.inverseRecordData.getResourceIdentifier()),null===this.inverseRecordData&&this.hasAnyRelationshipData&&(e=null),this.link&&(t.links={related:this.link}),void 0!==e&&(t.data=e),this.meta&&(t.meta=this.meta),t._relationship=this,t},s.updateData=function(e,t){var n
Ember.isNone(e)&&(n=null),null!==n&&(n=this.recordData.storeWrapper.recordDataFor(e.type,e.id)),t?this.setInitialCanonicalRecordData(n):this.setCanonicalRecordData(n)},i=r,(o=[{key:"allInverseRecordsAreLoaded",get:function(){var e=this.inverseRecordData
return!(null!==e&&e.isEmpty())}}])&&Xe(i.prototype,o),a&&Xe(i,a),r}(Ge)
var Qe=function(){function e(e){this.recordData=e,this._store=void 0,this._storeWrapper=void 0,this.initializedRelationships=void 0,this.initializedRelationships=Object.create(null),this._storeWrapper=Se(e.storeWrapper),this._store=this._storeWrapper._store}var t=e.prototype
return t.has=function(e){return!!this.initializedRelationships[e]},t.forEach=function(e){var t=this.initializedRelationships
Object.keys(t).forEach(function(n){e(n,t[n])})},t.get=function(e){var t=this.initializedRelationships,n=t[e]
if(!n){var r=this.recordData,i=this.recordData.storeWrapper.relationshipsDefinitionFor(this.recordData.modelName)[e]
i&&(n=t[e]=function(e,t,n,r){var i=n.storeWrapper.inverseForRelationship(n.modelName,r),o=n.storeWrapper.inverseIsAsyncForRelationship(n.modelName,r)
return"hasMany"===e.kind?new $e(t,i,e,n,o):new Ye(t,i,e,n,o)}(i,this._store,r,e))}return n},e}()
function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ze=1,et=function(){function e(e,t,n,r){this.modelName=e,this.id=t,this.clientId=n,this.storeWrapper=r,this._errors=void 0,this.__relationships=void 0,this.__implicitRelationships=void 0,this.isDestroyed=void 0,this._isNew=void 0,this._bfsId=void 0,this.__attributes=void 0,this.__inFlightAttributes=void 0,this.__data=void 0,this._scheduledDestroy=void 0,this._isDeleted=void 0,this._isDeletionCommited=void 0,this.__relationships=null,this.__implicitRelationships=null,this.storeWrapper=r,this.isDestroyed=!1,this._isNew=!1,this._bfsId=0,this.reset()}var t,n,i,o=e.prototype
return o.getResourceIdentifier=function(){return{id:this.id,type:this.modelName,clientId:this.clientId}},o.pushData=function(e,t){var n
return this._isNew&&(this._isNew=!1,this.notifyStateChange()),t&&(n=this._changedKeys(e.attributes)),Ember.assign(this._data,e.attributes),this.__attributes&&this._updateChangedAttributes(),e.relationships&&this._setupRelationships(e),e.id&&(this.id=te(e.id)),n},o.willCommit=function(){this._inFlightAttributes=this._attributes,this._attributes=null},o.hasChangedAttributes=function(){return null!==this.__attributes&&Object.keys(this.__attributes).length>0},o._clearErrors=function(){r.RECORD_DATA_ERRORS&&this._errors&&(this._errors=void 0,this.storeWrapper.notifyErrorsChange(this.modelName,this.id,this.clientId))},o.getErrors=function(){return r.RECORD_DATA_ERRORS&&this._errors||[]},o.isEmpty=function(){return null===this.__attributes&&null===this.__inFlightAttributes&&null===this.__data},o.deleteRecord=function(){this._isDeleted=!0,this.notifyStateChange()},o.isDeleted=function(){return this._isDeleted},o.setIsDeleted=function(e){this._isDeleted=e,this._isNew&&this._deletionConfirmed(),this.notifyStateChange()},o.isDeletionCommitted=function(){return this._isDeletionCommited},o.reset=function(){this.__attributes=null,this.__inFlightAttributes=null,this.__data=null,this._errors=void 0},o._setupRelationships=function(e){for(var t=this.storeWrapper.relationshipsDefinitionFor(this.modelName),n=Object.keys(t),r=0;r<n.length;r++){var i=n[r]
if(e.relationships[i]){var o=e.relationships[i]
this._relationships.get(i).push(o)}}},o._updateChangedAttributes=function(){for(var e=this.changedAttributes(),t=Object.keys(e),n=this._attributes,r=0,i=t.length;r<i;r++){var o=t[r],a=e[o]
a[0]===a[1]&&delete n[o]}},o.changedAttributes=function(){for(var e=this._data,t=this._attributes,n=this._inFlightAttributes,r=Ember.assign({},n,t),i=Object.create(null),o=Object.keys(r),a=0,s=o.length;a<s;a++){var u=o[a]
i[u]=[e[u],r[u]]}return i},o.isNew=function(){return this._isNew},o.rollbackAttributes=function(){var e
return this._isDeleted=!1,this.hasChangedAttributes()&&(e=Object.keys(this._attributes),this._attributes=null),this.isNew()&&(this.removeFromInverseRelationships(!0),this._isDeleted=!0,this._isNew=!1),this._inFlightAttributes=null,this._clearErrors(),this.notifyStateChange(),e},o._deletionConfirmed=function(){this.removeFromInverseRelationships()},o.didCommit=function(e){this._isDeleted&&(this._deletionConfirmed(),this._isDeletionCommited=!0),this._isNew=!1
var t=null
e&&(e.relationships&&this._setupRelationships(e),e.id&&(this.storeWrapper.setRecordId(this.modelName,e.id,this.clientId),this.id=te(e.id)),t=e.attributes||null)
var n=this._changedKeys(t)
return Ember.assign(this._data,this.__inFlightAttributes,t),this._inFlightAttributes=null,this._updateChangedAttributes(),this._clearErrors(),this.notifyStateChange(),n},o.notifyStateChange=function(){r.RECORD_DATA_STATE&&this.storeWrapper.notifyStateChange(this.modelName,this.id,this.clientId)},o.getHasMany=function(e){return this._relationships.get(e).getData()},o.setDirtyHasMany=function(e,t){var n=this._relationships.get(e)
n.clear(),n.addRecordDatas(t)},o.addToHasMany=function(e,t,n){this._relationships.get(e).addRecordDatas(t,n)},o.removeFromHasMany=function(e,t){this._relationships.get(e).removeRecordDatas(t)},o.commitWasRejected=function(e,t){var n=Object.keys(this._inFlightAttributes)
if(n.length>0)for(var i=this._attributes,o=0;o<n.length;o++)void 0===i[n[o]]&&(i[n[o]]=this._inFlightAttributes[n[o]])
this._inFlightAttributes=null,r.RECORD_DATA_ERRORS&&(t&&(this._errors=t),this.storeWrapper.notifyErrorsChange(this.modelName,this.id,this.clientId))},o.getBelongsTo=function(e){return this._relationships.get(e).getData()},o.setDirtyBelongsTo=function(e,t){this._relationships.get(e).setRecordData(t)},o.setDirtyAttribute=function(e,t){this._attributes[e]=t,t===(e in this._inFlightAttributes?this._inFlightAttributes[e]:this._data[e])&&delete this._attributes[e]},o.getAttr=function(e){return e in this._attributes?this._attributes[e]:e in this._inFlightAttributes?this._inFlightAttributes[e]:this._data[e]},o.hasAttr=function(e){return e in this._attributes||e in this._inFlightAttributes||e in this._data},o.unloadRecord=function(){this.isDestroyed||(this._destroyRelationships(),this.reset(),this._scheduledDestroy||(this._scheduledDestroy=Ember.run.backburner.schedule("destroy",this,"_cleanupOrphanedRecordDatas")))},o._cleanupOrphanedRecordDatas=function(){var e=this._allRelatedRecordDatas()
if(function(e){for(var t=0;t<e.length;++t)if(e[t].isRecordInUse())return!1
return!0}(e))for(var t=0;t<e.length;++t){var n=e[t]
n.isDestroyed||n.destroy()}this._scheduledDestroy=null},o.destroy=function(){this._relationships.forEach(function(e,t){return t.destroy()}),this.isDestroyed=!0,this.storeWrapper.disconnectRecord(this.modelName,this.id,this.clientId)},o.isRecordInUse=function(){return this.storeWrapper.isRecordInUse(this.modelName,this.id,this.clientId)},o._directlyRelatedRecordDatas=function(){var e=[]
return this._relationships.forEach(function(t,n){var r=n.members.list,i=n.canonicalMembers.list
e=e.concat(r,i)}),e},o._allRelatedRecordDatas=function(){var t=[],n=[],r=Ze++
for(n.push(this),this._bfsId=r;n.length>0;){var i=n.shift()
t.push(i)
for(var o=i._directlyRelatedRecordDatas(),a=0;a<o.length;++a){var s=o[a]
s instanceof e&&s._bfsId<r&&(n.push(s),s._bfsId=r)}}return t},o.isAttrDirty=function(e){return void 0!==this._attributes[e]&&(void 0!==this._inFlightAttributes[e]?this._inFlightAttributes[e]:this._data[e])!==this._attributes[e]},o._initRecordCreateOptions=function(e){var t={}
if(void 0!==e)for(var n=this.modelName,r=this.storeWrapper,i=r.attributesDefinitionFor(n),o=r.relationshipsDefinitionFor(n),a=this._relationships,s=Object.keys(e),u=0;u<s.length;u++){var c=s[u],l=e[c]
if("id"!==c){var h=o[c]||i[c],f=void 0
switch(void 0!==h?h.kind:null){case"attribute":this.setDirtyAttribute(c,l)
break
case"belongsTo":this.setDirtyBelongsTo(c,l),(f=a.get(c)).setHasAnyRelationshipData(!0),f.setRelationshipIsEmpty(!1)
break
case"hasMany":this.setDirtyHasMany(c,l),(f=a.get(c)).setHasAnyRelationshipData(!0),f.setRelationshipIsEmpty(!1)
break
default:t[c]=l}}else this.id=l}return t},o.removeFromInverseRelationships=function(e){void 0===e&&(e=!1),this._relationships.forEach(function(t,n){n.removeCompletelyFromInverse(),!0===e&&n.clear()})
var t=this._implicitRelationships
this.__implicitRelationships=null,Object.keys(t).forEach(function(n){var r=t[n]
r.removeCompletelyFromInverse(),!0===e&&r.clear()})},o._destroyRelationships=function(){this._relationships.forEach(function(e,t){return tt(t)})
var e=this._implicitRelationships
this.__implicitRelationships=null,Object.keys(e).forEach(function(t){tt(e[t])})},o.clientDidCreate=function(){this._isNew=!0},o._changedKeys=function(e){var t=[]
if(e){var n,r,i,o,a,s=Object.keys(e),u=s.length,c=this.hasChangedAttributes()
for(c&&(a=this._attributes),n=Ember.assign(Object.create(null),this._data,this.__inFlightAttributes),r=0;r<u;r++)i=e[o=s[r]],!0===c&&void 0!==a[o]||Ember.isEqual(n[o],i)||t.push(o)}return t},o.toString=function(){return"<"+this.modelName+":"+this.id+">"},t=e,(n=[{key:"_attributes",get:function(){return null===this.__attributes&&(this.__attributes=Object.create(null)),this.__attributes},set:function(e){this.__attributes=e}},{key:"_relationships",get:function(){return null===this.__relationships&&(this.__relationships=new Qe(this)),this.__relationships}},{key:"_data",get:function(){return null===this.__data&&(this.__data=Object.create(null)),this.__data},set:function(e){this.__data=e}},{key:"_implicitRelationships",get:function(){if(null===this.__implicitRelationships){var e=Object.create(null)
return this.__implicitRelationships=e,e}return this.__implicitRelationships}},{key:"_inFlightAttributes",get:function(){return null===this.__inFlightAttributes&&(this.__inFlightAttributes=Object.create(null)),this.__inFlightAttributes},set:function(e){this.__inFlightAttributes=e}}])&&Je(t.prototype,n),i&&Je(t,i),e}()
function tt(e){e.recordDataDidDematerialize(),e._inverseIsSync()&&(e.removeAllRecordDatasFromOwn(),e.removeAllCanonicalRecordDatasFromOwn())}var nt=new Ember._Backburner(["normalizeRelationships","syncRelationships","finished"])
function rt(e,t){return u(e.then(function(e){return e.getRecord()}),t)}var it=Ember.run.backburner,ot=(Ember.ENV,1),at=Ember.Service.extend({init:function(){this._super.apply(this,arguments),this._backburner=nt,this.recordArrayManager=new We({store:this}),this._pendingSave=[],this._modelFactoryCache=Object.create(null),this._relationshipsDefCache=Object.create(null),this._attributesDefCache=Object.create(null),this._pendingSave=[],this._updatedRelationships=[],this._pushedInternalModels=[],this._updatedInternalModels=[],this._pendingFetch=new Map,this._adapterCache=Object.create(null),this._serializerCache=Object.create(null),this.storeWrapper=new Te(this)},_backburner:null,adapter:"-json-api",defaultAdapter:Ember.computed("adapter",function(){var e=Ember.get(this,"adapter")
return this.adapterFor(e)}),createRecord:function(e,t){var n=this
return it.join(function(){return n._backburner.join(function(){var r=b(e),i=Ember.assign({},t)
Ember.isNone(i.id)&&(i.id=n._generateId(r,i)),i.id=te(i.id)
var o=se(n).build(r,i.id)
return o.loadedData(),o.didCreateRecord(),o.getRecord(i)})})},_generateId:function(e,t){var n=this.adapterFor(e)
return n&&n.generateIdForRecord?n.generateIdForRecord(this,e,t):null},deleteRecord:function(e){e.deleteRecord()},unloadRecord:function(e){e.unloadRecord()},find:function(e,t,n){return this.findRecord(e,t)},findRecord:function(e,t,n){var r=b(e),i=te(t),o=se(this).lookup(r,i,null)
return n=n||{},this.hasRecordForId(r,i)?rt(this._findRecord(o,n),"DS: Store#findRecord "+r+" with id: "+t):this._findByInternalModel(o,n)},_findRecord:function(e,t){if(t.reload)return this._scheduleFetch(e,t)
var n=e.createSnapshot(t),r=this.adapterFor(e.modelName)
return r.shouldReloadRecord(this,n)?this._scheduleFetch(e,t):!1===t.backgroundReload?Ember.RSVP.Promise.resolve(e):((t.backgroundReload||r.shouldBackgroundReloadRecord(this,n))&&this._scheduleFetch(e,t),Ember.RSVP.Promise.resolve(e))},_findByInternalModel:function(e,t){return void 0===t&&(t={}),t.preload&&e.preloadData(t.preload),rt(this._findEmptyInternalModel(e,t),"DS: Store#findRecord "+e.modelName+" with id: "+e.id)},_findEmptyInternalModel:function(e,t){return e.isEmpty()?this._scheduleFetch(e,t):e.isLoading()?e._promiseProxy:Ember.RSVP.Promise.resolve(e)},findByIds:function(e,t){for(var n=new Array(t.length),r=b(e),i=0;i<t.length;i++)n[i]=this.findRecord(r,t[i])
return c(Ember.RSVP.all(n).then(Ember.A,null,"DS: Store#findByIds of "+r+" complete"))},_fetchRecord:function(e,t){var n=e.modelName
return function(e,t,n,r,i,o){var a=i.createSnapshot(o),s=i.modelName,u=Ember.RSVP.Promise.resolve().then(function(){return e.findRecord(t,n,r,a)})
return(u=G(u,t,"DS: Handle Adapter#findRecord of '"+s+"' with id: '"+r+"'")).then(function(i){var o=Ie(Ne(t,e,s),t,n,i,r,"findRecord")
return t._push(o)},function(e){throw i.notFound(),i.isEmpty()&&i.unloadRecord(),e},"DS: Extract payload of '"+s+"'")}(this.adapterFor(n),this,e.type,e.id,e,t)},_scheduleFetchMany:function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=this._scheduleFetch(e[r],t)
return Ember.RSVP.Promise.all(n)},_scheduleFetch:function(e,t){if(e._promiseProxy)return e._promiseProxy
var n=e.id,r=e.modelName,i=Ember.RSVP.defer("Fetching "+r+"' with id: "+n),o={internalModel:e,resolver:i,options:t},a=i.promise
e.loadingData(a),0===this._pendingFetch.size&&it.schedule("actions",this,this.flushAllPendingFetches)
var s=this._pendingFetch
return s.has(r)||s.set(r,[]),s.get(r).push(o),a},flushAllPendingFetches:function(){this.isDestroyed||this.isDestroying||(this._pendingFetch.forEach(this._flushPendingFetchForType,this),this._pendingFetch.clear())},_flushPendingFetchForType:function(e,t){for(var n=this,r=n.adapterFor(t),i=!!r.findMany&&r.coalesceFindRequests,o=e.length,a=new Array(o),s=Object.create(null),u=new WeakMap,c=0;c<o;c++){var l=e[c],h=l.internalModel
a[c]=h,u.set(h,l.options),s[h.id]=l}function f(e){var t=n._fetchRecord(e.internalModel,e.options)
e.resolver.resolve(t)}function d(e,t){for(var n=Object.create(null),r=0,i=e.length;r<i;r++){var o=e[r],a=s[o.id]
if(n[o.id]=o,a)a.resolver.resolve(o)}for(var u=[],c=0,l=t.length;c<l;c++){var h=t[c]
n[h.id]||u.push(h)}u.length&&p(u)}function p(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n],o=s[i.id]
o&&o.resolver.reject(t||new Error("Expected: '"+i+"' to be present in the adapter provided payload, but it was not found."))}}if(i){for(var v=new Array(o),m=0;m<o;m++)v[m]=a[m].createSnapshot(u.get(C))
for(var g=r.groupRecordsForFindMany(this,v),y=0,b=g.length;y<b;y++){for(var x=g[y],w=g[y].length,_=new Array(w),R=new Array(w),E=0;E<w;E++){var C=x[E]._internalModel
R[E]=C,_[E]=C.id}if(w>1)(function(e){De(r,n,t,_,e,u).then(function(t){d(t,e)}).catch(function(t){p(e,t)})})(R)
else if(1===_.length){f(s[R[0].id])}}}else for(var k=0;k<o;k++)f(e[k])},getReference:function(e,t){var n=b(e),r=te(t)
return se(this).lookup(n,r,null).recordReference},peekRecord:function(e,t){var n=b(e),r=te(t)
return this.hasRecordForId(n,r)?se(this).lookup(n,r,null).getRecord():null},_reloadRecord:function(e,t){e.id
var n=e.modelName
this.adapterFor(n)
return this._scheduleFetch(e,t)},hasRecordForId:function(e,t){var n=b(e),r=te(t),i=se(this).peekId(n,r,null)
return!!i&&i.isLoaded()},recordForId:function(e,t){return se(this).lookup(e,te(t),null).getRecord()},findMany:function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=this._findEmptyInternalModel(e[r],t)
return Ember.RSVP.Promise.all(n)},findHasMany:function(e,t,n,r){return function(e,t,n,r,i,o){var a=n.createSnapshot(o),s=t.modelFor(i.type),u=e.findHasMany(t,a,r,i),c="DS: Handle Adapter#findHasMany of '"+n.modelName+"' : '"+i.type+"'"
return(u=q(u=G(u,t,c),V(H,n))).then(function(r){var o=Ie(Ne(t,e,i.type),t,s,r,null,"findHasMany")
Pe(t,o,n,i)
var a=t._push(o)
return a.meta=o.meta,a},null,"DS: Extract payload of '"+n.modelName+"' : hasMany '"+i.type+"'")}(this.adapterFor(e.modelName),this,e,t,n,r)},_findHasManyByJsonApiResource:function(e,t,n,r){var i=this
if(!e)return Ember.RSVP.resolve([])
var o=e._relationship,a=o.relationshipIsStale,s=o.allInverseRecordsAreLoaded,u=o.hasDematerializedInverse,c=o.hasAnyRelationshipData,l=o.relationshipIsEmpty,h=o.shouldForceReload
if(e.links&&e.links.related&&(h||u||a||!s&&!l))return this.findHasMany(t,e.links.related,n,r).then(function(e){var r={data:e.map(function(e){return A(e).getResourceIdentifier()})}
return void 0!==e.meta&&(r.meta=e.meta),t.linkWasLoadedForRelationship(n.key,r),e})
var f=c&&!l,d=u||l&&Array.isArray(e.data)&&e.data.length>0
if(!h&&!a&&(f||d)){var p=e.data.map(function(e){return i._internalModelForResource(e)})
return this.findMany(p,r)}if(c&&!l||d){var v=e.data.map(function(e){return i._internalModelForResource(e)})
return this._scheduleFetchMany(v,r)}return Ember.RSVP.resolve([])},_getHasManyByJsonApiResource:function(e){var t=this,n=[]
return e&&e.data&&(n=e.data.map(function(e){return t._internalModelForResource(e)})),n},findBelongsTo:function(e,t,n,r){return function(e,t,n,r,i,o){var a=n.createSnapshot(o),s=t.modelFor(i.type),u=e.findBelongsTo(t,a,r,i),c="DS: Handle Adapter#findBelongsTo of "+n.modelName+" : "+i.type
return(u=q(u=G(u,t,c),V(H,n))).then(function(r){var o=Ie(Ne(t,e,i.type),t,s,r,null,"findBelongsTo")
return o.data?(Pe(t,o,n,i),t._push(o)):null},null,"DS: Extract payload of "+n.modelName+" : "+i.type)}(this.adapterFor(e.modelName),this,e,t,n,r)},_fetchBelongsToLinkFromResource:function(e,t,n,r){return e&&e.links&&e.links.related?this.findBelongsTo(t,e.links.related,n,r).then(function(e){var r=e&&A(e).getResourceIdentifier()
return t.linkWasLoadedForRelationship(n.key,{data:r}),null===e?null:e.getRecord()}):Ember.RSVP.resolve(null)},_findBelongsToByJsonApiResource:function(e,t,n,r){if(!e)return Ember.RSVP.resolve(null)
var i=e.data?this._internalModelForResource(e.data):null,o=e._relationship,a=o.relationshipIsStale,s=o.allInverseRecordsAreLoaded,u=o.hasDematerializedInverse,c=o.hasAnyRelationshipData,l=o.relationshipIsEmpty,h=o.shouldForceReload,f=e.links&&e.links.related&&(h||u||a||!s&&!l)
if(i&&i.isLoading())return i._promiseProxy.then(function(){return i.getRecord()})
if(f)return this._fetchBelongsToLinkFromResource(e,t,n,r)
var d=c&&s&&!l,p=u||l&&e.data,v=void 0===e.data||null===e.data
return h||a||!d&&!p?!v&&null===e.data.id?Ember.RSVP.resolve(i.getRecord()):v?Ember.RSVP.resolve(null):this._scheduleFetch(i,r).then(function(){return i.getRecord()}):v?Ember.RSVP.resolve(null):this._findByInternalModel(i,r)},query:function(e,t,n){var r={}
n&&n.adapterOptions&&(r.adapterOptions=n.adapterOptions)
var i=b(e)
return this._query(i,t,null,r)},_query:function(e,t,n,r){return c(function(e,t,n,r,i,o){var a=t.modelFor(n)
i=i||t.recordArrayManager.createAdapterPopulatedRecordArray(n,r)
var s=Ember.RSVP.Promise.resolve().then(function(){return e.query(t,a,r,i,o)})
return(s=G(s,t,"DS: Handle Adapter#query of "+n)).then(function(o){var s=Ie(Ne(t,e,n),t,a,o,null,"query"),u=t._push(s)
return i?i._setInternalModels(u,s):i=t.recordArrayManager.createAdapterPopulatedRecordArray(n,r,u,s),i},null,"DS: Extract payload of query "+n)}(this.adapterFor(e),this,e,t,n,r))},queryRecord:function(e,t,n){var r=b(e),i=this.adapterFor(r),o={}
return n&&n.adapterOptions&&(o.adapterOptions=n.adapterOptions),u(function(e,t,n,r,i){var o=t.modelFor(n),a=Ember.RSVP.Promise.resolve().then(function(){return e.queryRecord(t,o,r,i)})
return(a=G(a,t,"DS: Handle Adapter#queryRecord of "+n)).then(function(r){var i=Ie(Ne(t,e,n),t,o,r,null,"queryRecord")
return t._push(i)},null,"DS: Extract payload of queryRecord "+n)}(i,this,r,t,o).then(function(e){return e?e.getRecord():null}))},findAll:function(e,t){var n=b(e)
return this._fetchAll(n,this.peekAll(n),t)},_fetchAll:function(e,t,n){void 0===n&&(n={})
var r=this.adapterFor(e)
if(n.reload)return Ember.set(t,"isUpdating",!0),c(Me(r,this,e,n))
var i=t._createSnapshot(n)
return r.shouldReloadAll(this,i)?(Ember.set(t,"isUpdating",!0),c(Me(r,this,e,n))):!1===n.backgroundReload?c(Ember.RSVP.Promise.resolve(t)):((n.backgroundReload||r.shouldBackgroundReloadAll(this,i))&&(Ember.set(t,"isUpdating",!0),Me(r,this,e,n)),c(Ember.RSVP.Promise.resolve(t)))},_didUpdateAll:function(e){this.recordArrayManager._didUpdateAll(e)},peekAll:function(e){var t=b(e)
return this.recordArrayManager.liveRecordArrayFor(t)},unloadAll:function(e){var t=se(this)
if(void 0===e)t.clear()
else{var n=b(e)
t.clear(n)}},filter:function(){},scheduleSave:function(e,t,n){var r=e.createSnapshot(n)
if(e._isRecordFullyDeleted())return t.resolve(),t.promise
e.adapterWillCommit(),this._pendingSave.push({snapshot:r,resolver:t}),it.scheduleOnce("actions",this,this.flushPendingSave)},flushPendingSave:function(){var e=this._pendingSave.slice()
this._pendingSave=[]
for(var t=0,n=e.length;t<n;t++){var i=e[t],o=i.snapshot,a=i.resolver,s=o._internalModel,u=this.adapterFor(s.modelName),c=void 0
if(r.RECORD_DATA_STATE)c=s.isNew()?"createRecord":s.isDeleted()?"deleteRecord":"updateRecord"
else{if("root.deleted.saved"===s.currentState.stateName){a.resolve()
continue}c=s.isNew()?"createRecord":s.isDeleted()?"deleteRecord":"updateRecord"}a.resolve(st(u,this,c,o))}},didSaveRecord:function(e,t){var n
t&&(n=t.data),e.adapterDidCommit(n)},recordWasInvalid:function(e,t,n){r.RECORD_DATA_ERRORS?e.adapterDidInvalidate(t,n):e.adapterDidInvalidate(t)},recordWasError:function(e,t){e.adapterDidError(t)},setRecordId:function(e,t,n){se(this).setRecordId(e,t,n)},_load:function(e){var t=b(e.type),n=te(e.id),r=se(this).lookup(t,n),i=!1===r.currentState.isEmpty
return r.setupData(e),i?this.recordArrayManager.recordDidChange(r):this.recordArrayManager.recordWasLoaded(r),r},modelFor:function(e){var t=this._modelFactoryFor(e)
return t.class?t.class:t},_modelFactoryFor:function(e){var t=b(e),n=ut(this,this._modelFactoryCache,t)
if(null===n)throw new Ember.Error("No model was found for '"+t+"'")
return n},_hasModelFor:function(e){var t=b(e)
return null!==ut(this,this._modelFactoryCache,t)},push:function(e){var t=this._push(e)
return Array.isArray(t)?t.map(function(e){return e.getRecord()}):null===t?null:t.getRecord()},_push:function(e){var t=this
return this._backburner.join(function(){var n,r,i=e.included
if(i)for(n=0,r=i.length;n<r;n++)t._pushInternalModel(i[n])
if(Array.isArray(e.data)){r=e.data.length
var o=new Array(r)
for(n=0;n<r;n++)o[n]=t._pushInternalModel(e.data[n])
return o}return null===e.data?null:t._pushInternalModel(e.data)})},_pushInternalModel:function(e){e.type
return this._load(e)},pushPayload:function(e,t){var n,r
if(t){r=t
var i=b(e)
n=this.serializerFor(i)}else r=e,n=this.serializerFor("application")
n.pushPayload(this,r)},reloadManyArray:function(e,t,n,r){return t.reloadHasMany(n,r)},reloadBelongsTo:function(e,t,n,r){return t.reloadBelongsTo(n,r)},_relationshipMetaFor:function(e,t,n){var r=this.modelFor(e)
return Ember.get(r,"relationshipsByName").get(n)},_attributesDefinitionFor:function(e){var t=this._attributesDefCache[e]
if(void 0===t){var n=this.modelFor(e),r=Ember.get(n,"attributes")
t=Object.create(null),r.forEach(function(e,n){return t[n]=e}),this._attributesDefCache[e]=t}return t},_relationshipsDefinitionFor:function(e){var t=this._relationshipsDefCache[e]
if(void 0===t){var n=this.modelFor(e)
t=Ember.get(n,"relationshipsObject")||null,this._relationshipsDefCache[e]=t}return t},_internalModelForResource:function(e){return se(this).getByResource(e)},_internalModelForId:function(e,t,n){return se(this).lookup(e,t,n)},_createRecordData:function(e,t,n){return this.createRecordDataFor(e,t,n,this.storeWrapper)},createRecordDataFor:function(e,t,n,r){return new et(e,t,n,r)},recordDataFor:function(e,t,n){return A(se(this).lookup(e,t,n))},normalize:function(e,t){var n=b(e),r=this.serializerFor(n),i=this.modelFor(n)
return r.normalize(i,t)},newClientId:function(){return ot++},recordWasLoaded:function(e){this.recordArrayManager.recordWasLoaded(e)},_internalModelsFor:function(e){return se(this).modelMapFor(e)},adapterFor:function(e){var t=b(e),n=this._adapterCache,r=n[t]
if(r)return r
var i=Ember.getOwner(this)
if(void 0!==(r=i.lookup("adapter:"+t)))return Ember.set(r,"store",this),n[t]=r,r
if(void 0!==(r=n.application||i.lookup("adapter:application")))return Ember.set(r,"store",this),n[t]=r,n.application=r,r
var o=this.get("adapter")
return void 0!==(r=o?n[o]||i.lookup("adapter:"+o):void 0)?(Ember.set(r,"store",this),n[t]=r,n[o]=r,r):(r=n["-json-api"]||i.lookup("adapter:-json-api"),Ember.set(r,"store",this),n[t]=r,n["-json-api"]=r,r)},serializerFor:function(e){var t=b(e),n=this._serializerCache,r=n[t]
if(r)return r
var i=Ember.getOwner(this)
if(void 0!==(r=i.lookup("serializer:"+t)))return Ember.set(r,"store",this),n[t]=r,r
if(void 0!==(r=n.application||i.lookup("serializer:application")))return Ember.set(r,"store",this),n[t]=r,n.application=r,r
var o=this.adapterFor(e),a=Ember.get(o,"defaultSerializer")
return void 0!==(r=a?n[a]||i.lookup("serializer:"+a):void 0)?(Ember.set(r,"store",this),n[t]=r,n[a]=r,r):(r=n["-default"]||i.lookup("serializer:-default"),Ember.set(r,"store",this),n[t]=r,n["-default"]=r,r)},willDestroy:function(){this._super.apply(this,arguments),this._pushedInternalModels=null,this.recordArrayManager.destroy(),this._adapterCache=null,this._serializerCache=null,this.unloadAll()},_updateRelationshipState:function(e){var t=this
1===this._updatedRelationships.push(e)&&this._backburner.join(function(){t._backburner.schedule("syncRelationships",t,t._flushUpdatedRelationships)})},_flushUpdatedRelationships:function(){for(var e=this._updatedRelationships,t=0,n=e.length;t<n;t++)e[t].flushCanonical()
e.length=0},_updateInternalModel:function(e){1===this._updatedInternalModels.push(e)&&it.schedule("actions",this,this._flushUpdatedInternalModels)},_flushUpdatedInternalModels:function(){for(var e=this._updatedInternalModels,t=0,n=e.length;t<n;t++)e[t]._triggerDeferredTriggers()
e.length=0}})
function st(e,t,n,r){var o=r._internalModel,a=r.modelName,s=t.modelFor(a),u=Ember.RSVP.Promise.resolve().then(function(){return e[n](t,s,r)}),c=Ne(t,e,a),l="DS: Extract and notify about "+n+" completion of "+o
return(u=q(u=G(u,t,l),V(H,o))).then(function(e){return t._backburner.join(function(){var i,a,u
e&&((i=Ie(c,t,s,e,r.id,n)).included&&(u=i.included),a=i.data),t.didSaveRecord(o,{data:a}),u&&t._push({data:null,included:u})}),o},function(e){if(e instanceof i.InvalidError){var n=c.extractErrors(t,s,e,r.id)
t.recordWasInvalid(o,n,e)}else t.recordWasError(o,e)
throw e},l)}function ut(e,t,n){var r=t[n]
if(!r){if((r=ct(e,n))||(r=function(e,t){var n=Ember.getOwner(e),r=n.factoryFor("mixin:"+t),i=r&&r.class
if(i){var o=Ce.extend(i)
o.reopenClass({__isMixin:!0,__mixin:i}),n.register("model:"+t,o)}return ct(e,t)}(e,n)),!r)return null
var i=r.class
i.modelName&&i.hasOwnProperty("modelName")||(i.modelName=n),t[n]=r}return r}function ct(e,t){return Ember.getOwner(e).factoryFor("model:"+t)}e.AdapterPopulatedRecordArray=ze,e.Errors=y,e.InternalModel=ve,e.ManyArray=$,e.Model=Ce,e.OrderedSet=W,e.PromiseArray=a,e.PromiseManyArray=f,e.PromiseObject=s,e.RecordArray=je,e.RecordArrayManager=We,e.RecordData=et,e.Relationship=Ge,e.RootState=j,e.Snapshot=U,e.SnapshotRecordArray=Be,e.Store=at,e._bind=V,e._guard=q,e._objectIsAlive=H,e.coerceId=te,e.diffArray=K,e.errorsArrayToHash=g,e.errorsHashToArray=m,e.guardDestroyedStore=G,e.normalizeModelName=b,e.recordDataFor=A,e.relationshipStateFor=O,e.relationshipsFor=T,Object.defineProperty(e,"__esModule",{value:!0})}),define("@ember-data/store/index",["exports","@ember-data/store/-private"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.Store}}),Object.defineProperty(e,"normalizeModelName",{enumerable:!0,get:function(){return t.normalizeModelName}})}),define("@ember-data/store/version",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default="3.12.1"}),define("@ember/ordered-set/index",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var t=void 0
t=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.clear()}return e.create=function(){return new this},e.prototype.clear=function(){this.presenceSet=Object.create(null),this.list=[],this.size=0},e.prototype.add=function(e,t){var n=t||Ember.guidFor(e),r=this.presenceSet,i=this.list
return!0!==r[n]&&(r[n]=!0,this.size=i.push(e)),this},e.prototype.delete=function(e,t){var n=t||Ember.guidFor(e),r=this.presenceSet,i=this.list
if(!0===r[n]){delete r[n]
var o=i.indexOf(e)
return o>-1&&i.splice(o,1),this.size=i.length,!0}return!1},e.prototype.isEmpty=function(){return 0===this.size},e.prototype.has=function(e){if(0===this.size)return!1
var t=Ember.guidFor(e)
return!0===this.presenceSet[t]},e.prototype.forEach=function(e){if(0!==this.size){var t=this.list
if(2===arguments.length)for(var n=0;n<t.length;n++)e.call(arguments[1],t[n])
else for(var r=0;r<t.length;r++)e(t[r])}},e.prototype.toArray=function(){return this.list.slice()},e.prototype.copy=function(){var e=new(0,this.constructor)
for(var t in e.presenceSet=Object.create(null),this.presenceSet)e.presenceSet[t]=this.presenceSet[t]
return e.list=this.toArray(),e.size=this.size,e},e}(),e.default=t})
define("ember-ajax/-private/promise",["exports"],function(e){"use strict"
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):n}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t)
if(r){var i=Object.getOwnPropertyDescriptor(r,t)
return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,o(t).call(this,e,n))}var s,u,c
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,Ember.RSVP.Promise),s=t,(u=[{key:"then",value:function(e,n,r){var a=i(o(t.prototype),"then",this).call(this,e,n,r)
return a.xhr=this.xhr,a}}])&&n(s.prototype,u),c&&n(s,c),t}()
e.default=s}),define("ember-ajax/-private/types",[],function(){}),define("ember-ajax/-private/utils/get-header",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){if(Ember.isNone(e)||Ember.isNone(t))return
var n=Ember.A(Object.keys(e)).find(function(e){return e.toLowerCase()===t.toLowerCase()})
return n?e[n]:void 0}}),define("ember-ajax/-private/utils/is-string",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return"string"==typeof e}}),define("ember-ajax/-private/utils/parse-response-headers",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var n={}
if(!e)return n
return e.split(t).reduce(function(e,t){var n,r=t.split(":"),i=function(e){if(Array.isArray(e))return e}(n=r)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),o=i[0],a=i.slice(1)
o=o.trim()
var s=a.join(":").trim()
return s&&(e[o]=s),e},n)},e.CRLF=void 0
var t="\r\n"
e.CRLF=t}),define("ember-ajax/-private/utils/url-helpers",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.parseURL=n,e.isFullURL=function(e){return!!e.match(t)},e.haveSameHost=function(e,t){var r=n(e),i=n(t)
return r.protocol===i.protocol&&r.hostname===i.hostname&&r.port===i.port}
var t=/^(http|https)/
function n(e){var t
if("undefined"==typeof FastBoot){var n=document.createElement("a")
n.href=e,t=n}else t=FastBoot.require("url").parse(e)
return{href:t.href,protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash}}}),define("ember-ajax/ajax-request",["exports","ember-ajax/mixins/ajax-request"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Object.extend(t.default)
e.default=n}),define("ember-ajax/errors",["exports"],function(e){"use strict"
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):n}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function o(e){var t="function"==typeof Map?new Map:void 0
return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e
var n
if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function")
if(void 0!==t){if(t.has(e))return t.get(e)
t.set(e,r)}function r(){return a(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
if(Reflect.construct.sham)return!1
if("function"==typeof Proxy)return!0
try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null]
r.push.apply(r,t)
var i=new(Function.bind.apply(e,r))
return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isAjaxError=x,e.isUnauthorizedError=function(e){return x(e)?e instanceof h:401===e},e.isForbiddenError=function(e){return x(e)?e instanceof f:403===e},e.isInvalidError=function(e){return x(e)?e instanceof l:422===e},e.isBadRequestError=function(e){return x(e)?e instanceof d:400===e},e.isNotFoundError=function(e){return x(e)?e instanceof p:404===e},e.isGoneError=function(e){return x(e)?e instanceof v:410===e},e.isTimeoutError=function(e){return e instanceof m},e.isAbortError=function(e){return x(e)?e instanceof g:0===e},e.isConflictError=function(e){return x(e)?e instanceof y:409===e},e.isServerError=function(e){return x(e)?e instanceof b:e>=500&&e<600},e.isSuccess=function(e){var t=e
"string"==typeof e&&(t=parseInt(e,10))
return t>=200&&t<300||304===t},e.ServerError=e.ConflictError=e.AbortError=e.TimeoutError=e.GoneError=e.NotFoundError=e.BadRequestError=e.ForbiddenError=e.UnauthorizedError=e.InvalidError=e.AjaxError=void 0
var c=function(e){function t(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ajax operation failed",a=arguments.length>2?arguments[2]:void 0
return n(this,t),(i=r(this,u(t).call(this,o))).payload=e,i.status=a,i}return i(t,o(Error)),t}()
e.AjaxError=c
var l=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Request was rejected because it was invalid",422))}return i(t,c),t}()
e.InvalidError=l
var h=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Ajax authorization failed",401))}return i(t,c),t}()
e.UnauthorizedError=h
var f=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Request was rejected because user is not permitted to perform this operation.",403))}return i(t,c),t}()
e.ForbiddenError=f
var d=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Request was formatted incorrectly.",400))}return i(t,c),t}()
e.BadRequestError=d
var p=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Resource was not found.",404))}return i(t,c),t}()
e.NotFoundError=p
var v=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"Resource is no longer available.",410))}return i(t,c),t}()
e.GoneError=v
var m=function(e){function t(){return n(this,t),r(this,u(t).call(this,null,"The ajax operation timed out",-1))}return i(t,c),t}()
e.TimeoutError=m
var g=function(e){function t(){return n(this,t),r(this,u(t).call(this,null,"The ajax operation was aborted",0))}return i(t,c),t}()
e.AbortError=g
var y=function(e){function t(e){return n(this,t),r(this,u(t).call(this,e,"The ajax operation failed due to a conflict",409))}return i(t,c),t}()
e.ConflictError=y
var b=function(e){function t(e,i){return n(this,t),r(this,u(t).call(this,e,"Request was rejected due to server error",i))}return i(t,c),t}()
function x(e){return e instanceof c}e.ServerError=b}),define("ember-ajax/index",["exports","ember-ajax/request"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-ajax/mixins/ajax-request",["exports","ember-ajax/errors","ember-ajax/utils/ajax","ember-ajax/-private/utils/parse-response-headers","ember-ajax/-private/utils/get-header","ember-ajax/-private/utils/url-helpers","ember-ajax/-private/utils/is-string","ember-ajax/-private/promise"],function(e,t,n,r,i,o,a,s){"use strict"
function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=Ember.Test,l=/^application\/(?:vnd\.api\+)?json/i
function h(e){return!!(0,a.default)(e)&&!!e.match(l)}function f(e){return"/"===e.charAt(0)}function d(e){return"/"===e.charAt(e.length-1)}function p(e){return e.substring(1)}function v(e){return e.slice(0,-1)}function m(e){return f(e)&&(e=p(e)),d(e)&&(e=v(e)),e}var g=0
Ember.testing&&c.registerWaiter(function(){return 0===g})
var y=Ember.Mixin.create({contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:void 0,host:void 0,namespace:void 0,trustedHosts:void 0,request:function(e,t){var n=this.options(e,t),r=this._makeRequest(n),i=new s.default(function(e,t){r.then(function(t){var n=t.response
e(n)}).catch(function(e){var n=e.response
t(n)})},"ember-ajax: ".concat(n.type," ").concat(n.url," response"))
return i.xhr=r.xhr,i},raw:function(e,t){var n=this.options(e,t)
return this._makeRequest(n)},_makeRequest:function(e){var o=this,a=e.method||e.type||"GET",c={method:a,type:a,url:e.url};(function(e,t){var n=t.contentType,r=t.data,o=t.headers
return"GET"!==e&&!(!h(n)&&!h((0,i.default)(o,"Content-Type")))&&"object"===u(r)})(a,e)&&(e.data=JSON.stringify(e.data)),g+=1
var l=(0,n.default)(e.url,e),f=new s.default(function(e,n){l.done(function(i,a,s){var u=o.handleResponse(s.status,(0,r.default)(s.getAllResponseHeaders()),i,c)
if((0,t.isAjaxError)(u)){var l={payload:i,textStatus:a,jqXHR:s,response:u}
Ember.run.join(null,n,l)}else{var h={payload:i,textStatus:a,jqXHR:s,response:u}
Ember.run.join(null,e,h)}}).fail(function(e,i,a){Ember.runInDebug(function(){"The server returned an empty string for ".concat(c.type," ").concat(c.url,", which cannot be parsed into a valid JSON. Return either null or {}."),"parsererror"===i&&e.responseText})
var s,u=o.parseErrorResponse(e.responseText)||a
s="timeout"===i?new t.TimeoutError:"abort"===i?new t.AbortError:o.handleResponse(e.status,(0,r.default)(e.getAllResponseHeaders()),u,c)
var l={payload:u,textStatus:i,jqXHR:e,errorThrown:a,response:s}
Ember.run.join(null,n,l)}).always(function(){g-=1})},"ember-ajax: ".concat(e.type," ").concat(e.url))
return f.xhr=l,f},post:function(e,t){return this.request(e,this._addTypeToOptionsFor(t,"POST"))},put:function(e,t){return this.request(e,this._addTypeToOptionsFor(t,"PUT"))},patch:function(e,t){return this.request(e,this._addTypeToOptionsFor(t,"PATCH"))},del:function(e,t){return this.request(e,this._addTypeToOptionsFor(t,"DELETE"))},delete:function(e,t){return this.del(e,t)},get:function(e){if(arguments.length>1||-1!==e.indexOf("/"))throw new Ember.Error("It seems you tried to use `.get` to make a request! Use the `.request` method instead.")
return this._super.apply(this,arguments)},_addTypeToOptionsFor:function(e,t){return(e=e||{}).type=t,e},_getFullHeadersHash:function(e){var t=Ember.get(this,"headers")
return Ember.assign({},t,e)},options:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return(t=Ember.assign({},t)).url=this._buildURL(e,t),t.type=t.type||"GET",t.dataType=t.dataType||"json",t.contentType=Ember.isEmpty(t.contentType)?Ember.get(this,"contentType"):t.contentType,this._shouldSendHeaders(t)?t.headers=this._getFullHeadersHash(t.headers):t.headers=t.headers||{},t},_buildURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
if((0,o.isFullURL)(e))return e
var n=[],r=t.host||Ember.get(this,"host")
r&&(r=d(r)?v(r):r,n.push(r))
var i=t.namespace||Ember.get(this,"namespace")
i&&(r?i=m(i):d(i)&&(i=v(i)),new RegExp("^(/)?".concat(m(i),"/")).test(e)||n.push(i))
return f(e)&&0!==n.length&&(e=p(e)),n.push(e),n.join("/")},handleResponse:function(e,t,n,r){return this.isSuccess(e,t,n)?n:(n=this.normalizeErrorResponse(e,t,n),this._createCorrectError(e,t,n,r))},_createCorrectError:function(e,n,r,i){var o
if(this.isUnauthorizedError(e,n,r))o=new t.UnauthorizedError(r)
else if(this.isForbiddenError(e,n,r))o=new t.ForbiddenError(r)
else if(this.isInvalidError(e,n,r))o=new t.InvalidError(r)
else if(this.isBadRequestError(e,n,r))o=new t.BadRequestError(r)
else if(this.isNotFoundError(e,n,r))o=new t.NotFoundError(r)
else if(this.isGoneError(e,n,r))o=new t.GoneError(r)
else if(this.isAbortError(e,n,r))o=new t.AbortError
else if(this.isConflictError(e,n,r))o=new t.ConflictError(r)
else if(this.isServerError(e,n,r))o=new t.ServerError(r,e)
else{var a=this.generateDetailedMessage(e,n,r,i)
o=new t.AjaxError(r,a,e)}return o},_matchHosts:function(e,t){return!!(0,a.default)(e)&&(t instanceof RegExp?t.test(e):"string"==typeof t?t===e:(console.warn("trustedHosts only handles strings or regexes. ",t," is neither."),!1))},_shouldSendHeaders:function(e){var t=this,n=e.url,r=e.host
n=n||"",r=r||Ember.get(this,"host")||""
var i=Ember.get(this,"trustedHosts")||Ember.A(),a=(0,o.parseURL)(n).hostname
return!(0,o.isFullURL)(n)||(!!i.find(function(e){return t._matchHosts(a,e)})||(0,o.haveSameHost)(n,r))},generateDetailedMessage:function(e,t,n,r){var o,a=(0,i.default)(t,"Content-Type")||"Empty Content-Type"
o="text/html"===a.toLowerCase()&&n.length>250?"[Omitted Lengthy HTML]":JSON.stringify(n)
var s="".concat(r.type," ").concat(r.url),u="Payload (".concat(a,")")
return["Ember AJAX Request ".concat(s," returned a ").concat(e),u,o].join("\n")},isUnauthorizedError:function(e,n,r){return(0,t.isUnauthorizedError)(e)},isForbiddenError:function(e,n,r){return(0,t.isForbiddenError)(e)},isInvalidError:function(e,n,r){return(0,t.isInvalidError)(e)},isBadRequestError:function(e,n,r){return(0,t.isBadRequestError)(e)},isNotFoundError:function(e,n,r){return(0,t.isNotFoundError)(e)},isGoneError:function(e,n,r){return(0,t.isGoneError)(e)},isAbortError:function(e,n,r){return(0,t.isAbortError)(e)},isConflictError:function(e,n,r){return(0,t.isConflictError)(e)},isServerError:function(e,n,r){return(0,t.isServerError)(e)},isSuccess:function(e,n,r){return(0,t.isSuccess)(e)},parseErrorResponse:function(e){try{return JSON.parse(e)}catch(t){return e}},normalizeErrorResponse:function(e,t,n){return n}})
e.default=y}),define("ember-ajax/mixins/ajax-support",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({ajaxService:Ember.inject.service("ajax"),host:Ember.computed.alias("ajaxService.host"),namespace:Ember.computed.alias("ajaxService.namespace"),headers:Ember.computed.alias("ajaxService.headers"),ajax:function(e,t,n){var r=this.ajaxOptions.apply(this,arguments)
return Ember.get(this,"ajaxService").request(e,r)}})
e.default=t}),define("ember-ajax/mixins/legacy/normalize-error-response",["exports","ember-ajax/-private/utils/is-string"],function(e,t){"use strict"
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"object"===n(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Mixin.create({normalizeErrorResponse:function(e,n,i){return function(e){if(!r(e))return!1
var t=e
return!!t.errors&&Ember.isArray(t.errors)}(i=Ember.isNone(i)?{}:i)?i.errors.map(function(t){if(r(t)){var n=Ember.assign({},t)
return n.status="".concat(t.status),n}return{status:"".concat(e),title:t}}):(o=i,Ember.isArray(o)?i.map(function(t){return r(t)?{status:"".concat(e),title:t.title||"The backend responded with an error",detail:t}:{status:"".concat(e),title:"".concat(t)}}):(0,t.default)(i)?[{status:"".concat(e),title:i}]:[{status:"".concat(e),title:i.title||"The backend responded with an error",detail:i}])
var o}})
e.default=i}),define("ember-ajax/raw",["exports","ember-ajax/ajax-request"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n){return t.default.create().raw(e,n)}}),define("ember-ajax/request",["exports","ember-ajax/ajax-request"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n){return t.default.create().request(e,n)}}),define("ember-ajax/services/ajax",["exports","ember-ajax/mixins/ajax-request"],function(e,t){"use strict"
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.AjaxServiceClass=e.default=void 0
var a=Ember.Service.extend(t.default),s=a
e.default=s
var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,i(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,a),t}()
e.AjaxServiceClass=u}),define("ember-ajax/utils/ajax",["exports","jquery"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n="undefined"==typeof FastBoot?t.default.ajax:FastBoot.require("najax")
e.default=n}),define("ember-cli-app-version/initializer-factory",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n){var r=!1
return function(){if(!r&&e&&n){var i=Ember.String.classify(e)
t.register(i,n),r=!0}}}
var t=Ember.libraries}),define("ember-cli-app-version/utils/regexp",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.versionRegExp=/\d+[.]\d+[.]\d+/,e.versionExtendedRegExp=/\d+[.]\d+[.]\d+-[a-z]*([.]\d+)?/,e.shaRegExp=/[a-z\d]{8}$/}),define("ember-component-css/initializers/component-styles",["exports","ember-component-css/pod-names"],function(e,t){"use strict"
function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default=void 0,Ember.ComponentLookup.reopen({componentFor:function(e,n){return n=n.hasRegistration?n:Ember.getOwner(this),t.default[e]&&!n.hasRegistration("component:".concat(e))&&n.register("component:".concat(e),Ember.Component),this._super.apply(this,arguments)}}),Ember.Component.reopen({_componentIdentifier:Ember.computed({get:function(){return(this._debugContainerKey||"").replace("component:","")}}),_shouldAddNamespacedClassName:Ember.computed({get:function(){return""!==this.get("tagName")&&this.get("styleNamespace")}}),styleNamespace:Ember.computed({get:function(){return t.default[this.get("_componentIdentifier")]||""}}),componentCssClassName:Ember.computed.alias("styleNamespace"),init:function(){this._super.apply(this,arguments),this.get("_shouldAddNamespacedClassName")&&(this.classNames=this.classNames.concat(this.get("styleNamespace")))}})
var r={initialize:n}
e.default=r}),define("ember-component-css/instance-initializers/route-styles",["exports","ember-component-css/utils/init-route-styles"],function(e,t){"use strict"
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){var n=e.lookup("service:router")
n.on("routeDidChange",function(n){var r=n.to
o(r)&&(0,t.default)(e,i(r))}),n.on("routeWillChange",function(n){var r=n.to,a=n.isActive
if(o(r)&&/_loading$/.test(r.name)&&a){var s=i(r).map(function(e){return e.replace(/_loading$/,"-loading")});(0,t.default)(e,s)}})}function i(e){var t=e.name,n=e.parent,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]
return r.push(t),n?i(n,r):r}function o(e){return e&&"object"===n(e)&&e.hasOwnProperty("name")}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default=void 0
var a={initialize:r}
e.default=a}),define("ember-component-css/mixins/style-namespacing-extras",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({})
e.default=t}),define("ember-component-css/pod-names",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={"people-list/item":"__d0139","video-preview/box":"__727e3","video-preview":"__a2de0"}}),define("ember-component-css/utils/init-route-styles",["exports","ember-component-css/pod-names"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],a=t.default[o.replace(/\./g,"/")]
if(a){r.push(a)
var s=e.lookup("controller:".concat(o))
s&&s.set("styleNamespace",a)}}var u=e.lookup("controller:application")
u&&u.set("routeStyleNamespaceClassSet",r.join(" "))}}),define("ember-data/-private",["exports","@ember-data/store/-private","@ember-data/store","ember-data/version","@ember-data/model"],function(e,t,n,r,i){"use strict"
n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i
var o=Ember.Namespace.create({VERSION:r,name:"DS"})
Ember.libraries&&Ember.libraries.registerCoreLibrary("Ember Data",o.VERSION)
var a=Ember.DataAdapter.extend({getFilters:function(){return[{name:"isNew",desc:"New"},{name:"isModified",desc:"Modified"},{name:"isClean",desc:"Clean"}]},detect:function(e){return e!==i&&i.detect(e)},columnNameToDesc:function(e){return Ember.String.capitalize(Ember.String.underscore(e).replace(/_/g," ").trim())},columnsForType:function(e){var t=this,n=[{name:"id",desc:"Id"}],r=0,i=this
return Ember.get(e,"attributes").forEach(function(e,o){if(r++>i.attributeLimit)return!1
var a=t.columnNameToDesc(o)
n.push({name:o,desc:a})}),n},getRecords:function(e,t){if(arguments.length<2){var n=e._debugContainerKey
if(n){var r=n.match(/model:(.*)/)
null!==r&&(t=r[1])}}return this.get("store").peekAll(t)},getRecordColumnValues:function(e){var t=this,n=0,r={id:Ember.get(e,"id")}
return e.eachAttribute(function(i){if(n++>t.attributeLimit)return!1
r[i]=Ember.get(e,i)}),r},getRecordKeywords:function(e){var t=[],n=Ember.A(["id"])
return e.eachAttribute(function(e){return n.push(e)}),n.forEach(function(n){return t.push(Ember.get(e,n))}),t},getRecordFilterValues:function(e){return{isNew:e.get("isNew"),isModified:e.get("hasDirtyAttributes")&&!e.get("isNew"),isClean:!e.get("hasDirtyAttributes")}},getRecordColor:function(e){var t="black"
return e.get("isNew")?t="green":e.get("hasDirtyAttributes")&&(t="blue"),t},observeRecord:function(e,t){var n=Ember.A(),r=Ember.A(["id","isNew","hasDirtyAttributes"])
e.eachAttribute(function(e){return r.push(e)})
var i=this
r.forEach(function(r){var o=function(){t(i.wrapRecord(e))}
Ember.addObserver(e,r,o),n.push(function(){Ember.removeObserver(e,r,o)})})
return function(){n.forEach(function(e){return e()})}}})
Object.defineProperty(e,"AdapterPopulatedRecordArray",{enumerable:!0,get:function(){return t.AdapterPopulatedRecordArray}}),Object.defineProperty(e,"Errors",{enumerable:!0,get:function(){return t.Errors}}),Object.defineProperty(e,"InternalModel",{enumerable:!0,get:function(){return t.InternalModel}}),Object.defineProperty(e,"ManyArray",{enumerable:!0,get:function(){return t.ManyArray}}),Object.defineProperty(e,"PromiseArray",{enumerable:!0,get:function(){return t.PromiseArray}}),Object.defineProperty(e,"PromiseManyArray",{enumerable:!0,get:function(){return t.PromiseManyArray}}),Object.defineProperty(e,"PromiseObject",{enumerable:!0,get:function(){return t.PromiseObject}}),Object.defineProperty(e,"RecordArray",{enumerable:!0,get:function(){return t.RecordArray}}),Object.defineProperty(e,"RecordArrayManager",{enumerable:!0,get:function(){return t.RecordArrayManager}}),Object.defineProperty(e,"RecordData",{enumerable:!0,get:function(){return t.RecordData}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return t.Relationship}}),Object.defineProperty(e,"RootState",{enumerable:!0,get:function(){return t.RootState}}),Object.defineProperty(e,"Snapshot",{enumerable:!0,get:function(){return t.Snapshot}}),Object.defineProperty(e,"SnapshotRecordArray",{enumerable:!0,get:function(){return t.SnapshotRecordArray}}),Object.defineProperty(e,"coerceId",{enumerable:!0,get:function(){return t.coerceId}}),Object.defineProperty(e,"normalizeModelName",{enumerable:!0,get:function(){return t.normalizeModelName}}),Object.defineProperty(e,"recordDataFor",{enumerable:!0,get:function(){return t.recordDataFor}}),Object.defineProperty(e,"relationshipStateFor",{enumerable:!0,get:function(){return t.relationshipStateFor}}),Object.defineProperty(e,"relationshipsFor",{enumerable:!0,get:function(){return t.relationshipsFor}}),e.Store=n,e.DS=o,e.DebugAdapter=a,e.isEnabled=function(){return Ember.FEATURES.isEnabled.apply(void 0,arguments)},Object.defineProperty(e,"__esModule",{value:!0})}),define("ember-data/adapter",["exports","@ember-data/adapter"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/adapters/errors",["exports","@ember-data/adapter/error"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortError",{enumerable:!0,get:function(){return t.AbortError}}),Object.defineProperty(e,"AdapterError",{enumerable:!0,get:function(){return t.AdapterError}}),Object.defineProperty(e,"ConflictError",{enumerable:!0,get:function(){return t.ConflictError}}),Object.defineProperty(e,"ForbiddenError",{enumerable:!0,get:function(){return t.ForbiddenError}}),Object.defineProperty(e,"InvalidError",{enumerable:!0,get:function(){return t.InvalidError}}),Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return t.NotFoundError}}),Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return t.ServerError}}),Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return t.TimeoutError}}),Object.defineProperty(e,"UnauthorizedError",{enumerable:!0,get:function(){return t.UnauthorizedError}}),Object.defineProperty(e,"errorsArrayToHash",{enumerable:!0,get:function(){return t.errorsArrayToHash}}),Object.defineProperty(e,"errorsHashToArray",{enumerable:!0,get:function(){return t.errorsHashToArray}})}),define("ember-data/adapters/json-api",["exports","@ember-data/adapter/json-api"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/adapters/rest",["exports","@ember-data/adapter/rest"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/attr",["exports","@ember-data/model"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.attr}})}),define("ember-data/index",["exports","@ember-data/store","ember-data/-private","ember-inflector","ember-data/setup-container","ember-data/initialize-store-service","@ember-data/serializer/transform","@ember-data/serializer/-private","@ember-data/adapter","@ember-data/adapter/json-api","@ember-data/adapter/rest","@ember-data/adapter/error","@ember-data/serializer","@ember-data/serializer/json-api","@ember-data/serializer/json","@ember-data/serializer/rest","@ember-data/model"],function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){"use strict"
if(Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,Ember.VERSION.match(/^1\.([0-9]|1[0-2])\./))throw new Ember.Error("Ember Data requires at least Ember 1.13.0, but you have "+Ember.VERSION+". Please upgrade your version of Ember, then upgrade Ember Data.")
n.DS.Store=t.default,n.DS.PromiseArray=n.PromiseArray,n.DS.PromiseObject=n.PromiseObject,n.DS.PromiseManyArray=n.PromiseManyArray,n.DS.Model=m.default,n.DS.RootState=n.RootState,n.DS.attr=m.attr,n.DS.Errors=n.Errors,n.DS.InternalModel=n.InternalModel,n.DS.Snapshot=n.Snapshot,n.DS.Adapter=u.default,n.DS.AdapterError=h.default,n.DS.InvalidError=h.InvalidError,n.DS.TimeoutError=h.TimeoutError,n.DS.AbortError=h.AbortError,n.DS.UnauthorizedError=h.UnauthorizedError,n.DS.ForbiddenError=h.ForbiddenError,n.DS.NotFoundError=h.NotFoundError,n.DS.ConflictError=h.ConflictError,n.DS.ServerError=h.ServerError,n.DS.errorsHashToArray=h.errorsHashToArray,n.DS.errorsArrayToHash=h.errorsArrayToHash,n.DS.Serializer=f.default,n.DS.DebugAdapter=n.DebugAdapter,n.DS.RecordArray=n.RecordArray,n.DS.AdapterPopulatedRecordArray=n.AdapterPopulatedRecordArray,n.DS.ManyArray=n.ManyArray,n.DS.RecordArrayManager=n.RecordArrayManager,n.DS.RESTAdapter=l.default,n.DS.BuildURLMixin=u.BuildURLMixin
n.DS.RESTSerializer=v.default,n.DS.JSONSerializer=p.default,n.DS.JSONAPIAdapter=c.default,n.DS.JSONAPISerializer=d.default,n.DS.Transform=a.default,n.DS.DateTransform=s.DateTransform,n.DS.StringTransform=s.StringTransform,n.DS.NumberTransform=s.NumberTransform,n.DS.BooleanTransform=s.BooleanTransform,n.DS.EmbeddedRecordsMixin=v.EmbeddedRecordsMixin,n.DS.belongsTo=m.belongsTo,n.DS.hasMany=m.hasMany,n.DS.Relationship=n.Relationship,n.DS._setupContainer=i.default,n.DS._initializeStoreService=o.default,Object.defineProperty(n.DS,"normalizeModelName",{enumerable:!0,writable:!1,configurable:!1,value:t.normalizeModelName})
var g=n.DS
e.default=g})
define("ember-data/initialize-store-service",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){(e.lookup?e:e.container).lookup("service:store")}}),define("ember-data/model",["exports","@ember-data/model"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/relationships",["exports","@ember-data/model"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"belongsTo",{enumerable:!0,get:function(){return t.belongsTo}}),Object.defineProperty(e,"hasMany",{enumerable:!0,get:function(){return t.hasMany}})}),define("ember-data/serializer",["exports","@ember-data/serializer"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/serializers/embedded-records-mixin",["exports","@ember-data/serializer/rest"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.EmbeddedRecordsMixin}})}),define("ember-data/serializers/json-api",["exports","@ember-data/serializer/json-api"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/serializers/json",["exports","@ember-data/serializer/json"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/serializers/rest",["exports","@ember-data/serializer/rest"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/setup-container",["exports","ember-data/-private","@ember-data/store","@ember-data/serializer/json-api","@ember-data/serializer/json","@ember-data/serializer/rest","@ember-data/adapter/json-api","@ember-data/adapter/rest","@ember-data/serializer/-private"],function(e,t,n,r,i,o,a,s,u){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){c=e,c.register("data-adapter:main",t.DebugAdapter),function(e){e.register("transform:boolean",u.BooleanTransform),e.register("transform:date",u.DateTransform),e.register("transform:number",u.NumberTransform),e.register("transform:string",u.StringTransform)}(e),function(e){var t=e.inject||e.injection
t.call(e,"controller","store","service:store"),t.call(e,"route","store","service:store"),t.call(e,"data-adapter","store","service:store")}(e),function(e){var t=e.registerOptionsForType||e.optionsForType
t.call(e,"serializer",{singleton:!1}),t.call(e,"adapter",{singleton:!1}),e.register("serializer:-default",i.default),e.register("serializer:-rest",o.default),e.register("adapter:-rest",s.default),e.register("adapter:-json-api",a.default),e.register("serializer:-json-api",r.default),u=e,c="service:store",(u.has?u.has(c):u.hasRegistration(c))||e.register("service:store",n.default)
var u,c}(e)
var c}}),define("ember-data/store",["exports","@ember-data/store"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/transform",["exports","@ember-data/serializer/transform"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-data/version",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default="3.12.1"}),define("ember-inflector/index",["exports","ember-inflector/lib/system","ember-inflector/lib/ext/string"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.defaultRules=e.singularize=e.pluralize=void 0,t.Inflector.defaultRules=t.defaultRules,Object.defineProperty(Ember,"Inflector",{get:function(){return Ember.deprecate("Ember.Inflector is deprecated. Please explicitly: import Inflector from 'ember-inflector';",!1,{id:"ember-inflector.globals",until:"3.0.0"}),t.Inflector}},{configurable:!0}),Object.defineProperty(Ember.String,"singularize",{get:function(){return Ember.deprecate("Ember.String.singularize() is deprecated. Please explicitly: import { singularize } from 'ember-inflector';",!1,{id:"ember-inflector.globals",until:"3.0.0"}),t.singularize}},{configurable:!0}),Object.defineProperty(Ember.String,"pluralize",{get:function(){return Ember.deprecate("Ember.String.pluralize() is deprecated. Please explicitly: import { pluralize } from 'ember-inflector';",!1,{id:"ember-inflector.globals",until:"3.0.0"}),t.pluralize}},{configurable:!0}),e.default=t.Inflector,e.pluralize=t.pluralize,e.singularize=t.singularize,e.defaultRules=t.defaultRules}),define("ember-inflector/lib/ext/string",["ember-inflector/lib/system/string"],function(e){"use strict";(!0===Ember.ENV.EXTEND_PROTOTYPES||Ember.ENV.EXTEND_PROTOTYPES.String)&&(Object.defineProperty(String.prototype,"pluralize",{get:function(){return Ember.deprecate("String.prototype.pluralize() is deprecated. Please explicitly: import { pluralize } from 'ember-inflector';",!1,{id:"ember-inflector.globals",until:"3.0.0"}),function(){return(0,e.pluralize)(this)}}},{configurable:!0}),Object.defineProperty(String.prototype,"singularize",{get:function(){return Ember.deprecate("String.prototype.singularize() is deprecated. Please explicitly: import { singularize } from 'ember-inflector';",!1,{id:"ember-inflector.globals",until:"3.0.0"}),function(){return(0,e.singularize)(this)}}},{configurable:!0}))}),define("ember-inflector/lib/helpers/pluralize",["exports","ember-inflector","ember-inflector/lib/utils/make-helper"],function(e,t,n){"use strict"
function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t]
return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,n.default)(function(e,n){var i=new(Function.prototype.bind.apply(Array,[null].concat(r(e))))
return 2===i.length&&i.push({withoutCount:n["without-count"]}),t.pluralize.apply(void 0,r(i))})}),define("ember-inflector/lib/helpers/singularize",["exports","ember-inflector","ember-inflector/lib/utils/make-helper"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,n.default)(function(e){return(0,t.singularize)(e[0])})}),define("ember-inflector/lib/system",["exports","ember-inflector/lib/system/inflector","ember-inflector/lib/system/string","ember-inflector/lib/system/inflections"],function(e,t,n,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.defaultRules=e.pluralize=e.singularize=e.Inflector=void 0,t.default.inflector=new t.default(r.default),e.Inflector=t.default,e.singularize=n.singularize,e.pluralize=n.pluralize,e.defaultRules=r.default}),define("ember-inflector/lib/system/inflections",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default={plurals:[[/$/,"s"],[/s$/i,"s"],[/^(ax|test)is$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(octop|vir)i$/i,"$1i"],[/(alias|status|bonus)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/(buffal|tomat)o$/i,"$1oes"],[/([ti])um$/i,"$1a"],[/([ti])a$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/(hive)$/i,"$1s"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(x|ch|ss|sh)$/i,"$1es"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/^(m|l)ouse$/i,"$1ice"],[/^(m|l)ice$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/^(oxen)$/i,"$1"],[/(quiz)$/i,"$1zes"]],singular:[[/s$/i,""],[/(ss)$/i,"$1"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"],[/(^analy)(sis|ses)$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/(hive)s$/i,"$1"],[/(tive)s$/i,"$1"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(x|ch|ss|sh)es$/i,"$1"],[/^(m|l)ice$/i,"$1ouse"],[/(bus)(es)?$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|test)(is|es)$/i,"$1is"],[/^(a)x[ie]s$/i,"$1xis"],[/(octop|vir)(us|i)$/i,"$1us"],[/(alias|status|bonus)(es)?$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/(database)s$/i,"$1"]],irregularPairs:[["person","people"],["man","men"],["child","children"],["sex","sexes"],["move","moves"],["cow","kine"],["zombie","zombies"]],uncountable:["equipment","information","rice","money","species","series","fish","sheep","jeans","police"]}}),define("ember-inflector/lib/system/inflector",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var t=/^\s*$/,n=/([\w\/-]+[_\/\s-])([a-z\d]+$)/,r=/([\w\/\s-]+)([A-Z][a-z\d]*$)/,i=/[A-Z][a-z\d]*$/
function o(e,t){for(var n=0,r=t.length;n<r;n++)e.uncountable[t[n].toLowerCase()]=!0}function a(e,t){for(var n=void 0,r=0,i=t.length;r<i;r++)n=t[r],e.irregular[n[0].toLowerCase()]=n[1],e.irregular[n[1].toLowerCase()]=n[1],e.irregularInverse[n[1].toLowerCase()]=n[0],e.irregularInverse[n[0].toLowerCase()]=n[0]}function s(e){(e=e||{}).uncountable=e.uncountable||u(),e.irregularPairs=e.irregularPairs||u()
var t=this.rules={plurals:e.plurals||[],singular:e.singular||[],irregular:u(),irregularInverse:u(),uncountable:u()}
o(t,e.uncountable),a(t,e.irregularPairs),this.enableCache()}if(!Object.create&&!Object.create(null).hasOwnProperty)throw new Error("This browser does not support Object.create(null), please polyfil with es5-sham: http://git.io/yBU2rg")
function u(){var e=Object.create(null)
return e._dict=null,delete e._dict,e}s.prototype={enableCache:function(){this.purgeCache(),this.singularize=function(e){return this._cacheUsed=!0,this._sCache[e]||(this._sCache[e]=this._singularize(e))},this.pluralize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
this._cacheUsed=!0
var r=[e,t,n.withoutCount]
return this._pCache[r]||(this._pCache[r]=this._pluralize(e,t,n))}},purgeCache:function(){this._cacheUsed=!1,this._sCache=u(),this._pCache=u()},disableCache:function(){this._sCache=null,this._pCache=null,this.singularize=function(e){return this._singularize(e)},this.pluralize=function(){return this._pluralize.apply(this,arguments)}},plural:function(e,t){this._cacheUsed&&this.purgeCache(),this.rules.plurals.push([e,t.toLowerCase()])},singular:function(e,t){this._cacheUsed&&this.purgeCache(),this.rules.singular.push([e,t.toLowerCase()])},uncountable:function(e){this._cacheUsed&&this.purgeCache(),o(this.rules,[e.toLowerCase()])},irregular:function(e,t){this._cacheUsed&&this.purgeCache(),a(this.rules,[[e,t]])},pluralize:function(){return this._pluralize.apply(this,arguments)},_pluralize:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return void 0===t?this.inflect(e,this.rules.plurals,this.rules.irregular):(1!==parseFloat(e)&&(t=this.inflect(t,this.rules.plurals,this.rules.irregular)),n.withoutCount?t:e+" "+t)},singularize:function(e){return this._singularize(e)},_singularize:function(e){return this.inflect(e,this.rules.singular,this.rules.irregularInverse)},inflect:function(e,o,a){var s,u,c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,p=void 0
if(s=!e||t.test(e),u=i.test(e),s)return e
if(h=e.toLowerCase(),(f=n.exec(e)||r.exec(e))&&(d=f[2].toLowerCase()),this.rules.uncountable[h]||this.rules.uncountable[d])return e
for(p in a)if(h.match(p+"$"))return l=a[p],u&&a[d]&&(l=Ember.String.capitalize(l),p=Ember.String.capitalize(p)),e.replace(new RegExp(p,"i"),l)
for(var v=o.length;v>0&&!(p=(c=o[v-1])[0]).test(e);v--);return p=(c=c||[])[0],l=c[1],e.replace(p,l)}},e.default=s}),define("ember-inflector/lib/system/string",["exports","ember-inflector/lib/system/inflector"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.singularize=e.pluralize=void 0,e.pluralize=function(){var e
return(e=t.default.inflector).pluralize.apply(e,arguments)},e.singularize=function(e){return t.default.inflector.singularize(e)}}),define("ember-inflector/lib/utils/make-helper",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(Ember.Helper)return Ember.Helper.helper(e)
if(Ember.HTMLBars)return Ember.HTMLBars.makeBoundHelper(e)
return Ember.Handlebars.makeBoundHelper(e)}}),define("ember-load-initializers/index",["exports","require"],function(e,t){"use strict"
function n(e){var n=(0,t.default)(e,null,null,!0)
if(!n)throw new Error(e+" must export an initializer.")
var r=n.default
return r.name||(r.name=e.slice(e.lastIndexOf("/")+1)),r}function r(e,t){return-1!==e.indexOf(t,e.length-t.length)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){for(var i=t+"/initializers/",o=t+"/instance-initializers/",a=[],s=[],u=Object.keys(self.requirejs._eak_seen),c=0;c<u.length;c++){var l=u[c]
0===l.lastIndexOf(i,0)?r(l,"-test")||a.push(l):0===l.lastIndexOf(o,0)&&(r(l,"-test")||s.push(l))}(function(e,t){for(var r=0;r<t.length;r++)e.initializer(n(t[r]))})(e,a),function(e,t){for(var r=0;r<t.length;r++)e.instanceInitializer(n(t[r]))}(e,s)}}),define("ember-orbit/-private/cache",["exports","@orbit/utils","@orbit/data","@orbit/identity-map","ember-orbit/-private/live-query","ember-orbit/-private/utils/record-identity-serializer"],function(e,t,n,r,i,o){"use strict"
function a(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=n.default.assert,u=n.default.deprecate,c=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._sourceCache=void 0,this._modelFactory=void 0,this._identityMap=new r.default({serializer:o.default}),this._liveQuerySet=new Set,this._patchListener=void 0,this._resetListener=void 0,this._sourceCache=t.sourceCache,this._modelFactory=t.modelFactory,this._patchListener=this.generatePatchListener(),this._resetListener=this.generateResetListener(),this._sourceCache.on("patch",this._patchListener),this._sourceCache.on("reset",this._resetListener)}var c,l,h
return c=e,(l=[{key:"retrieveRecordData",value:function(e,t){return u("`Cache#retrieveRecordData(type, id)` is deprecated, use `Cache#peekRecordData(type, id)`."),this.peekRecordData(e,t)}},{key:"peekRecordData",value:function(e,t){return this._sourceCache.getRecordSync({type:e,id:t})}},{key:"includesRecord",value:function(e,t){return!!this.peekRecordData(e,t)}},{key:"retrieveRecord",value:function(e,t){return u("`Cache#retrieveRecord(type, id)` is deprecated, use `Cache#peekRecord(type, id)`."),this.peekRecord(e,t)}},{key:"peekRecord",value:function(e,t){if(this.includesRecord(e,t))return this.lookup({type:e,id:t})}},{key:"peekRecords",value:function(e){var t=this._sourceCache.getRecordsSync(e)
return this.lookup(t)}},{key:"peekRecordByKey",value:function(e,t,n){return this.peekRecord(e,this.recordIdFromKey(e,t,n))}},{key:"recordIdFromKey",value:function(e,t,n){var r=this.keyMap
s("No `keyMap` has been assigned to the Cache, so `recordIdFromKey` can not work.",!!r)
var i,o,a,u=r.keyToId(e,t,n)
return u||(u=this.schema.generateId(e),r.pushRecord({type:e,id:u,keys:(i={},o=t,a=n,o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i)})),u}},{key:"retrieveKey",value:function(e,t){return u("`Cache#retrieveKey(identity, key)` is deprecated, use `Cache#peekKey(identity, key)`."),this.peekKey(e,t)}},{key:"peekKey",value:function(e,n){var r=this._sourceCache.getRecordSync(e)
return r&&(0,t.deepGet)(r,["keys",n])}},{key:"retrieveAttribute",value:function(e,n){u("`Cache#retrieveAttribute(identity, attribute)` is deprecated, use `Cache#peekAttribute(identity, key)`.")
var r=this._sourceCache.getRecordSync(e)
return r&&(0,t.deepGet)(r,["attributes",n])}},{key:"peekAttribute",value:function(e,n){var r=this._sourceCache.getRecordSync(e)
return r&&(0,t.deepGet)(r,["attributes",n])}},{key:"retrieveRelatedRecord",value:function(e,t){return u("`Cache#retrieveRelatedRecord(identity, relationship)` is deprecated, use `Cache#peekRelatedRecord(identity, relationship)`."),this.peekRelatedRecord(e,t)}},{key:"peekRelatedRecord",value:function(e,t){var n=this._sourceCache.getRelatedRecordSync(e,t)
return n?this.lookup(n):n}},{key:"retrieveRelatedRecords",value:function(e,t){return u("`Cache#retrieveRelatedRecords(identity, relationship)` is deprecated, use `Cache#peekRelatedRecords(identity, relationship)`."),this.peekRelatedRecords(e,t)}},{key:"peekRelatedRecords",value:function(e,t){var n=this._sourceCache.getRelatedRecordsSync(e,t)
return n?this.lookup(n):void 0}},{key:"query",value:function(e,t,r){var i=(0,n.buildQuery)(e,t,r,this._sourceCache.queryBuilder),o=this._sourceCache.query(i)
return o?this.lookup(o):o}},{key:"liveQuery",value:function(e,t,r){var o=this,a=(0,n.buildQuery)(e,t,r,this._sourceCache.queryBuilder),s=i.default.create({getContent:function(){return o.query(a)},_liveQuerySet:this._liveQuerySet})
return this._liveQuerySet.add(s),s}},{key:"find",value:function(e,t){return void 0===t?this.findRecords(e):this.findRecord(e,t)}},{key:"findAll",value:function(e,t){return u("`Cache.findAll(type)` is deprecated, use `Cache.findRecords(type)`."),this.findRecords(e,t)}},{key:"findRecord",value:function(e,t,n){return this.query(function(n){return n.findRecord({type:e,id:t})},n)}},{key:"findRecords",value:function(e,t){return this.query(function(t){return t.findRecords(e)},t)}},{key:"unload",value:function(e){var t=this._identityMap.get(e)
t&&(t.disconnect(),this._identityMap.delete(e))}},{key:"lookup",value:function(e){var t=this
if(Array.isArray(e))return e.map(function(e){return t.lookup(e)})
if(e){var n=this._identityMap.get(e)
return n||(n=this._modelFactory.create(e),this._identityMap.set(e,n)),n}return null}},{key:"destroy",value:function(){this._sourceCache.off("patch",this._patchListener),this._sourceCache.off("reset",this._resetListener)
var e=!0,t=!1,n=void 0
try{for(var r,i=this._identityMap.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.disconnect()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this._identityMap.clear(),this._liveQuerySet.clear()}},{key:"notifyPropertyChange",value:function(e,t){var n=this._identityMap.get(e)
n&&Ember.notifyPropertyChange(n,t)}},{key:"notifyLiveQueryChange",value:function(){var e=!0,t=!1,n=void 0
try{for(var r,i=this._liveQuerySet[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.invalidate()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"generatePatchListener",value:function(){var e=this
return function(t){var n=t.record,r=n.type,i=n.id,o=n.keys,a=n.attributes,s=n.relationships,u={type:r,id:i}
switch(e.notifyLiveQueryChange(),t.op){case"updateRecord":for(var c=0,l=[a,o,s];c<l.length;c++){var h=l[c]
if(h)for(var f=0,d=Object.keys(h);f<d.length;f++){var p=d[f]
h.hasOwnProperty(p)&&e.notifyPropertyChange(u,p)}}break
case"replaceAttribute":e.notifyPropertyChange(u,t.attribute)
break
case"replaceKey":e.notifyPropertyChange(u,t.key)
break
case"replaceRelatedRecord":case"replaceRelatedRecords":case"addToRelatedRecords":case"removeFromRelatedRecords":e.notifyPropertyChange(u,t.relationship)
break
case"removeRecord":e.unload(u)}}}},{key:"generateResetListener",value:function(){var e=this
return function(){return e.notifyLiveQueryChange()}}},{key:"keyMap",get:function(){return this._sourceCache.keyMap}},{key:"schema",get:function(){return this._sourceCache.schema}},{key:"transformBuilder",get:function(){return this._sourceCache.transformBuilder}}])&&a(c.prototype,l),h&&a(c,h),e}()
e.default=c}),define("ember-orbit/-private/factories/coordinator-factory",["exports","@orbit/coordinator","ember-orbit/-private/system/modules-of-type"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r={create:function(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=Ember.getOwner(i),a=o.lookup("ember-orbit:config")
return i.sourceNames?(e=i.sourceNames,delete i.sourceNames):(e=(0,n.default)(o.base.modulePrefix,a.collections.sources)).push("store"),i.strategyNames?(r=i.strategyNames,delete i.strategyNames):r=(0,n.default)(o.base.modulePrefix,a.collections.strategies),i.sources=e.map(function(e){return o.lookup("".concat(a.types.source,":").concat(e))}),i.strategies=r.map(function(e){return o.lookup("".concat(a.types.strategy,":").concat(e))}),new t.default(i)}}
e.default=r}),define("ember-orbit/-private/factories/key-map-factory",["exports","@orbit/data"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return new t.KeyMap(e)}}
e.default=n}),define("ember-orbit/-private/factories/memory-source-factory",["exports","@orbit/memory"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return e.name=e.name||"store",new t.default(e)}}
e.default=n}),define("ember-orbit/-private/factories/schema-factory",["exports","@orbit/data","ember-orbit/-private/system/modules-of-type","ember-inflector"],function(e,t,n,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i={create:function(){var e,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
if(!o.models){var a=Ember.getOwner(o),s={},u=a.lookup("ember-orbit:config");(o.modelNames||(e=a.base.modulePrefix,i=u.collections.models,(0,n.default)(e,i).map(Ember.String.camelize))).forEach(function(e){var t=a.factoryFor("".concat(u.types.model,":").concat(e)).class
s[e]={keys:t.keys,attributes:t.attributes,relationships:t.relationships}}),o.models=s}return o.pluralize||(o.pluralize=r.pluralize),o.singularize||(o.singularize=r.singularize),new t.Schema(o)}}
e.default=i}),define("ember-orbit/-private/fields/attr",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.type=e,Ember.computed({get:function(e){return this.getAttribute(e)},set:function(e,t){return t!==this.getAttribute(e)&&this.replaceAttribute(e,t),t}}).meta({options:t,isAttribute:!0})}}),define("ember-orbit/-private/fields/has-many",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.kind="hasMany",t.type=e,Ember.computed({get:function(e){return this.getRelatedRecords(e)}}).meta({options:t,isRelationship:!0}).readOnly()}}),define("ember-orbit/-private/fields/has-one",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.kind="hasOne",t.type=e,Ember.computed({get:function(e){return this.getRelatedRecord(e)},set:function(e,t){return t!==this.getRelatedRecord(e)&&this.replaceRelatedRecord(e,t),t}}).meta({options:t,isRelationship:!0})}})
define("ember-orbit/-private/fields/key",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return e.type="string",Ember.computed({get:function(e){return this.getKey(e)},set:function(e,t){return t!==this.getKey(e)&&this.replaceKey(e,t),t}}).meta({options:e,isKey:!0})}}),define("ember-orbit/-private/live-query",["exports","ember-orbit/-private/system/read-only-array-proxy"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({willDestroy:function(){this._liveQuerySet.delete(this)}})
e.default=n}),define("ember-orbit/-private/model-factory",["exports","@orbit/data"],function(e,t){"use strict"
function n(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._store=void 0,this._modelFactoryMap=void 0,this._store=t,this._modelFactoryMap={}}var r,i,o
return r=e,(i=[{key:"create",value:function(e){return this.modelFactoryFor(e.type).create({identity:(0,t.cloneRecordIdentity)(e),_store:this._store})}},{key:"modelFactoryFor",value:function(e){var t=this._modelFactoryMap[e]
if(!t){var n=Ember.getOwner(this._store),r=n.lookup("ember-orbit:config")
t=n.factoryFor("".concat(r.types.model,":").concat(e)),this._modelFactoryMap[e]=t}return t}}])&&n(r.prototype,i),o&&n(r,o),e}()
e.default=r}),define("ember-orbit/-private/model",["exports","ember-orbit/-private/relationships/has-many"],function(e,t){"use strict"
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?r(n,!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var f=function(e){function n(){var e,t;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n)
for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o]
return(t=c(this,(e=l(n)).call.apply(e,[this].concat(i)))).identity=void 0,t._store=void 0,t._relatedRecords={},t}var r,o,a
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,Ember.Object),r=n,o=[{key:"getData",value:function(){return this.store.cache.peekRecordData(this.type,this.id)}},{key:"getKey",value:function(e){return this.store.cache.peekKey(this.identity,e)}},{key:"replaceKey",value:function(){var e=s(regeneratorRuntime.mark(function e(t,n,r){var i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.update(function(e){return e.replaceKey(i.identity,t,n)},r)
case 2:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getAttribute",value:function(e){return this.store.cache.peekAttribute(this.identity,e)}},{key:"replaceAttribute",value:function(){var e=s(regeneratorRuntime.mark(function e(t,n,r){var i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.update(function(e){return e.replaceAttribute(i.identity,t,n)},r)
case 2:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getRelatedRecord",value:function(e){return this.store.cache.peekRelatedRecord(this.identity,e)}},{key:"replaceRelatedRecord",value:function(){var e=s(regeneratorRuntime.mark(function e(t,n,r){var i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.update(function(e){return e.replaceRelatedRecord(i.identity,t,n?n.identity:null)},r)
case 2:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getRelatedRecords",value:function(e){var n=this
return this._relatedRecords=this._relatedRecords||{},this._relatedRecords[e]||(this._relatedRecords[e]=t.default.create({getContent:function(){return n.store.cache.peekRelatedRecords(n.identity,e)},addToContent:function(t){return n.addToRelatedRecords(e,t)},removeFromContent:function(t){return n.removeFromRelatedRecords(e,t)}})),this._relatedRecords[e].invalidate(),this._relatedRecords[e]}},{key:"addToRelatedRecords",value:function(){var e=s(regeneratorRuntime.mark(function e(t,n,r){var i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.update(function(e){return e.addToRelatedRecords(i.identity,t,n.identity)},r)
case 2:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"removeFromRelatedRecords",value:function(){var e=s(regeneratorRuntime.mark(function e(t,n,r){var i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.update(function(e){return e.removeFromRelatedRecords(i.identity,t,n.identity)},r)
case 2:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"replaceAttributes",value:function(){var e=s(regeneratorRuntime.mark(function e(){var t,n,r,i=this,o=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1?o[1]:void 0,r=Object.keys(t),e.next=5,this.store.update(function(e){return r.map(function(n){return e.replaceAttribute(i.identity,n,t[n])})},n).then(function(){return i})
case 5:case"end":return e.stop()}},e,this)}))
return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=s(regeneratorRuntime.mark(function e(){var t,n,r=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1?r[1]:void 0,e.next=4,this.store.updateRecord(i({},t,{},this.identity),n)
case 4:case"end":return e.stop()}},e,this)}))
return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=s(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.removeRecord(this.identity,t)
case 2:case"end":return e.stop()}},e,this)}))
return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this._store=void 0}},{key:"willDestroy",value:function(){var e=this.store.cache
e&&e.unload(this)}},{key:"id",get:function(){return this.identity.id}},{key:"type",get:function(){return this.identity.type}},{key:"disconnected",get:function(){return!this._store}},{key:"store",get:function(){if(!this._store)throw new Error("record has been removed from Store")
return this._store}}],a=[{key:"keys",get:function(){var e={}
return this.eachComputedProperty(function(t,n){n.isKey&&(n.name=t,e[t]={primaryKey:n.options.primaryKey})},{}),e}},{key:"attributes",get:function(){var e={}
return this.eachComputedProperty(function(t,n){n.isAttribute&&(n.name=t,e[t]={type:n.options.type})},{}),e}},{key:"relationships",get:function(){var e={}
return this.eachComputedProperty(function(t,n){n.isRelationship&&(n.name=t,e[t]={type:n.options.kind,model:n.options.type,inverse:n.options.inverse,dependent:n.options.dependent})},{}),e}}],o&&u(r.prototype,o),a&&u(r,a),n}()
e.default=f}),define("ember-orbit/-private/relationships/has-many",["exports","ember-orbit/-private/system/read-only-array-proxy"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({pushObject:function(e){return this.addToContent(e)},removeObject:function(e){return this.removeFromContent(e)}})
e.default=n}),define("ember-orbit/-private/store",["exports","@orbit/data","@orbit/core","ember-orbit/-private/cache","ember-orbit/-private/model-factory","ember-orbit/-private/utils/normalize-record-properties"],function(e,t,n,r,i,o){"use strict"
function a(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}}function u(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var f=n.default.deprecate,d=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._source=void 0,this._cache=void 0,this._source=t.source,this._cache=new r.default({sourceCache:this.source.cache,modelFactory:new i.default(this)})}return h(e,null,[{key:"create",value:function(e){var t=Ember.getOwner(e),n=new this(e)
return Ember.setOwner(n,t),n}}]),h(e,[{key:"destroy",value:function(){this._cache.destroy(),delete this._source,delete this._cache}},{key:"fork",value:function(){var t=this.source.fork(),n=Ember.getOwner(this).ownerInjection()
return e.create(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?u(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{source:t}))}},{key:"merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return this.source.merge(e.source,t)}},{key:"rollback",value:function(e,t){return this.source.rollback(e,t)}},{key:"rebase",value:function(){this.source.rebase()}},{key:"liveQuery",value:function(e,n,r){var i=this,o=(0,t.buildQuery)(e,n,r,this.source.queryBuilder)
return this.source.query(o).then(function(){return i.cache.liveQuery(o)})}},{key:"query",value:function(){var e=s(regeneratorRuntime.mark(function e(n,r,i){var o,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,t.buildQuery)(n,r,i,this.source.queryBuilder),e.next=3,this.source.query(o)
case 3:return a=e.sent,e.abrupt("return",this.cache.lookup(a))
case 5:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addRecord",value:function(){var e=s(regeneratorRuntime.mark(function e(){var t,n,r,i=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,r=(0,o.default)(this.source.schema,t),e.next=5,this.update(function(e){return e.addRecord(r)},n)
case 5:return e.abrupt("return",this.cache.lookup(r))
case 6:case"end":return e.stop()}},e,this)}))
return function(){return e.apply(this,arguments)}}()},{key:"updateRecord",value:function(){var e=s(regeneratorRuntime.mark(function e(){var t,n,r,i=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,r=(0,o.default)(this.source.schema,t),e.next=5,this.update(function(e){return e.updateRecord(r)},n)
case 5:return e.abrupt("return",this.cache.lookup(r))
case 6:case"end":return e.stop()}},e,this)}))
return function(){return e.apply(this,arguments)}}()},{key:"removeRecord",value:function(){var e=s(regeneratorRuntime.mark(function e(n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,t.cloneRecordIdentity)(n),e.next=3,this.update(function(e){return e.removeRecord(i)},r)
case 3:case"end":return e.stop()}},e,this)}))
return function(t,n){return e.apply(this,arguments)}}()},{key:"findAll",value:function(e,t){return f("`Store.findAll(type)` is deprecated, use `Store.findRecords(type)`."),this.findRecords(e,t)}},{key:"find",value:function(e,t){return void 0===t?this.findRecords(e):this.findRecord(e,t)}},{key:"findRecord",value:function(e,t,n){return this.query(function(n){return n.findRecord({type:e,id:t})},n)}},{key:"findRecords",value:function(e,t){return this.query(function(t){return t.findRecords(e)},t)}},{key:"findRecordByKey",value:function(e,t,n,r){return this.findRecord(e,this.cache.recordIdFromKey(e,t,n),r)}},{key:"peekRecord",value:function(e,t){return this.cache.peekRecord(e,t)}},{key:"peekRecords",value:function(e){return this.cache.peekRecords(e)}},{key:"peekRecordByKey",value:function(e,t,n){return this.cache.peekRecordByKey(e,t,n)}},{key:"on",value:function(e,t){this.source.on(e,t)}},{key:"off",value:function(e,t){this.source.off(e,t)}},{key:"one",value:function(e,t){this.source.one(e,t)}},{key:"sync",value:function(e){return this.source.sync(e)}},{key:"update",value:function(e,t,n){return this.source.update(e,t,n)}},{key:"transformsSince",value:function(e){return this.source.transformsSince(e)}},{key:"allTransforms",value:function(){return this.source.allTransforms()}},{key:"getTransform",value:function(e){return this.source.getTransform(e)}},{key:"getInverseOperations",value:function(e){return this.source.getInverseOperations(e)}},{key:"source",get:function(){return this._source}},{key:"cache",get:function(){return this._cache}},{key:"keyMap",get:function(){return this.source.keyMap}},{key:"schema",get:function(){return this.source.schema}},{key:"transformBuilder",get:function(){return this.source.transformBuilder}},{key:"transformLog",get:function(){return this.source.transformLog}},{key:"requestQueue",get:function(){return this.source.requestQueue}},{key:"syncQueue",get:function(){return this.source.syncQueue}}]),e}()
e.default=d}),define("ember-orbit/-private/system/modules-of-type",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){var n=new RegExp("^"+e+"/"+t+"/?/"),r=Object.keys(self.requirejs._eak_seen),i=[]
return r.forEach(function(e){var t=n.exec(e)
if(t&&1===t.length){var r=e.match(/[^\/]+\/?$/)[0]
i.push(r)}}),i}}),define("ember-orbit/-private/system/read-only-array-proxy",["exports"],function(e){"use strict"
function t(){throw new Error("Method not supported on read-only ArrayProxy.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.ArrayProxy.extend({addObject:t,clear:t,insertAt:t,popObject:t,pushObject:t,pushObjects:t,removeAt:t,removeObject:t,replace:t,reverseObjects:t,setObjects:t,shiftObject:t,unshiftObject:t,unshiftObjects:t,init:function(){var e=this
this._super(),Object.defineProperty(this,Symbol.iterator,{value:function(){return e.toArray()[Symbol.iterator]()}})},content:Ember.computed(function(){return this.getContent()}),invalidate:function(){this.notifyPropertyChange("content")}})
e.default=n}),define("ember-orbit/-private/utils/normalize-record-properties",["exports","@orbit/utils"],function(e,t){"use strict"
function n(e,t){var n={}
if(function(e){return Array.isArray(e)}(t)){n.data=[]
var r=!0,i=!1,o=void 0
try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value
"string"==typeof u?n.data.push({type:e,id:u}):n.data.push({type:e,id:u.id})}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}else n.data=null===t?null:"string"==typeof t?{type:e,id:t}:{type:e,id:t.id}
return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,r){var i=r.id,o=r.type,a=e.getModel(o),s={id:i,type:o}
return function(e,n,r){for(var i=e.keys||{},o=0,a=Object.keys(i);o<a.length;o++){var s=a[o]
void 0!==r[s]&&(0,t.deepSet)(n,["keys",s],r[s])}}(a,s,r),function(e,n,r){for(var i=e.attributes||{},o=0,a=Object.keys(i);o<a.length;o++){var s=a[o]
void 0!==r[s]&&(0,t.deepSet)(n,["attributes",s],r[s])}}(a,s,r),function(e,r,i){for(var o=e.relationships||{},a=0,s=Object.keys(o);a<s.length;a++){var u=s[a]
if(void 0!==i[u]){var c=o[u].model,l=i[u];(0,t.deepSet)(r,["relationships",u],n(c,l))}}}(a,s,r),s}}),define("ember-orbit/-private/utils/record-identity-serializer",["exports","@orbit/data"],function(e,t){"use strict"
function n(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.RecordIdentitySerializer=void 0
var r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}var r,i,o
return r=e,(i=[{key:"serialize",value:function(e){return(0,t.serializeRecordIdentity)(e)}},{key:"deserialize",value:function(e){return(0,t.deserializeRecordIdentity)(e)}}])&&n(r.prototype,i),o&&n(r,o),e}()
e.RecordIdentitySerializer=r
var i=new r
e.default=i}),define("ember-orbit/index",["exports","ember-orbit/-private/factories/coordinator-factory","ember-orbit/-private/factories/key-map-factory","ember-orbit/-private/factories/schema-factory","ember-orbit/-private/factories/memory-source-factory","ember-orbit/-private/fields/attr","ember-orbit/-private/fields/has-many","ember-orbit/-private/fields/has-one","ember-orbit/-private/fields/key","ember-orbit/-private/cache","ember-orbit/-private/model","ember-orbit/-private/store"],function(e,t,n,r,i,o,a,s,u,c,l,h){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CoordinatorFactory",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"KeyMapFactory",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"SchemaFactory",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"MemorySourceFactory",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"StoreFactory",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"attr",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"hasMany",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"hasOne",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"belongsTo",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"key",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Cache",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Model",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Store",{enumerable:!0,get:function(){return h.default}})}),define("ember-orbit/initializers/ember-orbit-config",["exports","@orbit/utils"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=r,e.default=e.DEFAULT_ORBIT_CONFIG=void 0
var n={types:{bucket:"data-bucket",model:"data-model",source:"data-source",strategy:"data-strategy"},collections:{buckets:"data-buckets",models:"data-models",sources:"data-sources",strategies:"data-strategies"},services:{store:"store",coordinator:"data-coordinator",schema:"data-schema",keyMap:"data-key-map"},skipStoreService:!1,skipStoreInjections:!1,skipCoordinatorService:!1,skipSchemaService:!1,skipKeyMapService:!1}
function r(e){var r=e.resolveRegistration("config:environment")||{},i=(0,t.deepMerge)({},n,r.orbit||{})
e.__registry__&&e.__registry__.resolver&&e.__registry__.resolver.pluralizedTypes&&(e.__registry__.resolver.pluralizedTypes[i.types.bucket]=i.collections.buckets,e.__registry__.resolver.pluralizedTypes[i.types.model]=i.collections.models,e.__registry__.resolver.pluralizedTypes[i.types.source]=i.collections.sources,e.__registry__.resolver.pluralizedTypes[i.types.strategy]=i.collections.strategies),e.register("ember-orbit:config",i,{instantiate:!1})}e.DEFAULT_ORBIT_CONFIG=n
var i={name:"ember-orbit-config",initialize:r}
e.default=i}),define("ember-orbit/initializers/ember-orbit-services",["exports","ember-orbit/-private/store","ember-orbit/-private/factories/schema-factory","ember-orbit/-private/factories/coordinator-factory","ember-orbit/-private/factories/key-map-factory","ember-orbit/-private/factories/memory-source-factory"],function(e,t,n,r,i,o){"use strict"
function a(e){var a=e.resolveRegistration("ember-orbit:config")||{}
a.skipKeyMapService||(e.register("service:".concat(a.services.keyMap),i.default),e.inject(a.types.source,"keyMap","service:".concat(a.services.keyMap))),a.skipSchemaService||(e.register("service:".concat(a.services.schema),n.default),e.inject(a.types.source,"schema","service:".concat(a.services.schema))),a.skipCoordinatorService||e.register("service:".concat(a.services.coordinator),r.default),a.skipStoreService||(e.register("service:".concat(a.services.store),t.default),e.register("".concat(a.types.source,":store"),o.default),e.inject("service:".concat(a.services.store),"source","".concat(a.types.source,":store")),a.skipStoreInjections||(e.inject("route",Ember.String.camelize(a.services.store),"service:".concat(a.services.store)),e.inject("controller",Ember.String.camelize(a.services.store),"service:".concat(a.services.store))))}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=a,e.default=void 0
var s={name:"ember-orbit-services",after:"ember-orbit-config",initialize:a}
e.default=s}),define("ember-resolver/features",[],function(){}),define("ember-resolver/index",["exports","ember-resolver/resolvers/classic"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-resolver/resolver",["exports","ember-resolver/resolvers/classic"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("ember-resolver/resolvers/classic/container-debug-adapter",["exports","ember-resolver/resolvers/classic/index"],function(e,t){"use strict"
function n(e,t,n){var r=t.match(new RegExp("^/?"+n+"/(.+)/"+e+"$"))
if(null!==r)return r[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.ContainerDebugAdapter.extend({_moduleRegistry:null,init:function(){this._super.apply(this,arguments),this._moduleRegistry||(this._moduleRegistry=new t.ModuleRegistry)},canCatalogEntriesByType:function(e){return"model"===e||this._super.apply(this,arguments)},catalogEntriesByType:function(e){for(var t=this._moduleRegistry.moduleNames(),r=Ember.A(),i=this.namespace.modulePrefix,o=0,a=t.length;o<a;o++){var s=t[o]
if(-1!==s.indexOf(e)){var u=n(e,s,this.namespace.podModulePrefix||i)
u||(u=s.split(e+"s/").pop()),r.addObject(u)}}return r}})}),define("ember-resolver/resolvers/classic/index",["exports","ember-resolver/utils/class-factory","ember-resolver/utils/make-dictionary"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleRegistry=void 0,void 0===requirejs.entries&&(requirejs.entries=requirejs._eak_seen)
var r=e.ModuleRegistry=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._entries=t||requirejs.entries}return e.prototype.moduleNames=function(){return Object.keys(this._entries)},e.prototype.has=function(e){return e in this._entries},e.prototype.get=function(e){return require(e)},e}()
var i=Ember.Object.extend({resolveOther:function(e){var n=this.findModuleName(e)
if(n){var r=this._extractDefaultExport(n,e)
if(void 0===r)throw new Error(" Expected to find: '"+e.fullName+"' within '"+n+"' but got 'undefined'. Did you forget to 'export default' within '"+n+"'?")
return this.shouldWrapInClassFactory(r,e)&&(r=(0,t.default)(r)),r}},parseName:function(e){if(!0===e.parsedName)return e
var t=void 0,n=void 0,r=void 0,i=e.split("@")
if(2===i.length){var o=i[0].split(":")
if(2===o.length)0===o[1].length?(n=o[0],r="@"+i[1]):(t=o[1],n=o[0],r=i[1])
else{var a=i[1].split(":")
t=i[0],n=a[0],r=a[1]}"template"===n&&0===t.lastIndexOf("components/",0)&&(r="components/"+r,t=t.slice(11))}else n=(i=e.split(":"))[0],r=i[1]
var s=r,u=Ember.get(this,"namespace")
return{parsedName:!0,fullName:e,prefix:t||this.prefix({type:n}),type:n,fullNameWithoutType:s,name:r,root:u,resolveMethodName:"resolve"+Ember.String.classify(n)}},pluralizedTypes:null,moduleRegistry:null,makeToString:function(e,t){return this.namespace.modulePrefix+"@"+t+":"},shouldWrapInClassFactory:function(){return!1},init:function(){this._super(),this.moduleBasedResolver=!0,this._moduleRegistry||(this._moduleRegistry=new r),this._normalizeCache=(0,n.default)(),this.pluralizedTypes=this.pluralizedTypes||(0,n.default)(),this.pluralizedTypes.config||(this.pluralizedTypes.config="config"),this._deprecatedPodModulePrefix=!1},normalize:function(e){return this._normalizeCache[e]||(this._normalizeCache[e]=this._normalize(e))},resolve:function(e){var t=this.parseName(e),n=t.resolveMethodName,r=void 0
return"function"==typeof this[n]&&(r=this[n](t)),null==r&&(r=this.resolveOther(t)),r},_normalize:function(e){var t=e.split(":")
if(t.length>1){var n=t[0]
return"component"===n||"helper"===n||"template"===n&&0===t[1].indexOf("components/")?n+":"+t[1].replace(/_/g,"-"):n+":"+Ember.String.dasherize(t[1].replace(/\./g,"/"))}return e},pluralize:function(e){return this.pluralizedTypes[e]||(this.pluralizedTypes[e]=e+"s")},podBasedLookupWithPrefix:function(e,t){var n=t.fullNameWithoutType
return"template"===t.type&&(n=n.replace(/^components\//,"")),e+"/"+n+"/"+t.type},podBasedModuleName:function(e){var t=this.namespace.podModulePrefix||this.namespace.modulePrefix
return this.podBasedLookupWithPrefix(t,e)},podBasedComponentsInSubdir:function(e){var t=this.namespace.podModulePrefix||this.namespace.modulePrefix
if(t+="/components","component"===e.type||/^components/.test(e.fullNameWithoutType))return this.podBasedLookupWithPrefix(t,e)},resolveEngine:function(e){var t=e.fullNameWithoutType+"/engine"
if(this._moduleRegistry.has(t))return this._extractDefaultExport(t)},resolveRouteMap:function(e){var t=e.fullNameWithoutType,n=t+"/routes"
if(this._moduleRegistry.has(n)){var r=this._extractDefaultExport(n)
return r}},resolveTemplate:function(e){var t=this.resolveOther(e)
return null==t&&(t=Ember.TEMPLATES[e.fullNameWithoutType]),t},mainModuleName:function(e){if("main"===e.fullNameWithoutType)return e.prefix+"/"+e.type},defaultModuleName:function(e){return e.prefix+"/"+this.pluralize(e.type)+"/"+e.fullNameWithoutType},prefix:function(e){var t=this.namespace.modulePrefix
return this.namespace[e.type+"Prefix"]&&(t=this.namespace[e.type+"Prefix"]),t},moduleNameLookupPatterns:Ember.computed(function(){return[this.podBasedModuleName,this.podBasedComponentsInSubdir,this.mainModuleName,this.defaultModuleName]}).readOnly(),findModuleName:function(e,t){for(var n=this.get("moduleNameLookupPatterns"),r=void 0,i=0,o=n.length;i<o;i++){var a=n[i].call(this,e)
if(a&&(a=this.chooseModuleName(a,e)),a&&this._moduleRegistry.has(a)&&(r=a),t||this._logLookup(r,e,a),r)return r}},chooseModuleName:function(e,t){var n=Ember.String.underscore(e)
if(e!==n&&this._moduleRegistry.has(e)&&this._moduleRegistry.has(n))throw new TypeError("Ambiguous module names: '"+e+"' and '"+n+"'")
if(this._moduleRegistry.has(e))return e
if(this._moduleRegistry.has(n))return n
var r=e.replace(/\/-([^\/]*)$/,"/_$1")
return this._moduleRegistry.has(r)?r:void 0},lookupDescription:function(e){var t=this.parseName(e)
return this.findModuleName(t,!0)},_logLookup:function(e,t,n){if(Ember.ENV.LOG_MODULE_RESOLVER||t.root.LOG_RESOLVER){var r=void 0,i=e?"[✓]":"[ ]"
r=t.fullName.length>60?".":new Array(60-t.fullName.length).join("."),n||(n=this.lookupDescription(t)),console&&console.info&&console.info(i,t.fullName,r,n)}},knownForType:function(e){for(var t=this._moduleRegistry.moduleNames(),r=(0,n.default)(),i=0,o=t.length;i<o;i++){var a=t[i],s=this.translateToContainerFullname(e,a)
s&&(r[s]=!0)}return r},translateToContainerFullname:function(e,t){var n=this.prefix({type:e}),r=n+"/",i="/"+e,o=t.indexOf(r),a=t.indexOf(i)
if(0===o&&a===t.length-i.length&&t.length>r.length+i.length)return e+":"+t.slice(o+r.length,a)
var s=n+"/"+this.pluralize(e)+"/"
return 0===t.indexOf(s)&&t.length>s.length?e+":"+t.slice(s.length):void 0},_extractDefaultExport:function(e){var t=require(e,null,null,!0)
return t&&t.default&&(t=t.default),t}})
i.reopenClass({moduleBasedResolver:!0}),e.default=i}),define("ember-resolver/utils/class-factory",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return{create:function(t){return"function"==typeof e.extend?e.extend(t):e}}}}),define("ember-resolver/utils/make-dictionary",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=Object.create(null)
return e._dict=null,delete e._dict,e}}),define("ember-test-waiters/build-waiter",["exports","ember-test-waiters","ember-test-waiters/noop-test-waiter"],function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){0
return new n.default(e)}}),define("ember-test-waiters/index",["exports","ember-test-waiters/waiter-manager","ember-test-waiters/test-waiter","ember-test-waiters/build-waiter","ember-test-waiters/wait-for-promise"],function(e,t,n,r,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"register",{enumerable:!0,get:function(){return t.register}}),Object.defineProperty(e,"unregister",{enumerable:!0,get:function(){return t.unregister}}),Object.defineProperty(e,"getWaiters",{enumerable:!0,get:function(){return t.getWaiters}}),Object.defineProperty(e,"_reset",{enumerable:!0,get:function(){return t._reset}}),Object.defineProperty(e,"getPendingWaiterState",{enumerable:!0,get:function(){return t.getPendingWaiterState}}),Object.defineProperty(e,"hasPendingWaiters",{enumerable:!0,get:function(){return t.hasPendingWaiters}}),Object.defineProperty(e,"TestWaiter",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"buildWaiter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"waitForPromise",{enumerable:!0,get:function(){return i.default}})}),define("ember-test-waiters/noop-test-waiter",["exports"],function(e){"use strict"
function t(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.name=t}var n,r,i
return n=e,(r=[{key:"beginAsync",value:function(){return this}},{key:"endAsync",value:function(){}},{key:"waitUntil",value:function(){return!0}},{key:"debugInfo",value:function(){return[]}}])&&t(n.prototype,r),i&&t(n,i),e}()
e.default=n}),define("ember-test-waiters/test-waiter",["exports","ember-test-waiters/waiter-manager"],function(e,t){"use strict"
function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t]
return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=0
function o(){return i++}var a=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.isRegistered=!1,this.items=new Map,this.name=t,this.nextToken=n||o}var i,a,s
return i=e,(a=[{key:"register",value:function(){this.isRegistered||((0,t.register)(this),this.isRegistered=!0)}},{key:"beginAsync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nextToken(),t=arguments.length>1?arguments[1]:void 0
if(this.register(),this.items.has(e))throw new Error("beginAsync called for ".concat(e," but it is already pending."))
var n=new Error
return this.items.set(e,{get stack(){return n.stack},label:t}),e}},{key:"endAsync",value:function(e){if(!this.items.has(e))throw new Error("endAsync called for ".concat(e," but it is not currently pending."))
this.items.delete(e)}},{key:"waitUntil",value:function(){return 0===this.items.size}},{key:"debugInfo",value:function(){return n(this.items.values())}}])&&r(i.prototype,a),s&&r(i,s),e}()
e.default=a}),define("ember-test-waiters/types/index",[],function(){}),define("ember-test-waiters/wait-for-promise",["exports","ember-test-waiters/test-waiter"],function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){var n=e
0
return n}
new t.default("promise-waiter")}),define("ember-test-waiters/waiter-manager",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(e){t.set(e.name,e)},e.unregister=function(e){t.delete(e.name)},e.getWaiters=function(){return e=t.values(),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t]
return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()
var e},e._reset=function(){t.clear()},e.getPendingWaiterState=n,e.hasPendingWaiters=r
var t=new Map
function n(){var e={pending:0,waiters:{}}
return t.forEach(function(t){if(!t.waitUntil()){e.pending++
var n=t.debugInfo()
e.waiters[t.name]=n||!0}}),e}function r(){return n().pending>0}Ember.Test&&Ember.Test.registerWaiter(function(){return!r()})}),define("ember-truth-helpers/helpers/and",["exports","ember-truth-helpers/utils/truth-convert"],function(e,t){"use strict"
function n(e){for(var n=0,r=e.length;n<r;n++)if(!1===(0,t.default)(e[n]))return e[n]
return e[e.length-1]}Object.defineProperty(e,"__esModule",{value:!0}),e.and=n,e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/equal",["exports"],function(e){"use strict"
function t(e){return e[0]===e[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.equal=t,e.default=Ember.Helper.helper(t)}),define("ember-truth-helpers/helpers/gt",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.gt=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e,n){var r=t(e,2),i=r[0],o=r[1]
return n.forceNumber&&("number"!=typeof i&&(i=Number(i)),"number"!=typeof o&&(o=Number(o))),i>o}e.default=Ember.Helper.helper(n)})
define("ember-truth-helpers/helpers/gte",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.gte=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e,n){var r=t(e,2),i=r[0],o=r[1]
return n.forceNumber&&("number"!=typeof i&&(i=Number(i)),"number"!=typeof o&&(o=Number(o))),i>=o}e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/is-array",["exports"],function(e){"use strict"
function t(e){for(var t=0,n=e.length;t<n;t++)if(!1===Ember.isArray(e[t]))return!1
return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=t,e.default=Ember.Helper.helper(t)}),define("ember-truth-helpers/helpers/is-empty",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Helper.helper(function(e){var n=t(e,1)[0]
return Ember.isEmpty(n)})}),define("ember-truth-helpers/helpers/is-equal",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.isEqual=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e){var n=t(e,2),r=n[0],i=n[1]
return Ember.isEqual(r,i)}e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/lt",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.lt=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e,n){var r=t(e,2),i=r[0],o=r[1]
return n.forceNumber&&("number"!=typeof i&&(i=Number(i)),"number"!=typeof o&&(o=Number(o))),i<o}e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/lte",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.lte=n
var t=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
function n(e,n){var r=t(e,2),i=r[0],o=r[1]
return n.forceNumber&&("number"!=typeof i&&(i=Number(i)),"number"!=typeof o&&(o=Number(o))),i<=o}e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/not-equal",["exports"],function(e){"use strict"
function t(e){return e[0]!==e[1]}Object.defineProperty(e,"__esModule",{value:!0}),e.notEqualHelper=t,e.default=Ember.Helper.helper(t)}),define("ember-truth-helpers/helpers/not",["exports","ember-truth-helpers/utils/truth-convert"],function(e,t){"use strict"
function n(e){for(var n=0,r=e.length;n<r;n++)if(!0===(0,t.default)(e[n]))return!1
return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.not=n,e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/or",["exports","ember-truth-helpers/utils/truth-convert"],function(e,t){"use strict"
function n(e){for(var n=0,r=e.length;n<r;n++)if(!0===(0,t.default)(e[n]))return e[n]
return e[e.length-1]}Object.defineProperty(e,"__esModule",{value:!0}),e.or=n,e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/helpers/xor",["exports","ember-truth-helpers/utils/truth-convert"],function(e,t){"use strict"
function n(e){return(0,t.default)(e[0])!==(0,t.default)(e[1])}Object.defineProperty(e,"__esModule",{value:!0}),e.xor=n,e.default=Ember.Helper.helper(n)}),define("ember-truth-helpers/utils/truth-convert",["exports"],function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e&&Ember.get(e,"isTruthy")
if("boolean"==typeof t)return t
return Ember.isArray(e)?0!==Ember.get(e,"length"):!!e}}),(window.webpackJsonp_ember_auto_import_=window.webpackJsonp_ember_auto_import_||[]).push([[2],[function(e,t,n){"use strict"
function r(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n))return!1
return!0}function i(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n))return!0
return!1}function o(e,t){for(var n=-1,r=e.length;++n<r;){var i=t(e[n],n)
if(i)return i}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(e===t)return 0!==e||1/e==1/t
if(null==e||null==t)return e===t
var n,r=Object.prototype.toString.call(e)
if(r!==Object.prototype.toString.call(t))return!1
switch(r){case"[object String]":return e==String(t)
case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t
case"[object Date]":case"[object Boolean]":return+e==+t
case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=a(e)||"object"!=a(t))return!1
if("[object Array]"===r&&e.length!==t.length)return!1
for(n in t)if(t.hasOwnProperty(n)&&!s(e[n],t[n]))return!1
for(n in e)if(e.hasOwnProperty(n)&&!s(e[n],t[n]))return!1
return!0}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){if(null==e||"object"!==u(e))return e
var t,n=Object.prototype.toString.call(e)
if("[object Date]"===n)(t=new Date).setTime(e.getTime())
else if("[object RegExp]"===n)t=e.constructor(e)
else if("[object Array]"===n){t=[]
for(var r=0,i=e.length;r<i;r++)e.hasOwnProperty(r)&&t.push(c(e[r]))}else{var o
for(var a in t={},e)e.hasOwnProperty(a)&&("object"===u(o=e[a])&&(o=c(o)),t[a]=o)}return t}function l(e,t){(arguments.length>2?Array.prototype.slice.call(arguments,2):Object.keys(t)).forEach(function(n){"function"==typeof t[n]?e[n]=function(){return t[n].apply(t,arguments)}:e[n]=t[n]})}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return n.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function f(e){return console.warn("`isArray` from `@orbit/utils` is deprecated and will be removed in the next release. Please use `Array.isArray`."),Array.isArray(e)}function d(e){return v(e)?[]:Array.isArray(e)?e:[e]}function p(e){return null!==e&&"object"===u(e)}function v(e){return null==e}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return n.forEach(function(t){Object.keys(t).forEach(function(n){if(t.hasOwnProperty(n)){var r=t[n]
void 0!==r&&(e[n]=c(r))}})}),e}function g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]
return n.forEach(function(t){Object.keys(t).forEach(function(n){if(t.hasOwnProperty(n)){var r=e[n],i=t[n]
p(r)&&p(i)&&!Array.isArray(r)&&!Array.isArray(i)?g(r,i):void 0!==i&&(e[n]=c(i))}})}),e}function y(e,t){for(var n=-1,r=e;++n<t.length;)if(!(r=r[t[n]]))return r
return r}function b(e,t,n){for(var r,i=e,o=t.pop(),a=0,s=t.length;a<s;a++)void 0===i[r=t[a]]&&(i[r]="number"==typeof r?[]:{}),i=i[r]
return i[o]!==n&&(i[o]=n,!0)}function x(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e){return e.replace(/(\-|\_|\.|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""}).replace(/(^|\/)([A-Z])/g,function(e){return e.toLowerCase()})}function R(e){return e.replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()}function E(e){return R(e).replace(/[ _]/g,"-")}function C(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()}n.r(t)
for(var k=[],S=0;S<256;S++)k[S]=(S<16?"0":"")+S.toString(16)
function A(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0
return k[255&e]+k[e>>8&255]+k[e>>16&255]+k[e>>24&255]+"-"+k[255&t]+k[t>>8&255]+"-"+k[t>>16&15|64]+k[t>>24&255]+"-"+k[63&n|128]+k[n>>8&255]+"-"+k[n>>16&255]+k[n>>24&255]+k[255&r]+k[r>>8&255]+k[r>>16&255]+k[r>>24&255]}n.d(t,"every",function(){return r}),n.d(t,"some",function(){return i}),n.d(t,"firstResult",function(){return o}),n.d(t,"eq",function(){return s}),n.d(t,"clone",function(){return c}),n.d(t,"expose",function(){return l}),n.d(t,"extend",function(){return h}),n.d(t,"isArray",function(){return f}),n.d(t,"toArray",function(){return d}),n.d(t,"isObject",function(){return p}),n.d(t,"isNone",function(){return v}),n.d(t,"merge",function(){return m}),n.d(t,"deepMerge",function(){return g}),n.d(t,"deepGet",function(){return y}),n.d(t,"deepSet",function(){return b}),n.d(t,"objectValues",function(){return x}),n.d(t,"capitalize",function(){return w}),n.d(t,"camelize",function(){return _}),n.d(t,"decamelize",function(){return R}),n.d(t,"dasherize",function(){return E}),n.d(t,"underscore",function(){return C}),n.d(t,"uuid",function(){return A})},function(e,t,n){"use strict"
n.r(t)
var r=n(2)
function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}var c=function(e){function t(e){var n
return o(this,t),(n=a(this,s(t).call(this,"Client error: ".concat(e)))).description=e,n}return u(t,r.Exception),t}(),l=function(e){function t(e){var n
return o(this,t),(n=a(this,s(t).call(this,"Server error: ".concat(e)))).description=e,n}return u(t,r.Exception),t}(),h=function(e){function t(e){var n
return o(this,t),(n=a(this,s(t).call(this,"Network error: ".concat(e)))).description=e,n}return u(t,r.Exception),t}(),f=function(e){function t(e,n){var r
return o(this,t),(r=a(this,s(t).call(this,"Query expression parse error: ".concat(e)))).description=e,r.expression=n,r}return u(t,r.Exception),t}(),d=function(e){function t(e,n){var r
return o(this,t),(r=a(this,s(t).call(this,"Query not allowed: ".concat(e)))).description=e,r.query=n,r}return u(t,r.Exception),t}(),p=function(e){function t(e,n){var r
return o(this,t),(r=a(this,s(t).call(this,"Transform not allowed: ".concat(e)))).description=e,r.transform=n,r}return u(t,r.Exception),t}(),v=function(e){function t(e){var n
return o(this,t),(n=a(this,s(t).call(this,"Schema error: ".concat(e)))).description=e,n}return u(t,r.Exception),t}(),m=function(e){function t(e){return o(this,t),a(this,s(t).call(this,"Model definition for ".concat(e," not found")))}return u(t,v),t}(),g=function(e){function t(e,n){return o(this,t),a(this,s(t).call(this,"Relationship definition for ".concat(e," not found for model definition ").concat(n)))}return u(t,v),t}(),y=function(e){function t(e,n,r){return o(this,t),a(this,s(t).call(this,"Relationship definition ".concat(n," for model definition ").concat(r," does not accept record of type ").concat(e)))}return u(t,v),t}(),b=function(e){function t(e,n,r,i){var u
o(this,t)
var c="".concat(e,": ").concat(n,":").concat(r)
return i&&(c+="/"+i),(u=a(this,s(t).call(this,c))).description=e,u.type=n,u.id=r,u.relationship=i,u}return u(t,r.Exception),t}(),x=function(e){function t(e,n){return o(this,t),a(this,s(t).call(this,"Record not found",e,n))}return u(t,b),t}(),w=n(0)
function _(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n
return t=e,(n=[{key:"reset",value:function(){this._idsToKeys={},this._keysToIds={}}},{key:"idToKey",value:function(e,t,n){return Object(w.deepGet)(this._idsToKeys,[e,t,n])}},{key:"keyToId",value:function(e,t,n){return Object(w.deepGet)(this._keysToIds,[e,t,n])}},{key:"pushRecord",value:function(e){var t=this,n=e.type,r=e.id,i=e.keys
i&&r&&Object.keys(i).forEach(function(e){var o=i[e]
o&&(Object(w.deepSet)(t._idsToKeys,[n,e,r],o),Object(w.deepSet)(t._keysToIds,[n,e,o],r))})}},{key:"idFromKeys",value:function(e,t){var n=this,r=Object.keys(t)
return Object(w.firstResult)(r,function(r){var i=t[r]
if(i)return n.keyToId(e,r,i)})}}])&&_(t.prototype,n),e}()
function E(e){return{type:e.type,id:e.id}}function C(e,t){return Object(w.isNone)(e)&&Object(w.isNone)(t)||Object(w.isObject)(e)&&Object(w.isObject)(t)&&e.type===t.type&&e.id===t.id}function k(e,t){if(e.length===t.length){if(0===e.length)return!0
var n=D(e),r=D(t)
return 0===P(n,r).length&&0===P(r,n).length}return!1}function S(e,t){return P(D(e),D(t)).map(function(e){return N(e)})}function A(e,t){var n=!0,r=!1,i=void 0
try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)if(C(o.value,t))return!0}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!1}function T(e,t){return 0===P(D(t),D(e)).length}function O(e,t){if(e){var n=E(e),r=e,i=t
return["attributes","keys","relationships"].forEach(function(e){r[e]&&i[e]?n[e]=Object(w.merge)({},r[e],i[e]):r[e]?n[e]=Object(w.merge)({},r[e]):i[e]&&(n[e]=Object(w.merge)({},i[e]))}),n}return t}function I(e){return"".concat(e.type,":").concat(e.id)}function N(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.split(":"),2)
return{type:t[0],id:t[1]}}function D(e){return e.map(function(e){return I(e)})}function P(e,t){return e.filter(function(e){return!t.includes(e)})}function M(e){e._deleted=!0}function F(e){return!0===e._deleted}function L(e,t,n){if(C(e.record,t.record)){if("removeRecord"===t.op)M(e),"addRecord"===e.op&&M(t)
else if(!F(t)&&(n||"replaceAttribute"===t.op))if(B(e.op)&&B(t.op))"replaceAttribute"===e.op&&"replaceAttribute"===t.op&&e.attribute===t.attribute?M(e):"replaceRelatedRecord"===e.op&&"replaceRelatedRecord"===t.op&&e.relationship===t.relationship?M(e):"replaceRelatedRecords"===e.op&&"replaceRelatedRecords"===t.op&&e.relationship===t.relationship?M(e):("replaceAttribute"===e.op?(j(e.record,e.attribute,e.value),delete e.attribute,delete e.value):"replaceRelatedRecord"===e.op?(z(e.record,e.relationship,e.relatedRecord),delete e.relationship,delete e.relatedRecord):"replaceRelatedRecords"===e.op&&(U(e.record,e.relationship,e.relatedRecords),delete e.relationship,delete e.relatedRecords),"replaceAttribute"===t.op?j(e.record,t.attribute,t.value):"replaceRelatedRecord"===t.op?z(e.record,t.relationship,t.relatedRecord):"replaceRelatedRecords"===t.op&&U(e.record,t.relationship,t.relatedRecords),e.op="updateRecord",M(t))
else if("addRecord"!==e.op&&"updateRecord"!==e.op&&"replaceRecord"!==e.op||!B(t.op)){if("addToRelatedRecords"===t.op){if("addRecord"===e.op)W(e.record,t.relationship,t.relatedRecord),M(t)
else if("updateRecord"===e.op||"replaceRecord"===e.op){var r=e.record
r.relationships&&r.relationships[t.relationship]&&r.relationships[t.relationship].data&&(W(e.record,t.relationship,t.relatedRecord),M(t))}}else if("removeFromRelatedRecords"===t.op)if("addToRelatedRecords"===e.op&&e.relationship===t.relationship&&C(e.relatedRecord,t.relatedRecord))M(e),M(t)
else if("addRecord"===e.op||"updateRecord"===e.op||"replaceRecord"===e.op){var i=e.record
i.relationships&&i.relationships[t.relationship]&&i.relationships[t.relationship].data&&(function(e,t,n){var r=Object(w.deepGet)(e,["relationships",t,"data"])
if(r)for(var i=0,o=r.length;i<o;i++)if(C(r[i],n)){r.splice(i,1)
break}}(e.record,t.relationship,t.relatedRecord),M(t))}}else"replaceAttribute"===t.op?j(e.record,t.attribute,t.value):"replaceRelatedRecord"===t.op?z(e.record,t.relationship,t.relatedRecord):"replaceRelatedRecords"===t.op&&U(e.record,t.relationship,t.relatedRecords),M(t)}else t.record&&"removeRecord"===t.op&&e.relatedRecord&&C(e.relatedRecord,t.record)&&M(e)}function B(e){return"replaceAttribute"===e||"replaceRelatedRecord"===e||"replaceRelatedRecords"===e}function j(e,t,n){e.attributes=e.attributes||{},e.attributes[t]=n}function z(e,t,n){Object(w.deepSet)(e,["relationships",t,"data"],E(n))}function U(e,t,n){Object(w.deepSet)(e,["relationships",t,"data"],n.map(E))}function W(e,t,n){var r=Object(w.deepGet)(e,["relationships",t,"data"])||[]
r.push(E(n)),Object(w.deepSet)(e,["relationships",t,"data"],r)}function V(e){for(var t=0,n=e.length;t<n;t++)for(var r=e[t],i=!0,o=t+1;o<n;o++){var a=e[o]
if(L(r,a,i),F(r))break
F(a)||(i=!1)}return e.filter(function(e){return!F(e)})}function q(e,t){var n=[]
if(e&&t){var r=E(e)
t.attributes&&Object.keys(t.attributes).forEach(function(i){var o=t.attributes[i]
if(void 0===e.attributes||!Object(w.eq)(e.attributes[i],o)){var a={op:"replaceAttribute",record:r,attribute:i,value:o}
n.push(a)}}),t.keys&&Object.keys(t.keys).forEach(function(i){var o=t.keys[i]
if(void 0===e.keys||!Object(w.eq)(e.keys[i],o)){var a={op:"replaceKey",record:r,key:i,value:o}
n.push(a)}})}return n}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}var J=function(){function e(t){X(this,e),this.expression=t}return Q(e,[{key:"toQueryExpression",value:function(){return this.expression}}]),e}(),Z=function(e){function t(e){X(this,t)
var n={op:"findRecord",record:e}
return G(this,K(t).call(this,n))}return $(t,J),t}(),ee=function(e){function t(e,n){X(this,t)
var r={op:"findRelatedRecord",record:e,relationship:n}
return G(this,K(t).call(this,r))}return $(t,J),t}(),te=function(e){function t(e,n){X(this,t)
var r={op:"findRelatedRecords",record:e,relationship:n}
return G(this,K(t).call(this,r))}return $(t,J),Q(t,[{key:"sort",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=t.map(oe)
return this.expression.sort=(this.expression.sort||[]).concat(r),this}},{key:"page",value:function(e){return this.expression.page=ie(e),this}},{key:"filter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=t.map(re)
return this.expression.filter=(this.expression.filter||[]).concat(r),this}}]),t}(),ne=function(e){function t(e){X(this,t)
var n={op:"findRecords"}
return"string"==typeof e?n.type=e:Array.isArray(e)&&(n.records=e),G(this,K(t).call(this,n))}return $(t,J),Q(t,[{key:"sort",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=t.map(oe)
return this.expression.sort=(this.expression.sort||[]).concat(r),this}},{key:"page",value:function(e){return this.expression.page=ie(e),this}},{key:"filter",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
var r=t.map(re)
return this.expression.filter=(this.expression.filter||[]).concat(r),this}}]),t}()
function re(e){if(e.hasOwnProperty("kind"))return e
var t=e.op||"equal"
if(e.hasOwnProperty("relation")){if(e.hasOwnProperty("record"))return{kind:"relatedRecord",op:t,relation:e.relation,record:e.record}
if(e.hasOwnProperty("records"))return{kind:"relatedRecords",op:t,relation:e.relation,records:e.records}}else if(e.hasOwnProperty("attribute"))return{kind:"attribute",op:t,attribute:e.attribute,value:e.value}
throw new Error("Unrecognized filter param.")}function ie(e){if(e.hasOwnProperty("offset")||e.hasOwnProperty("limit"))return{kind:"offsetLimit",offset:e.offset,limit:e.limit}
throw new Error("Unrecognized page param.")}function oe(e){if(Object(w.isObject)(e)){if(e.hasOwnProperty("kind"))return e
if(e.hasOwnProperty("attribute"))return{kind:"attribute",attribute:e.attribute,order:e.order||"ascending"}}else if("string"==typeof e)return function(e){var t,n
return"-"===e[0]?(t=e.slice(1),n="descending"):(t=e,n="ascending"),{kind:"attribute",attribute:t,order:n}}(e)
throw new Error("Unrecognized sort param.")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n
return t=e,(n=[{key:"findRecord",value:function(e){return new Z(e)}},{key:"findRecords",value:function(e){return new ne(e)}},{key:"findRelatedRecord",value:function(e,t){return new ee(e,t)}},{key:"findRelatedRecords",value:function(e,t){return new te(e,t)}}])&&ae(t.prototype,n),e}()
function ue(e,t,n,i){if("function"==typeof e)return ue(e(i),t,n)
var o,a,s=e
if(Object(w.isObject)(s)&&s.expression){if(s.id&&!t&&!n)return s
o=s.expression,a=t||s.options}else o=e instanceof J?e.toQueryExpression():e,a=t
return{expression:o,options:a,id:n||r.default.uuid()}}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t.version&&(t.version=1),void 0===t.models&&(t.models={}),this._applySettings(t)}var t,n
return t=e,(n=[{key:"upgrade",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
void 0===e.version&&(e.version=this._version+1),this._applySettings(e),this.emit("upgrade",this._version)}},{key:"_applySettings",value:function(e){this._version=e.version,e.generateId&&(this.generateId=e.generateId),e.pluralize&&(this.pluralize=e.pluralize),e.singularize&&(this.singularize=e.singularize),e.models&&(this._models=e.models)}},{key:"generateId",value:function(e){return r.default.uuid()}},{key:"pluralize",value:function(e){return e+"s"}},{key:"singularize",value:function(e){return e.lastIndexOf("s")===e.length-1?e.substr(0,e.length-1):(console.warn("Orbit's built-in naive singularization rules cannot singularize ".concat(e,". Pass singularize & pluralize functions to Schema to customize.")),e)}},{key:"initializeRecord",value:function(e){void 0===e.id&&(e.id=this.generateId(e.type))}},{key:"getModel",value:function(e){var t=this.models[e]
if(t)return t
throw new m(e)}},{key:"getAttribute",value:function(e,t){var n=this.getModel(e)
return n.attributes&&n.attributes[t]}},{key:"getRelationship",value:function(e,t){var n=this.getModel(e)
return n.relationships&&n.relationships[t]}},{key:"hasAttribute",value:function(e,t){return!!this.getAttribute(e,t)}},{key:"hasRelationship",value:function(e,t){return!!this.getRelationship(e,t)}},{key:"eachAttribute",value:function(e,t){var n=this.getModel(e).attributes||{}
for(var r in n)t(r,n[r])}},{key:"eachRelationship",value:function(e,t){var n=this.getModel(e).relationships||{}
for(var r in n)t(r,n[r])}},{key:"version",get:function(){return this._version}},{key:"models",get:function(){return this._models}}])&&ce(t.prototype,n),e}(),fe=he=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":le(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.evented],he)
function de(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._recordInitializer=t.recordInitializer}var t,n
return t=e,(n=[{key:"addRecord",value:function(e){return this._recordInitializer&&this._recordInitializer.initializeRecord(e),{op:"addRecord",record:e}}},{key:"replaceRecord",value:function(e){return r.default.deprecate("The `replaceRecord` operation is deprecated in favor of `updateRecord`"),{op:"updateRecord",record:e}}},{key:"updateRecord",value:function(e){return{op:"updateRecord",record:e}}},{key:"removeRecord",value:function(e){return{op:"removeRecord",record:e}}},{key:"replaceKey",value:function(e,t,n){return{op:"replaceKey",record:e,key:t,value:n}}},{key:"replaceAttribute",value:function(e,t,n){return{op:"replaceAttribute",record:e,attribute:t,value:n}}},{key:"addToRelatedRecords",value:function(e,t,n){return{op:"addToRelatedRecords",record:e,relationship:t,relatedRecord:n}}},{key:"removeFromRelatedRecords",value:function(e,t,n){return{op:"removeFromRelatedRecords",record:e,relationship:t,relatedRecord:n}}},{key:"replaceRelatedRecords",value:function(e,t,n){return{op:"replaceRelatedRecords",record:e,relationship:t,relatedRecords:n}}},{key:"replaceRelatedRecord",value:function(e,t,n){return{op:"replaceRelatedRecord",record:e,relationship:t,relatedRecord:n}}},{key:"recordInitializer",get:function(){return this._recordInitializer}}])&&de(t.prototype,n),e}()
function ve(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function me(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){ve(o,r,i,a,s,"next",e)}function s(e){ve(o,r,i,a,s,"throw",e)}a(void 0)})}}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var be=r.default.assert,xe=r.default.deprecate,we=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._schema=n.schema,this._keyMap=n.keyMap
var i=this._name=n.name,o=this._bucket=n.bucket
this._queryBuilder=n.queryBuilder,this._transformBuilder=n.transformBuilder
var a=n.requestQueueSettings||{},s=n.syncQueueSettings||{}
o&&be("TransformLog requires a name if it has a bucket",!!i),this._transformLog=new r.Log({name:i?"".concat(i,"-log"):void 0,bucket:o}),this._requestQueue=new r.TaskQueue(this,Object.assign({name:i?"".concat(i,"-requests"):void 0,bucket:o},a)),this._syncQueue=new r.TaskQueue(this,Object.assign({name:i?"".concat(i,"-sync"):void 0,bucket:o},s)),this._schema&&(void 0===n.autoUpgrade||n.autoUpgrade)&&this._schema.on("upgrade",function(){return t.upgrade()}),(void 0===n.autoActivate||n.autoActivate)&&this.activate()}var t,n,i,o,a,s,u
return t=e,(n=[{key:"perform",value:function(e){return this["__".concat(e.type,"__")].call(this,e.data)}},{key:"upgrade",value:function(){return Promise.resolve()}},{key:"activate",value:(u=me(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._activated||(this._activated=this._activate()),e.abrupt("return",this._activated)
case 2:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"deactivate",value:(s=me(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._activated){e.next=3
break}return e.next=3,this._activated
case 3:this._activated=void 0
case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"_activate",value:(a=me(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._transformLog.reified)
case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"_transformed",value:(o=me(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return xe("The `_transformed` method on `Source` is deprecated in favor of `transformed`."),e.abrupt("return",this.transformed(t))
case 2:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"transformed",value:(i=me(regeneratorRuntime.mark(function e(t){var n=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:return e.abrupt("return",t.reduce(function(e,t){return e.then(function(){return n._transformLog.contains(t.id)?Promise.resolve():n._transformLog.append(t.id).then(function(){return Object(r.settleInSeries)(n,"transform",t)})})},Promise.resolve()).then(function(){return t}))
case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_enqueueRequest",value:function(e,t){return this._requestQueue.push({type:e,data:t})}},{key:"_enqueueSync",value:function(e,t){return this._syncQueue.push({type:e,data:t})}},{key:"name",get:function(){return this._name}},{key:"schema",get:function(){return this._schema}},{key:"keyMap",get:function(){return this._keyMap}},{key:"bucket",get:function(){return this._bucket}},{key:"transformLog",get:function(){return this._transformLog}},{key:"requestQueue",get:function(){return this._requestQueue}},{key:"syncQueue",get:function(){return this._syncQueue}},{key:"queryBuilder",get:function(){var e=this._queryBuilder
return void 0===e&&(e=this._queryBuilder=new se),e}},{key:"transformBuilder",get:function(){var e=this._transformBuilder
return void 0===e&&(e=this._transformBuilder=new pe({recordInitializer:this._schema})),e}},{key:"activated",get:function(){if(!this._activated)throw new Error('"'.concat(this.name,'" source is not activated'))
return this._activated}}])&&ge(t.prototype,n),e}()
function _e(e,t,n,i){if("function"==typeof e)return _e(e(i),t,n)
var o,a,s=e
if(Object(w.isObject)(s)&&s.operations){if(s.id&&!t&&!n)return s
o=s.operations,a=t||s.options}else o=Array.isArray(e)?e:[e],a=t
return{operations:o,options:a,id:n||r.default.uuid()}}function Re(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ee(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){Re(o,r,i,a,s,"next",e)}function s(e){Re(o,r,i,a,s,"throw",e)}a(void 0)})}}we=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":ye(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.evented],we)
var Ce=r.default.assert,ke="__pullable__"
function Se(e){return!!e[ke]}function Ae(e){var t=e.prototype
Se(t)||(Ce("Pullable interface can only be applied to a Source",t instanceof we),t[ke]=!0,t.pull=function(){var e=Ee(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:return i=ue(t,n,r,this.queryBuilder),e.abrupt("return",this._enqueueRequest("pull",i))
case 4:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}(),t.__pull__=function(){var e=Ee(regeneratorRuntime.mark(function e(t){var n,i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},e.next=4,Object(r.fulfillInSeries)(this,"beforePull",t,n)
case 4:return e.next=6,this._pull(t,n)
case 6:return i=e.sent,e.next=9,Object(r.settleInSeries)(this,"pull",t,i)
case 9:return e.abrupt("return",i)
case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,Object(r.settleInSeries)(this,"pullFail",t,e.t0)
case 16:throw e.t0
case 17:case"end":return e.stop()}},e,this,[[0,12]])}))
return function(t){return e.apply(this,arguments)}}())}function Te(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Oe(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){Te(o,r,i,a,s,"next",e)}function s(e){Te(o,r,i,a,s,"throw",e)}a(void 0)})}}var Ie=r.default.assert,Ne="__pushable__"
function De(e){return!!e[Ne]}function Pe(e){var t=e.prototype
De(t)||(Ie("Pushable interface can only be applied to a Source",t instanceof we),t[Ne]=!0,t.push=function(){var e=Oe(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:if(i=_e(t,n,r,this.transformBuilder),!this.transformLog.contains(i.id)){e.next=5
break}return e.abrupt("return",[])
case 5:return e.abrupt("return",this._enqueueRequest("push",i))
case 6:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}(),t.__push__=function(){var e=Oe(regeneratorRuntime.mark(function e(t){var n,i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.transformLog.contains(t.id)){e.next=2
break}return e.abrupt("return",[])
case 2:return e.prev=2,n={},e.next=6,Object(r.fulfillInSeries)(this,"beforePush",t,n)
case 6:return e.next=8,this._push(t,n)
case 8:return i=e.sent,e.next=11,Object(r.settleInSeries)(this,"push",t,i)
case 11:return e.abrupt("return",i)
case 14:return e.prev=14,e.t0=e.catch(2),e.next=18,Object(r.settleInSeries)(this,"pushFail",t,e.t0)
case 18:throw e.t0
case 19:case"end":return e.stop()}},e,this,[[2,14]])}))
return function(t){return e.apply(this,arguments)}}())}function Me(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Fe(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){Me(o,r,i,a,s,"next",e)}function s(e){Me(o,r,i,a,s,"throw",e)}a(void 0)})}}var Le=r.default.assert,Be="__queryable__"
function je(e){return!!e[Be]}function ze(e){var t=e.prototype
je(t)||(Le("Queryable interface can only be applied to a Source",t instanceof we),t[Be]=!0,t.query=function(){var e=Fe(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:return i=ue(t,n,r,this.queryBuilder),e.abrupt("return",this._enqueueRequest("query",i))
case 4:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}(),t.__query__=function(){var e=Fe(regeneratorRuntime.mark(function e(t){var n,i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},e.next=4,Object(r.fulfillInSeries)(this,"beforeQuery",t,n)
case 4:return e.next=6,this._query(t,n)
case 6:return i=e.sent,e.abrupt("return",Object(r.settleInSeries)(this,"query",t,i).then(function(){return i}))
case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(r.settleInSeries)(this,"queryFail",t,e.t0)
case 14:throw e.t0
case 15:case"end":return e.stop()}},e,this,[[0,10]])}))
return function(t){return e.apply(this,arguments)}}())}function Ue(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function We(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){Ue(o,r,i,a,s,"next",e)}function s(e){Ue(o,r,i,a,s,"throw",e)}a(void 0)})}}var Ve=r.default.assert,qe="__syncable__"
function He(e){return!!e[qe]}function Ge(e){var t=e.prototype
He(t)||(Ve("Syncable interface can only be applied to a Source",t instanceof we),t[qe]=!0,t.sync=function(){var e=We(regeneratorRuntime.mark(function e(t){var n,r,i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:if(!Array.isArray(t)){e.next=7
break}return n=t,e.abrupt("return",n.reduce(function(e,t){return e.then(function(){return i.sync(t)})},Promise.resolve()))
case 7:if(r=t,!this.transformLog.contains(r.id)){e.next=10
break}return e.abrupt("return",Promise.resolve())
case 10:return e.abrupt("return",this._enqueueSync("sync",r))
case 11:case"end":return e.stop()}},e,this)}))
return function(t){return e.apply(this,arguments)}}(),t.__sync__=function(){var e=We(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.transformLog.contains(t.id)){e.next=2
break}return e.abrupt("return")
case 2:return e.prev=2,e.next=5,Object(r.fulfillInSeries)(this,"beforeSync",t)
case 5:return e.next=7,this._sync(t)
case 7:return e.next=9,Object(r.settleInSeries)(this,"sync",t)
case 9:e.next=16
break
case 11:return e.prev=11,e.t0=e.catch(2),e.next=15,Object(r.settleInSeries)(this,"syncFail",t,e.t0)
case 15:throw e.t0
case 16:case"end":return e.stop()}},e,this,[[2,11]])}))
return function(t){return e.apply(this,arguments)}}())}function Ke(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function $e(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){Ke(o,r,i,a,s,"next",e)}function s(e){Ke(o,r,i,a,s,"throw",e)}a(void 0)})}}var Xe=r.default.assert,Ye="__updatable__"
function Qe(e){return!!e[Ye]}function Je(e){var t=e.prototype
Qe(t)||(Xe("Updatable interface can only be applied to a Source",t instanceof we),t[Ye]=!0,t.update=function(){var e=$e(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.activated
case 2:if(i=_e(t,n,r,this.transformBuilder),!this.transformLog.contains(i.id)){e.next=5
break}return e.abrupt("return",Promise.resolve())
case 5:return e.abrupt("return",this._enqueueRequest("update",i))
case 6:case"end":return e.stop()}},e,this)}))
return function(t,n,r){return e.apply(this,arguments)}}(),t.__update__=function(){var e=$e(regeneratorRuntime.mark(function e(t){var n,i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.transformLog.contains(t.id)){e.next=2
break}return e.abrupt("return")
case 2:return e.prev=2,n={},e.next=6,Object(r.fulfillInSeries)(this,"beforeUpdate",t,n)
case 6:return e.next=8,this._update(t,n)
case 8:return i=e.sent,e.next=11,Object(r.settleInSeries)(this,"update",t,i)
case 11:return e.abrupt("return",i)
case 14:return e.prev=14,e.t0=e.catch(2),e.next=18,Object(r.settleInSeries)(this,"updateFail",t,e.t0)
case 18:throw e.t0
case 19:case"end":return e.stop()}},e,this,[[2,14]])}))
return function(t){return e.apply(this,arguments)}}())}n.d(t,"default",function(){return r.default}),n.d(t,"ClientError",function(){return c}),n.d(t,"ServerError",function(){return l}),n.d(t,"NetworkError",function(){return h}),n.d(t,"QueryExpressionParseError",function(){return f}),n.d(t,"QueryNotAllowed",function(){return d}),n.d(t,"TransformNotAllowed",function(){return p}),n.d(t,"SchemaError",function(){return v}),n.d(t,"ModelNotFound",function(){return m}),n.d(t,"RelationshipNotFound",function(){return g}),n.d(t,"IncorrectRelatedRecordType",function(){return y}),n.d(t,"RecordException",function(){return b}),n.d(t,"RecordNotFoundException",function(){return x}),n.d(t,"KeyMap",function(){return R}),n.d(t,"coalesceRecordOperations",function(){return V}),n.d(t,"recordDiffs",function(){return q}),n.d(t,"QueryBuilder",function(){return se}),n.d(t,"QueryTerm",function(){return J}),n.d(t,"FindRecordTerm",function(){return Z}),n.d(t,"FindRelatedRecordTerm",function(){return ee}),n.d(t,"FindRelatedRecordsTerm",function(){return te}),n.d(t,"FindRecordsTerm",function(){return ne}),n.d(t,"buildQuery",function(){return ue}),n.d(t,"cloneRecordIdentity",function(){return E}),n.d(t,"equalRecordIdentities",function(){return C}),n.d(t,"equalRecordIdentitySets",function(){return k}),n.d(t,"uniqueRecordIdentities",function(){return S}),n.d(t,"recordsInclude",function(){return A}),n.d(t,"recordsIncludeAll",function(){return T}),n.d(t,"mergeRecords",function(){return O}),n.d(t,"serializeRecordIdentity",function(){return I}),n.d(t,"deserializeRecordIdentity",function(){return N}),n.d(t,"Schema",function(){return fe}),n.d(t,"Source",function(){return we}),n.d(t,"buildTransform",function(){return _e}),n.d(t,"TransformBuilder",function(){return pe}),n.d(t,"pullable",function(){return Ae}),n.d(t,"isPullable",function(){return Se}),n.d(t,"pushable",function(){return Pe}),n.d(t,"isPushable",function(){return De}),n.d(t,"queryable",function(){return ze}),n.d(t,"isQueryable",function(){return je}),n.d(t,"syncable",function(){return Ge}),n.d(t,"isSyncable",function(){return He}),n.d(t,"updatable",function(){return Je}),n.d(t,"isUpdatable",function(){return Qe})},function(e,t,n){"use strict"
n.r(t)
var r=n(0)
function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={globals:"object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":i(global))&&global||{},assert:function(e,t){if(!t)throw new Error("Assertion failed: "+e)},deprecate:function(e,t){if("function"==typeof t){if(t())return}else if(t)return
console.warn(e)},uuid:r.uuid}
function a(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.task=n,this.reset()}var t,n
return t=e,(n=[{key:"reset",value:function(){var e=this
this._started=!1,this._settled=!1,this._settlement=new Promise(function(t,n){e._success=function(n){e._settled=!0,t(n)},e._fail=function(t){e._settled=!0,n(t)}})}},{key:"settle",value:function(){return this._settlement}},{key:"process",value:function(){return this._started||(this._started=!0,this.target.perform(this.task).then(this._success,this._fail)),this.settle()}},{key:"reject",value:function(e){if(this._settled)throw new Error("TaskProcessor#reject can not be invoked when processing has already settled.")
this._fail(e)}},{key:"started",get:function(){return this._started}},{key:"settled",get:function(){return this._settled}}])&&a(t.prototype,n),e}()
function u(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=o.deprecate,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=[]}var t,n
return t=e,(n=[{key:"addListener",value:function(e){arguments.length>1&&c("`binding` argument is no longer supported for individual `Notifier` listeners. Please pre-bind listeners before calling `addListener`."),this.listeners.push(e)}},{key:"removeListener",value:function(e){arguments.length>1&&c("`binding` argument is no longer supported for individual `Notifier` listeners. Please pre-bind listeners before calling `removeListener`.")
for(var t=this.listeners,n=0,r=t.length;n<r;n++)if(t[n]===e)return void t.splice(n,1)}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]
this.listeners.slice(0).forEach(function(e){return e.apply(void 0,t)})}}])&&u(t.prototype,n),e}()
function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}var f=o.deprecate,d="__evented__"
function p(e){return!!e[d]}function v(e){var t=e.prototype
p(t)||(t[d]=!0,t.on=function(e,t){arguments.length>2&&f("`binding` argument is no longer supported when configuring `Evented` listeners. Please pre-bind listeners before calling `on`."),y(this,e,!0).addListener(t)},t.off=function(e,t){arguments.length>2&&f("`binding` argument is no longer supported when configuring `Evented` listeners. Please pre-bind listeners before calling `off`.")
var n=y(this,e)
n&&(t?n.removeListener(t):function(e,t){e._eventedNotifiers&&e._eventedNotifiers[t]&&delete e._eventedNotifiers[t]}(this,e))},t.one=function(e,t){arguments.length>2&&f("`binding` argument is no longer supported when configuring `Evented` listeners. Please pre-bind listeners before calling `off`.")
var n=y(this,e,!0)
n.addListener(function e(){t.apply(void 0,arguments),n.removeListener(e)})},t.emit=function(e){var t=y(this,e)
if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i]
t.emit.apply(t,r)}},t.listeners=function(e){var t=y(this,e)
return t?t.listeners:[]})}function m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]
return e.listeners(t).reduce(function(e,t){return e.then(function(){return t.apply(void 0,r)}).catch(function(){})},Promise.resolve())}function g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]
var o=e.listeners(t)
return new Promise(function(e,t){!function e(t,n,r,i){if(0===t.length)r()
else{var o,a=function(e){return function(e){if(Array.isArray(e))return e}(e)||h(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t)
o=a[0],t=a.slice(1)
var s=o.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t]
return n}}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n))
if(s)return Promise.resolve(s).then(function(){return e(t,n,r,i)}).catch(function(e){return i(e)})
e(t,n,r,i)}}(o,r,e,t)})}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
void 0===e._eventedNotifiers&&(e._eventedNotifiers={})
var r=e._eventedNotifiers[t]
return!r&&n&&(r=e._eventedNotifiers[t]=new l),r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=o.assert,_=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._performer=t,this._name=r.name,this._bucket=r.bucket,this.autoProcess=void 0===r.autoProcess||r.autoProcess,this._bucket&&w("TaskQueue requires a name if it has a bucket",!!this._name),this._reify().then(function(){n.length>0&&n.autoProcess&&n.process()})}var t,n
return t=e,(n=[{key:"push",value:function(e){var t=this,n=new s(this._performer,e)
return this._reified.then(function(){return t._tasks.push(e),t._processors.push(n),t._persist()}).then(function(){return t._settle(n)})}},{key:"retry",value:function(){var e,t=this
return this._reified.then(function(){return t._cancel(),(e=t.currentProcessor).reset(),t._persist()}).then(function(){return t._settle(e,!0)})}},{key:"skip",value:function(e){var t=this
return this._reified.then(function(){t._cancel(),t._tasks.shift()
var n=t._processors.shift()
return void 0===n||n.settled||n.reject(e||new Error("Processing cancelled via `TaskQueue#skip`")),t._persist()}).then(function(){return t._settle()})}},{key:"clear",value:function(e){var t=this
return this._reified.then(function(){t._cancel(),t._tasks=[]
var n=!0,r=!1,i=void 0
try{for(var o,a=t._processors[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value
s.settled||s.reject(e||new Error("Processing cancelled via `TaskQueue#clear`"))}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t._processors=[],t._persist()}).then(function(){return t._settle(null,!0)})}},{key:"shift",value:function(e){var t,n=this
return this._reified.then(function(){n._cancel(),t=n._tasks.shift()
var r=n._processors.shift()
return void 0===r||r.settled||r.reject(e||new Error("Processing cancelled via `TaskQueue#shift`")),n._persist()}).then(function(){return t})}},{key:"unshift",value:function(e){var t=this,n=new s(this._performer,e)
return this._reified.then(function(){return t._cancel(),t._tasks.unshift(e),t._processors.unshift(n),t._persist()}).then(function(){return t._settle(n)})}},{key:"process",value:function(){var e=this
return this._reified.then(function(){var t=e._resolution
return t||(0===e._tasks.length?t=e._complete():(e._error=null,e._resolution=t=new Promise(function(t,n){e._resolve=t,e._reject=n}),e._settleEach(t))),t})}},{key:"_settle",value:function(e,t){if(this.autoProcess||t){var n=e?function(){return e.settle()}:function(){}
return this.process().then(n,n)}return e?e.settle():Promise.resolve()}},{key:"_complete",value:function(){return this._resolve&&this._resolve(),this._resolve=null,this._reject=null,this._error=null,this._resolution=null,m(this,"complete")}},{key:"_fail",value:function(e,t){return this._reject&&this._reject(t),this._resolve=null,this._reject=null,this._error=t,this._resolution=null,m(this,"fail",e,t)}},{key:"_cancel",value:function(){this._error=null,this._resolution=null}},{key:"_settleEach",value:function(e){var t=this
if(0===this._tasks.length)return this._complete()
var n=this._tasks[0],r=this._processors[0]
return m(this,"beforeTask",n).then(function(){return r.process()}).then(function(){if(e===t._resolution)return t._tasks.shift(),t._processors.shift(),t._persist().then(function(){return m(t,"task",n)}).then(function(){return t._settleEach(e)})}).catch(function(r){if(e===t._resolution)return t._fail(n,r)})}},{key:"_reify",value:function(){var e=this
return this._tasks=[],this._processors=[],this._bucket?this._reified=this._bucket.getItem(this._name).then(function(t){t&&(e._tasks=t,e._processors=t.map(function(t){return new s(e._performer,t)}))}):this._reified=Promise.resolve(),this._reified}},{key:"_persist",value:function(){return this.emit("change"),this._bucket?this._bucket.setItem(this._name,this._tasks):Promise.resolve()}},{key:"name",get:function(){return this._name}},{key:"performer",get:function(){return this._performer}},{key:"bucket",get:function(){return this._bucket}},{key:"length",get:function(){return this._tasks?this._tasks.length:0}},{key:"entries",get:function(){return this._tasks}},{key:"current",get:function(){return this._tasks&&this._tasks[0]}},{key:"currentProcessor",get:function(){return this._processors&&this._processors[0]}},{key:"error",get:function(){return this._error}},{key:"empty",get:function(){return 0===this.length}},{key:"processing",get:function(){var e=this.currentProcessor
return void 0!==e&&e.started&&!e.settled}},{key:"reified",get:function(){return this._reified}}])&&b(t.prototype,n),e}(),R=_=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":x(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([v],_)
function E(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t.version&&(t.version=1),t.namespace=t.namespace||"orbit-bucket",this._applySettings(t)}var t,n
return t=e,(n=[{key:"upgrade",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return void 0===t.version&&(t.version=this._version+1),this._applySettings(t).then(function(){return e.emit("upgrade",e._version)})}},{key:"_applySettings",value:function(e){return e.name&&(this._name=e.name),e.namespace&&(this._namespace=e.namespace),this._version=e.version,Promise.resolve()}},{key:"name",get:function(){return this._name}},{key:"namespace",get:function(){return this._namespace}},{key:"version",get:function(){return this._version}}])&&E(t.prototype,n),e}()
function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}k=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([v],k)
var N=function e(t){I(this,e),this.message=t,this.error=new Error(this.message),this.stack=this.error.stack},D=function(e){function t(e){var n
return I(this,t),(n=A(this,T(t).call(this,"Action not logged: ".concat(e)))).id=e,n}return O(t,N),t}(),P=function(e){function t(e){var n
return I(this,t),(n=A(this,T(t).call(this,"Out of range: ".concat(e)))).value=e,n}return O(t,N),t}()
function M(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=o.assert,B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._bucket=t.bucket,this._bucket&&L("Log requires a name if it has a bucket",!!this._name),this._reify(t.data)}var t,n
return t=e,(n=[{key:"append",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r]
return this.reified.then(function(){return Array.prototype.push.apply(e._data,n),e._persist()}).then(function(){e.emit("append",n)})}},{key:"before",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._data.indexOf(e)
if(-1===n)throw new D(e)
var r=n+t
if(r<0||r>=this._data.length)throw new P(r)
return this._data.slice(0,r)}},{key:"after",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._data.indexOf(e)
if(-1===n)throw new D(e)
var r=n+1+t
if(r<0||r>this._data.length)throw new P(r)
return this._data.slice(r)}},{key:"truncate",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return this.reified.then(function(){var i=n._data.indexOf(e)
if(-1===i)throw new D(e)
var o=i+r
if(o<0||o>n._data.length)throw new P(o)
return o===n._data.length?(t=n._data,n._data=[]):(t=n._data.slice(0,o),n._data=n._data.slice(o)),n._persist()}).then(function(){n.emit("truncate",e,r,t)})}},{key:"rollback",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return this.reified.then(function(){var i=n._data.indexOf(e)
if(-1===i)throw new D(e)
var o=i+1+r
if(o<0||o>n._data.length)throw new P(o)
return t=n._data.slice(o),n._data=n._data.slice(0,o),n._persist()}).then(function(){n.emit("rollback",e,r,t)})}},{key:"clear",value:function(){var e,t=this
return this.reified.then(function(){return e=t._data,t._data=[],t._persist()}).then(function(){return t.emit("clear",e)})}},{key:"contains",value:function(e){return this._data.indexOf(e)>-1}},{key:"_persist",value:function(){return this.emit("change"),this.bucket?this._bucket.setItem(this.name,this._data):Promise.resolve()}},{key:"_reify",value:function(e){var t=this
!e&&this._bucket?this.reified=this._bucket.getItem(this._name).then(function(e){return t._initData(e)}):(this._initData(e),this.reified=Promise.resolve())}},{key:"_initData",value:function(e){this._data=e||[]}},{key:"name",get:function(){return this._name}},{key:"bucket",get:function(){return this._bucket}},{key:"head",get:function(){return this._data[this._data.length-1]}},{key:"entries",get:function(){return this._data}},{key:"length",get:function(){return this._data.length}}])&&M(t.prototype,n),e}(),j=B=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":F(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([v],B)
n.d(t,"default",function(){return o}),n.d(t,"TaskQueue",function(){return R}),n.d(t,"TaskProcessor",function(){return s}),n.d(t,"Bucket",function(){return k}),n.d(t,"evented",function(){return v}),n.d(t,"isEvented",function(){return p}),n.d(t,"settleInSeries",function(){return m}),n.d(t,"fulfillInSeries",function(){return g}),n.d(t,"Exception",function(){return N}),n.d(t,"NotLoggedException",function(){return D}),n.d(t,"OutOfRangeException",function(){return P}),n.d(t,"Notifier",function(){return l}),n.d(t,"Log",function(){return j})},function(e,t,n){"use strict"
var r=n(2),i=n(0),o=n(1)
function a(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._accessor=t}return s(e,[{key:"accessor",get:function(){return this._accessor}}]),s(e,[{key:"reset",value:function(e){return Promise.resolve()}},{key:"upgrade",value:function(){return Promise.resolve()}},{key:"validate",value:function(e){return Promise.resolve()}},{key:"before",value:function(e){return Promise.resolve([])}},{key:"after",value:function(e){return Promise.resolve([])}},{key:"immediate",value:function(e){return Promise.resolve()}},{key:"finally",value:function(e){return Promise.resolve([])}}]),e}()
function c(e,t,n,r){return r&&e.getRelationship(t.type,n).inverse?{record:t,relationship:n,relatedRecord:r}:null}function l(e,t,n,r){if(r&&r.length>0&&e.getRelationship(t.type,n).inverse){var i=Object(o.cloneRecordIdentity)(t)
return r.map(function(e){return{record:i,relationship:n,relatedRecord:e}})}return[]}function h(e,t){var n=Object(o.cloneRecordIdentity)(t),r=[]
return e.eachRelationship(t.type,function(e){var o=Object(i.deepGet)(t,["relationships",e,"data"])
if(Array.isArray(o)){var a=!0,s=!1,u=void 0
try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var h=c.value
r.push({record:n,relationship:e,relatedRecord:h})}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}else o&&r.push({record:n,relationship:e,relatedRecord:o})}),r}function f(e,t){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value
"hasMany"===e.getRelationship(u.record.type,u.relationship).type?n.push({op:"removeFromRelatedRecords",record:u.record,relationship:u.relationship,relatedRecord:u.relatedRecord}):n.push({op:"replaceRelatedRecord",record:u.record,relationship:u.relationship,relatedRecord:null})}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)})}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,y(t).apply(this,arguments))}var n,r,i,o,a,s,u,d,p,x,w
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"after",value:(w=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="replaceRelatedRecord"===e.t0?3:"replaceRelatedRecords"===e.t0?12:"removeFromRelatedRecords"===e.t0?21:"removeRecord"===e.t0?24:"updateRecord"===e.t0?27:30
break
case 3:return e.t1=this,e.t2=t.record,e.t3=t.relationship,e.next=8,this.accessor.getRelatedRecordAsync(t.record,t.relationship)
case 8:return e.t4=e.sent,e.next=11,e.t1.removeInverseRelationship.call(e.t1,e.t2,e.t3,e.t4)
case 11:return e.abrupt("return",[])
case 12:return e.t5=this,e.t6=t.record,e.t7=t.relationship,e.next=17,this.accessor.getRelatedRecordsAsync(t.record,t.relationship)
case 17:return e.t8=e.sent,e.next=20,e.t5.removeInverseRelationships.call(e.t5,e.t6,e.t7,e.t8)
case 20:return e.abrupt("return",[])
case 21:return e.next=23,this.removeInverseRelationship(t.record,t.relationship,t.relatedRecord)
case 23:return e.abrupt("return",[])
case 24:return e.next=26,this.removeAllInverseRelationships(t.record)
case 26:return e.abrupt("return",[])
case 27:return e.next=29,this.removeAllInverseRelationships(t.record)
case 29:case 30:return e.abrupt("return",[])
case 31:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"finally",value:(x=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="replaceRelatedRecord"===e.t0?3:"replaceRelatedRecords"===e.t0?6:"addToRelatedRecords"===e.t0?9:"addRecord"===e.t0?12:"updateRecord"===e.t0?15:"removeRecord"===e.t0?18:21
break
case 3:return e.next=5,this.addInverseRelationship(t.record,t.relationship,t.relatedRecord)
case 5:return e.abrupt("return",[])
case 6:return e.next=8,this.addInverseRelationships(t.record,t.relationship,t.relatedRecords)
case 8:return e.abrupt("return",[])
case 9:return e.next=11,this.addInverseRelationship(t.record,t.relationship,t.relatedRecord)
case 11:return e.abrupt("return",[])
case 12:return e.next=14,this.addAllInverseRelationships(t.record)
case 14:return e.abrupt("return",[])
case 15:return e.next=17,this.addAllInverseRelationships(t.record)
case 17:return e.abrupt("return",[])
case 18:return e.next=20,this.clearInverseRelationshipOps(t.record)
case 20:return e.abrupt("return",e.sent)
case 21:return e.abrupt("return",[])
case 22:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"addInverseRelationship",value:(p=v(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=c(this.accessor.schema,t,n,r))){e.next=4
break}return e.next=4,this.accessor.addInverseRelationshipsAsync([i])
case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return p.apply(this,arguments)})},{key:"addInverseRelationships",value:(d=v(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=l(this.accessor.schema,t,n,r))){e.next=4
break}return e.next=4,this.accessor.addInverseRelationshipsAsync(i)
case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return d.apply(this,arguments)})},{key:"addAllInverseRelationships",value:(u=v(regeneratorRuntime.mark(function e(t){var n
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=h(this.accessor.schema,t)).length>0)){e.next=4
break}return e.next=4,this.accessor.addInverseRelationshipsAsync(n)
case 4:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"removeInverseRelationship",value:(s=v(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=c(this.accessor.schema,t,n,r))){e.next=4
break}return e.next=4,this.accessor.removeInverseRelationshipsAsync([i])
case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return s.apply(this,arguments)})},{key:"removeInverseRelationships",value:(a=v(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=l(this.accessor.schema,t,n,r)).length>0)){e.next=4
break}return e.next=4,this.accessor.removeInverseRelationshipsAsync(i)
case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"removeAllInverseRelationships",value:(o=v(regeneratorRuntime.mark(function e(t){var n,r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accessor.getRecordAsync(t)
case 2:if(!(n=e.sent)){e.next=8
break}if(!((r=h(this.accessor.schema,n)).length>0)){e.next=8
break}return e.next=8,this.accessor.removeInverseRelationshipsAsync(r)
case 8:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"clearInverseRelationshipOps",value:(i=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.t1=this.accessor.schema,e.next=4,this.accessor.getInverseRelationshipsAsync(t)
case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2))
case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}])&&m(n.prototype,r),t}(u)
function w(e,t){var n=[]
if(t.relationships){var r=Object(o.cloneRecordIdentity)(t)
e.eachRelationship(t.type,function(o,a){var s=Object(i.deepGet)(t,["relationships",o,"data"])
if(s){var u=N(s)
Array.prototype.push.apply(n,A(e,r,a,u))}})}return n}function _(e,t,n,r){var i=[]
if(r){var o=e.getRelationship(t.type,n).inverse
o&&i.push(O(e,r,o,t))}return i}function R(e,t,n,r,i){var o=[]
if(i){var a=e.getRelationship(t.type,n).inverse
a&&o.push(I(e,r,a,t))}return o}function E(e,t,n,r,i){var a=[]
if(!Object(o.equalRecordIdentities)(r,i)){var s=e.getRelationship(t.type,n).inverse
s&&(i&&a.push(I(e,i,s,t)),r&&a.push(O(e,r,s,t)))}return a}function C(e,t,n,r,i){var a,s=[],u=e.getRelationship(t.type,n)
if(i&&i.length>0){var c=Object(o.uniqueRecordIdentities)(i,r)
Array.prototype.push.apply(s,T(e,t,u,c)),a=Object(o.uniqueRecordIdentities)(r,i)}else a=r
return Array.prototype.push.apply(s,A(e,t,u,a)),s}function k(e,t){var n=[]
if(t&&t.relationships){var r=Object(o.cloneRecordIdentity)(t)
e.eachRelationship(t.type,function(o,a){var s=Object(i.deepGet)(t,["relationships",o,"data"])
if(s){var u=N(s)
Array.prototype.push.apply(n,T(e,r,a,u))}})}return n}function S(e,t,n){var r=[]
if(t.relationships){var a=Object(o.cloneRecordIdentity)(t)
e.eachRelationship(t.type,function(o,s){var u=Object(i.deepGet)(t,["relationships",o,"data"]),c=n&&Object(i.deepGet)(n,["relationships",o,"data"])
void 0!==u&&("hasMany"===s.type?Array.prototype.push.apply(r,C(e,a,o,u||[],c||[])):Array.prototype.push.apply(r,E(e,a,o,u||null,c||null)))})}return r}function A(e,t,n,r){if(r.length>0&&n.inverse){var i=n.inverse
return r.map(function(n){return O(e,n,i,t)})}return[]}function T(e,t,n,r){if(r.length>0){if("remove"===n.dependent)return r.map(function(e){return{op:"removeRecord",record:e}})
if(n.inverse){var i=n.inverse
return r.map(function(n){return I(e,n,i,t)})}}return[]}function O(e,t,n,r){return{op:"hasMany"===e.getRelationship(t.type,n).type?"addToRelatedRecords":"replaceRelatedRecord",record:t,relationship:n,relatedRecord:r}}function I(e,t,n,r){var i="hasMany"===e.getRelationship(t.type,n).type
return{op:i?"removeFromRelatedRecords":"replaceRelatedRecord",record:t,relationship:n,relatedRecord:i?r:null}}function N(e){return Array.isArray(e)?e:e?[e]:[]}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,F(t).apply(this,arguments))}var n,r,i,o
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,u),n=t,(r=[{key:"after",value:(i=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="addRecord"===e.t0?3:"addToRelatedRecords"===e.t0?4:"replaceRelatedRecord"===e.t0?5:"replaceRelatedRecords"===e.t0?14:"removeFromRelatedRecords"===e.t0?23:"removeRecord"===e.t0?32:"updateRecord"===e.t0?38:45
break
case 3:return e.abrupt("return",w(this.accessor.schema,t.record))
case 4:return e.abrupt("return",_(this.accessor.schema,t.record,t.relationship,t.relatedRecord))
case 5:return e.t1=E,e.t2=this.accessor.schema,e.t3=t.record,e.t4=t.relationship,e.t5=t.relatedRecord,e.next=12,this.accessor.getRelatedRecordAsync(t.record,t.relationship)
case 12:return e.t6=e.sent,e.abrupt("return",(0,e.t1)(e.t2,e.t3,e.t4,e.t5,e.t6))
case 14:return e.t7=C,e.t8=this.accessor.schema,e.t9=t.record,e.t10=t.relationship,e.t11=t.relatedRecords,e.next=21,this.accessor.getRelatedRecordsAsync(t.record,t.relationship)
case 21:return e.t12=e.sent,e.abrupt("return",(0,e.t7)(e.t8,e.t9,e.t10,e.t11,e.t12))
case 23:return e.t13=R,e.t14=this.accessor.schema,e.t15=t.record,e.t16=t.relationship,e.t17=t.relatedRecord,e.next=30,this.accessor.getRecordAsync(t.relatedRecord)
case 30:return e.t18=e.sent,e.abrupt("return",(0,e.t13)(e.t14,e.t15,e.t16,e.t17,e.t18))
case 32:return e.t19=k,e.t20=this.accessor.schema,e.next=36,this.accessor.getRecordAsync(t.record)
case 36:return e.t21=e.sent,e.abrupt("return",(0,e.t19)(e.t20,e.t21))
case 38:return e.t22=S,e.t23=this.accessor.schema,e.t24=t.record,e.next=43,this.accessor.getRecordAsync(t.record)
case 43:return e.t25=e.sent,e.abrupt("return",(0,e.t22)(e.t23,e.t24,e.t25))
case 45:return e.abrupt("return",[])
case 46:case"end":return e.stop()}},e,this)}),o=function(){var e=this,t=arguments
return new Promise(function(n,r){var o=i.apply(e,t)
function a(e){P(o,n,r,a,s,"next",e)}function s(e){P(o,n,r,a,s,"throw",e)}a(void 0)})},function(e){return o.apply(this,arguments)})}])&&M(n.prototype,r),t}()
function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,W(t).apply(this,arguments))}var n,r,i,a
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,u),n=t,(r=[{key:"validate",value:(i=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="addRecord"===e.t0?3:"updateRecord"===e.t0?4:"removeRecord"===e.t0?5:"replaceKey"===e.t0?6:"replaceAttribute"===e.t0?7:"addToRelatedRecords"===e.t0?8:"removeFromRelatedRecords"===e.t0?9:"replaceRelatedRecords"===e.t0?10:"replaceRelatedRecord"===e.t0?11:12
break
case 3:return e.abrupt("return",this._recordAdded(t.record))
case 4:return e.abrupt("return",this._recordReplaced(t.record))
case 5:return e.abrupt("return",this._recordRemoved(t.record))
case 6:return e.abrupt("return",this._keyReplaced(t.record))
case 7:return e.abrupt("return",this._attributeReplaced(t.record))
case 8:return e.abrupt("return",this._relatedRecordAdded(t.record,t.relationship,t.relatedRecord))
case 9:return e.abrupt("return",this._relatedRecordRemoved(t.record,t.relationship,t.relatedRecord))
case 10:return e.abrupt("return",this._relatedRecordsReplaced(t.record,t.relationship,t.relatedRecords))
case 11:return e.abrupt("return",this._relatedRecordReplaced(t.record,t.relationship,t.relatedRecord))
case 12:return e.abrupt("return")
case 13:case"end":return e.stop()}},e,this)}),a=function(){var e=this,t=arguments
return new Promise(function(n,r){var o=i.apply(e,t)
function a(e){z(o,n,r,a,s,"next",e)}function s(e){z(o,n,r,a,s,"throw",e)}a(void 0)})},function(e){return a.apply(this,arguments)})},{key:"_recordAdded",value:function(e){this._validateRecord(e)}},{key:"_recordReplaced",value:function(e){this._validateRecord(e)}},{key:"_recordRemoved",value:function(e){this._validateRecordIdentity(e)}},{key:"_keyReplaced",value:function(e){this._validateRecordIdentity(e)}},{key:"_attributeReplaced",value:function(e){this._validateRecordIdentity(e)}},{key:"_relatedRecordAdded",value:function(e,t,n){this._validateRecordIdentity(e),this._validateRecordIdentity(n),this._validateRelationship(e,t,n)}},{key:"_relatedRecordRemoved",value:function(e,t,n){this._validateRecordIdentity(e),this._validateRecordIdentity(n)}},{key:"_relatedRecordsReplaced",value:function(e,t,n){var r=this
this._validateRecordIdentity(e),n.forEach(function(n){r._validateRecordIdentity(n),r._validateRelationship(e,t,n)})}},{key:"_relatedRecordReplaced",value:function(e,t,n){this._validateRecordIdentity(e),n&&(this._validateRecordIdentity(n),this._validateRelationship(e,t,n))}},{key:"_validateRecord",value:function(e){this._validateRecordIdentity(e)}},{key:"_validateRecordIdentity",value:function(e){this._getModelSchema(e.type)}},{key:"_validateRelationship",value:function(e,t,n){var r=this._getModelSchema(e.type),i=r.relationships&&r.relationships[t]
if(void 0===i)throw new o.RelationshipNotFound(t,e.type)
if(Array.isArray(i.model)){if(!i.model.includes(n.type))throw new o.IncorrectRelatedRecordType(n.type,t,e.type)}else if("string"==typeof i.model&&i.model!==n.type)throw new o.IncorrectRelatedRecordType(n.type,t,e.type)}},{key:"_getModelSchema",value:function(e){return this.accessor.schema.getModel(e)}}])&&U(n.prototype,r),t}()
function H(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function G(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){H(o,r,i,a,s,"next",e)}function s(e){H(o,r,i,a,s,"throw",e)}a(void 0)})}}var K,$,X,Y,Q,J,Z,ee,te,ne={addRecord:(te=G(regeneratorRuntime.mark(function e(t,n){var r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,e.next=3,t.setRecordAsync(r)
case 3:return t.keyMap&&t.keyMap.pushRecord(r),e.abrupt("return",r)
case 5:case"end":return e.stop()}},e)})),function(e,t){return te.apply(this,arguments)}),updateRecord:(ee=G(regeneratorRuntime.mark(function e(t,n){var r,i,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,e.next=3,t.getRecordAsync(r)
case 3:return i=e.sent,a=Object(o.mergeRecords)(i||null,r),e.next=7,t.setRecordAsync(a)
case 7:return t.keyMap&&t.keyMap.pushRecord(a),e.abrupt("return",a)
case 9:case"end":return e.stop()}},e)})),function(e,t){return ee.apply(this,arguments)}),removeRecord:(Z=G(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.removeRecordAsync(n.record)
case 2:return e.abrupt("return",e.sent)
case 3:case"end":return e.stop()}},e)})),function(e,t){return Z.apply(this,arguments)}),replaceKey:(J=G(regeneratorRuntime.mark(function e(t,n){var r,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:return r=e.sent,a=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(n.record),Object(i.deepSet)(a,["keys",n.key],n.value),e.next=7,t.setRecordAsync(a)
case 7:return t.keyMap&&t.keyMap.pushRecord(a),e.abrupt("return",a)
case 9:case"end":return e.stop()}},e)})),function(e,t){return J.apply(this,arguments)}),replaceAttribute:(Q=G(regeneratorRuntime.mark(function e(t,n){var r,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:return r=e.sent,a=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(n.record),Object(i.deepSet)(a,["attributes",n.attribute],n.value),e.next=7,t.setRecordAsync(a)
case 7:return e.abrupt("return",a)
case 8:case"end":return e.stop()}},e)})),function(e,t){return Q.apply(this,arguments)}),addToRelatedRecords:(Y=G(regeneratorRuntime.mark(function e(t,n){var r,a,s,u,c
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(r=e.sent,s=n.relationship,u=n.relatedRecord,a=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(n.record),c=Object(i.deepGet)(a,["relationships",s,"data"])||[],Object(o.recordsInclude)(c,u)){e.next=11
break}return c.push(u),Object(i.deepSet)(a,["relationships",s,"data"],c),e.next=11,t.setRecordAsync(a)
case 11:return e.abrupt("return",a)
case 12:case"end":return e.stop()}},e)})),function(e,t){return Y.apply(this,arguments)}),removeFromRelatedRecords:(X=G(regeneratorRuntime.mark(function e(t,n){var r,a,s,u,c
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(r=e.sent,s=n.relationship,u=n.relatedRecord,!r){e.next=13
break}if(a=Object(i.clone)(r),!(c=Object(i.deepGet)(a,["relationships",s,"data"]))){e.next=12
break}if(c=c.filter(function(e){return!Object(o.equalRecordIdentities)(e,u)}),!Object(i.deepSet)(a,["relationships",s,"data"],c)){e.next=12
break}return e.next=12,t.setRecordAsync(a)
case 12:return e.abrupt("return",a)
case 13:return e.abrupt("return",null)
case 14:case"end":return e.stop()}},e)})),function(e,t){return X.apply(this,arguments)}),replaceRelatedRecords:($=G(regeneratorRuntime.mark(function e(t,n){var r,a,s,u
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(r=e.sent,s=n.relationship,u=n.relatedRecords,a=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(n.record),!Object(i.deepSet)(a,["relationships",s,"data"],u)){e.next=8
break}return e.next=8,t.setRecordAsync(a)
case 8:return e.abrupt("return",a)
case 9:case"end":return e.stop()}},e)})),function(e,t){return $.apply(this,arguments)}),replaceRelatedRecord:(K=G(regeneratorRuntime.mark(function e(t,n){var r,a,s,u
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(r=e.sent,s=n.relationship,u=n.relatedRecord,a=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(n.record),!Object(i.deepSet)(a,["relationships",s,"data"],u)){e.next=8
break}return e.next=8,t.setRecordAsync(a)
case 8:return e.abrupt("return",a)
case 9:case"end":return e.stop()}},e)})),function(e,t){return K.apply(this,arguments)})}
function re(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ie(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){re(o,r,i,a,s,"next",e)}function s(e){re(o,r,i,a,s,"throw",e)}a(void 0)})}}var oe,ae,se,ue,ce={findRecord:(ue=ie(regeneratorRuntime.mark(function e(t,n){var r,i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,e.next=3,t.getRecordAsync(r)
case 3:if(i=e.sent){e.next=6
break}throw new o.RecordNotFoundException(r.type,r.id)
case 6:return e.abrupt("return",i)
case 7:case"end":return e.stop()}},e)})),function(e,t){return ue.apply(this,arguments)}),findRecords:(se=ie(regeneratorRuntime.mark(function e(t,n){var r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordsAsync(n.records||n.type)
case 2:return r=e.sent,n.filter&&(r=le(r,n.filter)),n.sort&&(r=fe(r,n.sort)),n.page&&(r=de(r,n.page)),e.abrupt("return",r)
case 7:case"end":return e.stop()}},e)})),function(e,t){return se.apply(this,arguments)}),findRelatedRecords:(ae=ie(regeneratorRuntime.mark(function e(t,n){var r,i,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,e.next=3,t.getRelatedRecordsAsync(r,i)
case 3:if((a=e.sent)&&0!==a.length){e.next=10
break}return e.next=7,t.getRecordAsync(r)
case 7:if(e.sent){e.next=9
break}throw new o.RecordNotFoundException(r.type,r.id)
case 9:return e.abrupt("return",[])
case 10:return e.next=12,t.getRecordsAsync(a)
case 12:return s=e.sent,n.filter&&(s=le(s,n.filter)),n.sort&&(s=fe(s,n.sort)),n.page&&(s=de(s,n.page)),e.abrupt("return",s)
case 17:case"end":return e.stop()}},e)})),function(e,t){return ae.apply(this,arguments)}),findRelatedRecord:(oe=ie(regeneratorRuntime.mark(function e(t,n){var r,i,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,e.next=3,t.getRelatedRecordAsync(r,i)
case 3:if(!(a=e.sent)){e.next=13
break}return e.next=7,t.getRecordAsync(a)
case 7:if(e.t0=e.sent,e.t0){e.next=10
break}e.t0=null
case 10:return e.abrupt("return",e.t0)
case 13:return e.next=15,t.getRecordAsync(r)
case 15:if(e.sent){e.next=17
break}throw new o.RecordNotFoundException(r.type,r.id)
case 17:return e.abrupt("return",null)
case 18:case"end":return e.stop()}},e)})),function(e,t){return oe.apply(this,arguments)})}
function le(e,t){return e.filter(function(e){for(var n=0,r=t.length;n<r;n++)if(!he(e,t[n]))return!1
return!0})}function he(e,t){if("attribute"===t.kind){var n=Object(i.deepGet)(e,["attributes",t.attribute]),r=t.value
switch(t.op){case"equal":return n===r
case"gt":return n>r
case"gte":return n>=r
case"lt":return n<r
case"lte":return n<=r
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}else if("relatedRecords"===t.kind){var a=Object(i.deepGet)(e,["relationships",t.relation]),s=void 0===a?[]:a.data,u=t.records
switch(t.op){case"equal":return s.length===u.length&&u.every(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"all":return u.every(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"some":return u.some(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"none":return!u.some(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}else if("relatedRecord"===t.kind){var c=Object(i.deepGet)(e,["relationships",t.relation]),l=void 0===c?void 0:c.data,h=t.record
switch(t.op){case"equal":return Array.isArray(h)?void 0!==l&&h.some(function(e){return l.type===e.type&&l.id===e.id}):void 0!==l&&l.type===h.type&&l.id===h.id
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}return!1}function fe(e,t){var n=new Map
e.forEach(function(e){n.set(e,t.map(function(t){if("attribute"===t.kind)return Object(i.deepGet)(e,["attributes",t.attribute])
throw new o.QueryExpressionParseError("Sort specifier ${sortSpecifier.kind} not recognized for Store.",t)}))})
var r=t.map(function(e){return"descending"===e.order?-1:1})
return e.sort(function(e,o){for(var a=n.get(e),s=n.get(o),u=0;u<t.length;u++){if(a[u]<s[u])return-r[u]
if(a[u]>s[u])return r[u]
if(Object(i.isNone)(a[u])&&!Object(i.isNone)(s[u]))return r[u]
if(Object(i.isNone)(s[u])&&!Object(i.isNone)(a[u]))return-r[u]}return 0})}function de(e,t){if(void 0!==t.limit){var n=void 0===t.offset?0:t.offset,r=t.limit
return e.slice(n,n+r)}throw new o.QueryExpressionParseError("Pagination options not recognized for Store. Please specify `offset` and `limit`.",t)}function pe(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ve(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){pe(o,r,i,a,s,"next",e)}function s(e){pe(o,r,i,a,s,"throw",e)}a(void 0)})}}var me={addRecord:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,o,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,o=r.type,a=r.id,e.next=3,t.getRecordAsync(n.record)
case 3:if(!(s=e.sent)){e.next=12
break}if(!Object(i.eq)(s,n.record)){e.next=9
break}return e.abrupt("return")
case 9:return e.abrupt("return",{op:"updateRecord",record:s})
case 10:e.next=13
break
case 12:return e.abrupt("return",{op:"removeRecord",record:{type:o,id:a}})
case 13:return e.abrupt("return")
case 14:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),updateRecord:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,a,s,u,c,l
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(r=e.sent,a=n.record,s=a.type,u=a.id,!r){e.next=14
break}if(c={type:s,id:u},l=!1,["attributes","keys"].forEach(function(e){a[e]&&Object.keys(a[e]).forEach(function(t){var n=a[e][t],o=Object(i.deepGet)(r,[e,t])
Object(i.eq)(n,o)||(l=!0,Object(i.deepSet)(c,[e,t],void 0===o?null:o))})}),a.relationships&&Object.keys(a.relationships).forEach(function(e){var t=Object(i.deepGet)(a,["relationships",e,"data"])
if(void 0!==t){var n,s=Object(i.deepGet)(r,["relationships",e,"data"])
Array.isArray(t)?s?n=!Object(o.equalRecordIdentitySets)(s,t):(n=!0,s=[]):s?n=!Object(o.equalRecordIdentities)(s,t):(n=!0,s=null),n&&(l=!0,Object(i.deepSet)(c,["relationships",e,"data"],s))}}),!l){e.next=12
break}return e.abrupt("return",{op:"updateRecord",record:c})
case 12:e.next=15
break
case 14:return e.abrupt("return",{op:"removeRecord",record:{type:s,id:u}})
case 15:return e.abrupt("return")
case 16:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),removeRecord:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getRecordAsync(n.record)
case 2:if(!(r=e.sent)){e.next=5
break}return e.abrupt("return",{op:"addRecord",record:r})
case 5:return e.abrupt("return")
case 6:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),replaceKey:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,o,a,s,u,c
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.key,e.next=3,t.getRecordAsync(n.record)
case 3:if(o=e.sent,a=o&&Object(i.deepGet)(o,["keys",r]),Object(i.eq)(a,n.value)){e.next=8
break}return s=n.record,u=s.type,c=s.id,e.abrupt("return",{op:"replaceKey",record:{type:u,id:c},key:r,value:a})
case 8:return e.abrupt("return")
case 9:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),replaceAttribute:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,o,a,s,u,c
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.attribute,e.next=3,t.getRecordAsync(n.record)
case 3:if(o=e.sent,a=o&&Object(i.deepGet)(o,["attributes",r]),Object(i.eq)(a,n.value)){e.next=8
break}return s=n.record,u=s.type,c=s.id,e.abrupt("return",{op:"replaceAttribute",record:{type:u,id:c},attribute:r,value:a})
case 8:return e.abrupt("return")
case 9:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),addToRelatedRecords:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,i,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,a=n.relatedRecord,e.next=3,t.getRelatedRecordsAsync(r,i)
case 3:if(void 0!==(s=e.sent)&&Object(o.recordsInclude)(s,a)){e.next=6
break}return e.abrupt("return",{op:"removeFromRelatedRecords",record:r,relationship:i,relatedRecord:a})
case 6:return e.abrupt("return")
case 7:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),removeFromRelatedRecords:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,i,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,a=n.relatedRecord,e.next=3,t.getRelatedRecordsAsync(r,i)
case 3:if(void 0===(s=e.sent)||!Object(o.recordsInclude)(s,a)){e.next=6
break}return e.abrupt("return",{op:"addToRelatedRecords",record:r,relationship:i,relatedRecord:a})
case 6:return e.abrupt("return")
case 7:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),replaceRelatedRecords:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,i,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,a=n.relatedRecords,e.next=3,t.getRelatedRecordsAsync(r,i)
case 3:if(void 0!==(s=e.sent)&&Object(o.equalRecordIdentitySets)(s,a)){e.next=6
break}return e.abrupt("return",{op:"replaceRelatedRecords",record:r,relationship:i,relatedRecords:s||[]})
case 6:return e.abrupt("return")
case 7:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}(),replaceRelatedRecord:function(){var e=ve(regeneratorRuntime.mark(function e(t,n){var r,i,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.record,i=n.relationship,a=n.relatedRecord,e.next=3,t.getRelatedRecordAsync(r,i)
case 3:if(void 0!==(s=e.sent)&&Object(o.equalRecordIdentities)(s,a)){e.next=6
break}return e.abrupt("return",{op:"replaceRelatedRecord",record:r,relationship:i,relatedRecord:s||null})
case 6:return e.abrupt("return")
case 7:case"end":return e.stop()}},e)}))
return function(t,n){return e.apply(this,arguments)}}()}
function ge(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ye(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){ge(o,r,i,a,s,"next",e)}function s(e){ge(o,r,i,a,s,"throw",e)}a(void 0)})}}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var we=r.default.assert,_e=function(){function e(t){var n=this
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),we("AsyncRecordCache's `schema` must be specified in `settings.schema` constructor argument",!!t.schema),this._schema=t.schema,this._keyMap=t.keyMap,this._queryBuilder=t.queryBuilder||new o.QueryBuilder,this._transformBuilder=t.transformBuilder||new o.TransformBuilder({recordInitializer:this._schema}),this._queryOperators=t.queryOperators||ce,this._patchOperators=t.patchOperators||ne,this._inversePatchOperators=t.inversePatchOperators||me
var r=t.processors?t.processors:[q,B,x]
this._processors=r.map(function(e){var t=new e(n)
return we("Each processor must extend AsyncOperationProcessor",t instanceof u),t})}var t,n,a,s,c,l,h,f,d
return t=e,(n=[{key:"getQueryOperator",value:function(e){return this._queryOperators[e]}},{key:"getPatchOperator",value:function(e){return this._patchOperators[e]}},{key:"getInversePatchOperator",value:function(e){return this._inversePatchOperators[e]}},{key:"getRelatedRecordAsync",value:(d=ye(regeneratorRuntime.mark(function e(t,n){var r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecordAsync(t)
case 2:if(!(r=e.sent)){e.next=5
break}return e.abrupt("return",Object(i.deepGet)(r,["relationships",n,"data"]))
case 5:return e.abrupt("return",void 0)
case 6:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"getRelatedRecordsAsync",value:(f=ye(regeneratorRuntime.mark(function e(t,n){var r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRecordAsync(t)
case 2:if(!(r=e.sent)){e.next=5
break}return e.abrupt("return",Object(i.deepGet)(r,["relationships",n,"data"]))
case 5:return e.abrupt("return",void 0)
case 6:case"end":return e.stop()}},e,this)})),function(e,t){return f.apply(this,arguments)})},{key:"query",value:(h=ye(regeneratorRuntime.mark(function e(t,n,r){var i
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(o.buildQuery)(t,n,r,this._queryBuilder),e.next=3,this._query(i.expression)
case 3:return e.abrupt("return",e.sent)
case 4:case"end":return e.stop()}},e,this)})),function(e,t,n){return h.apply(this,arguments)})},{key:"patch",value:(l=ye(regeneratorRuntime.mark(function e(t){var n
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t&&(t=t(this._transformBuilder)),n={inverse:[],data:[]},!Array.isArray(t)){e.next=7
break}return e.next=5,this._applyPatchOperations(t,n,!0)
case 5:e.next=9
break
case 7:return e.next=9,this._applyPatchOperation(t,n,!0)
case 9:return n.inverse.reverse(),e.abrupt("return",n)
case 11:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"_query",value:(c=ye(regeneratorRuntime.mark(function e(t){var n
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getQueryOperator(t.op)){e.next=3
break}throw new Error("Unable to find query operator: ".concat(t.op))
case 3:return e.next=5,n(this,t)
case 5:return e.abrupt("return",e.sent)
case 6:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"_applyPatchOperations",value:(s=ye(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,u,c,l=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]&&l[2],i=!0,o=!1,a=void 0,e.prev=4,s=t[Symbol.iterator]()
case 6:if(i=(u=s.next()).done){e.next=13
break}return c=u.value,e.next=10,this._applyPatchOperation(c,n,r)
case 10:i=!0,e.next=6
break
case 13:e.next=19
break
case 15:e.prev=15,e.t0=e.catch(4),o=!0,a=e.t0
case 19:e.prev=19,e.prev=20,i||null==s.return||s.return()
case 22:if(e.prev=22,!o){e.next=25
break}throw a
case 25:return e.finish(22)
case 26:return e.finish(19)
case 27:case"end":return e.stop()}},e,this,[[4,15,19,27],[20,,22,26]])})),function(e,t){return s.apply(this,arguments)})},{key:"_applyPatchOperation",value:(a=ye(regeneratorRuntime.mark(function e(t,n){var i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_,R,E,C,k,S,A,T,O,I,N,D,P,M,F,L,B,j,z,U,W,V=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=V.length>2&&void 0!==V[2]&&V[2],"replaceRecord"===t.op&&(r.default.deprecate("The `replaceRecord` operation has been deprecated - use `updateRecord` instead."),t={op:"updateRecord",record:t.record}),o=!0,a=!1,s=void 0,e.prev=5,u=this._processors[Symbol.iterator]()
case 7:if(o=(c=u.next()).done){e.next=14
break}return l=c.value,e.next=11,l.validate(t)
case 11:o=!0,e.next=7
break
case 14:e.next=20
break
case 16:e.prev=16,e.t0=e.catch(5),a=!0,s=e.t0
case 20:e.prev=20,e.prev=21,o||null==u.return||u.return()
case 23:if(e.prev=23,!a){e.next=26
break}throw s
case 26:return e.finish(23)
case 27:return e.finish(20)
case 28:return h=this.getInversePatchOperator(t.op),e.next=31,h(this,t)
case 31:if(!(f=e.sent)){e.next=168
break}n.inverse.push(f),d=!0,p=!1,v=void 0,e.prev=37,m=this._processors[Symbol.iterator]()
case 39:if(d=(g=m.next()).done){e.next=51
break}return y=g.value,e.t1=this,e.next=44,y.before(t)
case 44:return e.t2=e.sent,e.t3=n,e.next=48,e.t1._applyPatchOperations.call(e.t1,e.t2,e.t3)
case 48:d=!0,e.next=39
break
case 51:e.next=57
break
case 53:e.prev=53,e.t4=e.catch(37),p=!0,v=e.t4
case 57:e.prev=57,e.prev=58,d||null==m.return||m.return()
case 60:if(e.prev=60,!p){e.next=63
break}throw v
case 63:return e.finish(60)
case 64:return e.finish(57)
case 65:b=[],x=!0,w=!1,_=void 0,e.prev=69,R=this._processors[Symbol.iterator]()
case 71:if(x=(E=R.next()).done){e.next=81
break}return C=E.value,e.t5=b,e.next=76,C.after(t)
case 76:e.t6=e.sent,e.t5.push.call(e.t5,e.t6)
case 78:x=!0,e.next=71
break
case 81:e.next=87
break
case 83:e.prev=83,e.t7=e.catch(69),w=!0,_=e.t7
case 87:e.prev=87,e.prev=88,x||null==R.return||R.return()
case 90:if(e.prev=90,!w){e.next=93
break}throw _
case 93:return e.finish(90)
case 94:return e.finish(87)
case 95:return k=this.getPatchOperator(t.op),e.next=98,k(this,t)
case 98:S=e.sent,i&&n.data.push(S),A=!0,T=!1,O=void 0,e.prev=103,I=this._processors[Symbol.iterator]()
case 105:if(A=(N=I.next()).done){e.next=112
break}return D=N.value,e.next=109,D.immediate(t)
case 109:A=!0,e.next=105
break
case 112:e.next=118
break
case 114:e.prev=114,e.t8=e.catch(103),T=!0,O=e.t8
case 118:e.prev=118,e.prev=119,A||null==I.return||I.return()
case 121:if(e.prev=121,!T){e.next=124
break}throw O
case 124:return e.finish(121)
case 125:return e.finish(118)
case 126:this.emit("patch",t,S),P=0,M=b
case 128:if(!(P<M.length)){e.next=135
break}return F=M[P],e.next=132,this._applyPatchOperations(F,n)
case 132:P++,e.next=128
break
case 135:L=!0,B=!1,j=void 0,e.prev=138,z=this._processors[Symbol.iterator]()
case 140:if(L=(U=z.next()).done){e.next=152
break}return W=U.value,e.t9=this,e.next=145,W.finally(t)
case 145:return e.t10=e.sent,e.t11=n,e.next=149,e.t9._applyPatchOperations.call(e.t9,e.t10,e.t11)
case 149:L=!0,e.next=140
break
case 152:e.next=158
break
case 154:e.prev=154,e.t12=e.catch(138),B=!0,j=e.t12
case 158:e.prev=158,e.prev=159,L||null==z.return||z.return()
case 161:if(e.prev=161,!B){e.next=164
break}throw j
case 164:return e.finish(161)
case 165:return e.finish(158)
case 166:e.next=169
break
case 168:i&&n.data.push(null)
case 169:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27],[37,53,57,65],[58,,60,64],[69,83,87,95],[88,,90,94],[103,114,118,126],[119,,121,125],[138,154,158,166],[159,,161,165]])})),function(e,t){return a.apply(this,arguments)})},{key:"schema",get:function(){return this._schema}},{key:"keyMap",get:function(){return this._keyMap}},{key:"queryBuilder",get:function(){return this._queryBuilder}},{key:"transformBuilder",get:function(){return this._transformBuilder}},{key:"processors",get:function(){return this._processors}}])&&be(t.prototype,n),e}()
function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&Re(e.prototype,t),n&&Re(e,n),e}_e=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":xe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.evented],_e)
var Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._accessor=t}return Ee(e,[{key:"accessor",get:function(){return this._accessor}}]),Ee(e,[{key:"reset",value:function(e){}},{key:"upgrade",value:function(){}},{key:"validate",value:function(e){}},{key:"before",value:function(e){return[]}},{key:"after",value:function(e){return[]}},{key:"immediate",value:function(e){}},{key:"finally",value:function(e){return[]}}]),e}()
function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,Ae(t).apply(this,arguments))}var n,r
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,Ce),n=t,(r=[{key:"after",value:function(e){switch(e.op){case"replaceRelatedRecord":return this.removeInverseRelationship(e.record,e.relationship,this.accessor.getRelatedRecordSync(e.record,e.relationship)),[]
case"replaceRelatedRecords":return this.removeInverseRelationships(e.record,e.relationship,this.accessor.getRelatedRecordsSync(e.record,e.relationship)),[]
case"removeFromRelatedRecords":return this.removeInverseRelationship(e.record,e.relationship,e.relatedRecord),[]
case"removeRecord":case"updateRecord":return this.removeAllInverseRelationships(e.record),[]
default:return[]}}},{key:"finally",value:function(e){switch(e.op){case"replaceRelatedRecord":return this.addInverseRelationship(e.record,e.relationship,e.relatedRecord),[]
case"replaceRelatedRecords":return this.addInverseRelationships(e.record,e.relationship,e.relatedRecords),[]
case"addToRelatedRecords":return this.addInverseRelationship(e.record,e.relationship,e.relatedRecord),[]
case"addRecord":case"updateRecord":return this.addAllInverseRelationships(e.record),[]
case"removeRecord":return this.clearInverseRelationshipOps(e.record)
default:return[]}}},{key:"addInverseRelationship",value:function(e,t,n){var r=c(this.accessor.schema,e,t,n)
r&&this.accessor.addInverseRelationshipsSync([r])}},{key:"addInverseRelationships",value:function(e,t,n){var r=l(this.accessor.schema,e,t,n)
r&&this.accessor.addInverseRelationshipsSync(r)}},{key:"addAllInverseRelationships",value:function(e){var t=h(this.accessor.schema,e)
t.length>0&&this.accessor.addInverseRelationshipsSync(t)}},{key:"removeInverseRelationship",value:function(e,t,n){var r=c(this.accessor.schema,e,t,n)
r&&this.accessor.removeInverseRelationshipsSync([r])}},{key:"removeInverseRelationships",value:function(e,t,n){var r=l(this.accessor.schema,e,t,n)
r.length>0&&this.accessor.removeInverseRelationshipsSync(r)}},{key:"removeAllInverseRelationships",value:function(e){var t=this.accessor.getRecordSync(e)
if(t){var n=h(this.accessor.schema,t)
n.length>0&&this.accessor.removeInverseRelationshipsSync(n)}}},{key:"clearInverseRelationshipOps",value:function(e){return f(this.accessor.schema,this.accessor.getInverseRelationshipsSync(e))}}])&&Se(n.prototype,r),t}()
function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,De(t).apply(this,arguments))}var n,r
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,Ce),n=t,(r=[{key:"after",value:function(e){switch(e.op){case"addRecord":return w(this.accessor.schema,e.record)
case"addToRelatedRecords":return _(this.accessor.schema,e.record,e.relationship,e.relatedRecord)
case"replaceRelatedRecord":return E(this.accessor.schema,e.record,e.relationship,e.relatedRecord,this.accessor.getRelatedRecordSync(e.record,e.relationship))
case"replaceRelatedRecords":return C(this.accessor.schema,e.record,e.relationship,e.relatedRecords,this.accessor.getRelatedRecordsSync(e.record,e.relationship))
case"removeFromRelatedRecords":return R(this.accessor.schema,e.record,e.relationship,e.relatedRecord,this.accessor.getRecordSync(e.relatedRecord))
case"removeRecord":return k(this.accessor.schema,this.accessor.getRecordSync(e.record))
case"updateRecord":return S(this.accessor.schema,e.record,this.accessor.getRecordSync(e.record))
default:return[]}}}])&&Ne(n.prototype,r),t}()
function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,Be(t).apply(this,arguments))}var n,r
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,Ce),n=t,(r=[{key:"validate",value:function(e){switch(e.op){case"addRecord":return this._recordAdded(e.record)
case"updateRecord":return this._recordReplaced(e.record)
case"removeRecord":return this._recordRemoved(e.record)
case"replaceKey":return this._keyReplaced(e.record)
case"replaceAttribute":return this._attributeReplaced(e.record)
case"addToRelatedRecords":return this._relatedRecordAdded(e.record,e.relationship,e.relatedRecord)
case"removeFromRelatedRecords":return this._relatedRecordRemoved(e.record,e.relationship,e.relatedRecord)
case"replaceRelatedRecords":return this._relatedRecordsReplaced(e.record,e.relationship,e.relatedRecords)
case"replaceRelatedRecord":return this._relatedRecordReplaced(e.record,e.relationship,e.relatedRecord)
default:return}}},{key:"_recordAdded",value:function(e){this._validateRecord(e)}},{key:"_recordReplaced",value:function(e){this._validateRecord(e)}},{key:"_recordRemoved",value:function(e){this._validateRecordIdentity(e)}},{key:"_keyReplaced",value:function(e){this._validateRecordIdentity(e)}},{key:"_attributeReplaced",value:function(e){this._validateRecordIdentity(e)}},{key:"_relatedRecordAdded",value:function(e,t,n){this._validateRecordIdentity(e),this._validateRecordIdentity(n),this._validateRelationship(e,t,n)}},{key:"_relatedRecordRemoved",value:function(e,t,n){this._validateRecordIdentity(e),this._validateRecordIdentity(n)}},{key:"_relatedRecordsReplaced",value:function(e,t,n){var r=this
this._validateRecordIdentity(e),n.forEach(function(n){r._validateRecordIdentity(n),r._validateRelationship(e,t,n)})}},{key:"_relatedRecordReplaced",value:function(e,t,n){this._validateRecordIdentity(e),n&&(this._validateRecordIdentity(n),this._validateRelationship(e,t,n))}},{key:"_validateRecord",value:function(e){this._validateRecordIdentity(e)}},{key:"_validateRecordIdentity",value:function(e){this._getModelSchema(e.type)}},{key:"_validateRelationship",value:function(e,t,n){var r=this._getModelSchema(e.type),i=r.relationships&&r.relationships[t]
if(void 0===i)throw new o.RelationshipNotFound(t,e.type)
if(Array.isArray(i.model)){if(!i.model.includes(n.type))throw new o.IncorrectRelatedRecordType(n.type,t,e.type)}else if("string"==typeof i.model&&i.model!==n.type)throw new o.IncorrectRelatedRecordType(n.type,t,e.type)}},{key:"_getModelSchema",value:function(e){return this.accessor.schema.getModel(e)}}])&&Le(n.prototype,r),t}(),Ue={addRecord:function(e,t){var n=t.record
return e.setRecordSync(n),e.keyMap&&e.keyMap.pushRecord(n),n},updateRecord:function(e,t){var n=t.record,r=e.getRecordSync(n),i=Object(o.mergeRecords)(r||null,n)
return e.setRecordSync(i),e.keyMap&&e.keyMap.pushRecord(i),i},removeRecord:function(e,t){return e.removeRecordSync(t.record)},replaceKey:function(e,t){var n,r=e.getRecordSync(t.record)
return n=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(t.record),Object(i.deepSet)(n,["keys",t.key],t.value),e.setRecordSync(n),e.keyMap&&e.keyMap.pushRecord(n),n},replaceAttribute:function(e,t){var n,r=e.getRecordSync(t.record)
return n=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(t.record),Object(i.deepSet)(n,["attributes",t.attribute],t.value),e.setRecordSync(n),n},addToRelatedRecords:function(e,t){var n,r=e.getRecordSync(t.record),a=t.relationship,s=t.relatedRecord
n=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(t.record)
var u=Object(i.deepGet)(n,["relationships",a,"data"])||[]
return Object(o.recordsInclude)(u,s)||(u.push(s),Object(i.deepSet)(n,["relationships",a,"data"],u),e.setRecordSync(n)),n},removeFromRelatedRecords:function(e,t){var n,r=e.getRecordSync(t.record),a=t.relationship,s=t.relatedRecord
if(r){n=Object(i.clone)(r)
var u=Object(i.deepGet)(n,["relationships",a,"data"])
return u&&(u=u.filter(function(e){return!Object(o.equalRecordIdentities)(e,s)}),Object(i.deepSet)(n,["relationships",a,"data"],u)&&e.setRecordSync(n)),n}return null},replaceRelatedRecords:function(e,t){var n,r=e.getRecordSync(t.record),a=t.relationship,s=t.relatedRecords
return n=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(t.record),Object(i.deepSet)(n,["relationships",a,"data"],s)&&e.setRecordSync(n),n},replaceRelatedRecord:function(e,t){var n,r=e.getRecordSync(t.record),a=t.relationship,s=t.relatedRecord
return n=r?Object(i.clone)(r):Object(o.cloneRecordIdentity)(t.record),Object(i.deepSet)(n,["relationships",a,"data"],s)&&e.setRecordSync(n),n}},We={findRecord:function(e,t){var n=t.record,r=e.getRecordSync(n)
if(!r)throw new o.RecordNotFoundException(n.type,n.id)
return r},findRecords:function(e,t){var n=e.getRecordsSync(t.records||t.type)
return t.filter&&(n=Ve(n,t.filter)),t.sort&&(n=He(n,t.sort)),t.page&&(n=Ge(n,t.page)),n},findRelatedRecords:function(e,t){var n=t.record,r=t.relationship,i=e.getRelatedRecordsSync(n,r)
if(!i||0===i.length){if(!e.getRecordSync(n))throw new o.RecordNotFoundException(n.type,n.id)
return[]}var a=e.getRecordsSync(i)
return t.filter&&(a=Ve(a,t.filter)),t.sort&&(a=He(a,t.sort)),t.page&&(a=Ge(a,t.page)),a},findRelatedRecord:function(e,t){var n=t.record,r=t.relationship,i=e.getRelatedRecordSync(n,r)
if(i)return e.getRecordSync(i)||null
if(!e.getRecordSync(n))throw new o.RecordNotFoundException(n.type,n.id)
return null}}
function Ve(e,t){return e.filter(function(e){for(var n=0,r=t.length;n<r;n++)if(!qe(e,t[n]))return!1
return!0})}function qe(e,t){if("attribute"===t.kind){var n=Object(i.deepGet)(e,["attributes",t.attribute]),r=t.value
switch(t.op){case"equal":return n===r
case"gt":return n>r
case"gte":return n>=r
case"lt":return n<r
case"lte":return n<=r
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}else if("relatedRecords"===t.kind){var a=Object(i.deepGet)(e,["relationships",t.relation]),s=void 0===a?[]:a.data,u=t.records
switch(t.op){case"equal":return s.length===u.length&&u.every(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"all":return u.every(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"some":return u.some(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
case"none":return!u.some(function(e){return s.some(function(t){return t.id===e.id&&t.type===e.type})})
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}else if("relatedRecord"===t.kind){var c=Object(i.deepGet)(e,["relationships",t.relation]),l=void 0===c?void 0:c.data,h=t.record
switch(t.op){case"equal":return Array.isArray(h)?void 0!==l&&h.some(function(e){return l.type===e.type&&l.id===e.id}):void 0!==l&&l.type===h.type&&l.id===h.id
default:throw new o.QueryExpressionParseError("Filter operation ${filter.op} not recognized for Store.",t)}}return!1}function He(e,t){var n=new Map
e.forEach(function(e){n.set(e,t.map(function(t){if("attribute"===t.kind)return Object(i.deepGet)(e,["attributes",t.attribute])
throw new o.QueryExpressionParseError("Sort specifier ${sortSpecifier.kind} not recognized for Store.",t)}))})
var r=t.map(function(e){return"descending"===e.order?-1:1})
return e.sort(function(e,o){for(var a=n.get(e),s=n.get(o),u=0;u<t.length;u++){if(a[u]<s[u])return-r[u]
if(a[u]>s[u])return r[u]
if(Object(i.isNone)(a[u])&&!Object(i.isNone)(s[u]))return r[u]
if(Object(i.isNone)(s[u])&&!Object(i.isNone)(a[u]))return-r[u]}return 0})}function Ge(e,t){if(void 0!==t.limit){var n=void 0===t.offset?0:t.offset,r=t.limit
return e.slice(n,n+r)}throw new o.QueryExpressionParseError("Pagination options not recognized for Store. Please specify `offset` and `limit`.",t)}var Ke={addRecord:function(e,t){var n=t.record,r=n.type,o=n.id,a=e.getRecordSync(t.record)
return a?Object(i.eq)(a,t.record)?void 0:{op:"updateRecord",record:a}:{op:"removeRecord",record:{type:r,id:o}}},updateRecord:function(e,t){var n=e.getRecordSync(t.record),r=t.record,a=r.type,s=r.id
if(!n)return{op:"removeRecord",record:{type:a,id:s}}
var u={type:a,id:s},c=!1
return["attributes","keys"].forEach(function(e){r[e]&&Object.keys(r[e]).forEach(function(t){var o=r[e][t],a=Object(i.deepGet)(n,[e,t])
Object(i.eq)(o,a)||(c=!0,Object(i.deepSet)(u,[e,t],void 0===a?null:a))})}),r.relationships&&Object.keys(r.relationships).forEach(function(e){var t=Object(i.deepGet)(r,["relationships",e,"data"])
if(void 0!==t){var a,s=Object(i.deepGet)(n,["relationships",e,"data"])
Array.isArray(t)?s?a=!Object(o.equalRecordIdentitySets)(s,t):(a=!0,s=[]):s?a=!Object(o.equalRecordIdentities)(s,t):(a=!0,s=null),a&&(c=!0,Object(i.deepSet)(u,["relationships",e,"data"],s))}}),c?{op:"updateRecord",record:u}:void 0},removeRecord:function(e,t){var n=e.getRecordSync(t.record)
if(n)return{op:"addRecord",record:n}},replaceKey:function(e,t){var n=t.key,r=e.getRecordSync(t.record),o=r&&Object(i.deepGet)(r,["keys",n])
if(!Object(i.eq)(o,t.value)){var a=t.record
return{op:"replaceKey",record:{type:a.type,id:a.id},key:n,value:o}}},replaceAttribute:function(e,t){var n=t.attribute,r=e.getRecordSync(t.record),o=r&&Object(i.deepGet)(r,["attributes",n])
if(!Object(i.eq)(o,t.value)){var a=t.record
return{op:"replaceAttribute",record:{type:a.type,id:a.id},attribute:n,value:o}}},addToRelatedRecords:function(e,t){var n=t.record,r=t.relationship,i=t.relatedRecord,a=e.getRelatedRecordsSync(n,r)
if(void 0===a||!Object(o.recordsInclude)(a,i))return{op:"removeFromRelatedRecords",record:n,relationship:r,relatedRecord:i}},removeFromRelatedRecords:function(e,t){var n=t.record,r=t.relationship,i=t.relatedRecord,a=e.getRelatedRecordsSync(n,r)
if(void 0!==a&&Object(o.recordsInclude)(a,i))return{op:"addToRelatedRecords",record:n,relationship:r,relatedRecord:i}},replaceRelatedRecords:function(e,t){var n=t.record,r=t.relationship,i=t.relatedRecords,a=e.getRelatedRecordsSync(n,r)
if(void 0===a||!Object(o.equalRecordIdentitySets)(a,i))return{op:"replaceRelatedRecords",record:n,relationship:r,relatedRecords:a||[]}},replaceRelatedRecord:function(e,t){var n=t.record,r=t.relationship,i=t.relatedRecord,a=e.getRelatedRecordSync(n,r)
if(void 0===a||!Object(o.equalRecordIdentities)(a,i))return{op:"replaceRelatedRecord",record:n,relationship:r,relatedRecord:a||null}}}
function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ye=r.default.assert,Qe=function(){function e(t){var n=this
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ye("SyncRecordCache's `schema` must be specified in `settings.schema` constructor argument",!!t.schema),this._schema=t.schema,this._keyMap=t.keyMap,this._queryBuilder=t.queryBuilder||new o.QueryBuilder,this._transformBuilder=t.transformBuilder||new o.TransformBuilder({recordInitializer:this._schema}),this._queryOperators=t.queryOperators||We,this._patchOperators=t.patchOperators||Ue,this._inversePatchOperators=t.inversePatchOperators||Ke
var r=t.processors?t.processors:[ze,Me,Oe]
this._processors=r.map(function(e){var t=new e(n)
return Ye("Each processor must extend SyncOperationProcessor",t instanceof Ce),t})}var t,n
return t=e,(n=[{key:"getQueryOperator",value:function(e){return this._queryOperators[e]}},{key:"getPatchOperator",value:function(e){return this._patchOperators[e]}},{key:"getInversePatchOperator",value:function(e){return this._inversePatchOperators[e]}},{key:"getRelatedRecordSync",value:function(e,t){var n=this.getRecordSync(e)
if(n)return Object(i.deepGet)(n,["relationships",t,"data"])}},{key:"getRelatedRecordsSync",value:function(e,t){var n=this.getRecordSync(e)
if(n)return Object(i.deepGet)(n,["relationships",t,"data"])}},{key:"query",value:function(e,t,n){var r=Object(o.buildQuery)(e,t,n,this._queryBuilder)
return this._query(r.expression)}},{key:"patch",value:function(e){"function"==typeof e&&(e=e(this._transformBuilder))
var t={inverse:[],data:[]}
return Array.isArray(e)?this._applyPatchOperations(e,t,!0):this._applyPatchOperation(e,t,!0),t.inverse.reverse(),t}},{key:"_query",value:function(e){var t=this.getQueryOperator(e.op)
if(!t)throw new Error("Unable to find query operator: ".concat(e.op))
return t(this,e)}},{key:"_applyPatchOperations",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
e.forEach(function(e){return n._applyPatchOperation(e,t,r)})}},{key:"_applyPatchOperation",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
"replaceRecord"===e.op&&(r.default.deprecate("The `replaceRecord` operation has been deprecated - use `updateRecord` instead."),e={op:"updateRecord",record:e.record}),this._processors.forEach(function(t){return t.validate(e)})
var o=this.getInversePatchOperator(e.op)(this,e)
if(o){t.inverse.push(o),this._processors.map(function(t){return t.before(e)}).forEach(function(e){return n._applyPatchOperations(e,t)})
var a=this._processors.map(function(t){return t.after(e)}),s=this.getPatchOperator(e.op)(this,e)
i&&t.data.push(s),this._processors.forEach(function(t){return t.immediate(e)}),this.emit("patch",e,s),a.forEach(function(e){return n._applyPatchOperations(e,t)}),this._processors.map(function(t){return t.finally(e)}).forEach(function(e){return n._applyPatchOperations(e,t)})}else i&&t.data.push(null)}},{key:"schema",get:function(){return this._schema}},{key:"keyMap",get:function(){return this._keyMap}},{key:"queryBuilder",get:function(){return this._queryBuilder}},{key:"transformBuilder",get:function(){return this._transformBuilder}},{key:"processors",get:function(){return this._processors}}])&&$e(t.prototype,n),e}()
Qe=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":Xe(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.evented],Qe),n.d(t,"a",function(){return _e}),n.d(t,"d",function(){return Qe}),n.d(t,"c",function(){return Ce}),n.d(t,"b",function(){return Oe}),n.d(t,"e",function(){return Me}),n.d(t,"f",function(){return ze})},,,,,,,,,,,function(e,t,n){"use strict"
n.r(t)
var r={}
n.r(r),n.d(r,"AdadeltaOptimizer",function(){return Nh}),n.d(r,"AdagradOptimizer",function(){return Dh}),n.d(r,"AdamOptimizer",function(){return Ph}),n.d(r,"AdamaxOptimizer",function(){return Mh}),n.d(r,"DataStorage",function(){return Zr}),n.d(r,"ENV",function(){return x}),n.d(r,"Environment",function(){return y}),n.d(r,"KernelBackend",function(){return ei}),n.d(r,"MomentumOptimizer",function(){return Lh}),n.d(r,"Optimizer",function(){return Ih}),n.d(r,"RMSPropOptimizer",function(){return Bh}),n.d(r,"Rank",function(){return Re}),n.d(r,"Reduction",function(){return Vc}),n.d(r,"SGDOptimizer",function(){return Fh}),n.d(r,"Tensor",function(){return we}),n.d(r,"TensorBuffer",function(){return ge}),n.d(r,"Variable",function(){return _e}),n.d(r,"abs",function(){return Ya}),n.d(r,"acos",function(){return Qa}),n.d(r,"acosh",function(){return Ja}),n.d(r,"add",function(){return Vu}),n.d(r,"addN",function(){return qu}),n.d(r,"addStrict",function(){return Hu}),n.d(r,"all",function(){return xu}),n.d(r,"any",function(){return wu}),n.d(r,"argMax",function(){return _u}),n.d(r,"argMin",function(){return Ru}),n.d(r,"asin",function(){return Za}),n.d(r,"asinh",function(){return es}),n.d(r,"atan",function(){return ts}),n.d(r,"atan2",function(){return Gu}),n.d(r,"atanh",function(){return ns}),n.d(r,"avgPool",function(){return fu}),n.d(r,"backend",function(){return nn}),n.d(r,"backend_util",function(){return gi}),n.d(r,"basicLSTMCell",function(){return Ac}),n.d(r,"batchNorm",function(){return Us}),n.d(r,"batchNorm2d",function(){return Ws}),n.d(r,"batchNorm3d",function(){return Vs}),n.d(r,"batchNorm4d",function(){return qs}),n.d(r,"batchNormalization",function(){return zs}),n.d(r,"batchNormalization2d",function(){return Ls}),n.d(r,"batchNormalization3d",function(){return Bs}),n.d(r,"batchNormalization4d",function(){return js}),n.d(r,"batchToSpaceND",function(){return or}),n.d(r,"browser",function(){return yh}),n.d(r,"buffer",function(){return rr}),n.d(r,"cast",function(){return ar}),n.d(r,"ceil",function(){return rs}),n.d(r,"clipByValue",function(){return is}),n.d(r,"clone",function(){return sr}),n.d(r,"complex",function(){return wn}),n.d(r,"concat",function(){return zn}),n.d(r,"concat1d",function(){return Un}),n.d(r,"concat2d",function(){return Wn}),n.d(r,"concat3d",function(){return Vn}),n.d(r,"concat4d",function(){return qn}),n.d(r,"conv1d",function(){return $s}),n.d(r,"conv2d",function(){return Xs}),n.d(r,"conv2dDerFilter",function(){return Qs}),n.d(r,"conv2dTranspose",function(){return eu}),n.d(r,"conv3d",function(){return Ys}),n.d(r,"cos",function(){return os}),n.d(r,"cosh",function(){return as}),n.d(r,"cumsum",function(){return ur}),n.d(r,"customGrad",function(){return Xr}),n.d(r,"deprecationWarn",function(){return Ut}),n.d(r,"depthToSpace",function(){return cr}),n.d(r,"depthwiseConv2d",function(){return Js}),n.d(r,"disableDeprecationWarnings",function(){return zt}),n.d(r,"dispose",function(){return Gt}),n.d(r,"disposeVariables",function(){return Wt}),n.d(r,"div",function(){return Ku}),n.d(r,"divStrict",function(){return $u}),n.d(r,"dot",function(){return nu}),n.d(r,"dropout",function(){return Uc}),n.d(r,"elu",function(){return mc}),n.d(r,"enableDebugMode",function(){return jt}),n.d(r,"enableProdMode",function(){return Bt}),n.d(r,"environment",function(){return _}),n.d(r,"equal",function(){return Iu}),n.d(r,"equalStrict",function(){return Nu}),n.d(r,"erf",function(){return ss}),n.d(r,"exp",function(){return us}),n.d(r,"expandDims",function(){return lr}),n.d(r,"expm1",function(){return cs}),n.d(r,"eye",function(){return hr}),n.d(r,"fft",function(){return Pc}),n.d(r,"fill",function(){return Mn}),n.d(r,"findBackend",function(){return Zt}),n.d(r,"findBackendFactory",function(){return en}),n.d(r,"floor",function(){return ls}),n.d(r,"floorDiv",function(){return Xu}),n.d(r,"frame",function(){return Gc}),n.d(r,"fused",function(){return vl}),n.d(r,"gather",function(){return kc}),n.d(r,"gatherND",function(){return zc}),n.d(r,"getBackend",function(){return Qt}),n.d(r,"grad",function(){return qr}),n.d(r,"grads",function(){return Hr}),n.d(r,"greater",function(){return Du}),n.d(r,"greaterEqual",function(){return Pu}),n.d(r,"greaterEqualStrict",function(){return Mu}),n.d(r,"greaterStrict",function(){return Fu}),n.d(r,"hammingWindow",function(){return Hc}),n.d(r,"hannWindow",function(){return qc}),n.d(r,"ifft",function(){return Mc}),n.d(r,"imag",function(){return Rn}),n.d(r,"image",function(){return dl}),n.d(r,"io",function(){return ph}),n.d(r,"irfft",function(){return Lc}),n.d(r,"isFinite",function(){return _s}),n.d(r,"isInf",function(){return ws}),n.d(r,"isNaN",function(){return xs}),n.d(r,"keep",function(){return Kt}),n.d(r,"leakyRelu",function(){return gc}),n.d(r,"less",function(){return Lu}),n.d(r,"lessEqual",function(){return Bu}),n.d(r,"lessEqualStrict",function(){return ju}),n.d(r,"lessStrict",function(){return zu}),n.d(r,"linalg",function(){return sl}),n.d(r,"linspace",function(){return Fn}),n.d(r,"localResponseNormalization",function(){return _c}),n.d(r,"log",function(){return hs}),n.d(r,"log1p",function(){return fs}),n.d(r,"logSigmoid",function(){return ds}),n.d(r,"logSoftmax",function(){return Jr}),n.d(r,"logSumExp",function(){return Eu}),n.d(r,"logicalAnd",function(){return lc}),n.d(r,"logicalNot",function(){return hc}),n.d(r,"logicalOr",function(){return fc}),n.d(r,"logicalXor",function(){return dc}),n.d(r,"losses",function(){return rl}),n.d(r,"matMul",function(){return tu}),n.d(r,"math",function(){return mh}),n.d(r,"max",function(){return Cu}),n.d(r,"maxPool",function(){return hu}),n.d(r,"maximum",function(){return Yu}),n.d(r,"maximumStrict",function(){return Qu}),n.d(r,"mean",function(){return ku}),n.d(r,"memory",function(){return Vt}),n.d(r,"min",function(){return Su}),n.d(r,"minimum",function(){return Ju}),n.d(r,"minimumStrict",function(){return Zu}),n.d(r,"mod",function(){return ec}),n.d(r,"modStrict",function(){return tc}),n.d(r,"moments",function(){return Au}),n.d(r,"movingAverage",function(){return Oc}),n.d(r,"mul",function(){return nc}),n.d(r,"mulStrict",function(){return rc}),n.d(r,"multiRNNCell",function(){return Tc}),n.d(r,"multinomial",function(){return fr}),n.d(r,"neg",function(){return ps}),n.d(r,"nextFrame",function(){return Wh}),n.d(r,"norm",function(){return Rc}),n.d(r,"notEqual",function(){return Uu}),n.d(r,"notEqualStrict",function(){return Wu}),n.d(r,"oneHot",function(){return dr}),n.d(r,"ones",function(){return Dn}),n.d(r,"onesLike",function(){return Bn}),n.d(r,"op",function(){return xn}),n.d(r,"outerProduct",function(){return ru}),n.d(r,"pad",function(){return pr}),n.d(r,"pad1d",function(){return vr}),n.d(r,"pad2d",function(){return mr}),n.d(r,"pad3d",function(){return gr}),n.d(r,"pad4d",function(){return yr}),n.d(r,"pool",function(){return du}),n.d(r,"pow",function(){return ic}),n.d(r,"powStrict",function(){return oc}),n.d(r,"prelu",function(){return yc}),n.d(r,"print",function(){return ir}),n.d(r,"prod",function(){return Ou}),n.d(r,"profile",function(){return qt}),n.d(r,"rand",function(){return br}),n.d(r,"randomNormal",function(){return xr}),n.d(r,"randomUniform",function(){return wr}),n.d(r,"range",function(){return Ln}),n.d(r,"ready",function(){return Yt}),n.d(r,"real",function(){return _n}),n.d(r,"reciprocal",function(){return vs}),n.d(r,"registerBackend",function(){return tn}),n.d(r,"relu",function(){return bc}),n.d(r,"removeBackend",function(){return Jt}),n.d(r,"reshape",function(){return _r}),n.d(r,"reverse",function(){return iu}),n.d(r,"reverse1d",function(){return ou}),n.d(r,"reverse2d",function(){return au}),n.d(r,"reverse3d",function(){return su}),n.d(r,"reverse4d",function(){return uu}),n.d(r,"rfft",function(){return Fc}),n.d(r,"round",function(){return ms}),n.d(r,"rsqrt",function(){return gs}),n.d(r,"scalar",function(){return kn}),n.d(r,"scatterND",function(){return Dc}),n.d(r,"selu",function(){return xc}),n.d(r,"separableConv2d",function(){return Zs}),n.d(r,"serialization",function(){return _h}),n.d(r,"setBackend",function(){return Xt}),n.d(r,"setPlatform",function(){return rn}),n.d(r,"setdiff1dAsync",function(){return Tr}),n.d(r,"sigmoid",function(){return ys}),n.d(r,"sign",function(){return bs}),n.d(r,"signal",function(){return Kc}),n.d(r,"sin",function(){return Rs}),n.d(r,"sinh",function(){return Es}),n.d(r,"slice",function(){return pu}),n.d(r,"slice1d",function(){return vu}),n.d(r,"slice2d",function(){return mu}),n.d(r,"slice3d",function(){return gu}),n.d(r,"slice4d",function(){return yu}),n.d(r,"softmax",function(){return Qr}),n.d(r,"softplus",function(){return Cs}),n.d(r,"spaceToBatchND",function(){return Rr}),n.d(r,"sparseToDense",function(){return jc}),n.d(r,"spectral",function(){return Bc}),n.d(r,"split",function(){return Hn}),n.d(r,"sqrt",function(){return ks}),n.d(r,"square",function(){return Ss}),n.d(r,"squaredDifference",function(){return ac}),n.d(r,"squaredDifferenceStrict",function(){return sc}),n.d(r,"squeeze",function(){return Er}),n.d(r,"stack",function(){return Cr}),n.d(r,"step",function(){return As}),n.d(r,"stridedSlice",function(){return Ic}),n.d(r,"sub",function(){return uc}),n.d(r,"subStrict",function(){return cc}),n.d(r,"sum",function(){return Tu}),n.d(r,"tan",function(){return Ts}),n.d(r,"tanh",function(){return Os}),n.d(r,"tensor",function(){return En}),n.d(r,"tensor1d",function(){return Sn}),n.d(r,"tensor2d",function(){return An}),n.d(r,"tensor3d",function(){return Tn}),n.d(r,"tensor4d",function(){return On}),n.d(r,"tensor5d",function(){return In}),n.d(r,"tensor6d",function(){return Nn}),n.d(r,"tensor_util",function(){return Le}),n.d(r,"test_util",function(){return Ah}),n.d(r,"tidy",function(){return Ht}),n.d(r,"tile",function(){return kr}),n.d(r,"time",function(){return $t}),n.d(r,"topk",function(){return Nc}),n.d(r,"train",function(){return zh}),n.d(r,"transpose",function(){return wc}),n.d(r,"truncatedNormal",function(){return Sr}),n.d(r,"unsortedSegmentSum",function(){return Sc}),n.d(r,"unstack",function(){return Ar}),n.d(r,"util",function(){return le}),n.d(r,"valueAndGrad",function(){return Gr}),n.d(r,"valueAndGrads",function(){return Kr}),n.d(r,"variable",function(){return Te}),n.d(r,"variableGrads",function(){return $r}),n.d(r,"version_core",function(){return Th}),n.d(r,"webgl",function(){return Oh}),n.d(r,"where",function(){return pc}),n.d(r,"whereAsync",function(){return vc}),n.d(r,"zeros",function(){return Pn}),n.d(r,"zerosLike",function(){return jn})
var i={}
n.r(i),n.d(i,"DrawBoxOptions",function(){return FE}),n.d(i,"DrawBox",function(){return LE}),n.d(i,"AnchorPosition",function(){return OE}),n.d(i,"DrawTextFieldOptions",function(){return PE}),n.d(i,"DrawTextField",function(){return ME})
var o={}
n.r(o),n.d(o,"getModelUris",function(){return KE}),n.d(o,"convLayer",function(){return BE}),n.d(o,"disposeUnusedWeightTensors",function(){return jE}),n.d(o,"extractConvParamsFactory",function(){return zE}),n.d(o,"extractFCParamsFactory",function(){return UE}),n.d(o,"extractSeparableConvParamsFactory",function(){return VE}),n.d(o,"loadSeparableConvParamsFactory",function(){return qE}),n.d(o,"extractWeightEntryFactory",function(){return HE}),n.d(o,"extractWeightsFactory",function(){return GE}),n.d(o,"SeparableConvParams",function(){return WE}),n.d(o,"TinyYolov2",function(){return SC}),n.d(o,"TinyYolov2SizeType",function(){return xC}),n.d(o,"TinyYolov2Options",function(){return kC}),n.d(o,"validateConfig",function(){return _C})
var a={}
n.r(a),n.d(a,"drawContour",function(){return AC}),n.d(a,"drawDetections",function(){return NC}),n.d(a,"drawFaceExpressions",function(){return $C}),n.d(a,"DrawFaceLandmarksOptions",function(){return ZC}),n.d(a,"DrawFaceLandmarks",function(){return ek}),n.d(a,"drawFaceLandmarks",function(){return tk})
var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}
function u(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])
return e}).apply(this,arguments)}
function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1]
return i[1]},trys:[],ops:[]}
return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.")
for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i
switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o
break
case 4:return a.label++,{value:o[1],done:!1}
case 5:a.label++,r=o[1],o=[0]
continue
case 7:o=a.ops.pop(),a.trys.pop()
continue
default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1]
break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o
break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o)
break}i[2]&&a.ops.pop(),a.trys.pop()
continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1]
return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}
function p(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])
return e}).apply(this,arguments)}
function m(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function g(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1]
return i[1]},trys:[],ops:[]}
return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.")
for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i
switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o
break
case 4:return a.label++,{value:o[1],done:!1}
case 5:a.label++,r=o[1],o=[0]
continue
case 7:o=a.ops.pop(),a.trys.pop()
continue
default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1]
break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o
break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o)
break}i[2]&&a.ops.pop(),a.trys.pop()
continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1]
return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var y=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e]
console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.")
this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.")
return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this
if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=b(this.global.location.search)
"tfjsflags"in t&&t.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],i=n[1]
e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t
if(""+ +t===t)return+t
throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)})}},e}()
function b(e){var t={}
return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")}),t}var x=null
function w(e){x=e}var _=Object.freeze({Environment:y,getQueryParams:b,get ENV(){return x},setEnvironmentGlobal:w})
function R(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function E(e,t,n){return Math.max(e,Math.min(t,n))}function C(e){return e%2==0?e:e+1}function k(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]
return t}function S(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function A(e,t,n){void 0===n&&(n=""),S(N(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function T(e){S(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function O(e,t){if(void 0===t&&(t=[]),null==t&&(t=[]),Array.isArray(e)||K(e))for(var n=0;n<e.length;++n)O(e[n],t)
else t.push(e)
return t}function I(e){if(0===e.length)return 1
for(var t=e[0],n=1;n<e.length;n++)t*=e[n]
return t}function N(e,t){if(e===t)return!0
if(null==e||null==t)return!1
if(e.length!==t.length)return!1
for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1
return!0}function D(e){return e%1==0}function P(e){if(null!=Math.tanh)return Math.tanh(e)
if(e===1/0)return 1
if(e===-1/0)return-1
var t=Math.exp(2*e)
return(t-1)/(t+1)}function M(e){var t=Math.ceil(Math.sqrt(e))
return[t,Math.ceil(e/t)]}function F(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function L(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,i){var o=0
!function a(){if(e())r()
else{var s=t(++o)
null!=n&&o>=n?i():setTimeout(a,s)}}()})}function B(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i]
else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i)
r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i)
if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e)
return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements")
if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n)
var o=e.slice()
return o[r]=t/n,o}function j(e,t){var n=t.length
return S((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),S(e.every(function(e){return D(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function z(e,t){for(var n=[],r=[],i=null==t?null:j(t,e).sort(),o=0,a=0;a<e.length;++a){if(null!=i){if(i[o]===a&&1!==e[a])throw new Error("Can't squeeze axis "+a+" since its dim '"+e[a]+"' is not 1");(null==i[o]||i[o]>a)&&1===e[a]&&(n.push(e[a]),r.push(a)),i[o]<=a&&o++}1!==e[a]&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function U(e,t){var n=null
if(null==e||"float32"===e)n=new Float32Array(t)
else if("int32"===e)n=new Int32Array(t)
else{if("bool"!==e)throw new Error("Unknown data type "+e)
n=new Uint8Array(t)}return n}function W(e,t){var n=null
if(null==e||"float32"===e)n=new Float32Array(t)
else if("int32"===e)n=new Int32Array(t)
else if("bool"===e)n=new Uint8Array(t)
else{if("string"!==e)throw new Error("Unknown data type "+e)
n=new Array(t)}return n}function V(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++){var i=e[r]
if(isNaN(i)||!isFinite(i))throw Error("The result of the '"+n+"' is "+i+".")}}function q(e,t){for(var n=0;n<e.length;n++){var r=e[n]
if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function H(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function G(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function K(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function $(e){if("float32"===e||"int32"===e)return 4
if("complex64"===e)return 8
if("bool"===e)return 1
throw new Error("Unknown dtype "+e)}function X(e){if(null==e)return 0
var t=0
return e.forEach(function(e){return t+=2*e.length}),t}function Y(e){return"string"==typeof e||e instanceof String}function Q(e){return"boolean"==typeof e}function J(e){return"number"==typeof e}function Z(e){return Array.isArray(e)?Z(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":J(e)?"float32":Y(e)?"string":Q(e)?"bool":"float32"}function ee(e){return!!(e&&e.constructor&&e.call&&e.apply)}function te(e,t){for(var n=t;n<e;++n)if(e%n==0)return n
return e}function ne(e){var t=e.length
if(t<2)return[]
var n=new Array(t-1)
n[t-2]=e[t-1]
for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1]
return n}function re(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray")
if(Array.isArray(e)&&(e=O(e)),n&&q(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e
if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e)
if("int32"===t)return new Int32Array(e)
if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1)
return r}throw new Error("Unknown data type "+t)}function ie(e,t){if(0===e.length)return t[0]
var n=e.reduce(function(e,t){return e*t})
if(0===n)return[]
if(n!==t.length)throw new Error("["+e+"] does not match the input size.")
return function e(t,n,r){var i=new Array
if(1===n.length)for(var o=n[0],a=0;a<o;a++)i[a]=r[t+a]
else{o=n[0]
var s=n.slice(1),u=s.reduce(function(e,t){return e*t})
for(a=0;a<o;a++)i[a]=e(t+a*u,s,r)}return i}(0,e,t)}function oe(e,t){for(var n=ae(e,t),r=0;r<n.length;r++)n[r]=1
return n}function ae(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e)
if("int32"===t)return new Int32Array(e)
if("bool"===t)return new Uint8Array(e)
throw new Error("Unknown data type "+t)}function se(){if("undefined"!=typeof performance)return performance.now()
if("undefined"!=typeof process){var e=process.hrtime()
return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function ue(e){e.forEach(function(t){S(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function ce(e,t){return x.platform.fetch(e,t)}var le=Object.freeze({shuffle:R,clamp:E,nearestLargerEven:C,sum:k,randUniform:function(e,t){var n=Math.random()
return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r])
n+=i*i}return n},assert:S,assertShapesMatch:A,assertNonNull:T,flatten:O,sizeFromShape:I,isScalarShape:function(e){return 0===e.length},arraysEqual:N,isInt:D,tanh:P,sizeToSquarishShape:M,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n
return R(t),t},rightPad:F,repeatedTry:L,inferFromImplicitShape:B,parseAxisParam:j,squeezeShape:z,getTypedArrayFromDType:U,getArrayFromDType:W,checkComputationForErrors:V,checkConversionForErrors:q,isValidDtype:H,hasEncodingLoss:G,isTypedArray:K,bytesPerElement:$,bytesFromStringArray:X,isString:Y,isBoolean:Q,isNumber:J,inferDtype:Z,isFunction:ee,nearestDivisor:te,computeStrides:ne,toTypedArray:re,toNestedArray:ie,makeOnesTypedArray:oe,makeZerosTypedArray:ae,now:se,assertNonNegativeIntegerDimensions:ue,fetch:ce}),he=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new fe)}return e.prototype.profileKernel=function(e,t){var n,r=this,i=this.backendTimer.time(function(){n=t()})
return(Array.isArray(n)?n:[n]).forEach(function(t){var n=t.dataSync()
V(n,t.dtype,e),i.then(function(i){var o=""
null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),r.logger.logKernelProfile(e,t,n,i.kernelMs,o)})}),n},e}(),fe=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i){var o=F(r+"ms",9),a=F(e,25),s=t.rank,u=t.size,c=F(t.shape.toString(),14)
console.log("%c"+a+"\t%c"+o+"\t%c"+s+"D "+c+"\t%c"+u+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green")},e}(),de=7
function pe(e,t,n){return F(Array.isArray(e)?parseFloat(e[0].toFixed(de))+" + "+parseFloat(e[1].toFixed(de))+"j":Y(e)?"'"+e+"'":"bool"===n?ve(e):parseFloat(e.toFixed(de)).toString(),t)}function ve(e){return 0===e?"false":"true"}function me(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]])
return t}var ge=function(){function e(e,t,n){var r=this
if(this.dtype=t,this.shape=e.slice(),this.size=I(e),null!=n){var i=n.length
S(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).")
this.values=n||W(t,this.size),this.strides=ne(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
0===n.length&&(n=[0]),S(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"})
var i=this.locToIndex(n)
this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
0===e.length&&(e=[0])
for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r]
if(o<0||o>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape
throw new Error(a)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u]
return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0
if(1===this.rank)return e[0]
for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n]
return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[]
if(1===this.rank)return[e]
for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n]
return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return we.make(this.shape,{values:this.values},this.dtype)},e}(),ye=null,be=null,xe=null,we=function(){function e(e,t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=I(e),this.strides=ne(e),this.dataId=null!=r?r:{},this.id=ye().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",ye().registerTensor(this,i),null!=n&&ye().write(i,this.dataId,n)}return e.make=function(t,n,r,i){return new e(t,r,n.values,n.dataId,i)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),S(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),be.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){switch(t.label){case 0:return[4,this.data()]
case 1:return e=t.sent(),[2,be.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return be.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){switch(t.label){case 0:return[4,this.data()]
case 1:return e=t.sent(),[2,ie(this.shape,e)]}})})},e.prototype.arraySync=function(){return ie(this.shape,this.dataSync())},e.prototype.data=function(){return m(this,void 0,void 0,function(){return g(this,function(e){return this.throwIfDisposed(),[2,ye().read(this.dataId)]})})},e.prototype.dataSync=function(){return this.throwIfDisposed(),ye().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(ye().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),be.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),be.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),be.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),be.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),be.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),be.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),be.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=ne(t),o=function(e,t,n,r){var i=I(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,u="complex64"===n?me(e):e
if(s>1)for(var c=0;c<i/o;c++)for(var l=c*o,h=0;h<o;h++)a[h]=Math.max(a[h],pe(u[l+h],0,n).length)
return a}(e,t,n,i),a=t.length,s=function e(t,n,r,i,o,a){void 0===a&&(a=!0)
var s="complex64"===r?2:1,u=n[0],c=n.length
if(0===c)return"complex64"===r?[pe(me(t)[0],0,r)]:"bool"===r?[ve(t[0])]:[t[0].toString()]
if(1===c){if(u>20){var l=3*s,h=Array.from(t.slice(0,l)),f=Array.from(t.slice(u-3*s,u))
return"complex64"===r&&(h=me(h),f=me(f)),["["+h.map(function(e,t){return pe(e,o[t],r)}).join(", ")+", ..., "+f.map(function(e,t){return pe(e,o[u-3+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?me(t):Array.from(t)).map(function(e,t){return pe(e,o[t],r)}).join(", ")+"]"]}var d=n.slice(1),p=i.slice(1),v=i[0]*s,m=[]
if(u>20){for(var g=0;g<3;g++){var y=(b=g*v)+v
m.push.apply(m,e(t.slice(b,y),d,r,p,o,!1))}for(m.push("..."),g=u-3;g<u;g++)y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,p,o,g===u-1))}else for(g=0;g<u;g++){var b
y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,p,o,g===u-1))}var x=2===c?",":""
for(m[0]="["+m[0]+x,g=1;g<m.length-1;g++)m[g]=" "+m[g]+x
var w=",\n"
for(g=2;g<c;g++)w+="\n"
return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":w),m}(e,t,n,i,o),u=["Tensor"]
return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(e){return"    "+e}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),be.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),be.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),be.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),be.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),be.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),be.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),be.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),be.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),be.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),be.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),xe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),be.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),be.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),be.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),be.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),be.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),be.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),be.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),be.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),be.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),be.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),be.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),be.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),be.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),be.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),be.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),be.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),be.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),be.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),be.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),be.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),be.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),be.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),be.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),be.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),be.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),be.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),be.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),be.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),be.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),be.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),be.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),be.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),be.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),be.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),be.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),be.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),be.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),be.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),be.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),be.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),be.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),be.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),be.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),be.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),be.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),be.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),be.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),be.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),be.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),be.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),be.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),be.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),be.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),be.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),be.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),be.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),be.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),be.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),be.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),be.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),be.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),be.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),be.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),be.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),be.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),be.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),be.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),be.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),be.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),be.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),be.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),be.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),be.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),be.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),be.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),be.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),be.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),be.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),be.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),be.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),be.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),be.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,o){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),be.conv1d(this,e,t,n,r,i,o)},e.prototype.conv2d=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),be.conv2d(this,e,t,n,r,i,o)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),be.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),be.depthwiseConv2d(this,e,t,n,r,i,o)},e.prototype.separableConv2d=function(e,t,n,r,i,o){return void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),be.separableConv2d(this,e,t,n,r,i,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),be.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),be.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),be.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),be.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),_e.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),be.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),be.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),be.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),be.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),be.stridedSlice(this,e,t,n,r,i,o,a,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),be.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),be.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),be.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),be.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),be.spectral.irfft(this)},e}()
Object.defineProperty(we,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}})
var _e=function(e){function t(t,n,r){void 0===n&&(n=!0)
var i=e.call(this,t.shape,t.dtype,null,t.dataId)||this
i.trainable=n,i.name=r,null==i.name&&(i.name=ye().nextVariableId().toString())
try{ye().registerVariable(i)}catch(e){throw ye().disposeTensor(i),e}return i}return p(t,e),t.variable=function(e,n,r,i){return void 0===n&&(n=!0),null!=i&&i!==e.dtype&&(e=e.asType(i)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match")
if(!N(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match")
ye().disposeTensor(this),this.dataId=e.dataId,ye().registerTensor(this)},t.prototype.dispose=function(){ye().disposeVariable(this),this.isDisposedInternal=!0},t}(we)
Object.defineProperty(_e,Symbol.hasInstance,{value:function(e){return e instanceof we&&null!=e.assign&&e.assign instanceof Function}})
var Re,Ee,Ce,ke,Se,Ae,Te=_e.variable;(Ae=Re||(Re={})).R0="R0",Ae.R1="R1",Ae.R2="R2",Ae.R3="R3",Ae.R4="R4",Ae.R5="R5",Ae.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ee||(Ee={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ce||(Ce={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ke||(ke={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Se||(Se={}))
var Oe={float32:ke,int32:Ee,bool:Ce,complex64:Se}
function Ie(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string"
throw new Error("Can not upcast "+e+" with "+t)}return Oe[e][t]}function Ne(e){return Ie(e,"int32")}function De(e,t){if(e.dtype===t.dtype)return[e,t]
var n=Ie(e.dtype,t.dtype)
return[e.cast(n),t.cast(n)]}function Pe(e,t){S(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function Me(e){var t=[]
return function e(t,n,r){if(null!=t)if(t instanceof we)n.push(t)
else if(i=t,Array.isArray(i)||"object"==f(i)){var i,o=t
for(var a in o){var s=o[a]
r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}var Fe,Le=Object.freeze({makeTypesMatch:De,assertTypesMatch:Pe,isTensorInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0
return!1},getTensorsInContainer:Me}),Be=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),je=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Be}return e.prototype.ready=function(){return m(this,void 0,void 0,function(){var e,t,n
return g(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})]
if(null!=this.backendInstance)return[2]
e=this.getSortedBackends(),t=0,r.label=1
case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5]
case 2:return r.sent()?[4,this.setBackend(n)]:[3,4]
case 3:return r.sent(),[2]
case 4:return t++,[3,1]
case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods")
if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name
if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods")
this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null
if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return m(this,void 0,void 0,function(){var t,n,r
return g(this,function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry")
return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2])
case 1:return r=i.sent(),[3,3]
case 2:r=n,i.label=3
case 3:if(!r)return[2,!1]
i.label=4
case 4:return this.backendInstance=this.registry[e],this.profiler=new he(this.backendInstance),[2,!0]}})})},e.prototype.initializeBackend=function(e){var t=this,n=ze.registryFactory[e]
if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.")
try{var r=n.factory()
if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,o=r.then(function(n){return!(i<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))}).catch(function(n){return!(i<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),1))})
return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry")
this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this
if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.")
return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,o=r.asyncInit
if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){this.write(e,t,this.readSync(t))},e.prototype.tidy=function(e,t){var n,r=this,i=null
if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()")
t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string")
if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function")
i=e}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e()
try{var r=n()
return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=we.make(e.shape,{dataId:e.dataId},e.dtype)
return this.addTapeNode([e],t,function(e){return[e.toFloat()]}),t},e.prototype.runKernel=function(e,t,n){var r,i=this,o=[],a=this.isTapeOn(),s=null!=this.state.activeScope?this.state.activeScope.name:"",u=function(e){a&&(o=e.map(function(e){return i.keep(i.clone(e))}))},c=this.state.numBytes,l=this.state.numTensors
if(this.scopedRun(function(){return i.state.kernelDepth++},function(){return i.state.kernelDepth--},function(){r=i.ENV.getBool("DEBUG")?i.profiler.profileKernel(s,function(){return e(i.backend,u)}):e(i.backend,u)}),a){var h={id:this.state.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r],saved:o}
null!=n&&(h.gradient=function(e){return n(e,o)}),this.state.activeTape.push(h)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShape:Array.isArray(r)?r.map(function(e){return e.shape}):r.shape}),r},e.prototype.registerTensor=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0
if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++
var r=0
"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*$(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:null!=t?t:this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=t?t.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof _e||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.state.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered")
this.state.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--
var t=this.state.tensorInfo.get(e.dataId)
t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e]
this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory()
return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return m(this,void 0,void 0,function(){var t,n
return g(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n){var r={}
e.forEach(function(e,t){r[t]=e})
var i={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t=n(e),r={}
return t.forEach(function(e,t){r[t]=function(){return e}}),r}}
this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++}
e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Me(e),r=new Set(n.map(function(e){return e.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i]
o.kept||r.has(o.id)||o.dispose()}var a=this.state.scopeStack.pop()
this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==a.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var i=this
if(void 0===r&&(r=!1),S(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'")
var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)})
S(o instanceof we,function(){return"The result y returned by f() must be a tensor."})
var a=function(e,t,n){for(var r={},i={},o=0;o<t.length;o++)r[t[o].id]=!0
for(o=0;o<e.length;o++){var a=(p=e[o]).inputs
for(var s in a){for(var u=a[s],c=!1,l=0;l<t.length;l++)if(r[u.id]){p.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,i[p.id]=!0
break}if(c)break}}var h={}
h[n.id]=!0
var f={}
for(o=e.length-1;o>=0;o--)for(a=(p=e[o]).inputs,l=0;l<p.outputs.length;l++)if(h[p.outputs[l].id]){for(var s in a)h[a[s].id]=!0,f[p.id]=!0
break}var d=[]
for(o=0;o<e.length;o++){var p
if(i[(p=e[o]).id]&&f[p.id]){var v={}
for(var s in p.inputs){var m=p.inputs[s]
r[m.id]&&(v[s]=m)}var g=Object.assign({},p)
g.inputs=v,g.outputs=p.outputs,d.push(g)}}return d}(this.state.activeTape,t,o)
if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.")
return this.tidy("backward",function(){var e,r,s={}
s[o.id]=null==n?(r=oe(I(e=o.shape),"float32"),we.make(e,{values:r})):n,function(e,t,n){for(var r=function(r){var i=t[r],o=[]
if(i.outputs.forEach(function(t){var n=e[t.id]
if(null!=n)o.push(n)
else{var r=we.make(t.shape,{values:ae(t.size,t.dtype)},t.dtype)
o.push(r)}}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".")
var a=i.gradient(1===i.outputs.length?o[0]:o),s=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".")
var r=n(function(){return a[t]()})
if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.name+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'")
var o=i.inputs[t]
if(!N(r.shape,o.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'")
if(null==e[o.id])e[o.id]=r
else{var s=e[o.id]
e[o.id]=s.add(r),s.dispose()}}
for(var u in i.inputs)s(u)},i=t.length-1;i>=0;i--)r(i)}(s,a,function(e){return i.tidy(e)})
var u=t.map(function(e){return s[e.id]})
return 0===i.state.gradientDepth&&(i.state.activeTape.forEach(function(e){for(var t in e.saved)e.saved[t].dispose()}),i.state.activeTape=null),{value:o,grads:u}})},e.prototype.customGrad=function(e){var t=this
return S(ee(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i]
S(r.every(function(e){return e instanceof we}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"})
var o={}
return r.forEach(function(e,t){o[t]=e}),t.runKernel(function(t,i){return S((n=e.apply(void 0,r.concat([i]))).value instanceof we,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),S(ee(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(e,t){var i=n.gradFunc(e,t),o=Array.isArray(i)?i:[i]
S(o.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),S(o.every(function(e){return e instanceof we}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."})
var a={}
return o.forEach(function(e,t){a[t]=function(){return e}}),a})}},e.prototype.write=function(e,t,n){var r=this.state.tensorInfo.get(t),i=r.backend
if(e=e||this.backend,"string"===r.dtype){var o=X(n)
this.state.numBytes+=o-r.bytes,r.bytes=o}e!==i&&(i.disposeData(t),r.backend=e,e.register(t,r.shape,r.dtype)),e.write(t,n)},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return m(this,void 0,void 0,function(){var t,n
return g(this,function(r){switch(r.label){case 0:return t=se(),[4,this.backend.time(e)]
case 1:return(n=r.sent()).wallMs=se()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Be,this.registry)this.registry[e].dispose(),delete this.registry[e]
this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ze=function(){var e=function(){if(null==Fe){var e=void 0
if("undefined"!=typeof window)e=window
else if("undefined"!=typeof global)e=global
else if("undefined"!=typeof process)e=process
else{if("undefined"==typeof self)throw new Error("Could not find a global object")
e=self}Fe=e}return Fe}()
if(null==e._tfengine){var t=new y(e)
e._tfengine=new je(t)}return w(e._tfengine.ENV),ye=function(){return e._tfengine},e._tfengine}()
function Ue(){return"undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope}x.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),x.registerFlag("IS_BROWSER",function(){return Ue()}),x.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),x.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),x.registerFlag("PROD",function(){return!1}),x.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return x.getBool("DEBUG")}),x.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),x.registerFlag("IS_TEST",function(){return!1})
var We={},Ve={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}
function qe(e,t){We[e]=t}function He(e){e in We||(We[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.")
var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150)
if("undefined"!=typeof document)return document.createElement("canvas")
throw new Error("Cannot create a canvas in this context")}(e)
return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete We[e]},!1),1===e?t.getContext("webgl",Ve)||t.getContext("experimental-webgl",Ve):t.getContext("webgl2",Ve)}(e))
var t=We[e]
return t.isContextLost()?(delete We[e],He(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),We[e])}function Ge(e,t,n){var r=n()
return t&&function(e){var t=e.getError()
if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Ye(e,t))}(e),r}var Ke=5.96e-8,$e=65504
function Xe(e){return!!(x.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||Ke<Math.abs(e)&&Math.abs(e)<$e)}function Ye(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR"
case e.INVALID_ENUM:return"INVALID_ENUM"
case e.INVALID_VALUE:return"INVALID_VALUE"
case e.INVALID_OPERATION:return"INVALID_OPERATION"
case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION"
case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY"
case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL"
default:return"Unknown error code "+t}}function Qe(e,t,n){return xt(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Je(e,t,n){var r=xt(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.")
if(Ge(e,t,function(){return e.shaderSource(r,n)}),Ge(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.")
return r}function Ze(e,t,n){var r=xt(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.")
if(Ge(e,t,function(){return e.shaderSource(r,n)}),Ge(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=nt.exec(t)
if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e)
for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(function(e,t){return F((t+1).toString(),o)+e}),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s)
var c=a.slice(0,r-1),l=a.slice(r-1,r),h=a.slice(r)
console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+F(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.")
return r}var et,tt,nt=/ERROR: [0-9]+:([0-9]+):/g
function rt(e,t){return xt(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function it(e,t,n){if(Ge(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ot(e,t,n){if(Ge(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function at(e,t,n){var r=xt(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer")
return Ge(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Ge(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function st(e,t,n){var r=xt(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer")
return Ge(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Ge(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function ut(e,t){return xt(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function ct(e,t){var n=x.getNumber("WEBGL_MAX_TEXTURE_SIZE")
if(e<=0||t<=0){var r="["+e+"x"+t+"]"
throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function lt(e,t){return xt(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ht(e,t,n,r,i,o,a,s){var u=e.getAttribLocation(n,r)
return-1!==u&&(Ge(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,i)}),Ge(e,t,function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,a,s)}),Ge(e,t,function(){return e.enableVertexAttribArray(u)}),!0)}function ft(e,t,n,r){wt(e,r),Ge(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function dt(e,t,n,r){return xt(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function pt(e,t,n){return e.getUniformLocation(t,n)}function vt(e,t,n,r,i,o){Ge(e,t,function(){return ft(e,t,r,o)}),Ge(e,t,function(){return e.uniform1i(i,o)})}function mt(e,t,n,r){Ge(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Ge(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function gt(e,t,n){Ge(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Ge(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function yt(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER)
if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+bt(e,t))}function bt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT"
case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"
case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS"
case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED"
default:return"unknown error "+t}}function xt(e,t,n,r){var i=Ge(e,t,function(){return n()})
if(null==i)throw new Error(r)
return i}function wt(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0
if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function _t(e,t){return void 0===t&&(t=2),I(e.slice(0,e.length-t))}function Rt(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.")
return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Et(e){var t=[1,1,1]
return 0===e.length||1===e.length&&1===e[0]||(t=[_t(e)].concat(Rt(e))),t}function Ct(e,t){var n
void 0===t&&(t=!1)
var r=x.getNumber("WEBGL_MAX_TEXTURE_SIZE")
if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?C(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var i=z(e)
e=i.newShape}var o=I(e)
if(e.length<=1&&o<=r)return[1,o]
if(2===e.length&&e[0]<=r&&e[1]<=r)return e
if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]]
if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]]
if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]]
if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]]
if(t){var a=_t(e),s=2,u=2
return e.length&&(s=(n=Rt(e))[0],u=n[1]),M(o=a*(s/2)*(u/2)).map(function(e){return 2*e})}return M(o)}function kt(e){return e%2==0}function St(e,t){if(N(e=e.slice(-2),t=t.slice(-2)))return!0
if(!e.length||!t.length)return!0
if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0
if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0]
if(n===r)return!0
if(kt(n)&&kt(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&kt(e[0])&&kt(t[0])}function At(e){if(null==et){var t=He(e)
et=t.getParameter(t.MAX_TEXTURE_SIZE)}return et}function Tt(e){if(null==tt){var t=He(e)
tt=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,tt)}function Ot(e){if(0===e)return 0
var t=He(e)
return It(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:It(t,"EXT_disjoint_timer_query")?1:0}function It(e,t){return null!=e.getExtension(t)}function Nt(e){try{if(null!=He(e))return!0}catch(e){return!1}return!1}function Dt(e){if(0===e)return!1
var t=He(e)
if(1===e){if(!It(t,"OES_texture_float"))return!1}else if(!It(t,"EXT_color_buffer_float"))return!1
return Mt(t,e)}function Pt(e){if(0===e)return!1
var t=He(e)
if(1===e){if(!It(t,"OES_texture_float"))return!1
if(!It(t,"WEBGL_color_buffer_float"))return!1}else if(!It(t,"EXT_color_buffer_float"))return!1
return Mt(t,e)}function Mt(e,t){var n=e.createFramebuffer(),r=e.createTexture()
e.bindTexture(e.TEXTURE_2D,r)
var i=2===t?e.RGBA32F:e.RGBA
e.texImage2D(e.TEXTURE_2D,0,i,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)
var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE
return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),o}function Ft(e){return 2===e&&null!=He(e).fenceSync}var Lt=Object.freeze({callAndCheck:Ge,canBeRepresented:Xe,getWebGLErrorMessage:Ye,getExtensionOrThrow:Qe,createVertexShader:Je,createFragmentShader:Ze,createProgram:rt,linkProgram:it,validateProgram:ot,createStaticVertexBuffer:at,createStaticIndexBuffer:st,getNumChannels:function(){return 2===x.getNumber("WEBGL_VERSION")?1:4},createTexture:ut,validateTextureSize:ct,createFramebuffer:lt,bindVertexBufferToProgramAttribute:ht,bindTextureUnit:ft,unbindTextureUnit:function(e,t,n){wt(e,n),Ge(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:dt,getProgramUniformLocation:pt,bindTextureToProgramUniformSampler:vt,bindCanvasToFramebuffer:function(e,t){Ge(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Ge(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Ge(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:mt,unbindColorTextureFromFramebuffer:gt,validateFramebuffer:yt,getFramebufferErrorMessage:bt,getBatchDim:_t,getRowsCols:Rt,getShapeAs3D:Et,getTextureShapeFromLogicalShape:Ct,isReshapeFree:St,get MAX_TEXTURE_SIZE(){return et},get MAX_TEXTURES_IN_SHADER(){return tt},getWebGLMaxTextureSize:At,getMaxTexturesInShader:Tt,getWebGLDisjointQueryTimerVersion:Ot,isWebGLVersionEnabled:Nt,isRenderToFloatTextureEnabled:Dt,isDownloadFloatTextureEnabled:Pt,isWebGLFenceEnabled:Ft})
function Bt(){x.set("PROD",!0)}function jt(){x.set("DEBUG",!0)}function zt(){x.set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Ut(e){x.getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Wt(){ze.disposeVariables()}function Vt(){return ze.memory()}function qt(e){return ze.profile(e)}function Ht(e,t){return ze.tidy(e,t)}function Gt(e){Me(e).forEach(function(e){return e.dispose()})}function Kt(e){return ze.keep(e)}function $t(e){return ze.time(e)}function Xt(e){return ze.setBackend(e)}function Yt(){return ze.ready()}function Qt(){return ze.backendName}function Jt(e){ze.removeBackend(e)}function Zt(e){return ze.findBackend(e)}function en(e){return ze.findBackendFactory(e)}function tn(e,t,n){return void 0===n&&(n=1),ze.registerBackend(e,t,n)}function nn(){return ze.backend}function rn(e,t){x.setPlatform(e,t)}function on(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
x.getBool("IS_TEST")||console.warn.apply(console,e)}function an(e){var t=e
if(K(e))return[e.length]
if(!Array.isArray(e))return[]
for(var n=[];Array.isArray(t)||K(t);)n.push(t.length),t=t[0]
return Array.isArray(e)&&x.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||K(t)){S(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),S(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"})
for(var i=n.slice(1),o=0;o<t.length;++o)e(t[o],i,r.concat(o))}else S(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,n,[]),n}function sn(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function un(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof we)return sn(r,e.dtype,t,n),e
var i=Z(e)
if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),sn(r,i,t,n),null==e||!K(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name
throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=an(e)
K(e)||Array.isArray(e)||(e=[e])
var s="string"!==i?re(e,i,x.getBool("DEBUG")):O(e)
return we.make(a,{values:s},i)}function cn(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`")
return e.map(function(e,r){return un(e,t+"["+r+"]",n)},r)}function ln(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1
return!0}function hn(e,t,n){for(var r=e.length+t.length,i=[],o=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++])
return i}function fn(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i])
return[n,t.map(function(t){return e[t]})]}function dn(e,t){return hn(e,t.map(function(e){return 1}),t)}function pn(e,t,n){S(ln(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function vn(e,t){if(ln(e,t))return null
for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r)
return e.forEach(function(e){return n.push(e)}),n}function mn(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function gn(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r)
return n}function yn(e,t){var n=e[0].length
e.forEach(function(e,t){S(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),S(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."})
var r=e[0]
e.forEach(function(e,i){for(var o=0;o<n;o++)S(o===t||e[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function bn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t]
return n}function xn(e){var t=Object.keys(e)
if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.")
var n=t[0],r=e[n]
n.endsWith("_")&&(n=n.substring(0,n.length-1))
var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
ze.startScope(n)
try{var i=r.apply(void 0,e)
return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ze.endScope(i),i}catch(e){throw ze.endScope(null),e}}
return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}x.registerFlag("HAS_WEBGL",function(){return x.getNumber("WEBGL_VERSION")>0}),x.registerFlag("WEBGL_VERSION",function(){return Nt(2)?2:Nt(1)?1:0}),x.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===x.get("WEBGL_VERSION")}),x.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),x.registerFlag("WEBGL_PACK",function(){return x.getBool("HAS_WEBGL")}),x.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_PACK_CLIP",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),x.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_PACK_REDUCE",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_LAZILY_UNPACK",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_CONV_IM2COL",function(){return x.getBool("WEBGL_PACK")}),x.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return At(x.getNumber("WEBGL_VERSION"))}),x.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Tt(x.getNumber("WEBGL_VERSION"))}),x.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=x.getNumber("WEBGL_VERSION")
return 0===e?0:Ot(e)}),x.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))))
var e}),x.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return Dt(x.getNumber("WEBGL_VERSION"))}),x.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Pt(x.getNumber("WEBGL_VERSION"))}),x.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Ft(x.getNumber("WEBGL_VERSION"))}),x.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return x.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),xe=Ut
var wn=xn({complex_:function(e,t){var n=un(e,"real","complex"),r=un(t,"imag","complex")
return A(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),ze.runKernel(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),_n=xn({real_:function(e){var t=un(e,"input","real")
return ze.runKernel(function(e){return e.real(t)},{$input:t})}}),Rn=xn({imag_:function(e){var t=un(e,"input","imag")
return ze.runKernel(function(e){return e.imag(t)},{$input:t})}})
function En(e,t,n){return Cn(e,t,an(e),n)}function Cn(e,t,n,r){if(null==r&&(r=Z(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).")
if(!K(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray")
if(null!=t){ue(t)
var i=I(t),o=I(n)
S(i===o,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o})
for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==I(t.slice(a))
S(n[a]===t[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return K(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?re(e,r,x.getBool("DEBUG")):O(e),we.make(t,{values:e},r)}function kn(e,t){if((K(e)||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)")
return Cn(e,[],[],t)}function Sn(e,t){T(e)
var n=an(e)
if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray")
return Cn(e,null,n,t)}function An(e,t,n){if(T(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers")
var r=an(e)
if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray")
return Cn(e,t,r,n)}function Tn(e,t,n){if(T(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers")
var r=an(e)
if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array")
return Cn(e,t,r,n)}function On(e,t,n){if(T(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers")
var r=an(e)
if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array")
return Cn(e,t,r,n)}function In(e,t,n){if(T(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers")
var r=an(e)
if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array")
return Cn(e,t,r,n)}function Nn(e,t,n){if(T(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers")
var r=an(e)
if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array")
return Cn(e,t=t||r,r,n)}function Dn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Dn(e,"float32"),r=Pn(e,"float32")
return wn(n,r)}var i=oe(I(e),t)
return we.make(e,{values:i},t)}function Pn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Pn(e,"float32"),r=Pn(e,"float32")
return wn(n,r)}var i=ae(I(e),t)
return we.make(e,{values:i},t)}function Mn(e,t,n){return ze.runKernel(function(r){return r.fill(e,t,n)},{})}function Fn(e,t,n){if(n<=0)throw new Error("The number of values should be positive.")
return ze.runKernel(function(r){return r.linspace(e,t,n)},{})}function Ln(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero")
if(e===t||e<t&&n<0||t<e&&n>1)return Pn([0],r)
var i=ae(Math.abs(Math.ceil((t-e)/n)),r)
t<e&&1===n&&(n=-1),i[0]=e
for(var o=1;o<i.length;o++)i[o]=i[o-1]+n
return Sn(i,r)}var Bn=xn({onesLike_:function(e){var t=un(e,"x","onesLike")
if("complex64"===t.dtype){var n=Bn(_n(t)),r=jn(Rn(t))
return wn(n,r)}return ze.runKernel(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return jn(e)}}})}}),jn=xn({zerosLike_:function(e){var t=un(e,"x","zerosLike")
return ze.runKernel(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return jn(e)}}})}}),zn=xn({concat_:function(e,t){void 0===t&&(t=0),S(e.length>=1,function(){return"Pass at least one tensor to concat"})
var n=cn(e,"tensors","concat")
t=j(t,n[0].shape)[0]
var r=bn(n.map(function(e){return e.shape}),t)
if(0===I(r))return En([],r)
if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0]
var i=n.map(function(e){return e.shape})
yn(i,t)
var o=n
return ze.runKernel(function(e){return e.concat(n,t)},o,function(e){var n=i.map(function(e){return e[t]})
return Hn(e,n,t).map(function(e){return function(){return e}})})}}),Un=xn({concat1d_:function(e){return zn(e,0)}}),Wn=xn({concat2d_:function(e,t){return zn(e,t)}}),Vn=xn({concat3d_:function(e,t){return zn(e,t)}}),qn=xn({concat4d_:function(e,t){return zn(e,t)}}),Hn=xn({split_:function(e,t,n){void 0===n&&(n=0)
var r,i=un(e,"x","split")
return n=j(n,i.shape)[0],"number"==typeof t?(S(i.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(i.shape[n]/t)):(S(i.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),ze.runKernel(function(e){return e.split(i,r,n)},{$x:i},function(e){return{$x:function(){return zn(e,n)}}})}})
function Gn(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self
var Kn=Gn(function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString()
for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n))
r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)})
n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c
return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,a=n.next
return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,o&&("object"==f(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.alea=o}(0,e)}),$n=Gn(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11
return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e
for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==f(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor128=o}(0,e)}),Xn=Gn(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.next=function(){var e=t.x^t.x>>>2
return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e
for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==f(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)}),Yn=Gn(function(e){!function(e,t,n){function r(e){var t=this
t.next=function(){var e,n,r=t.x,i=t.i
return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[]
if(t===(0|t))r[0]=t
else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13
for(;r.length<8;)r.push(0)
for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date)
var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)}),Qn=Gn(function(e){!function(e,t,n){function r(e){var t=this
t.next=function(){var e,n,r=t.w,i=t.X,o=t.i
return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],u=128
for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0)
for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n
e.w=a,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date)
var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)}),Jn=Gn(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a
return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e
for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==f(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.tychei=o}(0,e)}),Zn=Gn(function(e){!function(t,r){var i,o=this,a=256,s=6,u="random",c=r.pow(a,s),l=r.pow(2,52),h=2*l,d=a-1
function p(e,n,d){var p=[],b=g(function e(t,n){var r,i=[],o=f(t)
if(n&&"object"==o)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,y(t)]:null==e?function(){try{var e
return i&&(e=i.randomBytes)?e=e(a):(e=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(e)),y(e)}catch(e){var n=o.navigator,r=n&&n.plugins
return[+new Date,o,r,o.screen,y(t)]}}():e,3),p),x=new v(p),w=function(){for(var e=x.g(s),t=c,n=0;e<l;)e=(e+n)*a,t*=a,n=x.g(1)
for(;e>=h;)e/=2,t/=2,n>>>=1
return(e+n)/t}
return w.int32=function(){return 0|x.g(4)},w.quick=function(){return x.g(4)/4294967296},w.double=w,g(y(x.S),t),(n.pass||d||function(e,t,n,i){return i&&(i.S&&m(i,x),e.state=function(){return m(x,{})}),n?(r[u]=e,t):e})(w,b,"global"in n?n.global:this==r,n.state)}function v(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[]
for(n||(e=[n++]);i<a;)s[i]=i++
for(i=0;i<a;i++)s[i]=s[o=d&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=d&i+1],n=n*a+s[d&(s[i]=s[o=d&o+t])+(s[o]=t)]
return r.i=i,r.j=o,n})(a)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++)
return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(r["seed"+u]=p,g(r.random(),t),e.exports){e.exports=p
try{i=n(!function(){var e=new Error("Cannot find module 'crypto'")
throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}}}([],Math)})
Zn.alea=Kn,Zn.xor128=$n,Zn.xorwow=Xn,Zn.xorshift7=Yn,Zn.xor4096=Qn,Zn.tychei=Jn
var er=Zn.alea,tr=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev)
var o=i||Math.random()
this.random=er(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal
return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,o=void 0,a=void 0
do{a=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o}while(a>=1||0===a)
var s=Math.sqrt(-2*Math.log(a)/a)
t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),nr=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=1)
var i=this
if(this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float")
this.random=er(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}()
function rr(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",ue(e),new ge(e,t,n)}function ir(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}var or=xn({batchToSpaceND_:function(e,t,n){var r=un(e,"x","batchToSpaceND"),i=t.reduce(function(e,t){return e*t})
return S(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),S(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),S(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i}),ze.runKernel(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),ar=xn({cast_:function(e,t){var n=un(e,"x","cast")
if(!H(t))throw new Error("Failed to cast to unknown dtype "+t)
if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings")
return ze.runKernel(function(e){return e.cast(n,t)},{$x:n},function(e){return{$x:function(){return e.clone()}}})}}),sr=xn({clone_:function(e){var t=un(e,"x","clone",null)
return ze.runKernel(function(e){return we.make(t.shape,{dataId:t.dataId},t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),ur=xn({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1)
var i=un(e,"x","cumsum"),o=vn([t|=0],i.rank),a=i
null!=o&&(a=i.transpose(o))
var s=gn(1,i.rank)[0],u=ze.runKernel(function(e){return e.cumsum(a,s,n,r)},{permutedX:a},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}})
return null!=o&&(u=u.transpose(o)),u}}),cr=xn({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC")
var r=un(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1]
return S(i*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),S(o*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),S(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),ze.runKernel(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),lr=xn({expandDims_:function(e,t){void 0===t&&(t=0)
var n=un(e,"x","expandDims",null)
S(t<=n.rank,function(){return"Axis must be <= rank of the tensor"})
var r=n.shape.slice()
return t<0&&(S(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),_r(n,r)}}),hr=xn({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e)
for(var i=rr([e,t],r),o=e<=t?e:t,a=0;a<o;++a)i.set(1,a,a)
var s=i.toTensor().as2D(e,t)
if(null==n)return s
if(1===n.length)return kr(lr(s,0),[n[0],1,1])
if(2===n.length)return kr(lr(lr(s,0),0),[n[0],n[1],1,1])
if(3===n.length)return kr(lr(lr(lr(s,0),0),0),[n[0],n[1],n[2],1,1])
throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),fr=xn({multinomial_:function(e,t,n,r){void 0===r&&(r=!1)
var i=un(e,"logits","multinomial"),o=i.size,a=i.rank
if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".")
if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a)
n=n||Math.random()
var s=1===a?i.as2D(1,-1):i,u=ze.runKernel(function(e){return e.multinomial(s,r,t,n)},{logits2D:s})
return 1===a?u.as1D():u}}),dr=xn({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t)
var i=un(e,"indices","oneHot","int32"),o=i.shape.concat([t])
return i=i.flatten(),ze.runKernel(function(e){return e.oneHot(i,t,n,r)},{$indices:i},function(e){return{$indices:function(){return Pn(i.shape,"float32")}}}).reshape(o)}}),pr=xn({pad_:function(e,t,n){void 0===n&&(n=0)
var r=un(e,"x","pad")
if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad")
var i=t.map(function(e){return e[0]})
return ze.runKernel(function(e){return e.pad(r,t,n)},{$x:r},function(e){return{$x:function(){return e.slice(i,r.shape)}}})}}),vr=xn({pad1d_:function(e,t,n){return void 0===n&&(n=0),S(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),pr(e,[t],n)}}),mr=xn({pad2d_:function(e,t,n){return void 0===n&&(n=0),S(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),pr(e,t,n)}}),gr=xn({pad3d_:function(e,t,n){return void 0===n&&(n=0),S(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),pr(e,t,n)}}),yr=xn({pad4d_:function(e,t,n){return void 0===n&&(n=0),S(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),pr(e,t,n)}}),br=xn({rand_:function(e,t,n){var r=I(e),i=null
if(null==n||"float32"===n)i=new Float32Array(r)
else if("int32"===n)i=new Int32Array(r)
else{if("bool"!==n)throw new Error("Unknown data type "+n)
i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t()
return we.make(e,{values:i},n)}}),xr=xn({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r)
for(var o=new tr(t,n,r,!1,i),a=rr(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue()
return a.toTensor()}}),wr=xn({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32")
for(var o=rr(e,r),a=new nr(t,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue()
return o.toTensor()}}),_r=xn({reshape_:function(e,t){var n=un(e,"x","reshape",null)
return t=B(t,n.size),S(n.size===I(t),function(){return"new shape and old shape must have the same number of elements."}),ze.runKernel(function(e){return e.reshape(n,t)},{$x:n},function(e){return{$x:function(){return e.reshape(n.shape)}}})}}),Rr=xn({spaceToBatchND_:function(e,t,n){var r=un(e,"x","spaceToBatchND")
return S(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),S(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),S(r.shape.reduce(function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),ze.runKernel(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),Er=xn({squeeze_:function(e,t){var n=un(e,"x","squeeze")
return _r(n,z(n.shape,t).newShape)}}),Cr=xn({stack_:function(e,t){void 0===t&&(t=0)
var n=cn(e,"tensors","stack")
if(S(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t)
var r=n[0].rank,i=n[0].shape,o=n[0].dtype
S(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){A(i,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){S(o===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})})
var a=n.map(function(e){return e.expandDims(t)})
return zn(a,t)}}),kr=xn({tile_:function(e,t){var n=un(e,"x","tile",null)
return S(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}),ze.runKernel(function(e,r){var i=e.tile(n,t)
return r([n]),i},{$x:n},function(e,n){var r=n[0]
return{$x:function(){var n=jn(r)
if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]))
else if(2===r.rank)for(i=0;i<t[0];++i)for(var o=0;o<t[1];++o)n=n.add(e.slice([i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]))
else if(3===r.rank)for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(var a=0;a<t[2];++a)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]))
else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.")
for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}})}}),Sr=xn({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r)
for(var o=new tr(t,n,r,!0,i),a=rr(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue()
return a.toTensor()}}),Ar=xn({unstack_:function(e,t){void 0===t&&(t=0),t=t||0
var n=un(e,"x","unstack")
return S(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length),ze.runKernel(function(e){return e.unstack(n,t)},{$x:n},function(e){return{$x:function(){return Cr(e,t)}}})}}),Tr=function(e,t){return m(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h
return g(this,function(f){switch(f.label){case 0:return n=un(e,"x","setdiff1d"),r=un(t,"y","setdiff1d"),S(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),S(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),S(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()]
case 1:return i=f.sent(),[4,r.data()]
case 2:for(o=f.sent(),a=new Set(o),s=0,l=0;l<i.length;l++)a.has(i[l])||s++
for(u=new ge([s],n.dtype),c=new ge([s],"int32"),l=0,h=0;l<i.length;l++)a.has(i[l])||(u.values[h]=i[l],c.values[h]=l,h++)
return[2,[u.toTensor(),c.toTensor()]]}})})}
function Or(e,t,n,r){void 0===r&&(r=!0)
var i=[]
if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1))
else{i=i.concat(e[0])
for(var o=t.length,a=0;a<o;++a)i=i.concat([e[a+1]/t[a],t[a]])
i=i.concat(e.slice(o+1))}return i}function Ir(e,t,n){void 0===n&&(n=!0)
var r=[]
if(n){r.push(t)
for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],a=[]
for(i=1;i<e;++i)i>=2*t+1||i%2==1?a.push(i):o.push(i)
r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function Nr(e,t,n,r){void 0===r&&(r=!0)
var i=[]
r?i.push(e[0]/n):i.push(e[0]*n)
for(var o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o])
return i}function Dr(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0])
return n}function Pr(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1])
return r}function Mr(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".")
if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".")
if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".")
if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank)
if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".")
for(var n=t.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o]
var a=e.shape,s=n.slice()
s.pop()
var u=1
for(o=r;o<e.rank;++o)u*=a[o],s.push(a[o])
var c=ne(e.shape).map(function(e){return e/u}).concat([1]).slice(0,r)
return[s,i,u,c]}var Fr=30
function Lr(e){return e<=Fr?e:te(e,Math.floor(Math.sqrt(e)))}function Br(e,t,n){for(var r=t.rank>1?t.shape[t.rank-1]:1,i=n.length,o=1,a=r;a<i;++a)o*=n[a]
var s=r<1?1:r
return{sliceRank:r,numUpdates:t.size/s,sliceSize:o,strides:ne(n.slice(0,r)).concat([1]),outputSize:I(n)}}function jr(e,t,n,r,i,o,a,s,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==a)throw new Error("ellipsis mask is not yet supported")
if(0!==s)throw new Error("new axis mask is not yet supported")
for(var c=[],l=[],h=[],f=0;f<e.length;f++)c[f]=zr(i,t,r,e,f),l[f]=Ur(o,n,r,e,f),u&1<<f&&(l[f]=c[f]+1,h.push(f))
var d=new Array(e.length).fill(0)
return d=d.map(function(e,t){for(var n=0,i=r[t]||1,o=c[t];!(i>0?o>=l[t]:o<=l[t]);o+=i)n+=1
return n}),[c,d,h]}function zr(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER)
var s=r[i]
return o<0&&(o+=s),E(0,o,s-1)}function Ur(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER)
var s=r[i]
return o<0&&(o+=s),a>0?E(0,o,s):E(-1,o,s-1)}function Wr(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i
break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1
return!0}function Vr(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r]
return n}function qr(e){return S(ee(e),function(){return"The f passed in grad(f) must be a function"}),function(t,n){var r=un(t,"x","tf.grad",null),i=null!=n?un(n,"dy","tf.grad"):null
return ze.tidy(function(){var t=ze.gradients(function(){return e(r)},[r],i),n=t.value,o=t.grads
return null!=i&&A(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Yr(o),o[0]})}}function Hr(e){return S(ee(e),function(){return"The f passed in grads(f) must be a function"}),function(t,n){S(Array.isArray(t),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"})
var r=cn(t,"args","tf.grads",null),i=null!=n?un(n,"dy","tf.grads"):null
return ze.tidy(function(){var t=ze.gradients(function(){return e.apply(void 0,r)},r,i),n=t.value,o=t.grads
return null!=i&&A(n.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Yr(o),o})}}function Gr(e){return S(ee(e),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(t,n){S(t instanceof we,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),S(null==n||n instanceof we,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"})
var r=ze.gradients(function(){return e(t)},[t],n),i=r.grads,o=r.value
return Yr(i),{grad:i[0],value:o}}}function Kr(e){return S(ee(e),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(t,n){S(Array.isArray(t)&&t.every(function(e){return e instanceof we}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),S(null==n||n instanceof we,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"})
var r=ze.gradients(function(){return e.apply(void 0,t)},t,n)
return null!=n&&A(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Yr(r.grads),r}}function $r(e,t){S(ee(e),function(){return"The f passed in variableGrads(f) must be a function"}),S(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof _e}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"})
var n=null!=t
if(!n)for(var r in t=[],ze.registeredVariables)t.push(ze.registeredVariables[r])
var i=n?t.filter(function(e){return!e.trainable}):null,o=t.length
S((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."})
var a=ze.gradients(e,t,null,!0),s=a.value,u=a.grads
S(u.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),S(0===s.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"})
var c={}
return t.forEach(function(e,t){null!=u[t]&&(c[e.name]=u[t])}),null!=i&&i.forEach(function(e){return c[e.name]=null}),{value:s,grads:c}}function Xr(e){return ze.customGrad(e)}function Yr(e){if(e.filter(function(e){return null==e}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Qr=xn({softmax_:function(e,t){void 0===t&&(t=-1)
var n=un(e,"logits","softmax")
if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t)
return Xr(function(e,n){var r=e.logSumExp([t],!0),i=e.toFloat().sub(r).exp()
return n([i]),{value:i,gradFunc:function(e,n){var r=n[0],i=e.mul(r)
return i.sub(i.sum([t],!0).mul(r))}}})(n)}}),Jr=xn({logSoftmax_:function(e,t){void 0===t&&(t=-1)
var n=un(e,"logits","logSoftmax")
if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t)
return Xr(function(e,n){var r=e.max(t,!0),i=e.sub(r),o=i.toFloat().sub(i.exp().sum(t,!0).log())
return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp()
return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),Zr=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.data.delete(e)},e}(),ei=function(){function e(){}return e.prototype.time=function(e){throw new Error("Not yet implemented.")},e.prototype.read=function(e){throw new Error("Not yet implemented.")},e.prototype.readSync=function(e){throw new Error("Not yet implemented.")},e.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},e.prototype.write=function(e,t){throw new Error("Not yet implemented.")},e.prototype.fromPixels=function(e,t){throw new Error("Not yet implemented.")},e.prototype.register=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.memory=function(){throw new Error("Not yet implemented.")},e.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fusedBatchMatMul=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.slice=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s,u){throw new Error("Not yet implemented")},e.prototype.unstack=function(e,t){throw new Error("Not yet implemented")},e.prototype.reverse=function(e,t){throw new Error("Not yet implemented")},e.prototype.concat=function(e,t){throw new Error("Not yet implemented")},e.prototype.neg=function(e){throw new Error("Not yet implemented")},e.prototype.add=function(e,t){throw new Error("Not yet implemented")},e.prototype.addN=function(e){throw new Error("Not yet implemented")},e.prototype.subtract=function(e,t){throw new Error("Not yet implemented")},e.prototype.multiply=function(e,t){throw new Error("Not yet implemented")},e.prototype.realDivide=function(e,t){throw new Error("Not yet implemented")},e.prototype.floorDiv=function(e,t){throw new Error("Not yet implemented")},e.prototype.sum=function(e,t){throw new Error("Not yet implemented")},e.prototype.prod=function(e,t){throw new Error("Not yet implemented")},e.prototype.unsortedSegmentSum=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.argMin=function(e,t){throw new Error("Not yet implemented")},e.prototype.argMax=function(e,t){throw new Error("Not yet implemented")},e.prototype.equal=function(e,t){throw new Error("Not yet implemented")},e.prototype.notEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.less=function(e,t){throw new Error("Not yet implemented")},e.prototype.lessEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.greater=function(e,t){throw new Error("Not yet implemented")},e.prototype.greaterEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},e.prototype.logicalAnd=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalOr=function(e,t){throw new Error("Not yet implemented")},e.prototype.where=function(e){throw new Error("Not yet implemented")},e.prototype.select=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.topk=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.min=function(e,t){throw new Error("Not yet implemented")},e.prototype.minimum=function(e,t){throw new Error("Not yet implemented")},e.prototype.mod=function(e,t){throw new Error("Not yet implemented")},e.prototype.max=function(e,t){throw new Error("Not yet implemented")},e.prototype.maximum=function(e,t){throw new Error("Not yet implemented")},e.prototype.all=function(e,t){throw new Error("Not yet implemented")},e.prototype.any=function(e,t){throw new Error("Not yet implemented")},e.prototype.squaredDifference=function(e,t){throw new Error("Not yet implemented")},e.prototype.ceil=function(e){throw new Error("Not yet implemented")},e.prototype.floor=function(e){throw new Error("Not yet implemented")},e.prototype.round=function(e){throw new Error("Not yet implemented")},e.prototype.sign=function(e){throw new Error("Not yet implemented")},e.prototype.isNaN=function(e){throw new Error("Not yet implemented")},e.prototype.isInf=function(e){throw new Error("Not yet implemented")},e.prototype.isFinite=function(e){throw new Error("Not yet implemented")},e.prototype.pow=function(e,t){throw new Error("Not yet implemented")},e.prototype.exp=function(e){throw new Error("Not yet implemented")},e.prototype.expm1=function(e){throw new Error("Not yet implemented")},e.prototype.log=function(e){throw new Error("Not yet implemented")},e.prototype.log1p=function(e){throw new Error("Not yet implemented")},e.prototype.sqrt=function(e){throw new Error("Not yet implemented")},e.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},e.prototype.square=function(e){throw new Error("Not yet implemented")},e.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},e.prototype.relu=function(e){throw new Error("Not yet implemented")},e.prototype.prelu=function(e,t){throw new Error("Not yet implemented")},e.prototype.elu=function(e){throw new Error("Not yet implemented")},e.prototype.eluDer=function(e,t){throw new Error("Not yet implemented")},e.prototype.selu=function(e){throw new Error("Not yet implemented")},e.prototype.int=function(e){throw new Error("Not yet implemented")},e.prototype.clip=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.abs=function(e){throw new Error("Not yet implemented")},e.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},e.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},e.prototype.softplus=function(e){throw new Error("Not yet implemented")},e.prototype.sin=function(e){throw new Error("Not yet implemented")},e.prototype.cos=function(e){throw new Error("Not yet implemented")},e.prototype.tan=function(e){throw new Error("Not yet implemented")},e.prototype.asin=function(e){throw new Error("Not yet implemented")},e.prototype.acos=function(e){throw new Error("Not yet implemented")},e.prototype.atan=function(e){throw new Error("Not yet implemented")},e.prototype.atan2=function(e,t){throw new Error("Not yet implemented")},e.prototype.sinh=function(e){throw new Error("Not yet implemented")},e.prototype.cosh=function(e){throw new Error("Not yet implemented")},e.prototype.tanh=function(e){throw new Error("Not yet implemented")},e.prototype.asinh=function(e){throw new Error("Not yet implemented")},e.prototype.acosh=function(e){throw new Error("Not yet implemented")},e.prototype.atanh=function(e){throw new Error("Not yet implemented")},e.prototype.erf=function(e){throw new Error("Not yet implemented")},e.prototype.step=function(e,t){throw new Error("Not yet implemented")},e.prototype.conv2d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2D=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPoolBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.avgPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPoolBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.reshape=function(e,t){throw new Error("Not yet implemented")},e.prototype.cast=function(e,t){throw new Error("Not yet implemented")},e.prototype.tile=function(e,t){throw new Error("Not yet implemented")},e.prototype.pad=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.transpose=function(e,t){throw new Error("Not yet implemented")},e.prototype.gather=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.gatherND=function(e,t){throw new Error("Not yet implemented")},e.prototype.scatterND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchToSpaceND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.spaceToBatchND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeBilinear=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeBilinearBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchNormalization=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){throw new Error("Not yet implemented")},e.prototype.multinomial=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.oneHot=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.cumsum=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.fft=function(e){throw new Error("Not yet implemented")},e.prototype.ifft=function(e){throw new Error("Not yet implemented")},e.prototype.complex=function(e,t){throw new Error("Not yet implemented")},e.prototype.real=function(e){throw new Error("Not yet implemented")},e.prototype.imag=function(e){throw new Error("Not yet implemented")},e.prototype.cropAndResize=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.depthToSpace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.split=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.sparseToDense=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fill=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.onesLike=function(e){throw new Error("Not yet implemented")},e.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},e.prototype.linspace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.dispose=function(){throw new Error("Not yet implemented")},e}()
function ti(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function ni(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function ri(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var o=e[e.length-i-1]
null==o&&(o=1)
var a=t[t.length-i-1]
if(null==a&&(a=1),1===o)n.unshift(a)
else if(1===a)n.unshift(o)
else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".")
n.unshift(o)}}return n}function ii(e,t,n,r,i,o,a){void 0===a&&(a="channelsLast")
var s,u=ui(t),c=u[0],l=u[1]
if("channelsLast"===a)s=[c,l,e[3],e[3]]
else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a)
s=[c,l,e[1],e[1]]}return oi(e,s,n,r,i,o,!1,a)}function oi(e,t,n,r,i,o,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast")
var u=[-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],f=u[3]
if("channelsLast"===s)c=e[0],l=e[1],h=e[2],f=e[3]
else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s)
c=e[0],f=e[1],l=e[2],h=e[3]}var d,p=t[0],v=t[1],m=t[3],g=ui(n),y=g[0],b=g[1],x=ui(r),w=x[0],_=x[1],R=li(p,w),E=li(v,_),C=function(e,t,n,r,i,o,a,s){var u,c,l
if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"}
var h=function(e,t,n,r,i,o){null==i&&(i=si(e,t,r))
var a=e[1],s=hi((e[0]-t+2*i)/r+1,o)
S(D(s),function(){return"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters"})
var u=hi((a-t+2*i)/r+1,o)
return S(D(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[s,u,1]}([t,n,1],o,0,r,e,s)
c=h[0],l=h[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/i)
var f=Math.max(0,(c-1)*r+o-t),d=Math.max(0,(l-1)*i+a-n),p=Math.floor(f/2),v=f-p,m=Math.floor(d/2)
u={top:p,bottom:v,left:m,right:d-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e)
u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),l=Math.ceil((n-a+1)/i)}return{padInfo:u,outHeight:c,outWidth:l}}(i,l,h,y,b,R,E,o),k=C.padInfo,A=C.outHeight,T=C.outWidth,O=a?m*f:m
return"channelsFirst"===s?d=[c,O,A,T]:"channelsLast"===s&&(d=[c,A,T,O]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:h,inChannels:f,outHeight:A,outWidth:T,outChannels:O,padInfo:k,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:v,effectiveFilterHeight:R,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:_,inShape:e,outShape:d,filterShape:t}}function ai(e,t,n,r,i,o,a){void 0===o&&(o=!1),void 0===a&&(a="channelsLast")
var s=[-1,-1,-1,-1,-1],u=s[0],c=s[1],l=s[2],h=s[3],f=s[4]
if("channelsLast"===a)u=e[0],c=e[1],l=e[2],h=e[3],f=e[4]
else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a)
u=e[0],f=e[1],c=e[2],l=e[3],h=e[4]}var d,p=t[0],v=t[1],m=t[2],g=t[4],y=ci(n),b=y[0],x=y[1],w=y[2],_=ci(r),R=_[0],E=_[1],C=_[2],k=function(e,t,n,r,i,o,a,s,u,c){var l,h,f,d
if("same"===e){var p=((h=Math.ceil(t/i))-1)*i+s-t,v=((f=Math.ceil(n/o))-1)*o+u-n,m=((d=Math.ceil(r/a))-1)*a+c-r,g=Math.floor(p/2),y=p-g,b=Math.floor(v/2),x=v-b,w=Math.floor(m/2)
l={top:b,bottom:x,left:w,right:m-w,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e)
l={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/i),f=Math.ceil((n-u+1)/o),d=Math.ceil((r-c+1)/a)}return{padInfo:l,outDepth:h,outHeight:f,outWidth:d}}(i,c,l,h,b,x,w,li(p,R),li(v,E),li(m,C)),S=k.padInfo,A=k.outDepth,T=k.outHeight,O=k.outWidth,I=o?g*f:g
return"channelsFirst"===a?d=[u,I,A,T,O]:"channelsLast"===a&&(d=[u,A,T,O,I]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:l,inWidth:h,inChannels:f,outDepth:A,outHeight:T,outWidth:O,outChannels:I,padInfo:S,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:p,filterHeight:v,filterWidth:m,dilationDepth:R,dilationHeight:E,dilationWidth:C,inShape:e,outShape:d,filterShape:t}}function si(e,t,n,r){void 0===r&&(r=1)
var i=li(t,r)
return Math.floor((e[0]*(n-1)-n+i)/2)}function ui(e){return"number"==typeof e?[e,e]:e}function ci(e){return"number"==typeof e?[e,e,e]:e}function li(e,t){return t<=1?e:e+(e-1)*(t-1)}function hi(e,t){if(!t)return e
switch(t){case"round":return Math.round(e)
case"ceil":return Math.ceil(e)
case"floor":return Math.floor(e)
default:throw new Error("Unknown roundingMode "+t)}}function fi(e){var t=ui(e),n=t[0],r=t[1]
return 1===n&&1===r}function di(e,t){return fi(e)||fi(t)}function pi(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone()
var r=Pn(e.shape),i=e.toFloat(),o=n.complex(i,r)
return r.dispose(),i.dispose(),o}if(!G(e.dtype,t))return we.make(e.shape,{dataId:e.dataId},t)
if("complex64"===e.dtype){var a=n.real(e)
return o=a.cast(t),a.dispose(),o}if("int32"===t)return n.int(e)
if("bool"===t){var s=kn(0,e.dtype)
return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function vi(e,t){return we.make(t,{dataId:e.dataId},e.dtype)}function mi(e,t,n){var r=(t-e)/(n-1),i=ae(n,"float32")
i[0]=e
for(var o=1;o<i.length;o++)i[o]=i[o-1]+r
return Sn(i,"float32")}var gi=Object.freeze({castTensor:pi,reshapeTensor:vi,linspaceImpl:mi,upcastType:Ie,axesAreInnerMostDims:ln,combineLocations:hn,computeOutAndReduceShapes:fn,expandShapeToKeepDim:dn,assertAxesAreInnerMostDims:pn,getAxesPermutation:vn,getUndoAxesPermutation:mn,getInnerMostAxes:gn,getBroadcastDims:ti,getReductionAxes:ni,assertAndGetBroadcastShape:ri,assertParamsConsistent:yn,computeOutShape:bn,computePool2DInfo:ii,computeConv2DInfo:oi,computeConv3DInfo:ai,computeDefaultPad:si,tupleValuesAreOne:fi,eitherStridesOrDilationsAreOne:di})
function yi(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".")
for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2]
return n}function bi(e,t){return{real:e[2*t],imag:e[2*t+1]}}function xi(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function wi(e,t,n){var r=(n?2:-2)*Math.PI*(e/t)
return{real:Math.cos(r),imag:Math.sin(r)}}function _i(e,t,n,r,i){for(var o=Array.from(t).map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>i}).sort(function(e,t){return t.score-e.score}),a=[],s=0;s<o.length;s++){var u=o[s],c=u.score,l=u.boxIndex
if(c<i)break
for(var h=!1,f=a.length-1;f>=0;--f)if(Ri(e,l,a[f])>=r){h=!0
break}if(!h&&(a.push(l),a.length>=n))break}return Sn(a,"int32")}function Ri(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(s-o)*(u-a),p=(h-c)*(f-l)
if(d<=0||p<=0)return 0
var v=Math.max(o,c),m=Math.max(a,l),g=Math.min(s,h),y=Math.min(u,f),b=Math.max(g-v,0)*Math.max(y-m,0)
return b/(d+p-b)}function Ei(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice()
return t.map(function(t){i[n]=t
var o=e.slice(r,i)
return r[n]+=t,o})}function Ci(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r]
var i=rr(n,e.dtype)
for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=o[s]%e.shape[s]
var u=e.locToIndex(a)
i.values[r]=e.values[u]}return i.toTensor()}function ki(e,t,n,r,i){for(var o=t[t.length-1],a=[e.length/o,o],s=a[0],u=a[1],c=U(n,s*r),l=U("int32",s*r),h=0;h<s;h++){for(var f=h*u,d=e.subarray(f,f+u),p=[],v=0;v<d.length;v++)p.push({value:d[v],index:v})
p.sort(function(e,t){return t.value-e.value})
var m=h*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r)
for(v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}var b=t.slice()
return b[b.length-1]=r,[En(c,b,n),En(l,b,"int32")]}function Si(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r)
var i=rr(e,"int32"),o=rr([n.length,e.length],"int32")
for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*e.length
o.values.set(a,s)}return o.toTensor()}var Ai=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t})
var n=[]
this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")})
var r=this.variableNames.map(function(e){return"v"+e}).join(" + ")
this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Ti=function(e,t){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t})
var n=[]
this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")})
var r=this.variableNames.map(function(e){return"v"+e}).join(" + ")
this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Oi=function(e,t,n){this.variableNames=["A"]
var r=e.windowSize,i=e.batchSize,o=e.inSize,a=Math.ceil(o/r)
n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a]
var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"
this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}
function Ii(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function Ni(e,t){return 1===t?[e]:Ii(e,t)}function Di(){var e,t,n,r,i,o,a,s,u,c
return 2===x.getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 0. || val == 0.) ? false : true;\n      }\n    ",u="\n      const float INFINITY = uintBitsToFloat(uint(0x7f800000));\n    ",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Pi(e,t,n){void 0===n&&(n="index")
var r=ne(t)
return r.map(function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"}).join("")}function Mi(e){var t=ne(e).map(function(e){return e.toString()})
return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Fi="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n"
var Li="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Bi="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ji="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zi="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n"
function Ui(e){return"offset"+e}function Wi(e){var t=e.name,n=I(e.shapeInfo.logicalShape)
return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Vi(e){if(e<=1)return"int"
if(2===e)return"ivec2"
if(3===e)return"ivec3"
if(4===e)return"ivec4"
if(5===e)return"ivec5"
if(6===e)return"ivec6"
throw Error("GPU for rank "+e+" is not yet supported")}function qi(e,t){var n=JSON.parse(JSON.stringify(e))
return n.shapeInfo.logicalShape=t,n}function Hi(e,t){return t.map(function(t){return e[t]}).join(", ")}var Gi=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,S(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."})
var i=e[e.length-1],o=Math.ceil(i/t)
this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA")
var a,s,u=this.outputShape,c=u.length,l=Vi(c),h=Ni("coords",c)
if(1===o){var f=Vi(s=c+1)
a="\n        "+f+" sourceLocR = "+f+"("+h.join()+", 0);\n        ++"+h[c-1]+";\n        "+f+" sourceLocG = "+f+"("+h.join()+", 0);\n        ++"+h[c-2]+";\n        "+f+" sourceLocA = "+f+"("+h.join()+", 0);\n        --"+h[c-1]+";\n        "+f+" sourceLocB = "+f+"("+h.join()+", 0);\n        --"+h[c-2]+";"}else s=c,a="\n        "+l+" sourceLocR = coords;\n        ++"+h[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+h[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+h[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+h[c-2]+";"
var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],v=d.map(function(e){return"int "+e}),m=Ni("sourceLocR",s-1).concat("inIdx.r"),g=Ni("sourceLocG",s-1).concat("inIdx.g"),y=Ni("sourceLocB",s-1).concat("inIdx.b"),b=Ni("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",_="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",R=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }"
this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+R+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+h[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+h[c-2]+" < "+(u[c-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Ki=function(e){this.variableNames=["dy"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,h=1/(t*n)
this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+h+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},$i=function(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ri(e,t),ri(e,n)
var a="0.0"
null!=r&&(ri(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()")
var s="1.0"
null!=i&&(ri(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},Xi=function(e,t,n,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],ri(e,t),ri(e,n)
var a="vec4(0.0)"
null!=r&&(ri(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()")
var s="vec4(1.0)"
null!=i&&(ri(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Yi=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ri(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Qi="return a + b;",Ji="return a - b;",Zi="return a * b;",eo=function(e,t,n){this.variableNames=["A","B"],this.outputShape=ri(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},to=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=ri(t,n)
var i=this.outputShape.length,o=""
if(r)if(0===i||1===I(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        "
else if(o="\n          "+Vi(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          "
else{var a=Ni("coords",i)
o+="\n            bool nextRowOutOfBounds =\n              ("+a[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+a[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},no=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, min, max));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this
return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"min"),n.maxLoc=r.getUniformLocationNoThrow(i,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ro=function(){function e(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(min), vec4(max)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this
return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"min"),n.maxLoc=r.getUniformLocationNoThrow(i,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),io=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},oo=function(e){this.outputShape=[],this.outputShape=bn(e,1),this.variableNames=e.map(function(e,t){return"T"+t})
var t=new Array(e.length-1)
t[0]=e[0][1]
for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1]
var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"]
for(n=1;n<t.length;n++){var i=t[n-1]
r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=t.length,a=t[t.length-1]
r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},ao=function(e,t){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=bn(e,t)
var n=this.outputShape,r=n.length,i=Vi(r),o=Ni("coords",r),a=["x","y","z","w","u","v"].slice(0,r)
this.variableNames=e.map(function(e,t){return"T"+t})
var s=new Array(e.length-1)
s[0]=e[0][t]
for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t]
var c=a[t],l="vec2("+a.slice(-2).join()+")",h=a.join(),f="if ("+c+" < "+s[0]+")\n          return getChannel(getT0("+h+"), "+l+");"
for(u=1;u<s.length;u++){var d=s[u-1]
f+="\n        else if ("+c+" < "+s[u]+") {\n          "+c+" -= "+d+";\n          return getChannel(getT"+u+"("+h+"), "+l+");\n        }"}var p=s.length
f+="\n        else {\n          "+c+" -= "+s[s.length-1]+";\n          return getChannel(getT"+p+"("+h+"), "+l+");\n        }",this.userCode="\n      float getValue("+a.map(function(e){return"int "+e})+") {\n        "+f+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n        if (++"+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n        if (++"+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            --"+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "},so=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},uo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left
this.userCode="\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},co=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left
this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},lo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left
this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ho=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels
this.userCode="\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},po=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape
var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,c=4*Math.floor(e.inChannels/4),l=e.inChannels%4
this.userCode="\n      const ivec2 strides = ivec2("+r+", "+i+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+o+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+a+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+c+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===l)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+c+") *\n                getW(wR, wC, "+c+", d2);\n            } else if ("+(2===l)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===l)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1),\n                getX(batch, xR, xC, "+c+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2),\n                getW(wR, wC, "+c+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape
var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,h=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4
this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape
var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,h=e.outChannels/e.inChannels
this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+l+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},go=function(e){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=e.outShape
for(var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,h=l,f="int xR; int xC; int xCOffset;",d=0;d<c;d++)for(var p=0;p<l;p++)f+="\n          vec4 xTexelR"+d+"C"+2*p+" = vec4(0.);\n          vec4 wR"+d+"C"+p+" = vec4(0.);\n          vec4 xR"+d+"C"+p+" = vec4(0.);"
for(d=0;d<c;d++)for(var v=0;v<h;v++){if(f+="\n          xR = xRCorner + "+d*s+";\n          xC = xCCorner + "+(p=2*v)*u+";\n        ",1===a){if(p<l&&(f+=i%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+d+"C"+p+" = vec4(previous.zw, xTexelR"+d+"C"+p+".xy);\n                } else {\n                  xR"+d+"C"+p+" = vec4(0, 0, xTexelR"+d+"C"+p+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+t+" && xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = xTexelR"+d+"C"+p+";\n              ",p+1<l)){var m=i%2==0?C(u):u
u%2==0&&i%2==1||u%2!=0&&i%2!=1?(f+="\n                  xCOffset = xC + "+i%2+" + "+m+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(f+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+t+" &&\n                      xCOffset >= 0 && xCOffset < "+n+") {\n                      xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+d+"C"+p+" = vec4(0.);\n                    }\n                  "),f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".xy);\n                "):f+="\n                  xCOffset = xC + "+m+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+d+"C"+(p+1)+" = xTexelR"+d+"C"+(p+2)+";\n                "}}else p<l&&(f+="\n              if(xR >= 0 && xR < "+t+") {\n            ",i%2==1?(f+="\n                xCOffset = xC + 1 - "+a+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n              ",p+1<l&&(f+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+a+";\n                  if(xCOffset >= 0 && xCOffset < "+n+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+d+"C"+(p+1)+" = vec4(xTexelR"+d+"C"+(p+2)+".xy, final.xy);\n                ")):(f+="\n                if(xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+a+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".xy, xTexelR"+d+"C"+(p+2)+".xy);\n              ",p+1<l&&(f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n                ")),f+="}")
p<l&&(f+="\n            vec4 wTexelR"+d+"C"+p+" = getW("+d+", "+p+", d1, q);\n            wR"+d+"C"+p+" = vec4(wTexelR"+d+"C"+p+".xz, wTexelR"+d+"C"+p+".xz);\n          ",p+1<l&&(f+="\n              vec4 wTexelR"+d+"C"+(p+1)+" = getW("+d+", "+(p+1)+", d1, q);\n              wR"+d+"C"+(p+1)+" =\n                vec4(wTexelR"+d+"C"+(p+1)+".xz, wTexelR"+d+"C"+(p+1)+".xz);"))}for(d=0;d<c;d++)for(p=0;p<l;p++)f+="result += xR"+d+"C"+p+" * wR"+d+"C"+p+";"
this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},yo=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[]
var o=e[0],a=e[1],s=e[2],u=e[3],c=t[0],l=n[0],h=n[1]
this.outputShape=[c,l,h,u]
var f="bilinear"===r?1:0,d=[a-1+".0",s-1+".0"],p=d[0],v=d[1],m=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=m[0],y=m[1],b=m[2],x=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],_=x[1],R=x[2]
this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+_+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+R+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},bo=function(e,t,n){this.variableNames=["x"],this.outputShape=e
var r=e.length,i=e[e.length-1],o=n?"<":">"
this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Vi(r)+" coords = getOutputCoords();\n        int end = "+xo(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+xo(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===r)return""+t
if(2===r)return t+".x, "+t+".y"
if(3===r)return t+".x, "+t+".y, "+t+".z"
if(4===r)return t+".x, "+t+".y, "+t+".z, "+t+".w"
throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}
function xo(e,t){if(1===e)return""+t
if(2===e)return t+".y"
if(3===e)return t+".z"
if(4===e)return t+".w"
throw Error("Cumulative sum for rank "+e+" is not yet supported")}var wo,_o,Ro=function(e,t){this.variableNames=["A"]
var n=Di()
this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Pi(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Eo=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0
var n=Di()
this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Pi(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Co=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),ko=function(e){this.variableNames=["A"]
var t=Di()
this.outputShape=e,this.userCode="\n      "+Fi+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},So=function(e){this.variableNames=["A"],this.usesPackedTextures=!0
var t=Di()
this.outputShape=e,this.userCode="\n      "+Fi+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Ao=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"]
var r=Di(),i=t[0],o=t[1]
this.outputShape=e
var a="result"
n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Mi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex /= 4;\n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},To=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"]
var r=Di(),i=t[0],o=t[1]
this.outputShape=e
var a="",s="result"
n&&(s="floor(result * 255. + 0.5)")
for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c
a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex /= 4;\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Mi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Oo=function(e,t,n){this.variableNames=["real","imag"]
var r=t[1]
this.outputShape=t
var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0"
this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Io=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),No=function(e){this.variableNames=["A"]
var t=Di(),n=e[0],r=e[1]
this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Do=function(e){this.variableNames=["A"]
var t=Di(),n=e[0],r=e[1]
this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Po=function(e,t,n){this.variableNames=["A","indices"]
var r=e.slice()
r[n]=t,this.outputShape=r,this.rank=r.length
var i=Vi(this.rank),o=function(e,t){var n=e.length
if(n>4)throw Error("Gather for rank "+n+" is not yet supported")
if(1===n)return"int(getIndices(resRC))"
for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<e.length;o++)o===t?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o])
return i.join()}(e,n)
this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Mo=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n
var r=Vi(t.length),i=Vi(n.length),o=this.sliceDim>1?"strides[j]":"strides"
this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "}
function Fo(e,t){return[t,e]}function Lo(e){var t=I(e)
return M(Math.ceil(t/4))}function Bo(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function jo(e,t){var n=Di()
return Je(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function zo(e,t){return at(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Uo(e,t){return st(e,t,new Uint16Array([0,1,2,2,1,3]))}function Wo(e,t){var n,r,i,o,a,s,u,c,l=e
return 2===x.getNumber("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,i=l.RGBA16F,o=l.RGBA32F,a=l.RED,s=4,u=1,c=l.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=l.RGBA,a=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c}}function Vo(e,t,n,r,i,o,a){ct(n,r)
var s=ut(e,t),u=e.TEXTURE_2D
return Ge(e,t,function(){return e.bindTexture(u,s)}),Ge(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Ge(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Ge(e,t,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Ge(e,t,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Ge(e,t,function(){return e.texImage2D(u,0,i,n,r,0,o,a,null)}),Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function qo(e,t,n,r,i){var o=Fo(n,r)
return Vo(e,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function Ho(e,t,n,r,i){var o=Fo(n,r)
return Vo(e,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Go(e,t,n,r,i){var o=Fo(n,r)
return Vo(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Ko(e,t,n,r,i){var o=Bo(n,r)
return Vo(e,t,o[0],o[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function $o(e,t,n,r,i){var o=Bo(n,r)
return Vo(e,t,o[0],o[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function Xo(e,t,n,r){return Ge(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),ht(e,t,n,"clipSpacePos",r,3,20,0)&&ht(e,t,n,"uv",r,2,20,12)}function Yo(e,t,n,r,i,o,a){var s,u,c
Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*i*4),u=e.FLOAT,c=a.internalFormatPackedFloat),s.set(o),Ge(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,i,0,e.RGBA,u,s)}),Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Qo(e,t,n,r){Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Ge(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Ge(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Ge(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Jo(e,t,n,r,i){var o=e.createBuffer()
Ge(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)})
var a=16*n*r
return Ge(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),Ge(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Ge(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),o}function Zo(e,t,n){var r=e,i=new Float32Array(n)
return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function ea(e,t,n,r,i){var o=Fo(n,r),a=o[0],s=o[1],u=new Uint8Array(n*r*4)
return Ge(e,t,function(){return e.readPixels(0,0,a,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function ta(e,t,n,r,i,o,a,s){var u=e,c=new Float32Array(function(e,t){var n=Bo(o,a)
return n[0]*n[1]*4}())
return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function na(e,t,n,r){var i=new Float32Array(n*r*4)
return Ge(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)}),i}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(wo||(wo={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(_o||(_o={}))
var ra=Object.freeze({createVertexShader:jo,createVertexBuffer:zo,createIndexBuffer:Uo,getTextureConfig:Wo,createFloat32MatrixTexture:qo,createFloat16MatrixTexture:Ho,createUnsignedBytesMatrixTexture:Go,createPackedMatrixTexture:Ko,createFloat16PackedMatrixTexture:$o,bindVertexProgramAttributeStreams:Xo,uploadDenseMatrixToTexture:Yo,uploadPixelDataToTexture:Qo,createBufferFromOutputTexture:Jo,downloadFloat32MatrixFromBuffer:Zo,downloadByteEncodedFloatMatrixFromOutputTexture:ea,downloadPackedMatrixFromBuffer:ta,downloadMatrixFromPackedOutputTexture:na}),ia=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[]
var t=x.getNumber("WEBGL_VERSION")
null!=e?(this.gl=e,qe(t,e)):this.gl=He(t),1===x.getNumber("WEBGL_VERSION")?(this.textureFloatExtension=Qe(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),x.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Qe(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Qe(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=zo(this.gl,this.debug),this.indexBuffer=Uo(this.gl,this.debug),this.framebuffer=lt(this.gl,this.debug),this.textureConfig=Wo(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return x.getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this
if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.")
var t=this.gl
Ge(t,this.debug,function(){return t.finish()}),Ge(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Ge(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Ge(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Ge(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Ge(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),qo(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Ho(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Go(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Qo(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),Yo(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),$o(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Ko(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this
this.throwIfDisposed(),this.outputTexture===e&&(gt(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ge(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this
return this.downloadMatrixDriver(e,function(){return ea(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,o){return ta(this.gl,e,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return Zo(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e)
var r=Jo(this.gl,this.debug,t,n,this.textureConfig)
return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl)
return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this
if(x.getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0)
e.flush(),n=function(){var e=i.clientWaitSync(o,0,0)
return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0}
return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this
return this.downloadMatrixDriver(e,function(){return na(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed()
var t=this.gl,n=Ze(t,this.debug,e),r=jo(t,this.debug),i=rt(t,this.debug)
return Ge(t,this.debug,function(){return t.attachShader(i,r)}),Ge(t,this.debug,function(){return t.attachShader(i,n)}),it(t,this.debug,i),this.debug&&ot(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Xo(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this
this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Ge(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this
this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&ot(this.gl,this.debug,this.program),Ge(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?dt(this.gl,this.debug,e,t):pt(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this
return this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),vt(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed()
var r=Bo(t,n),i=r[0],o=r[1]
this.setOutputMatrixTextureDriver(e,i,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&ot(this.gl,this.debug,this.program),yt(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram()
var e=this.gl
this.debug&&this.debugValidate(),Ge(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this
this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Qe(this.gl,this.debug,2===x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery()
return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT()
return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1()
e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2()
t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return m(this,void 0,void 0,function(){var t=this
return g(this,function(n){switch(n.label){case 0:return[4,L(function(){return t.disposed||t.isQueryAvailable(e,x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})]
case 1:return n.sent(),[2,this.getQueryTime(e,x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null
if(2===t){var n=this.gl
return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1()
return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0
if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE)
return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this
return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)()
this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this
this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||L(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),mt(this.gl,this.debug,e,this.framebuffer),this.debug&&yt(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(mt(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yt(this.gl)):gt(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e)
var n=t()
return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed()
var r=this.gl
mt(r,this.debug,e,this.framebuffer),this.debug&&yt(r),this.outputTexture=e,Ge(r,this.debug,function(){return r.viewport(0,0,t,n)}),Ge(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this
this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return i.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}()
function oa(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs")
e.forEach(function(e,n){var r=e.logicalShape,i=t[n],o=i.shape
if(!N(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match")
if(!e.isUniform||!i.isUniform){var a=e.texShape,s=i.isUniform?null:i.texData.texShape
if(!N(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var aa=function(e,t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,h=s.left,f=s.top,d=i*r,p=Di()
this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex >= "+e[1]+" || pos >= "+e[0]+") continue;\n\n            int offsetY = int(blockIndex / ("+u+")) * "+a+" - "+f+";\n            int d0 = offsetY + "+l+" * (pos / "+d+");\n\n            if(d0 >= "+t[0]+" || d0 < 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+h+".);\n            int d1 = offsetX + "+c+" * (int(mod(float(pos), "+d+".) / "+i+".));\n\n            if(d1 >= "+t[1]+" || d1 < 0) continue;\n\n            vec2 innerDims = vec2(d1, int(mod(float(pos), "+i+".)));\n            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),\n                                              int(innerDims.y)), innerDims);\n          }\n        }\n\n        "+p.output+" = result;\n      }\n    "},sa=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[]
var o,a=t,s=e[3]-1
this.outputShape=e
var u="float("+n+") + float("+r+") * sum"
o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},ua=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},ca=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0
var o,a=t,s=e[3]-1
this.outputShape=e
var u="float("+n+") + float("+r+") * sum"
o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},la=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape
var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,u=i*o-1
this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ha=function(e,t,n,r,i,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=t
var a=n?e[1]:e[2],s=Math.ceil(a/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",l=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",d=""
o&&(f="vec4 activation(vec4 x) {\n        "+o+"\n      }",d="result = activation(result);")
var p=i?"result += getBiasAtOutCoords();":""
i&&this.variableNames.push("bias"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          result += ("+l[0]+" * "+h[0]+") + ("+l[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+d+"\n\n        setOutput(result);\n      }\n    "},fa=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),da=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},pa=function(e){this.variableNames=["A"],this.outputShape=e
var t=e.length
if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      "
else{var n=Ni("rc",t),r=Vi(t),i=function(e,t,n){if(1===e)return"rc > "+t[0]
for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||")
return r}(t,e,n),o=function(e,t,n,r){if(1===e)return""
var i=r.slice(-2)
return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),a=2;a<e;a++)o=t[t.length-1-a]+","+o
n.push(o)}return n}(n,t)
return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n)
this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},va=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]})
var r=e.length,i=Vi(r),o=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r)
this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},ma=function(e,t,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]})
for(var r=e.length,i=Vi(r),o=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),s=Ni("rc",r),u=Ni("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",h=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,v=1===r?2:4;p<v;p++)d+="\n        "+h[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      "
d+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},ga=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.")
var r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,h=e.padInfo.left
this.outputShape=e.outShape
var f="avg"===t,d="0.0"
if(f||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+l+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "
else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])"
"avg"===t&&(p="avgValue / count")
var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    "
this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+l+", "+h+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},ya=function(e,t){this.variableNames=["x"]
var n=e.windowSize,r=e.batchSize,i=e.inSize,o=Math.ceil(i/n)
this.outputShape=[r,o]
var a="0.0",s=""
"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max")
var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])"
"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue")
var c=4*Math.floor(n/4),l=n%4,h="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4"
"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4")
var d=""
i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+u+");\n      }\n    "},ba=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
for(var n="",r=0;r<4;r++){var i="thisRC = rc;"
r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Pi(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Mi(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},xa=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape
var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?i-1:i,n&&u>1?o-1:o],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},wa=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n]
this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},_a=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n]
this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Ra=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape
var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?i-1:i,n&&u>1?o-1:o],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ea=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0"
this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ca=function(e,t){this.variableNames=["x"]
var n=e.length
if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported")
if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=Vi(n)
this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},ka=function(e,t){this.variableNames=["x"],this.usesPackedTextures=!0
var n=e.length
if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported")
this.outputShape=e
var r=Ni("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Vi(n)
function s(n){var r=e.map(function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)})
return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+s(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Sa=function(e,t,n,r,i,o,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o
var s=Vi(i.length),u=Vi(o.length),c=""
1===n?c="i":2===n&&(c="i, j")
var l="getIndices("+c+")",h=""
1===r?h="i":2===r&&(h="i, coords[1]")
var f="getUpdates("+h+")",d=t>1?"strides[j]":"strides"
this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Aa=function(e,t){this.variableNames=["x","segmentIds"]
var n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n)
this.outputShape=[r,a]
var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l=""
i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ")
var h=""
i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ta=function(e,t,n){var r,i
if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported")
if(1===n)i="resRC",r="resRC"
else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&a.push(""+o[u])
r=a.join(),i=s.join()}var c=Vi(n)
this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Oa=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length
var t,n=Vi(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc"
if(e<=6)return Ia.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",")
throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank)
t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+Ia[t]+" = start["+t+"] + coords."+Ia[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")")
return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Ia=["x","y","z","w","u","v"],Na=function(){function e(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length
var t=Vi(this.rank),n=Ni("coords",this.rank),r=Ni("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+i+")",a="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n")
this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+" \n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")")
return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Da=function(e,t,n,r){this.variableNames=["x"]
var i=n.filter(function(e,t){return-1===r.indexOf(t)})
this.outputShape=i
var o=n.length,a=Vi(n.length),s=Vi(i.length),u=""
if(1===o)u="coords * strides + begin"
else{var c=0
u=n.map(function(e,t){return-1===r.indexOf(t)?(c++,1===i.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(c-1)+"] * strides["+t+"] + begin["+t+"]"):"begin["+t+"]"}).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},Pa=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=Ma(t,n),o=Fa(e,i,n)
if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log()
var a=this.freeTextures[o].shift()
return this.usedTextures[o].push(a),a}return this.numUsedTextures++,this.log(),i===_o.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===_o.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===_o.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===_o.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===_o.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=Fa(t,Ma(n,r),r)
i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--
var o=this.usedTextures[i],a=o.indexOf(e)
if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager")
o.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures
console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this
if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)})
for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)})
this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}()
function Ma(e,t){if(e===wo.UPLOAD)return _o.PACKED_2X2_FLOAT32
if(e===wo.RENDER||null==e)return t?x.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?_o.PACKED_2X2_FLOAT32:_o.PACKED_2X2_FLOAT16:x.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?_o.UNPACKED_FLOAT32:_o.UNPACKED_FLOAT16
if(e===wo.DOWNLOAD||e===wo.PIXELS)return _o.PACKED_4X1_UNSIGNED_BYTE
throw new Error("Unknown logical texture type "+e)}function Fa(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var La=function(e,t){this.variableNames=["A"]
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r]
this.outputShape=n,this.rank=n.length
var i=Vi(this.rank),o=function(e){var t=e.length
if(t>5)throw Error("Tile for rank "+t+" is not yet supported")
if(1===t)return"imod(resRC, "+e[0]+")"
for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")")
return r.join()}(e)
this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Ba=function(e,t){this.variableNames=["A"]
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]]
this.outputShape=n,this.rank=n.length
var i=Vi(this.rank),o=function(e){var t=e.length
if(t>6)throw Error("Transpose for rank "+t+" is not yet supported")
for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i]
return r.join()}(t)
this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},ja=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]]
if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.")
var i=Vi(this.rank),o=Ii("rc",this.rank),a=new Array(this.rank)
for(r=0;r<t.length;r++)a[t[r]]=o[r]
var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+s+")"
this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},za=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ua="if (isnan(x)) return x;",Wa=Ua+"\n  return (x < 0.0) ? 0.0 : x;\n",Va="return exp(x);",qa="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ha=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ga=function(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
var t=e.length,n=Ni("rc",t),r=Vi(t),i=function(e,t){if(1===e)return"rc"
for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",")
return n}(t,n),o=n.slice(-2),a=t<=1?"rc":"vec2("+o.join(",")+")"
this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},Ka={},$a=600,Xa=function(){function e(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!x.getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device")
if(null==e){var t=He(x.getNumber("WEBGL_VERSION"))
this.binaryCache=(n=x.getNumber("WEBGL_VERSION"))in Ka?Ka[n]:(Ka[n]={},Ka[n]),this.gpgpu=new ia(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas
var n
this.textureManager=new Pa(this.gpgpu),this.numMBBeforeWarning=null==x.global.screen?1024:x.global.screen.height*x.global.screen.width*window.devicePixelRatio*$a/1024/1024,this.texData=new Zr(this,ze)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered")
this.texData.set(e,{shape:t,dtype:n})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null")
var n=[e.height,e.width],r=[e.height,e.width,t]
if(x.getBool("IS_BROWSER")){if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e.data instanceof Uint8Array))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name)
if(e instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object")
this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),e=this.fromPixels2DContext.canvas}}var i,o,a=this.makeTensorHandle(n,"int32")
if(this.texData.get(a.dataId).usage=wo.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(a.dataId),e),x.getBool("WEBGL_PACK")){i=new Do(r)
var s=this.makePackedTensor(i.outputShape,a.dtype)
o=this.compileAndRun(i,[a],s)}else i=new No(r),o=this.compileAndRun(i,[a])
return this.disposeData(a.dataId),o},e.prototype.makeTensorHandle=function(e,t){var n={}
return this.register(n,e,t),{dataId:n,shape:e,dtype:t}},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null")
if(x.getBool("DEBUG"))for(var n=0;n<t.length;n++){var r=t[n]
if(!Xe(r))throw Error("The value "+r+" cannot be represented on this device.")}var i=this.texData.get(e)
if("complex64"===i.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).")
this.releaseGPUData(e),i.usage=wo.UPLOAD,i.values=t},e.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,o=t.slice,a=t.shape
if(null!=o){var s=new za(a,"return x;"),u=this.compileAndRun(s,[{dataId:e,shape:a,dtype:r}]),c=this.readSync(u.dataId)
return u.dispose(),c}if(null!=n)return this.convertAndCacheOnCPU(e)
if("string"===r)return n
var l,h,f=null!=this.activeTimers
return f&&(l=performance.now()),h="complex64"===r?yi(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=performance.now()-l),this.convertAndCacheOnCPU(e,h)},e.prototype.read=function(e){return m(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,b,w,_,R
return g(this,function(g){switch(g.label){case 0:if(this.pendingRead.has(e))return n=this.pendingRead.get(e),[2,new Promise(function(e){return n.push(e)})]
if(r=this.texData.get(e),i=r.values,o=r.shape,a=r.slice,s=r.dtype,u=r.complexTensors,null!=a)return c=new za(o,"return x;"),l=this.compileAndRun(c,[{dataId:e,shape:o,dtype:s}]),h=this.read(l.dataId),l.dispose(),[2,h]
if(null!=i)return[2,this.convertAndCacheOnCPU(e)]
if(!x.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===x.getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.")
return f=null,"complex64"!==s&&x.get("WEBGL_BUFFER_SUPPORTED")&&(d=this.decode(e),e=d.dataId,p=this.texData.get(d.dataId),f=(t=this.gpgpu).createBufferFromTexture.apply(t,[p.texture].concat(Lo(o)))),this.pendingRead.set(e,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()]
case 1:g.sent(),g.label=2
case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])]
case 3:return m=g.sent(),y=m[0],b=m[1],v=yi(y,b),[3,5]
case 4:null==f?v=this.getValuesFromTexture(e):(w=I(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,w),this.disposeData(e)),g.label=5
case 5:return _=this.convertAndCacheOnCPU(e,v),R=this.pendingRead.get(e),this.pendingRead.delete(e),R.forEach(function(e){return e(_)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,_]}})})},e.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),i=r.shape,o=r.dtype,a=r.isPacked,s=I(i)
if(x.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),c=this.texData.get(u.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[c.texture].concat(Lo(i))).subarray(0,s)
return this.disposeData(u.dataId),l}var h=x.getBool("WEBGL_PACK")&&!0===a,f=h?Et(i):i,d=this.makeTensorHandle(f,"float32")
d.size=I(i),this.texData.get(d.dataId).usage=wo.DOWNLOAD
var p=Ht(function(){var t=h?new So(f):new ko(f)
return n.compileAndRun(t,[{shape:f,dtype:o,dataId:e}],d,null)}),v=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,s)
return this.disposeData(d.dataId),m},e.prototype.time=function(e){return m(this,void 0,void 0,function(){var t,n,r,i,o,a,s
return g(this,function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=O(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),o=O(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(i)]
case 1:return a=u.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:k(a),getExtraProfileInfo:function(){return a.map(function(e,t){return{name:o[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){return x.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e)
else if(this.texData.has(e)){this.releaseGPUData(e)
var t=this.texData.get(e).complexTensors
null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}},e.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,o=t.usage,a=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u)
c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,a)))
var l=this.texData.get(e)
l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getCPUBackend=function(){return x.getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=ze.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(e,t){var n=this
return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(e,t){var n=this.makeOutputArray(e.shape,"complex64")
return this.texData.get(n.dataId).complexTensors={real:ze.keep(e.clone()),imag:ze.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n)
if(0===I(n))return En([],n,e.dtype)
var r=this.texData.get(e.dataId).isPacked,i=Wr(e.shape,t,n)
if(r||!i){var o=x.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Na(n):new Oa(n),a=o.getCustomSetupFunc(t)
return this.compileAndRun(o,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},e.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=we.make(n,{},e.dtype,this),o=this.texData.get(i.dataId)
Object.assign(o,r),o.shape=n,o.dtype=e.dtype
var a=Vr(t,e.strides)
r.slice&&(a+=r.slice.flatOffset),o.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId}
var s=this.dataRefCount.get(o.slice.origDataId)||1
return this.dataRefCount.set(o.slice.origDataId,s+1),i},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s,u){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r,i,o,a,s,u)
var c=jr(e.shape,t,n,r,i,o,a,s,u),l=c[0],h=c[1],f=c[2],d=h.filter(function(e,t){return-1===f.indexOf(t)})
if(d.some(function(e){return 0===e}))return En([],d)
var p=new Da(l,r,h,f)
return this.compileAndRun(p,[e])},e.prototype.reverse=function(e,t){var n=x.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ka(e.shape,t):new Ca(e.shape,t)
return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t)
if(1===e.length)return e[0]
if(e.length>x.getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(e.length/2),r=this.concat(e.slice(0,n),t),i=this.concat(e.slice(n),t)
return this.concat([r,i],t)}if(x.getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var o=new ao(e.map(function(e){return e.shape}),t)
return this.compileAndRun(o,e)}var a=bn(e.map(function(e){return e.shape}),t),s=e.map(function(e){return e.as2D(-1,I(e.shape.slice(t)))}),u=new oo(s.map(function(e){return e.shape}))
return this.compileAndRun(u,s).reshape(a)},e.prototype.neg=function(e){var t=new za(e.shape,"return -x;")
return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],s=e.shape[0]
if((1===i||1===o)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]))
var u=1===o?e:e.as3D(s,a,1),c=1===o?2:1,l=1===o?t.as3D(s,1,a):t
return this.multiply(u,l).sum(c,!0)}var h=Ie(e.dtype,t.dtype),f=new ha(e.shape,[s,i,o],n,r),d=this.makePackedTensor(f.outputShape,h)
return this.compileAndRun(f,[e,t],d)},e.prototype.fusedBatchMatMul=function(e,t,n,r,i,o){var a=n?e.shape[2]:e.shape[1],s=r?t.shape[1]:t.shape[2],u=e.shape[0],c=Ie(e.dtype,t.dtype),l=new ha(e.shape,[u,a,s],n,r,!!i,o?function(e,t){if(void 0===t&&(t=!1),"linear"===o)return"return x;"
if("relu"===o)return t?qa:Wa
throw new Error("Activation "+o+" has not been implemented for the WebGL backend.")}(0,!0):null),h=this.makePackedTensor(l.outputShape,c),f=[e,t]
return i&&f.push(i),this.compileAndRun(l,f,h)},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new Yi("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new Yi("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(i,a),u=this.compileAndRun(o,a),c=this.complex(s,u)
return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t)
if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Zi,e.dtype)
var l=new eo(Zi,e.shape,t.shape),h=this.makeOutputArray(l.outputShape,e.dtype)
return this.compileAndRun(l,[e,t],h)},e.prototype.batchNormalization=function(e,t,n,r,i,o){var a=[e,t,n],s=null
null!=o&&(s=o.shape,a.push(o))
var u=null
if(null!=i&&(u=i.shape,a.push(i)),x.getBool("WEBGL_PACK_NORMALIZATION")){var c=new Xi(e.shape,t.shape,n.shape,s,u,r)
return this.compileAndRun(c,a)}var l=new $i(e.shape,t.shape,n.shape,s,u,r)
return this.compileAndRun(l,a)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){var o=x.getBool("WEBGL_PACK_NORMALIZATION")?new ca(e.shape,t,n,r,i):new sa(e.shape,t,n,r,i)
return this.compileAndRun(o,[e])},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){var s=new ua(t.shape,r,i,o,a)
return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){if("string"===e.dtype)return Ci(rr(e.shape,e.dtype,this.readSync(e.dataId)),t)
var n=new La(e.shape,t)
return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=x.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ma(e.shape,t,n):new va(e.shape,t,n)
return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t)
var n=x.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ja(e.shape,t):new Ba(e.shape,t)
return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n)
var r=new Po(e.shape,t.size,n)
return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){S(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"})
var r=t.reduce(function(e,t){return e*t}),i=Or(e.shape,t,r),o=Ir(i.length,t.length),a=Nr(e.shape,t,r),s=Dr(n,t.length),u=Pr(a,n,t.length)
return e.reshape(i).transpose(o).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){S(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"})
var r=t.reduce(function(e,t){return e*t}),i=[[0,0]]
i.push.apply(i,n)
for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0])
var a=e.pad(i),s=Or(a.shape,t,r,!1),u=Ir(s.length,t.length,!1),c=Nr(a.shape,t,r,!1)
return a.reshape(s).transpose(u).reshape(c)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],o=Lr(i),a=new ya({windowSize:o,inSize:i,batchSize:r},t),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],n)
return this.compileAndRun(a,[e],l),1===l.shape[1]?l:this.reduce(l,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null)
var r=e.shape[0],i=e.shape[1]
null!=n&&(r=n.shape[0],i=n.shape[1])
var o=Lr(i),a=new Oi({windowSize:o,inSize:i,batchSize:r},t,null==n),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],"int32"),h=[e]
return null!=n&&h.push(n),this.compileAndRun(a,h,l),1===l.shape[1]?l:this.argReduce(e,t,l)},e.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null)
var r=null!=n?n.shape:e.shape,i=Lr(r[r.length-1]),o=new Gi(r,i,t,null==n),a=this.makePackedTensor(o.outputShape,"int32"),s=null==n?[e]:[e,n]
return this.compileAndRun(o,s,a),a.rank===e.rank?this.argReducePacked(e,t,a):a},e.prototype.sum=function(e,t){pn("sum",t,e.rank)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i),a=Ne(e.dtype)
return this.reduce(o,"sum",a).reshape(r)},e.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i),a=Ne(e.dtype)
return this.reduce(o,"prod",a).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=vn([r],e.rank),o=e
null!=i&&(o=e.transpose(i),r=gn(1,e.rank)[0])
var a=function(e,t,n){for(var r=[],i=e.length,o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n)
return r}(o.shape,r,n),s=I([o.shape[r]]),u=o.as2D(-1,s),c=Ne(e.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",t,c,n).reshape(a)
return null!=i&&(l=l.transpose(mn(i))),l},e.prototype.segOpCompute=function(e,t,n,r,i){var o=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1
for(e<=Fr?(n=e,r=!0):n=te(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=te(e,n+1)
return n}(a,i),u=new Aa({windowSize:s,inSize:a,batchSize:o,numSegments:i},t),c=u.outputShape,l=c[0],h=c[1],f=this.makeOutputArray([l,h],r)
return this.compileAndRun(u,[e,n],f),f.shape[1]===i?f:(n=Ln(0,i).tile([a/s]),this.segOpCompute(f,t,n,r,i))},e.prototype.argMinMaxReduce=function(e,t,n){var r=[t]
if(pn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!x.getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=fn(e.shape,r),o=i[0],a=I(i[1]),s=e.as2D(-1,a)
return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},e.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},e.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t)
var i=new bo(e.shape,n,r)
return this.compileAndRun(i,[e])},e.prototype.equal=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool")
var n=new eo("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool")
var n=new eo("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t)
if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool")
var n=new eo("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool")
var n=new eo("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t)
if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool")
var n=new eo("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool")
var n=new eo("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new za(e.shape,"return float(!(x >= 1.0));")
return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool")
var n=new eo("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool")
var n=new eo("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new Ta(e.rank,t.shape,t.rank),i=this.makeOutputArray(r.outputShape,Ie(t.dtype,n.dtype))
return this.compileAndRun(r,[e,t,n],i)},e.prototype.where=function(e){on("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead")
var t=e.dataSync()
return Si(e.shape,t)},e.prototype.topk=function(e,t,n){return ki(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){pn("min",t,e.rank)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"min",o.dtype).reshape(r)},e.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t)
var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new eo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new eo("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t)
pn("max",t,e.rank)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"max",o.dtype).reshape(r)},e.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t)
var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new eo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){pn("all",t,e.rank)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"all",o.dtype).reshape(r)},e.prototype.any=function(e,t){pn("any",t,e.rank)
var n=fn(e.shape,t),r=n[0],i=I(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"any",o.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("return (a - b) * (a - b);",e.shape,t.shape):new eo("return (a - b) * (a - b);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(b.x == 0.0) {\n    result.x = NAN;\n  } else if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(b.y == 0.0) {\n    result.y = NAN;\n  } else if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(b.z == 0.0) {\n    result.z = NAN;\n  } else if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(b.w == 0.0) {\n    result.w = NAN;\n  } else if(a.w == b.w) {\n    result.w = 1.;\n  }\n  \n  return result;\n","float32",!0)
var n=new eo("\nif (b == 0.0) {\n  return NAN;\n} \nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32")
var n=new eo("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32")
return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Qi)
if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t)
var n=Ie(e.dtype,t.dtype)
if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Qi,n)
var r=new eo(Qi,e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n)
return this.compileAndRun(r,[e,t],i)},e.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1)
var o=new to(n,e.shape,t.shape,i),a=this.makePackedTensor(o.outputShape,r)
return this.compileAndRun(o,[e,t],a)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=[[i.complexTensors.real,o.complexTensors.real],[i.complexTensors.imag,o.complexTensors.imag]].map(function(i){var o=i[0],a=i[1],s=r.makeComplexComponentTensorHandle(e,o),u=r.makeComplexComponentTensorHandle(t,a),c=new eo(n,e.shape,t.shape),l=r.makeOutputArray(c.outputShape,Ie(o.dtype,a.dtype))
return r.compileAndRun(c,[s,u],l)}),s=a[0],u=a[1],c=this.complex(s,u)
return s.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){if(1===e.length)return e[0]
if(e.length>x.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t))
return this.addN([n,r])}var i=e.map(function(e){return e.dtype}).reduce(function(e,t){return Ie(e,t)}),o=e.map(function(e){return e.shape}),a=x.getBool("WEBGL_PACK"),s=a?new Ti(e[0].shape,o):new Ai(e[0].shape,o),u=a?this.makePackedTensor(s.outputShape,i):this.makeOutputArray(s.outputShape,i)
return this.compileAndRun(s,e,u)},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Ji)
if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t)
var n=Ie(e.dtype,t.dtype)
if(x.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Ji,e.dtype)
var r=new eo(Ji,e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n)
return this.compileAndRun(r,[e,t],i)},e.prototype.pow=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new to("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new eo("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),i=Ie(e.dtype,t.dtype),o=n?this.makePackedTensor(r.outputShape,i):this.makeOutputArray(r.outputShape,i)
return this.compileAndRun(r,[e,t],o)},e.prototype.ceil=function(e){var t=new za(e.shape,"return ceil(x);")
return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new za(e.shape,"return floor(x);")
return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new za(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n")
return this.compileAndRun(t,[e])},e.prototype.isNaN=function(e){var t=new za(e.shape,"return float(isnan(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.isInf=function(e){var t=new za(e.shape,"return float(isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.isFinite=function(e){var t=new za(e.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.round=function(e){var t=new za(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n")
return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t
return t=x.getBool("WEBGL_PACK")?new Ha(e.shape,Va):new za(e.shape,Va),this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new za(e.shape,"return exp(x) - 1.0;")
return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t
return t=x.getBool("WEBGL_PACK")?new Ha(e.shape,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n"):new za(e.shape,"if (x < 0.0) return NAN;\n  return log(x);"),this.compileAndRun(t,[e])},e.prototype.log1p=function(e){var t=new za(e.shape,"return log(1.0 + x);")
return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new za(e.shape,"return sqrt(x);")
return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e)
var t=new za(e.shape,"return inversesqrt(x);")
return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new za(e.shape,"return x * x;")
return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new za(e.shape,"return 1.0 / x;")
return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t
return t=x.getBool("WEBGL_PACK")?new Ha(e.shape,qa):new za(e.shape,Wa),this.compileAndRun(t,[e])},e.prototype.prelu=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",e.shape,t.shape):new eo("return (a < 0.) ? b * a : a;",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.elu=function(e){var t=new za(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);")
return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new eo("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new za(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")
return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new za(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32")
return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r,i=(r=x.getBool("WEBGL_PACK_CLIP")?new ro(e.shape):new no(e.shape)).getCustomSetupFunc(t,n)
return this.compileAndRun(r,[e],null,i)},e.prototype.abs=function(e){var t=new za(e.shape,"return abs(x);")
return this.compileAndRun(t,[e])},e.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new io(e.shape),r=[this.makeComplexComponentTensorHandle(e,t.complexTensors.real),this.makeComplexComponentTensorHandle(e,t.complexTensors.imag)]
return this.compileAndRun(n,r)},e.prototype.sigmoid=function(e){var t=new za(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));")
return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new za(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n")
return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new za(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n")
return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new za(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n")
return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new za(e.shape,"return tan(x);")
return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new za(e.shape,"return asin(x);")
return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new za(e.shape,"return acos(x);")
return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new za(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n")
return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=x.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new to("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new eo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new za(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n")
return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new za(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n")
return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new za(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n")
return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new za(e.shape,"return log(x + sqrt(x * x + 1.0));")
return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new za(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));")
return this.compileAndRun(t,[e])},e.prototype.atanh=function(e){var t=new za(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;")
return this.compileAndRun(t,[e])},e.prototype.erf=function(e){var t=new za(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n')
return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new za(e.shape,function(e){return void 0===e&&(e=0),Ua+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t))
return this.compileAndRun(n,[e])},e.prototype.conv2dByMatMul=function(e,t,n){var r=e.shape,i=this.texData.get(e.dataId),o=n.inChannels,a=r[0]*r[1]*r[2],s=n.outChannels,u=(1===a||1===s)&&o>1e3,c=r[2]%2!=0&&!!i.isPacked
if(u||!x.getBool("WEBGL_LAZILY_UNPACK")||!x.getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){var l=this.reshape(e,[1,r[0]*r[1]*r[2],n.inChannels]),h=this.reshape(t,[1,n.inChannels,n.outChannels])
return this.reshape(this.batchMatMul(l,h,!1,!1),n.outShape)}var f=we.make([1,r[0]*r[1]*(r[2]+1),n.inChannels],{dataId:e.dataId},e.dtype,this),d=i.shape
i.shape=i.shape.slice(),i.shape[i.shape.length-2]++,S(St(i.shape,f.shape),function(){return"packed reshape "+i.shape+" to "+f.shape+" isn't free"})
var p=this.reshape(t,[1,n.inChannels,n.outChannels]),v=this.batchMatMul(f,p,!1,!1),m=this.texData.get(v.dataId)
return S(m.isPacked,function(){return"batchMatMul result is expected to be packed"}),i.shape=d,m.shape=n.outShape,we.make(n.outShape,{dataId:v.dataId},v.dtype,this)},e.prototype.conv2dWithIm2Row=function(e,t,n){var r=n.filterWidth,i=n.filterHeight,o=n.inChannels,a=n.outWidth,s=n.outHeight,u=r*i*o,c=s*a,l=[u,c],h=e.squeeze([0]),f=t.reshape([1,u,-1]),d=new aa(l,h.shape,n),p=this.compileAndRun(d,[h]).reshape([1,l[0],l[1]]),v=new ha(p.shape,[1,c,n.outChannels],!0,!1)
return this.compileAndRun(v,[p,f]).reshape([1,s,a,n.outChannels])},e.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n)
if(x.getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n)
var r=new po(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new uo(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new so(n)
return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r
return x.getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new go(n),this.compileAndRun(r,[e,t],this.makePackedTensor(n.outShape,e.dtype))):(r=new mo(n),this.compileAndRun(r,[e,t]))},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new fo(n)
return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new ho(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3d=function(e,t,n){var r=new vo(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerInput=function(e,t,n){var r=new lo(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerFilter=function(e,t,n){var r=new co(n)
return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new ga(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype)
return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new ga(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var i=new ga(r,"max",!0),o=this.compileAndRun(i,[t]),a=new la(r),s=this.makeOutputArray(a.outputShape,t.dtype),u=this.compileAndRun(a,[e,o],s)
return o.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new Ki(n),i=this.makeOutputArray(r.outputShape,t.dtype)
return this.compileAndRun(r,[e],i)},e.prototype.cast=function(e,t){return pi(e,t,this)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o])
var a=new Array(e.rank).fill(0),s=e.shape.slice()
s[t]=1
var u=new Array(n)
for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r)
return u},e.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId)
return!n.isPacked||St(e.shape,t)||null!==n.texture&&St(n.shape,t)?vi(e,t):this.packedReshape(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var i=x.getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _a(e.shape,t,n,r):new wa(e.shape,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new xa(e,t,n)
return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new Ea(e.shape,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Ra(e,t,n)
return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var i=t?e:Qr(e),o=i.shape[0],a=i.shape[1],s=new fa(o,a,n),u=this.makeOutputArray(s.outputShape,"int32"),c=s.getCustomSetupFunc(r)
return this.compileAndRun(s,[i],u,c)},e.prototype.oneHot=function(e,t,n,r){var i=new da(e.size,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return on("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),_i(e.dataSync(),t.dataSync(),n,r,i)},e.prototype.cropAndResize=function(e,t,n,r,i,o){var a=new yo(e.shape,t.shape,r,i,o)
return this.compileAndRun(a,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){S(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t})
var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,u=o*t,c=a/(t*t),l=new Co("NHWC"===n?[r,s,u,c]:[r,c,s,u],t,n)
return this.compileAndRun(l,[e])},e.prototype.split=function(e,t,n){return Ei(e,t,n)},e.prototype.scatterND=function(e,t,n){var r=Br(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/a,a],l=e.reshape([o,i]),h=t.reshape([o,a])
if(0===u)return vi(En([]),n)
var f=kn(0),d=new Sa(o,i,l.rank,h.rank,s,c)
return this.compileAndRun(d,[h,l,f]).reshape(n)},e.prototype.sparseToDense=function(e,t,n,r){var i=Br(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.strides,u=i.outputSize,c=new Sa(a,o,e.rank,t.rank,s,[u,1],!1)
return this.compileAndRun(c,[t,e,r]).reshape(n)},e.prototype.fft=function(e){return this.fftImpl(e,!1)},e.prototype.ifft=function(e){return this.fftImpl(e,!0)},e.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Oo("return real * expR - imag * expI;",e.shape,t),i=new Oo("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)],a=this.compileAndRun(r,o),s=this.compileAndRun(i,o),u=this.complex(a,s).as2D(e.shape[0],e.shape[1])
return a.dispose(),s.dispose(),u},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Mr(e,t),o=i[0],a=i[1],s=i[2],u=i[3],c=t.reshape([a,r]),l=e.reshape([e.size/s,s]),h=new Mo(r,u,[a,s])
return this.compileAndRun(h,[l,c]).reshape(o)},e.prototype.fill=function(e,t,n){if("string"===(n=n||Z(t))){var r=W(n,I(e))
return r.fill(t),we.make(e,{values:r},n)}var i=new Io(e,t),o=i.getCustomSetupFunc(t),a=this.makeOutputArray(e,n)
return this.compileAndRun(i,[],a,o)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype")
return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},e.prototype.linspace=function(e,t,n){return mi(e,t,n)},e.prototype.makeOutputArray=function(e,t){return we.make(e,{},t,this)},e.prototype.makePackedTensor=function(e,t){var n=we.make(e,{},t,this)
return this.texData.get(n.dataId).isPacked=!0,n},e.prototype.unpackTensor=function(e){var t=new Ga(e.shape)
return this.compileAndRun(t,[e],we.make(t.outputShape,{},e.dtype,this))},e.prototype.packTensor=function(e){var t=new pa(e.shape)
return this.compileAndRun(t,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},e.prototype.packedReshape=function(e,t){var n=e.reshape([_t(e.shape)].concat(Rt(e.shape))),r=[_t(t)].concat(Rt(t)),i=new ba(r,n.shape)
return this.compileAndRun(i,[n]).reshape(t)},e.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,o=n.dtype,a=Et(i),s=Lo(i),u=this.makeTensorHandle(i,"float32")
return this.texData.get(u.dataId).isPacked=!0,this.texData.get(u.dataId).dtype=o,this.texData.get(u.dataId).texShape=s.map(function(e){return 2*e}),t=r?new Eo(a,s):new Ro(a,s),this.compileAndRun(t,[{shape:a,dtype:o,dataId:e}],u,null,!0),u},e.prototype.compileAndRun=function(e,t,n,r,i){var o=this
if(void 0===i&&(i=!1),null==n&&(n=e.usesPackedTextures?this.makePackedTensor(e.outputShape,t[0].dtype):this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=U(n.dtype,0),n
var a=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.")
var n=o.texData.get(t.dataId)
if(null==n.texture){if(!e.usesPackedTextures&&I(t.shape)<=x.getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values}
e.usesPackedTextures&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.usesPackedTextures)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),n=o.texData.get(t.dataId)
else if(n.isPacked&&!St(n.shape,t.shape)){var r=t,i=t.shape
t.shape=n.shape,t=o.packedReshape(t,i),n=o.texData.get(t.dataId),r.shape=i}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}})
this.uploadToGPU(n.dataId)
var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},c=function(e,t,n){var r=""
a.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape
r+=e.shape+"_"+n+"_"+t})
var i=e.userCode
return e.constructor.name+"_"+r+"_"+i}(e,0,u),l=this.getAndSaveBinary(c,function(){return function(e,t,n,r){var i=t.userCode,o=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null}
return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),a=o.map(function(e){return e.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=function(e,t,n,r){var i=[]
e.forEach(function(e){var t=I(e.shapeInfo.logicalShape)
e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))})
var o,a,s=i.join("\n"),u=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1)
var r=""
r+=n?function e(t){var n
switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(n=t.name).charAt(0).toUpperCase()+n.slice(1)+"() {\n      return "+Di().texture2D+"("+n+", halfCR);\n    }\n  "
case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=Di()
return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(t)
case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],a=i[1],s=Di()
if(null!=i&&N(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    "
var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)]
return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(t)
case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)]
if(1===n[0]){var s=qi(t,n.slice(1))
return"\n        "+e(s)+"\n        vec4 "+i+"(int b, int row, int col) {\n          return "+i+"("+Hi(["b","row","col"],[1,2])+");\n        }\n      "}var u=a[0],c=a[1],l=Math.ceil(n[2]/2)
return"\n    vec4 "+i+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+u+", "+c+", "+l*Math.ceil(n[1]/2)+", "+l+", b, row, col);\n      return "+Di().texture2D+"("+r+", uv);\n    }\n  "}(t)
default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],u=a[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),h="int b, int row, int col",f="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)h="int b"+d+", "+h,f="b"+d+" * "+(l*=t[n-d-1])+" + "+f
return"\n    vec4 "+i+"("+h+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Di().texture2D+"("+r+", uv);\n    }\n  "}(t)}}(e):function e(t){var n=t.shapeInfo.logicalShape
switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)
if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}"
var r=e.shapeInfo.texShape,i=r[0],o=r[1]
if(1===i&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    "
var a=e.shapeInfo.texShape
return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+Ui(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t)
case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)
if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Wi(e)+"\n      }\n    "
var r=e.shapeInfo.texShape,i=r[0],o=r[1]
if(1===o&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    "
var a=Ui(t)
return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+o+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t)
case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape
if(null!=o&&N(n,o)){var a=o[0]
return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+r+", uv);\n    }\n  "}var s=z(n),u=s.newShape,c=s.keptDims,l=u
if(l.length<n.length){var h=qi(t,l)
return"\n      "+e(h)+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+Hi(["row","col"],c)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+Wi(t)+"\n      }\n    "
var f=o[0],d=o[1],p=Ui(r)
return 1===d?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+p+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+f+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===f?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+p+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+p+";\n    vec2 uv = uvFromFlat("+f+", "+d+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(t)
case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],s=z(n),u=s.newShape,c=s.keptDims,l=u
if(l.length<n.length){var h=qi(t,l)
return"\n        "+e(h)+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+Hi(["row","col","depth"],c)+");\n        }\n      "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+Wi(t)+"\n      }\n    "
var f=t.shapeInfo.texShape,d=f[0],p=f[1],v=t.shapeInfo.flatOffset
return p===o&&null==v?"\n        float "+i+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+d+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":p===a&&null==v?"\n    float "+i+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+i+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+Ui(r)+";\n        vec2 uv = uvFromFlat("+d+", "+p+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(t)
case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,u=z(n),c=u.newShape,l=u.keptDims
if(c.length<n.length){var h=qi(t,c)
return"\n      "+e(h)+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+Hi(["row","col","depth","depth2"],l)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+s+", "+a+", "+o+", 1)));\n        "+Wi(t)+"\n      }\n    "
var f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],v=d[1]
return v===s&&null==f?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":v===o&&null==f?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+p+", "+v+", index + "+Ui(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[4],a=n[3]*o,s=n[2]*a,u=n[1]*s,c=z(n),l=c.newShape,h=c.keptDims
if(l.length<n.length){var f=qi(t,l)
return"\n      "+e(f)+"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+i+"("+Hi(["row","col","depth","depth2","depth3"],h)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+u+", "+s+", "+a+", "+o+")) +\n          depth3;\n        "+Wi(t)+"\n      }\n    "
var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,v=p[0],m=p[1]
return m===u&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+s+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===o&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+s+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+Ui(r)+";\n      vec2 uv = uvFromFlat("+v+", "+m+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=z(n),a=o.newShape,s=o.keptDims
if(a.length<n.length){var u=qi(t,a)
return"\n      "+e(u)+"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+i+"("+Hi(["row","col","depth","depth2","depth3","depth4"],s)+");\n      }\n    "}var c=n[5],l=n[4]*c,h=n[3]*l,f=n[2]*h,d=n[1]*f
if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+f+", "+h+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+Wi(t)+"\n      }\n    "
var p=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,m=v[0],g=v[1]
return g===d&&null==p?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+f+", "+h+", "+l+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":g===c&&null==p?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+f+" + depth * "+h+" +\n          depth2 * "+l+" + depth3 * "+c+" + depth4 + "+Ui(r)+";\n      vec2 uv = uvFromFlat("+m+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
default:throw new Error(n.length+"-D input sampling is not yet supported")}}(e)
var i=e.shapeInfo.logicalShape,o=t.logicalShape
return i.length<=o.length&&(r+=n?function(e,t){var n,r,i=e.name,o=i.charAt(0).toUpperCase()+i.slice(1),a="get"+o+"AtOutCoords",s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,c=ti(e.shapeInfo.logicalShape,t.logicalShape),l=Vi(u),h=u-s,f=["x","y","z","w","u","v"]
n=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map(function(e){return"coords."+f[e+h]+" = 0;"}).join("\n"),r=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+h]}).join(", ")
var d="return outputValue;",p=1===I(e.shapeInfo.logicalShape),v=1===I(t.logicalShape)
if(1!==s||p||v){if(p&&!v)d=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      "
else if(c.length){var m=s-2,g=s-1
c.indexOf(m)>-1&&c.indexOf(g)>-1?d="return vec4(outputValue.x);":c.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    "
return"\n    vec4 "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+r+");\n      "+d+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length
if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&N(a,o))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    "
var c=Vi(u),l=ti(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,f=["x","y","z","w","u","v"]
return"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+f[e+h]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(u<2&&s>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+h]}).join(", "))+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,l=Di(),h="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",f=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    #define isnan(value) isnan_custom(value)\n    "+e.defineSpecialNaN+"\n    bvec4 isnan_custom(vec4 val) {\n      return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n    }\n\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Li+"\n    "+Bi+"\n    "+ji+"\n  "}(l)
return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "
case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)]
return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t)
case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)]
if(N(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    "
var r=Math.ceil(e[1]/2)
return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t)
case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  "
default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),o=i,a="",s="b, r, c",u=2;u<e.length-1;u++)a="\n      int b"+u+" = index / "+(o*=e[e.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+a,s="b"+u+", "+s
return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,o,a}(t.logicalShape,c),a="\n    void setOutput(vec4 val) {\n      "+l.output+" = val;\n    }\n  "):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "
case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t)
case 2:return function(e,t){return N(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t)
case 3:return n=t,r=Pi(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  "
case 4:return function(e,t){var n=Pi(["r","c","d","d2"],e)
return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t)
case 5:return function(e,t){var n=Pi(["r","c","d","d2","d3"],e)
return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t)
case 6:return function(e,t){var n=Pi(["r","c","d","d2","d3","d4"],e)
return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t)
default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),a="\n    void setOutput(float val) {\n      "+l.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(f+=zi),[f,h,a,s,o,u,n].join("\n")}(o,s,i,t.usesPackedTextures),c=e.createProgram(u),l=null,h=e.getUniformLocation(c,"NAN",!1)
1===x.getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1))
for(var f={},d=0;d<t.variableNames.length;d++){var p=t.variableNames[d]
f[p]=e.getUniformLocation(c,p,!1),f["offset"+p]=e.getUniformLocation(c,"offset"+p,!1)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:a,outShapeInfo:s,infLoc:l,nanLoc:h}}(o.gpgpu,e,a,u)}),h=null!=this.activeTimers
return h&&(s=this.startTimer()),function(e,t,n,r,i){oa(t.inShapeInfos,n),oa([t.outShapeInfo],[r])
var o=r.texData.texture,a=r.texData.texShape
r.texData.isPacked?e.setOutputPackedMatrixTexture(o,a[0],a[1]):e.setOutputMatrixTexture(o,a[0],a[1]),e.setProgram(t.webGLProgram),1===x.getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],a=t.uniformLocations["offset"+i]
if(null!=o)if(n.isUniform)if(I(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0])
else{var s=n.uniformValues
s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,l,a,u,r),h&&(s=this.endTimer(s),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(s)})),!x.getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(n.dataId).isPacked&&!1===i?this.unpackTensor(n):n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),null!=this.canvas&&null!=this.canvas.remove?this.canvas.remove():this.canvas=null,null!=this.fromPixels2DContext&&null!=this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var e=this
return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ht(function(){var t=x.getBool("DEBUG")
x.set("DEBUG",!1)
var n=e.abs(kn(1e-8)).dataSync()[0]
return x.set("DEBUG",t),n>0?32:16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,o=n.values,a=n.texture,s=n.usage,u=n.isPacked
if(null==a){var c,l=null!=this.activeTimers
l&&(c=performance.now())
var h=n.texShape
if(null==h&&(h=Ct(r,u),n.texShape=h),null!=o){var f=Et(r),d=void 0,p=h[1],v=h[0],m=o instanceof Uint8Array
u?(p=(t=Bo(h[0],h[1]))[0],v=t[1],d=new To(f,[v,p],m)):d=new Ao(f,[v,p],m)
var g=this.makeTensorHandle([v,p],i)
this.texData.get(g.dataId).usage=m?wo.PIXELS:wo.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,v,o)
var y=this.makeTensorHandle(d.outputShape,g.dtype)
y.size=I(d.outputShape),this.texData.get(y.dataId).isPacked=u,this.compileAndRun(d,[g],y)
var b=this.texData.get(y.dataId)
n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=performance.now()-c)}else{var x=this.acquireTexture(h,s,i,u)
n.texture=x}}},e.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype
return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e
if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r])
return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},e.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2)
this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},e.prototype.computeBytes=function(e,t){return e[0]*e[1]*$(t)},e}()
Ue()&&ze.registerBackend("webgl",function(){return new Xa},2)
var Ya=xn({abs_:function(e){var t=un(e,"x","abs")
return"complex64"===t.dtype?ze.runKernel(function(e){return e.complexAbs(t)},{$x:t}):ze.runKernel(function(e,n){var r=e.abs(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.toFloat().step(-1))}}})}}),Qa=xn({acos_:function(e){var t=un(e,"x","acos")
return ze.runKernel(function(e,n){var r=e.acos(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(kn(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),Ja=xn({acosh_:function(e){var t=un(e,"x","acosh")
return ze.runKernel(function(e,n){var r=e.acosh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),Za=xn({asin_:function(e){var t=un(e,"x","asin")
return ze.runKernel(function(e,n){var r=e.asin(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(kn(1).sub(n.toFloat().square()).sqrt())}}})}}),es=xn({asinh_:function(e){var t=un(e,"x","asinh")
return ze.runKernel(function(e,n){var r=e.asinh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(kn(1).add(n.toFloat().square()).sqrt())}}})}}),ts=xn({atan_:function(e){var t=un(e,"x","atan")
return ze.runKernel(function(e,n){var r=e.atan(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),ns=xn({atanh_:function(e){var t=un(e,"x","atanh")
return ze.runKernel(function(e,n){var r=e.atanh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(kn(1).sub(n.toFloat().square()))}}})}}),rs=xn({ceil_:function(e){var t=un(e,"x","ceil")
return ze.runKernel(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),is=xn({clipByValue_:function(e,t,n){var r=un(e,"x","clipByValue")
return S(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}),ze.runKernel(function(e,i){var o=e.clip(r,t,n)
return i([r]),o},{$x:r},function(e,r){var i=r[0]
return{$x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),jn(e))}}})}}),os=xn({cos_:function(e){var t=un(e,"x","cos")
return ze.runKernel(function(e,n){var r=e.cos(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().sin().neg().mul(e)}}})}}),as=xn({cosh_:function(e){var t=un(e,"x","cosh")
return ze.runKernel(function(e,n){var r=e.cosh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),ss=xn({erf_:function(e){var t=un(e,"x","erf")
return S("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),ze.runKernel(function(e,n){var r=e.erf(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),us=xn({exp_:function(e){var t=un(e,"x","exp")
return ze.runKernel(function(e,n){var r=e.exp(t)
return n([r]),r},{$x:t},function(e,t){return{$x:function(){return e.mulStrict(t[0])}}})}}),cs=xn({expm1_:function(e){var t=un(e,"x","expm1")
return ze.runKernel(function(e,n){var r=e.expm1(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.exp())}}})}}),ls=xn({floor_:function(e){var t=un(e,"x","floor")
return ze.runKernel(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),hs=xn({log_:function(e){var t=un(e,"x","log")
return ze.runKernel(function(e,n){var r=e.log(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat())}}})}}),fs=xn({log1p_:function(e){var t=un(e,"x","log1p")
return ze.runKernel(function(e,n){var r=e.log1p(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.add(1))}}})}}),ds=xn({logSigmoid_:function(e){var t=un(e,"x","logSigmoid")
return ze.runKernel(function(e,n){var r=e.softplus(t.neg()).neg()
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),ps=xn({neg_:function(e){var t=un(e,"x","neg")
return ze.runKernel(function(e){return e.neg(t)},{$x:t},function(e){return{$x:function(){return e.neg()}}})}}),vs=xn({reciprocal_:function(e){var t=un(e,"x","reciprocal")
return ze.runKernel(function(e,n){var r=e.reciprocal(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.square().neg())}}})}}),ms=xn({round_:function(e){var t=un(e,"x","round")
return ze.runKernel(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),gs=xn({rsqrt_:function(e){var t=un(e,"x","rsqrt")
return ze.runKernel(function(e,n){var r=e.rsqrt(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}})}}),ys=xn({sigmoid_:function(e){var t=un(e,"x","sigmoid")
return ze.runKernel(function(e,n){var r=e.sigmoid(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.mul(kn(1).sub(n)))}}})}}),bs=xn({sign_:function(e){var t=un(e,"x","sign")
return ze.runKernel(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),xs=xn({isNaN_:function(e){var t=un(e,"x","isNaN")
return ze.runKernel(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),ws=xn({isInf_:function(e){var t=un(e,"x","isInf")
return ze.runKernel(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),_s=xn({isFinite_:function(e){var t=un(e,"x","isFinite")
return ze.runKernel(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return jn(e)}}})}}),Rs=xn({sin_:function(e){var t=un(e,"x","sin")
return ze.runKernel(function(e,n){var r=e.sin(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().cos().mul(e)}}})}}),Es=xn({sinh_:function(e){var t=un(e,"x","sinh")
return ze.runKernel(function(e,n){var r=e.sinh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),Cs=xn({softplus_:function(e){var t=un(e,"x","softplus")
return ze.runKernel(function(e,n){var r=e.softplus(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.sigmoid())}}})}}),ks=xn({sqrt_:function(e){var t=un(e,"x","sqrt")
return ze.runKernel(function(e,n){var r=e.sqrt(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),Ss=xn({square_:function(e){var t=un(e,"x","square")
return ze.runKernel(function(e,n){return n([t]),e.square(t)},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.toFloat().mul(2))}}})}}),As=xn({step_:function(e,t){void 0===t&&(t=0)
var n=un(e,"x","step")
return ze.runKernel(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return jn(e)}}})}}),Ts=xn({tan_:function(e){var t=un(e,"x","tan")
return ze.runKernel(function(e,n){var r=e.tan(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.cos().square())}}})}}),Os=xn({tanh_:function(e){var t=un(e,"x","tanh")
return ze.runKernel(function(e,n){var r=e.tanh(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return kn(1).sub(n.square()).mulStrict(e)}}})}})
function Is(e,t,n,r,i,o){var a,s,u=un(e,"x","batchNorm"),c=un(t,"mean","batchNorm"),l=un(n,"variance","batchNorm")
return null!=i&&(a=un(i,"scale","batchNorm")),null!=r&&(s=un(r,"offset","batchNorm")),S(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),S(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),S(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=a&&S(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),null!=s&&S(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Ps(u,c,l,s,a,o)}function Ns(e,t,n,r,i,o){var a,s,u=un(e,"x","batchNorm"),c=un(t,"mean","batchNorm"),l=un(n,"variance","batchNorm")
return null!=i&&(a=un(i,"scale","batchNorm")),null!=r&&(s=un(r,"offset","batchNorm")),S(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),S(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),S(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=a&&S(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),null!=s&&S(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Ps(u,c,l,s,a,o)}function Ds(e,t,n,r,i,o){var a,s,u=un(e,"x","batchNorm"),c=un(t,"mean","batchNorm"),l=un(n,"variance","batchNorm")
return null!=i&&(a=un(i,"scale","batchNorm")),null!=r&&(s=un(r,"offset","batchNorm")),S(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),S(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),S(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=a&&S(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),null!=s&&S(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Ps(u,c,l,s,a,o)}function Ps(e,t,n,r,i,o){null==o&&(o=.001)
var a,s,u,c=un(e,"x","batchNorm"),l=un(t,"mean","batchNorm"),h=un(n,"variance","batchNorm")
return null!=i&&(a=un(i,"scale","batchNorm")),null!=r&&(s=un(r,"offset","batchNorm")),S(l.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),S(null==s||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),S(null==a||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,ze.runKernel(function(e,t){var n=e.batchNormalization(u,Ms(l),Ms(h),o,Ms(a),Ms(s))
return t([c,l,h,a]),n},{$x:c,$mean:l,$variance:h,$scale:a,$offset:s},function(e,t){var n=t,r=n[0],i=n[1],a=n[2],s=n[3],c=null==s?kn(1):s,l=ni(i.shape,u.shape),h=[]
if(1===i.rank){for(var f=0;f<u.shape.length-1;++f)h.push(u.shape[f])
h.push(1)}var d=r.sub(i),p=e.mul(c),v=gs(a.add(kn(o))),m=v.mul(v).mul(v).mul(kn(-.5))
return{$x:function(){return 1===i.rank?e.mul(kr(v.as4D(1,1,1,i.shape[0]),h)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},$mean:function(){var e=v.mul(kn(-1)).mul(p)
return 1===i.rank&&(e=e.sum(l)),e.reshape(i.shape)},$variance:function(){var e=m.mul(d).mul(p)
return 1===i.rank&&(e=e.sum(l)),e.reshape(i.shape)},$scale:function(){var t=d.mul(v),n=e.mul(t)
return 1===i.rank&&(n=n.sum(l)),n.reshape(i.shape)},$offset:function(){var t=e
return 1===i.rank&&(t=t.sum(l)),t.reshape(i.shape)}}}).reshape(c.shape)}function Ms(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Fs(){Ut("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Ls=xn({batchNormalization2d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Fs(),Is(e,t,n,o,i,r)}}),Bs=xn({batchNormalization3d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Fs(),Ns(e,t,n,o,i,r)}}),js=xn({batchNormalization4d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Fs(),Ds(e,t,n,o,i,r)}}),zs=xn({batchNormalization_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Fs(),Ps(e,t,n,o,i,r)}}),Us=xn({batchNorm_:Ps}),Ws=xn({batchNorm2d_:Is}),Vs=xn({batchNorm3d_:Ns}),qs=xn({batchNorm4d_:Ds})
function Hs(e,t,n,r,i,o){S(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"})
var a=e,s=t,u=!1
3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,e[0],e[1],e[2]])
var c=a[3],l=s.shape[3]
S(4===a.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),S(4===s.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),S(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}),S(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),S(l===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[3]+"."}),null!=o&&S(D(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var h=oi(a,n.shape,r,1,i,o),f=ze.runKernel(function(e,t){var r=e.conv2dDerInput(s,n,h)
return t([n,s]),r},{dy4D:s,filter:n},function(e,t){var n=t[0],a=t[1]
return{dy4D:function(){return Xs(e,n,r,i,"NHWC",1,o)},filter:function(){return Qs(e,a,n.shape,r,i,o)}}})
return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Gs(e,t,n,r,i,o){var a=e
3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]))
var s=t
3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),S(4===a.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),S(4===s.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),S(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}),S(a.shape[3]===n[2],function(){return"Error in conv2dDerFilter: depth of input "+a.shape[3]+") must match input depth in filter ("+n[2]+"."}),S(s.shape[3]===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."}),null!=o&&S(D(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var u=oi(a.shape,n,r,1,i,o)
return ze.runKernel(function(e){return e.conv2dDerFilter(a,s,u)},{x4D:a,dy4D:s})}function Ks(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2]
return 1===n&&1===r&&1===i}var $s=xn({conv1d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NWC"),void 0===o&&(o=1)
var s=un(e,"x","conv1d"),u=un(t,"filter","conv1d"),c=s,l=!1
2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),S(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),S(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=a&&S(D(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),S(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),S(di(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),S("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."})
var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=Xs(f,h,[1,n],r,"NHWC",[1,o],a)
return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Xs=xn({conv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1])
var s=un(e,"x","conv2d"),u=un(t,"filter","conv2d"),c=s,l=!1
3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),S(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),S(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=a&&S(D(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),S(c.shape[3]===u.shape[2],function(){return"Error in conv2d: depth of input ("+c.shape[3]+") must match input depth for filter "+u.shape[2]+"."}),S(di(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),S("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."})
var h=oi(c.shape,u.shape,n,o,r,a),f=ze.runKernel(function(e,t){var n=e.conv2d(c,u,h)
return t([u,c]),n},{x:c,$filter:u},function(e,t){var i=t,a=i[0],s=i[1]
return S(fi(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return Hs(s.shape,e,a,n,r)},$filter:function(){return Gs(s,e,a.shape,n,r)}}})
return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Ys=xn({conv3d_:function(e,t,n,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1])
var a=un(e,"x","conv3d"),s=un(t,"filter","conv3d"),u=a,c=!1
4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),S(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),S(5===s.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),S(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),S(function(e,t){return Ks(n)||Ks(t)}(0,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),S("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."})
var l=ai(u.shape,s.shape,n,o,r),h=ze.runKernel(function(e,t){var n=e.conv3d(u,s,l)
return t([u,s]),n},{x:u,$filter:s},function(e,t){S(Ks(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})
var i=t[0],a=t[1]
return{x:function(){return function(e,t,n,r,i){S(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"})
var o=e,a=t,s=!1
4===t.rank&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]])
var u=o[4],c=a.shape[4]
S(5===o.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),S(5===a.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),S(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),S(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),S(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."})
var l=ai(o,n.shape,r,1,i),h=ze.runKernel(function(e){return e.conv3dDerInput(a,n,l)},{dy5D:a})
return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}(i.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,i){var o=e
4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]))
var a=t
4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),S(5===o.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."}),S(5===a.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."}),S(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),S(o.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."}),S(a.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."})
var s=ai(o.shape,n,r,1,i)
return ze.runKernel(function(e){return e.conv3dDerFilter(o,a,s)},{x5D:o,dy5D:a})}(i,e,a.shape,n,r)}}})
return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Qs=xn({conv2dDerFilter_:Gs}),Js=xn({depthwiseConv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1])
var s=un(e,"x","depthwiseConv2d"),u=un(t,"filter","depthwiseConv2d"),c=s,l=!1
3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),S(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),S(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),S(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==o&&(o=[1,1]),S(di(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=a&&S(D(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})
var h=oi(c.shape,u.shape,n,o,r,a,!0),f=ze.runKernel(function(e,t){var n=e.depthwiseConv2D(c,u,h)
return t([c,u]),n},{x:c,$filter:u},function(e,t){S(fi(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"})
var n=t[0],r=t[1]
return{x:function(){return function(e,t,n,r){var i=t,o=!1
3===t.rank&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]))
var a=ze.runKernel(function(e){return e.depthwiseConv2DDerInput(i,n,r)},{dy4D:i})
return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(n.shape,e,r,h)},$filter:function(){return function(e,t,n,r){var i=e
3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]))
var o=t
return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ze.runKernel(function(e){return e.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}(n,e,r.shape,h)}}})
return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Zs=xn({separableConv2d_:function(e,t,n,r,i,o,a){void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC")
var s=un(e,"x","separableConv2d"),u=un(t,"depthwiseFilter","separableConv2d"),c=un(n,"pointwiseFilter","separableConv2d"),l=s,h=!1
if(3===s.rank&&(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported")
S(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),S(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),S(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),S(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),S(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."})
var f=u.shape[2],d=u.shape[3]
S(c.shape[2]===f*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*d+", but got "+c.shape[2]+"."})
var p=Js(l,u,r,i,a,o),v=Xs(p,c,1,"valid",a)
return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),eu=xn({conv2dTranspose_:function(e,t,n,r,i,o){return Hs(n,un(e,"x","conv2dTranspose"),un(t,"filter","conv2dTranspose"),r,i,o)}}),tu=xn({matMul_:function(e,t,n,r){var i
void 0===n&&(n=!1),void 0===r&&(r=!1)
var o=un(e,"a","matMul"),a=un(t,"b","matMul")
i=De(o,a),o=i[0],a=i[1]
var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],h=o.shape.slice(0,-2),f=a.shape.slice(0,-2),d=I(h),p=I(f)
S(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),S(N(h,f),function(){return"Error in matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),S(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."})
var v=o.shape.slice(0,-2).concat([c,l]),m=n?o.as3D(d,s,c):o.as3D(d,c,s),g=r?a.as3D(p,l,u):a.as3D(p,u,l)
return ze.runKernel(function(e,t){var i=e.batchMatMul(m,g,n,r)
return t([m,g]),i},{$a:m,$b:g},function(e,t){var i=t,o=i[0],a=i[1]
return n||r?!n&&r?{$a:function(){return e.matMul(a,!1,!1)},$b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{$a:function(){return a.matMul(e,!1,!0)},$b:function(){return o.matMul(e,!1,!1)}}:{$a:function(){return a.matMul(e,!0,!0)},$b:function(){return e.matMul(o,!0,!0)}}:{$a:function(){return e.matMul(a,!1,!0)},$b:function(){return o.matMul(e,!0,!1)}}}).reshape(v)}}),nu=xn({dot_:function(e,t){var n=un(e,"t1","dot"),r=un(t,"t2","dot")
S(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."})
var i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0]
return S(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),ru=xn({outerProduct_:function(e,t){var n=un(e,"v1","outerProduct"),r=un(t,"v2","outerProduct")
return S(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),iu=xn({reverse_:function(e,t){var n=un(e,"x","reverse")
if(0===n.rank)return n.clone()
var r=j(t,n.shape)
return ze.runKernel(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),ou=xn({reverse1d_:function(e){var t=un(e,"x","reverse")
return S(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),iu(t,0)}}),au=xn({reverse2d_:function(e,t){var n=un(e,"x","reverse")
return S(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),iu(n,t)}}),su=xn({reverse3d_:function(e,t){var n=un(e,"x","reverse")
return S(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),iu(n,t)}}),uu=xn({reverse4d_:function(e,t){var n=un(e,"x","reverse")
return S(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),iu(n,t)}})
function cu(e,t,n,r,i,o){var a=un(e,"x","maxPool"),s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),S(4===s.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),S(di(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=o&&S(D(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var c=ii(s.shape,t,n,r,i,o),l=ze.runKernel(function(e,t){var n=e.maxPool(s,c)
return t([s,n]),n},{x:s},function(e,o){var a=o[0],s=o[1]
return{x:function(){return function(e,t,n,r,i,o,a,s){var u=un(e,"dy","maxPoolBackprop"),c=un(t,"input","maxPoolBackprop"),l=un(n,"output","maxPoolBackprop")
S(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==o&&(o=[1,1]),S(di(i,o),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}),S(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),S(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."})
var h=ii(c.shape,r,i,o,a,void 0)
return ze.runKernel(function(e){return e.maxPoolBackprop(u,c,l,h)},{$dy:u,$input:c})}(e,a,s,t,n,r,i)}}})
return u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function lu(e,t,n,r,i,o){var a=un(e,"x","avgPool","float32")
null==r&&(r=[1,1]),S(di(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})
var s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),S(4===s.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),null!=o&&S(D(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var c=ii(s.shape,t,n,r,i,o),l=ze.runKernel(function(e){return e.avgPool(s,c)},{x:s},function(e){return{x:function(){return function(e,t,n,r,i,o){var a=un(e,"dy","avgPoolBackprop"),s=un(t,"input","avgPoolBackprop")
S(s.rank===a.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"}),null==i&&(i=[1,1]),S(di(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})
var u=s,c=a,l=!1
3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),S(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),S(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."})
var h=ii(u.shape,n,r,i,o),f=ze.runKernel(function(e){return e.avgPoolBackprop(c,u,h)},{dy4D:c,input4D:u})
return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,i)}}})
return l=l.cast(a.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var hu=xn({maxPool_:function(e,t,n,r,i){return cu(e,t,n,1,r,i)}}),fu=xn({avgPool_:function(e,t,n,r,i){return lu(e,t,n,1,r,i)}}),du=xn({pool_:function(e,t,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid")
var a=un(e,"x","maxPool"),s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),S(di(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})
var c,l=ii(s.shape,t,o,i,r),h=[l.dilationHeight,l.dilationWidth]
c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),i=n.map(function(e,t){return e-r[t]})
return n.map(function(e,t){return[r[t],i[t]]})}([l.filterHeight,l.filterWidth],h):[[0,0],[0,0]]
var f=1===h[0]&&1===h[1],d=function(e,t,n){var r=n.map(function(e){return e[0]}),i=n.map(function(e){return e[1]}),o=e.concat(r,i),a=t.map(function(e,t){return(e-o[t]%e)%e}),s=i.map(function(e,t){return e+a[t]})
return[t.map(function(e,t){return[r[t],s[t]]}),t.map(function(e,t){return[0,a[t]]})]}([l.inHeight,l.inWidth],h,c),p=d[0],v=d[1],m=f?r:"valid",g=f?s:Rr(s,h,p),y=("avg"===n?function(){return lu(g,t,o,1,m)}:function(){return cu(g,t,o,1,m)})(),b=f?y:or(y,h,v)
return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),pu=xn({slice_:function(e,t,n){var r,i,o=un(e,"x","slice")
if(0===o.rank)throw new Error("Slicing scalar is not possible")
r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice(),i=(i=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(S(-1===e,function(){return"Bad value in size"}),o.shape[t]-r[t])}),function(e,t,n){S(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),S(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."})
for(var r=function(r){S(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},i=0;i<e.rank;++i)r(i)}(o,r,i)
var a=o.shape
return ze.runKernel(function(e){return e.slice(o,r,i)},{$x:o},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-i[n]])
return{$x:function(){return e.pad(t)}}})}}),vu=xn({slice1d_:function(e,t,n){var r=un(e,"x","slice1d")
return S(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),pu(r,[t],[n])}}),mu=xn({slice2d_:function(e,t,n){var r=un(e,"x","slice2d")
return S(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),pu(r,t,n)}}),gu=xn({slice3d_:function(e,t,n){var r=un(e,"x","slice3d")
return S(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),pu(r,t,n)}}),yu=xn({slice4d_:function(e,t,n){var r=un(e,"x","slice4d")
return S(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),pu(r,t,n)}})
function bu(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(dn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(dn(e.shape,r))),{$x:function(){var r=e.mul(n.equal(t).cast(e.dtype))
return null==i?r:r.transpose(i)}}}var xu=xn({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","all","bool"),i=j(t,r.shape),o=i,a=vn(o,r.rank)
null!=a&&(r=r.transpose(a),o=gn(o.length,r.rank))
var s=ze.runKernel(function(e){return e.all(r,o)},{$x:r})
if(n){var u=dn(s.shape,i)
return s.reshape(u)}return s}}),wu=xn({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","any","bool"),i=j(t,r.shape),o=i,a=vn(o,r.rank)
null!=a&&(r=r.transpose(a),o=gn(o.length,r.rank))
var s=ze.runKernel(function(e){return e.any(r,o)},{$x:r})
if(n){var u=dn(s.shape,i)
return s.reshape(u)}return s}}),_u=xn({argMax_:function(e,t){void 0===t&&(t=0)
var n=un(e,"x","argMax")
null==t&&(t=0)
var r=j(t,n.shape),i=vn(r,n.rank)
return null!=i&&(n=n.transpose(i),r=gn(r.length,n.rank)),ze.runKernel(function(e,t){var i=e.argMax(n,r[0])
return t([n]),i},{$x:n},function(e,t){var n=t[0]
return{$x:function(){return jn(n)}}})}}),Ru=xn({argMin_:function(e,t){void 0===t&&(t=0)
var n=un(e,"x","argMin")
null==t&&(t=0)
var r=j(t,n.shape),i=vn(r,n.rank)
return null!=i&&(n=n.transpose(i),r=gn(r.length,n.rank)),ze.runKernel(function(e,t){var i=e.argMin(n,r[0])
return t([n]),i},{$x:n},function(e,t){var n=t[0]
return{$x:function(){return jn(n)}}})}}),Eu=xn({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","logSumExp"),i=j(t,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a)
if(n){var u=dn(s.shape,i)
return s.reshape(u)}return s}}),Cu=xn({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","max"),i=r,o=j(t,r.shape),a=o,s=vn(a,r.rank)
null!=s&&(r=r.transpose(s),a=gn(a.length,r.rank))
var u=ze.runKernel(function(e,t){var n=e.max(r,a)
return t([i,n]),n},{$x:r},function(e,t){return bu(e,t[1],t[0],o,s)})
if(n){var c=dn(u.shape,o)
u=u.reshape(c)}return u}}),ku=xn({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","mean"),i=j(t,r.shape),o=I(fn(r.shape,i)[1])
return Xr(function(e){var r=kn(o)
return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice()
return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Dn(e.shape,"float32")).div(o)}}})(r)}}),Su=xn({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","min"),i=r,o=j(t,r.shape),a=o,s=vn(a,r.rank)
null!=s&&(r=r.transpose(s),a=gn(a.length,r.rank))
var u=ze.runKernel(function(e,t){var n=e.min(r,a)
return t([i,n]),n},{$x:r},function(e,t){return bu(e,t[1],t[0],o,s)})
if(n){var c=dn(u.shape,o)
u=u.reshape(c)}return u}}),Au=xn({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=j(t,(e=un(e,"x","moments")).shape),i=e.mean(r,n),o=i.shape
n||(o=dn(i.shape,r))
var a=e.toFloat().sub(i.reshape(o)).square()
return{mean:i,variance:a.mean(r,n)}}}),Tu=xn({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","sum")
"bool"===r.dtype&&(r=r.toInt())
var i=j(t,r.shape)
return Xr(function(e){var t=vn(i,e.rank),r=i,o=e
null!=t&&(o=e.transpose(t),r=gn(r.length,e.rank))
var a=ze.runKernel(function(e){return e.sum(o,r)},{permutedX:o})
if(n){var s=dn(a.shape,i)
a=a.reshape(s)}return{value:a,gradFunc:function(t){var n=e.shape.slice()
return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Dn(e.shape,"float32"))}}})(r)}}),Ou=xn({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=un(e,"x","prod")
"bool"===r.dtype&&(r=r.toInt())
var i=j(t,r.shape),o=vn(i,r.rank),a=i,s=r
null!=o&&(s=r.transpose(o),a=gn(a.length,r.rank))
var u=ze.runKernel(function(e){return e.prod(s,a)},{permutedX:s})
if(n){var c=dn(u.shape,i)
u=u.reshape(c)}return u}}),Iu=xn({equal_:function(e,t){var n,r=un(e,"a","equal"),i=un(t,"b","equal")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e){return e.equal(r,i)},{$a:r,$b:i})}}),Nu=xn({equalStrict_:function(e,t){var n=un(e,"a","equalStrict"),r=un(t,"b","equalStrict")
return A(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Du=xn({greater_:function(e,t){var n,r=un(e,"a","greater"),i=un(t,"b","greater")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e){return e.greater(r,i)},{$a:r,$b:i})}}),Pu=xn({greaterEqual_:function(e,t){var n,r=un(e,"a","greaterEqual"),i=un(t,"b","greaterEqual")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e,t){var n=e.greaterEqual(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return jn(n)},$b:function(){return jn(r)}}})}}),Mu=xn({greaterEqualStrict_:function(e,t){var n=un(e,"a","greaterEqualStrict"),r=un(t,"b","greaterEqualStrict")
return A(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Fu=xn({greaterStrict_:function(e,t){var n=un(e,"a","greaterStrict"),r=un(t,"b","greaterStrict")
return A(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Lu=xn({less_:function(e,t){var n,r=un(e,"a","less"),i=un(t,"b","less")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e){return e.less(r,i)},{$a:r,$b:i})}}),Bu=xn({lessEqual_:function(e,t){var n,r=un(e,"a","lessEqual"),i=un(t,"b","lessEqual")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e){return e.lessEqual(r,i)},{$a:r,$b:i})}}),ju=xn({lessEqualStrict_:function(e,t){var n=un(e,"a","lessEqualStrict"),r=un(t,"b","lessEqualStrict")
return A(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),zu=xn({lessStrict_:function(e,t){var n=un(e,"a","lessStrict"),r=un(t,"b","lessStrict")
return A(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Uu=xn({notEqual_:function(e,t){var n,r=un(e,"a","notEqual"),i=un(t,"b","notEqual")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e){return e.notEqual(r,i)},{$a:r,$b:i})}}),Wu=xn({notEqualStrict_:function(e,t){var n=un(e,"a","notEqualStrict"),r=un(t,"b","notEqualStrict")
return A(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),Vu=xn({add_:function(e,t){var n,r=un(e,"a","add"),i=un(t,"b","add")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e){return e.add(r,i)},{$a:r,$b:i},function(e){return{$a:function(){var t=e,n=ni(r.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=ni(i.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}})}}),qu=xn({addN_:function(e){S(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),S(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length})
var t=e.map(function(e,t){return un(e,"tensors"+t,"addN")}),n=t[0]
t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!N(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})
var r=t
return ze.runKernel(function(e){return e.addN(t)},r,function(e){var n={}
return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n})}}),Hu=xn({addStrict_:function(e,t){var n=un(e,"a","addStrict"),r=un(t,"b","addStrict")
return A(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Gu=xn({atan2_:function(e,t){var n,r=un(e,"a","atan2"),i=un(t,"b","atan2")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e,t){var n=e.atan2(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=Vu(n.square(),r.square()),i=e.mul(r.div(t)),a=ni(n.shape,o)
return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},$b:function(){var t=Vu(n.square(),r.square()),i=ps(e.mul(n.div(t))),a=ni(r.shape,o)
return a.length>0&&(i=i.sum(a)),i.reshape(r.shape)}}})}}),Ku=xn({div_:function(e,t){var n,r=un(e,"a","div"),i=un(t,"b","div")
if(n=De(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return Xu(r,i)
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e,t){var n=e.realDivide(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.div(r.toFloat()),i=ni(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=ni(r.shape,o)
i.length>0&&(t=t.sum(i).reshape(r.shape))
var a=r.square()
return t.div(a.toFloat()).neg()}}})}}),$u=xn({divStrict_:function(e,t){var n=un(e,"a","div"),r=un(t,"b","div")
return A(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Xu=xn({floorDiv_:function(e,t){var n,r=un(e,"a","floorDiv"),i=un(t,"b","floorDiv")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e,t){var n=e.floorDiv(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.div(r.toFloat()),i=ni(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=ni(r.shape,o)
i.length>0&&(t=t.sum(i).reshape(r.shape))
var a=r.square()
return t.div(a.toFloat()).neg()}}})}}),Yu=xn({maximum_:function(e,t){var n,r=un(e,"a","maximum"),i=un(t,"b","maximum")
return n=De(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),ri(r.shape,i.shape),ze.runKernel(function(e,t){var n=e.maximum(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}})}}),Qu=xn({maximumStrict_:function(e,t){var n=un(e,"a","maximumStrict"),r=un(t,"b","maximumStrict")
return A(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Ju=xn({minimum_:function(e,t){var n,r=un(e,"a","minimum"),i=un(t,"b","minimum")
return n=De(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),ri(r.shape,i.shape),ze.runKernel(function(e,t){var n=e.minimum(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}})}}),Zu=xn({minimumStrict_:function(e,t){var n=un(e,"a","minimumStrict"),r=un(t,"b","minimumStrict")
return A(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),ec=xn({mod_:function(e,t){var n,r=un(e,"a","mod"),i=un(t,"b","mod")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e,t){var n=e.mod(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=ni(n.shape,o)
return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=ni(r.shape,o)
return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),tc=xn({modStrict_:function(e,t){var n=un(e,"a","modStrict"),r=un(t,"b","modStrict")
return A(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),nc=xn({mul_:function(e,t){var n,r=un(e,"a","mul"),i=un(t,"b","mul")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e,t){var n=e.multiply(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.mul(r.toFloat()),i=ni(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=ni(r.shape,o)
return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),rc=xn({mulStrict_:function(e,t){var n=un(e,"a","mul"),r=un(t,"b","mul")
return A(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),ic=xn({pow_:function(e,t){var n=un(e,"base","pow"),r=un(t,"exp","pow"),i=ri(n.shape,r.shape)
return e=n.cast(Ie(n.dtype,r.dtype)),t=r.cast(Ie(n.dtype,r.dtype)),ze.runKernel(function(e,t){var i=e.pow(n,r)
return t([n,r,i]),i},{$base:n,$exp:r},function(e,t){var n=t[0],r=t[1],o=t[2]
return{$base:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(kn(1))))),a=ni(n.shape,i)
return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$exp:function(){var t=n.greater(0),a=n.log().where(t,jn(n)),s=e.mul(o.mul(a)),u=ni(r.shape,i)
return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}})}}),oc=xn({powStrict_:function(e,t){return A(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),ac=xn({squaredDifference_:function(e,t){var n,r=un(e,"a","squaredDifference"),i=un(t,"b","squaredDifference")
return n=De(r,i),r=n[0],i=n[1],ri(r.shape,i.shape),ze.runKernel(function(e,t){var n=e.squaredDifference(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1],i=kn(2)
return{$a:function(){return e.mul(n.sub(r).mul(i))},$b:function(){return e.mul(r.sub(n).mul(i))}}})}}),sc=xn({squaredDifferenceStrict_:function(e,t){var n=un(e,"a","squaredDifferenceStrict"),r=un(t,"b","squaredDifferenceStrict")
return A(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),uc=xn({sub_:function(e,t){var n,r=un(e,"a","sub"),i=un(t,"b","sub")
n=De(r,i),r=n[0],i=n[1]
var o=ri(r.shape,i.shape)
return ze.runKernel(function(e){return e.subtract(r,i)},{$a:r,$b:i},function(e){return{$a:function(){var t=e,n=ni(r.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=ni(i.shape,o)
return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}})}}),cc=xn({subStrict_:function(e,t){var n=un(e,"a","subStrict"),r=un(t,"b","subStrict")
return A(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),lc=xn({logicalAnd_:function(e,t){var n=un(e,"a","logicalAnd","bool"),r=un(t,"b","logicalAnd","bool")
return ri(n.shape,r.shape),ze.runKernel(function(e){return e.logicalAnd(n,r)},{$a:n,$b:r})}}),hc=xn({logicalNot_:function(e){var t=un(e,"x","logicalNot","bool")
return ze.runKernel(function(e){return e.logicalNot(t)},{$x:t})}}),fc=xn({logicalOr_:function(e,t){var n=un(e,"a","logicalOr","bool"),r=un(t,"b","logicalOr","bool")
return ri(n.shape,r.shape),ze.runKernel(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),dc=xn({logicalXor_:function(e,t){var n=un(e,"a","logicalXor","bool"),r=un(t,"b","logicalXor","bool")
return ri(n.shape,r.shape),fc(e,t).logicalAnd(lc(e,t).logicalNot())}}),pc=xn({where_:function(e,t,n){var r=un(t,"a","where"),i=un(n,"b","where"),o=un(e,"condition","where","bool")
return A(r.shape,i.shape,"Error in where: "),1===o.rank?S(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):A(o.shape,i.shape,"Error in where: "),ze.runKernel(function(e,t){var n=e.select(o,r,i)
return t([o]),n},{$condition:o,$a:r,$b:i},function(e,t){var n=t[0]
return{$condition:function(){return jn(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),vc=function(e){return m(this,void 0,void 0,function(){var t,n,r
return g(this,function(i){switch(i.label){case 0:return[4,(t=un(e,"condition","whereAsync","bool")).data()]
case 1:return n=i.sent(),r=Si(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},mc=xn({elu_:function(e){var t=un(e,"x","elu")
return ze.runKernel(function(e,n){var r=e.elu(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return ze.runKernel(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),gc=xn({leakyRelu_:function(e,t){void 0===t&&(t=.2)
var n=un(e,"x","leakyRelu")
return Yu(kn(t).mul(n),n)}}),yc=xn({prelu_:function(e,t){var n=un(e,"x","prelu"),r=un(t,"alpha","prelu")
return ze.runKernel(function(e,t){var i=e.prelu(n,r)
return t([n,r]),i},{$x:n,$alpha:r},function(e,t){var n=t[0],r=t[1],i=n.greater(0)
return{$x:function(){return pc(i,e,e.mul(r))},$alpha:function(){var t=pc(i,jn(e),e.mul(n)),o=ni(r.shape,e.shape)
return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}})}}),bc=xn({relu_:function(e){var t=un(e,"x","relu")
return"bool"===t.dtype?t.toInt():ze.runKernel(function(e,n){var r=e.relu(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mulStrict(n.step().toFloat())}}})}}),xc=xn({selu_:function(e){var t=un(e,"x","selu")
return ze.runKernel(function(e,n){var r=e.selu(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){var t=n.greater(kn(0)),r=kn(1.7580993408473768),i=kn(1.0507009873554805),o=e.mul(i),a=e.mul(r).mul(n.toFloat().exp())
return pc(t,o,a)}}})}}),wc=xn({transpose_:function(e,t){var n=un(e,"x","transpose")
return null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),S(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){S(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1?n.clone():ze.runKernel(function(e){return e.transpose(n,t)},{$x:n},function(e){var n=mn(t)
return{$x:function(){return e.transpose(n)}}})}}),_c=xn({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5)
var o=un(e,"x","localResponseNormalization")
S(4===o.rank||3===o.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),S(D(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."})
var a=o,s=!1
3===o.rank&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]))
var u=ze.runKernel(function(e,o){var s=e.localResponseNormalization4D(a,t,n,r,i)
return o([a,s]),s},{x4D:a},function(e,o){var a=o[0],s=o[1]
return{x4D:function(){return ze.runKernel(function(o){return o.LRNGrad(e,a,s,t,n,r,i)},{})}}})
return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Rc=xn({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1)
var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs()
if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r)
if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r)
if(n===1/0)return t.abs().max(r)
if(n===-1/0)return t.abs().min(r)
if("euclidean"===n||2===n)return t.abs().pow(kn(2,"int32")).sum(r).sqrt()
throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1)
if(n===1/0)return t.abs().sum(r[1]).max(r[0])
if(n===-1/0)return t.abs().sum(r[1]).min(r[0])
if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt()
throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=un(e,"x","norm"),t,n),o=i.shape
if(r){var a=j(n,e.shape)
o=dn(i.shape,a)}return i.reshape(o)}})
function Ec(e,t){for(var n=[],r=e;r<t;++r)n.push(r)
return n}function Cc(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r])
return t}var kc=xn({gather_:function(e,t,n){void 0===n&&(n=0)
var r=un(e,"x","gather"),i=un(t,"indices","gather","int32")
n=j(n,r.shape)[0]
var o=function(e,t,n){for(var r=e.shape[n],i=[],o=1,a=1,s=0;s<n;s++)i.push(e.shape[s]),o*=e.shape[s]
for(s=0;s<t.rank;s++)i.push(t.shape[s])
for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),a*=e.shape[s]
return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}(r,i,n)
return ze.runKernel(function(e,t){var o=e.gather(r,i.flatten(),n)
return t([i]),o},{$x:r},function(e,t){var i=t[0]
return{$x:function(){var t=r.shape,o=i.size,a=t.slice(0,n),s=a.length,u=t.slice(n,t.length).slice(1),c=u.length,l=Ec(0,s),h=Ec(s+1,s+1+c),f=Cc([a,[o],u]),d=e.reshape(f),p=i.reshape([o]),v=Cc([[s],l,h]),m=d.transpose(v),g=Sc(m,p,r.shape[n]),y=mn(v)
return g.transpose(y)}}}).reshape(o.outputShape)}}),Sc=xn({unsortedSegmentSum_:function(e,t,n){var r=un(e,"x","unsortedSegmentSum"),i=un(t,"segmentIds","unsortedSegmentSum","int32")
return S(D(n),function(){return"numSegments must be of dtype int"}),ze.runKernel(function(e,t){var o=e.unsortedSegmentSum(r,i,n)
return t([i]),o},{$x:r},function(e,t){var n=t[0]
return{$x:function(){return function(e,t){for(var n=Yu(t,jn(t)),r=kc(e,n),i=Pu(t,kn(0,"int32")),o=r.rank-i.rank,a=0;a<o;++a)i=lr(i,a+1)
i=lc(i,Dn(r.shape,"bool"))
var s=jn(r)
return pc(i,r,s)}(e,n)}}})}}),Ac=xn({basicLSTMCell_:function(e,t,n,r,i,o){var a=un(e,"forgetBias","basicLSTMCell"),s=un(t,"lstmKernel","basicLSTMCell"),u=un(n,"lstmBias","basicLSTMCell"),c=un(r,"data","basicLSTMCell"),l=un(i,"c","basicLSTMCell"),h=un(o,"h","basicLSTMCell"),f=c.concat(h,1).matMul(s).add(u),d=f.shape[0],p=f.shape[1]/4,v=[d,p],m=f.slice([0,0],v),g=f.slice([0,p],v),y=f.slice([0,2*p],v),b=f.slice([0,3*p],v),x=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid())
return[x,w]}}),Tc=xn({multiRNNCell_:function(e,t,n,r){for(var i=un(t,"data","multiRNNCell"),o=cn(n,"c","multiRNNCell"),a=cn(r,"h","multiRNNCell"),s=i,u=[],c=0;c<e.length;c++){var l=e[c](s,o[c],a[c])
u.push(l[0]),u.push(l[1]),s=l[1]}var h=[],f=[]
for(c=0;c<u.length;c+=2)h.push(u[c]),f.push(u[c+1])
return[h,f]}}),Oc=xn({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0)
var o=un(e,"v","movingAverage"),a=un(t,"x","movingAverage"),s=un(n,"decay","movingAverage")
Pe(o,a),S(N(o.shape,a.shape),function(){return"Shape mismatch in v and x"})
var u=kn(1),c=u.sub(s),l=a.sub(o).mul(c)
if(i){S(null!=r,function(){return"When using zeroDebias: true, step is required."})
var h=un(r,"step","movingAverage")
l=l.div(u.sub(ic(s,h)))}return o.add(l)}}),Ic=xn({stridedSlice_:function(e,t,n,r,i,o,a,s,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==a)throw new Error("ellipsis mask is not yet supported")
if(0!==s)throw new Error("new axis mask is not yet supported")
var c=un(e,"x","stridedSlice")
if(r.every(function(e){return 1===e})){var l=jr(c.shape,t,n,r,i,o,a,s,u),h=l[0],f=l[1],d=l[2],p=f.filter(function(e,t){return-1===d.indexOf(t)})
return pu(c,h,f).reshape(p)}return ze.runKernel(function(e){return e.stridedSlice(c,t,n,r,i,o,a,s,u)},{$x:c})}}),Nc=xn({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0)
var r=un(e,"x","topk")
if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher")
var i=r.shape[r.shape.length-1]
if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t)
var o=ze.runKernel(function(e){return e.topk(r,t,n)},{$x:r})
return{values:o[0],indices:o[1]}}}),Dc=xn({scatterND_:function(e,t,n){var r=un(e,"indices","scatterND","int32"),i=un(t,"updates","scatterND")
return function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".")
if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".")
if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype)
if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n)
if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape)
if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+"."
if(n.rank<i)throw new Error(o+" update.rank < "+i+". ")
if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)))
if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r))
for(var a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").")
for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+e[a+i]+")")}(n,t,e)}(i,r,n),ze.runKernel(function(e){return e.scatterND(r,i,n)},{$indices:r,$updates:i})}}),Pc=xn({fft_:function(e){S("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."})
var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t)
return ze.runKernel(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),Mc=xn({ifft_:function(e){S("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."})
var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t)
return ze.runKernel(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),Fc=xn({rfft_:function(e,t){S("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype})
var n,r=e.shape[e.shape.length-1],i=e.size/r
if(null!=t&&t<r){var o=e.shape.map(function(e){return 0}),a=e.shape.map(function(e){return e})
a[e.shape.length-1]=t,n=e.slice(o,a),r=t}else if(null!=t&&t>r){var s=e.shape.map(function(e){return e})
s[e.shape.length-1]=t-r,n=e.concat(Pn(s),e.shape.length-1),r=t}else n=e
var u=n.zerosLike(),c=wn(n,u).as2D(i,r),l=Pc(c),h=Math.floor(r/2)+1,f=_n(l),d=Rn(l),p=f.split([h,r-h],f.shape.length-1),v=d.split([h,r-h],d.shape.length-1),m=n.shape.slice()
return m[n.shape.length-1]=h,wn(p[0],v[0]).reshape(m)}}),Lc=xn({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t
if(t<=2){var r=e.as2D(n,t),i=Mc(r)
return _n(i)}var o=[n,2*(t-1)],a=_n(e).as2D(n,t),s=Rn(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(kn(-1)),l=a.concat(u,1),h=s.concat(c,1)
return r=wn(l,h).as2D(o[0],o[1]),i=Mc(r),_n(i)}}),Bc=Object.freeze({fft:Pc,ifft:Mc,rfft:Fc,irfft:Lc}),jc=xn({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0)
var i=un(e,"sparseIndices","sparseToDense","int32"),o=un(t,"sparseValues","sparseToDense"),a=un(r,"defaultValue","sparseToDense",o.dtype)
return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".")
if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".")
var i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1
if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".")
var a=t.size
if(0!==t.rank&&(1!==t.rank||a!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]")
if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),ze.runKernel(function(e){return e.sparseToDense(i,o,n,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),zc=xn({gatherND_:function(e,t){var n=un(t,"indices","gatherND","int32"),r=un(e,"x","gatherND")
return ze.runKernel(function(e){return e.gatherND(r,n)},{$x:r,$indices:n})}}),Uc=xn({dropout_:function(e,t,n,r){if(null!=n&&!N(e.shape,n))throw new Error("Non-default noise shape is not implemented yet: "+JSON.stringify(n))
var i=wr(e.shape,0,1,"float32",r).greater(t)
return i=i.div(uc(1,t)),e.mul(i)}})
function Wc(e,t,n){for(var r=1-e%2,i=new Float32Array(e),o=0;o<e;++o){var a=2*Math.PI*o/(e+r-1)
i[o]=t-n*Math.cos(a)}return Sn(i,"float32")}var Vc,qc=xn({hannWindow_:function(e){return Wc(e,.5,.5)}}),Hc=xn({hammingWindow_:function(e){return Wc(e,.54,.46)}}),Gc=xn({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0)
for(var o=0,a=[];o+t<=e.size;)a.push(pu(e,o,t)),o+=n
if(r){var s=o+t-e.size,u=zn([pu(e,o,t-s),Mn([s],i)])
a.push(u)}return 0===a.length?An([],[0,t]):zn(a).as2D(a.length,t)}}),Kc=Object.freeze({hannWindow:qc,hammingWindow:Hc,frame:Gc})
!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Vc||(Vc={}))
var $c=xn({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Vc.SUM_BY_NONZERO_WEIGHTS)
var i=un(e,"labels","absoluteDifference"),o=un(t,"predictions","absoluteDifference"),a=null
null!=n&&(a=un(n,"weights","absoluteDifference")),A(i.shape,o.shape,"Error in absoluteDifference: ")
var s=i.sub(o).abs()
return Xc(s,a,r)}}),Xc=xn({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Vc.SUM_BY_NONZERO_WEIGHTS)
var r=un(e,"losses","computeWeightedLoss"),i=null
null!=t&&(i=un(t,"weights","computeWeightedLoss"))
var o=null==i?r:r.mul(i)
if(n===Vc.NONE)return o
if(n===Vc.SUM)return o.sum()
if(n===Vc.MEAN){if(null==i)return o.mean()
var a=r.size/i.size,s=o.sum().div(i.sum())
return a>1?s.div(kn(a)):s}if(n===Vc.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(kn(r.size))
var u=i.mul(Dn(r.shape)).notEqual(kn(0)).sum().toFloat()
return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Yc=xn({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=Vc.SUM_BY_NONZERO_WEIGHTS)
var o=un(e,"labels","cosineDistance"),a=un(t,"predictions","cosineDistance"),s=null
null!=r&&(s=un(r,"weights","cosineDistance")),A(o.shape,a.shape,"Error in cosineDistance: ")
var u=kn(1).sub(o.mul(a).sum(n,!0))
return Xc(u,s,i)}}),Qc=xn({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Vc.SUM_BY_NONZERO_WEIGHTS)
var i=un(e,"labels","hingeLoss"),o=un(t,"predictions","hingeLoss"),a=null
null!=n&&(a=un(n,"weights","hingeLoss")),A(i.shape,o.shape,"Error in hingeLoss: ")
var s=kn(1)
i=kn(2).mul(i).sub(s)
var u=s.sub(i.mul(o)).relu()
return Xc(u,a,r)}}),Jc=xn({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=Vc.SUM_BY_NONZERO_WEIGHTS)
var o=un(e,"labels","huberLoss"),a=un(t,"predictions","huberLoss"),s=null
null!=n&&(s=un(n,"weights","huberLoss")),A(o.shape,a.shape,"Error in huberLoss: ")
var u=kn(r),c=a.sub(o).abs(),l=Ju(c,u),h=c.sub(l),f=kn(.5).mul(l.square()).add(u.mul(h))
return Xc(f,s,i)}}),Zc=xn({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=Vc.SUM_BY_NONZERO_WEIGHTS)
var o=un(e,"labels","logLoss"),a=un(t,"predictions","logLoss"),s=null
null!=n&&(s=un(n,"weights","logLoss")),A(o.shape,a.shape,"Error in logLoss: ")
var u=kn(1),c=kn(r),l=o.mul(a.add(c).log()).neg().sub(u.sub(o).mul(u.sub(a).add(c).log()))
return Xc(l,s,i)}}),el=xn({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Vc.SUM_BY_NONZERO_WEIGHTS)
var i=un(e,"labels","meanSquaredError"),o=un(t,"predictions","meanSquaredError"),a=null
null!=n&&(a=un(n,"weights","meanSquaredError")),A(i.shape,o.shape,"Error in meanSquaredError: ")
var s=i.squaredDifference(o)
return Xc(s,a,r)}}),tl=xn({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Vc.SUM_BY_NONZERO_WEIGHTS)
var o=un(e,"multiClassLabels","sigmoidCrossEntropy"),a=un(t,"logits","sigmoidCrossEntropy"),s=null
if(null!=n&&(s=un(n,"weights","sigmoidCrossEntropy")),A(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=kn(r),c=kn(1),l=kn(.5)
o=o.mul(c.sub(u)).add(l.mul(u))}var h=function(e,t){var n=un(e,"labels","sigmoidCrossEntropyWithLogits"),r=un(t,"logits","sigmoidCrossEntropyWithLogits")
A(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ")
var i=r.relu(),o=r.mul(n),a=r.abs().neg().exp().log1p()
return i.sub(o).add(a)}(o,a)
return Xc(h,s,i)}}),nl=xn({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Vc.SUM_BY_NONZERO_WEIGHTS)
var o=un(e,"onehotLabels","softmaxCrossEntropy"),a=un(t,"logits","softmaxCrossEntropy"),s=null
if(null!=n&&(s=un(n,"weights","softmaxCrossEntropy")),A(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=kn(r),c=kn(1),l=kn(o.shape[1])
o=o.mul(c.sub(u)).add(u.div(l))}var h=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n)
return Xr(function(e,t,r){var i=t.logSumExp([n],!0),o=t.toFloat().sub(i)
return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],o=dn(e.shape,[n])
return[e.reshape(o).mul(r.toFloat().sub(i.exp())),e.reshape(o).mul(i.exp().sub(r.toFloat()))]}}})(e,t)}(o,a)
return Xc(h,s,i)}}),rl=Object.freeze({get Reduction(){return Vc},absoluteDifference:$c,computeWeightedLoss:Xc,cosineDistance:Yc,hingeLoss:Qc,huberLoss:Jc,logLoss:Zc,meanSquaredError:el,sigmoidCrossEntropy:tl,softmaxCrossEntropy:nl})
function il(e,t){return void 0===t&&(t=!1),ze.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.")
for(var n=e.shape[0],r=e.shape[1],i=hr(n),o=e.clone(),a=An([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,c=function(e){var t,u=o,c=s,l=i
t=ze.tidy(function(){var t=o.slice([e,e],[n-e,1]),u=t.norm(),c=o.slice([e,e],[1,1]),l=c.sign().neg(),h=c.sub(l.mul(u)),f=t.div(h)
s=1===f.shape[0]?a.clone():a.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0)
var d=l.matMul(h).div(u).neg(),p=o.slice([e,0],[n-e,r]),v=d.mul(s)
o=0===e?p.sub(v.matMul(s.transpose().matMul(p))):o.slice([0,0],[e,r]).concat(p.sub(v.matMul(s.transpose().matMul(p))),0)
var m=i.slice([0,e],[n,i.shape[1]-e])
return i=0===e?m.sub(m.matMul(s).matMul(v.transpose())):i.slice([0,0],[n,e]).concat(m.sub(m.matMul(s).matMul(v.transpose())),1),[s,o,i]}),s=t[0],o=t[1],i=t[2],Gt([u,c,l])},l=0;l<u;++l)c(l)
return!t&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var ol=xn({gramSchmidt_:function(e){var t
if(Array.isArray(e)){t=!1,S(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"})
for(var n=e[0].shape[0],r=function(t){S(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},i=1;i<e.length;++i)r(i)}else t=!0,e=Hn(e,e.shape[0],0).map(function(e){return Er(e,[0])})
S(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."})
var o=[],a=e,s=function(e){o.push(ze.tidy(function(){var t=a[e]
if(e>0)for(var n=0;n<e;++n){var r=Tu(o[n].mulStrict(t)).mul(o[n])
t=t.sub(r)}return t.div(Rc(t,"euclidean"))}))}
for(i=0;i<e.length;++i)s(i)
return t?Cr(o,0):o}}),al=xn({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank)
if(2===e.rank)return il(e,t)
var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=Ar(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[]
return r.forEach(function(e){var n=il(e,t),r=n[0],a=n[1]
i.push(r),o.push(a)}),[Cr(i,0).reshape(e.shape),Cr(o,0).reshape(e.shape)]}}),sl=Object.freeze({gramSchmidt:ol,qr:al})
function ul(e,t,n,r,i){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY)
var o=e.shape[0]
return n=Math.min(n,o),S(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),S(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),S(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),S(1===t.rank,function(){return"scores must be a 1D tensor"}),S(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var cl=xn({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1)
var r=un(e,"images","resizeBilinear")
S(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),S(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."})
var i=r,o=!1
3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]))
var a=t[0],s=t[1],u=ze.runKernel(function(e,t){return t([i]),e.resizeBilinear(i,a,s,n)},{batchImages:i},function(e,t){return{batchImages:function(){return ze.runKernel(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}})
return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ll=xn({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1)
var r=un(e,"images","resizeNearestNeighbor")
S(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),S(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),S("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"})
var i=r,o=!1
3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]))
var a=t[0],s=t[1],u=ze.runKernel(function(e,t){return t([i]),e.resizeNearestNeighbor(i,a,s,n)},{batchImages:i},function(e,t){return{batchImages:function(){return ze.runKernel(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}})
return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),hl=xn({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY)
var o=un(e,"boxes","nonMaxSuppression"),a=un(t,"scores","nonMaxSuppression"),s=ul(o,a,n,r,i)
return n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,ze.runKernel(function(e){return e.nonMaxSuppression(o,a,n,r,i)},{$boxes:o})}}),fl=xn({cropAndResize_:function(e,t,n,r,i,o){var a=un(e,"image","cropAndResize","float32"),s=un(t,"boxes","cropAndResize","float32"),u=un(n,"boxInd","cropAndResize","int32")
i=i||"bilinear",o=o||0
var c=s.shape[0]
return S(4===a.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),S(2===s.rank&&4===s.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),S(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),S(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),S(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),S("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),ze.runKernel(function(e,t){return e.cropAndResize(a,s,u,r,i,o)},{$image:a,$boxes:s})}}),dl=Object.freeze({resizeBilinear:cl,resizeNearestNeighbor:ll,nonMaxSuppression:hl,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),m(this,void 0,void 0,function(){var o,a,s,u,c,l
return g(this,function(h){switch(h.label){case 0:return o=un(e,"boxes","nonMaxSuppressionAsync"),a=un(t,"scores","nonMaxSuppressionAsync"),s=ul(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,o.data()]
case 1:return u=h.sent(),[4,a.data()]
case 2:return c=h.sent(),l=_i(u,c,n,r,i),o!==e&&o.dispose(),a!==t&&a.dispose(),[2,l]}})})},cropAndResize:fl}),pl=xn({matMul_:function(e,t,n,r,i,o){var a
void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="linear")
var s=un(e,"a","fused matMul"),u=un(t,"b","fused matMul")
a=De(s,u),s=a[0],u=a[1]
var c=n?s.shape[s.rank-2]:s.shape[s.rank-1],l=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?s.shape[s.rank-1]:s.shape[s.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],d=s.shape.slice(0,-2),p=u.shape.slice(0,-2),v=I(d),m=I(p)
S(s.rank>=2&&u.rank>=2&&s.rank===u.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+u.rank+"."}),S(N(d,p),function(){return"Error in fused matMul: outer dimensions ("+d+") and ("+p+") of Tensors with shapes "+s.shape+" and "+u.shape+" must match."}),S(c===l,function(){return"Error in fused matMul: inner shapes ("+c+") and ("+l+") of Tensors with shapes "+s.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."})
var g,y=s.shape.slice(0,-2).concat([h,f]),b=n?s.as3D(v,c,h):s.as3D(v,h,c),x=r?u.as3D(m,f,l):u.as3D(m,l,f)
null!=i&&ri(y,(g=De(g=un(i,"bias","fused matMul"),s)[0]).shape)
var w={$a:b,$b:x}
return null!=i&&(w.$bias=g),ze.runKernel(function(e,t){var i=e.fusedBatchMatMul(b,x,n,r,g,o)
return t([b,x,i]),i},w,function(e,t){var a,s=t[0],u=t[1],c=t[2]
if(null==o||"linear"===o)a=e
else{if("relu"!==o)throw new Error("Gradient for activation "+o+" has not been implemented yet.")
a=e.mul(c.step())}var l={}
return null!=i&&(l={$bias:function(){var e=a,t=ni(g.shape,a.shape)
return t.length>0&&(e=e.sum(t)),e.reshape(g.shape)}}),n||r?!n&&r?Object.assign({$a:function(){return a.matMul(u,!1,!1)},$b:function(){return a.matMul(s,!0,!1)}},l):n&&!r?Object.assign({$a:function(){return u.matMul(a,!1,!0)},$b:function(){return s.matMul(a,!1,!1)}},l):Object.assign({$a:function(){return u.matMul(a,!0,!0)},$b:function(){return a.matMul(s,!0,!0)}},l):Object.assign({$a:function(){return a.matMul(u,!1,!0)},$b:function(){return s.matMul(a,!0,!1)}},l)}).reshape(y)}}),vl=Object.freeze({matMul:pl}),ml=Object.freeze({image:dl,linalg:sl,losses:rl,spectral:Bc,fused:vl,signal:Kc,op:xn,batchNormalization2d:Ls,batchNormalization3d:Bs,batchNormalization4d:js,batchNormalization:zs,batchNorm:Us,batchNorm2d:Ws,batchNorm3d:Vs,batchNorm4d:qs,complex:wn,real:_n,imag:Rn,concat:zn,concat1d:Un,concat2d:Wn,concat3d:Vn,concat4d:qn,split:Hn,conv1d:$s,conv2d:Xs,conv3d:Ys,conv2dDerFilter:Qs,depthwiseConv2d:Js,separableConv2d:Zs,conv2dTranspose:eu,matMul:tu,dot:nu,outerProduct:ru,reverse:iu,reverse1d:ou,reverse2d:au,reverse3d:su,reverse4d:uu,maxPool:hu,avgPool:fu,pool:du,slice:pu,slice1d:vu,slice2d:mu,slice3d:gu,slice4d:yu,abs:Ya,acos:Qa,acosh:Ja,asin:Za,asinh:es,atan:ts,atanh:ns,ceil:rs,clipByValue:is,cos:os,cosh:as,erf:ss,exp:us,expm1:cs,floor:ls,log:hs,log1p:fs,logSigmoid:ds,neg:ps,reciprocal:vs,round:ms,rsqrt:gs,sigmoid:ys,sign:bs,isNaN:xs,isInf:ws,isFinite:_s,sin:Rs,sinh:Es,softplus:Cs,sqrt:ks,square:Ss,step:As,tan:Ts,tanh:Os,all:xu,any:wu,argMax:_u,argMin:Ru,logSumExp:Eu,max:Cu,mean:ku,min:Su,moments:Au,sum:Tu,prod:Ou,equal:Iu,equalStrict:Nu,greater:Du,greaterEqual:Pu,greaterEqualStrict:Mu,greaterStrict:Fu,less:Lu,lessEqual:Bu,lessEqualStrict:ju,lessStrict:zu,notEqual:Uu,notEqualStrict:Wu,add:Vu,addN:qu,addStrict:Hu,atan2:Gu,div:Ku,divStrict:$u,floorDiv:Xu,maximum:Yu,maximumStrict:Qu,minimum:Ju,minimumStrict:Zu,mod:ec,modStrict:tc,mul:nc,mulStrict:rc,pow:ic,powStrict:oc,squaredDifference:ac,squaredDifferenceStrict:sc,sub:uc,subStrict:cc,elu:mc,leakyRelu:gc,prelu:yc,relu:bc,selu:xc,logicalAnd:lc,logicalNot:hc,logicalOr:fc,logicalXor:dc,where:pc,whereAsync:vc,buffer:rr,print:ir,batchToSpaceND:or,cast:ar,clone:sr,cumsum:ur,depthToSpace:cr,expandDims:lr,eye:hr,multinomial:fr,oneHot:dr,pad:pr,pad1d:vr,pad2d:mr,pad3d:gr,pad4d:yr,rand:br,randomNormal:xr,randomUniform:wr,reshape:_r,spaceToBatchND:Rr,squeeze:Er,stack:Cr,tile:kr,truncatedNormal:Sr,unstack:Ar,setdiff1dAsync:Tr,fill:Mn,linspace:Fn,ones:Dn,range:Ln,scalar:kn,tensor:En,tensor1d:Sn,tensor2d:An,tensor3d:Tn,tensor4d:On,tensor5d:In,tensor6d:Nn,zeros:Pn,onesLike:Bn,zerosLike:jn,transpose:wc,softmax:Qr,logSoftmax:Jr,localResponseNormalization:_c,norm:Rc,gather:kc,unsortedSegmentSum:Sc,basicLSTMCell:Ac,multiRNNCell:Tc,movingAverage:Oc,stridedSlice:Ic,topk:Nc,scatterND:Dc,fft:Pc,ifft:Mc,rfft:Fc,irfft:Lc,sparseToDense:jc,gatherND:zc,dropout:Uc,hannWindow:qc,hammingWindow:Hc,frame:Gc}),gl=function(){function e(){if(this.blockSize=48,this.firstUse=!0,x.get("IS_BROWSER")){var e=function(){if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(300,150)
if("undefined"!=typeof document)return document.createElement("canvas")
throw new Error("Cannot create a canvas in this context")}()
this.fromPixels2DContext=e.getContext("2d")}this.data=new Zr(this,ze)}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,x.get("IS_NODE")&&on("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered")
this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null")
this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null")
var n,r
if(x.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package")
if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data
else if(e instanceof ImageData||e.data instanceof Uint8Array)n=e.data
else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name)
if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.")
this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),n=this.fromPixels2DContext.getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n)
else{var i=e.width*e.height
r=new Int32Array(i*t)
for(var o=0;o<i;o++)for(var a=0;a<t;++a)r[o*t+a]=n[4*o+a]}return Tn(r,[e.height,e.width,t],"int32")},e.prototype.read=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){return[2,this.readSync(e)]})})},e.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors
return"complex64"===n?yi(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},e.prototype.bufferSync=function(e){return rr(e.shape,e.dtype,this.readSync(e.dataId))},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors
null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){return t=se(),e(),[2,{kernelMs:se()-t}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(e,t){var n=we.make(e.shape,{},"complex64")
return this.data.get(n.dataId).complexTensors={real:ze.keep(e.clone()),imag:ze.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&S("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})},e.prototype.slice=function(e,t,n){if(this.assertNotComplex(e,"slice"),Wr(e.shape,t,n)){var r=Vr(t,e.strides),i=I(n)
return En(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var o=rr(n,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s).map(function(e,n){return e+t[n]})
o.values[s]=a.get.apply(a,u)}return o.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s,u){this.assertNotComplex(e,"stridedSlice")
var c=jr(e.shape,t,n,r,i,o,a,s,u),l=c[0],h=c[1],f=c[2],d=h.filter(function(e,t){return-1===f.indexOf(t)})
if(d.some(function(e){return 0===e}))return En([],d)
for(var p=rr(h,e.dtype),v=this.bufferSync(e),m=0;m<p.size;m++){for(var g=p.indexToLoc(m),y=new Array(g.length),b=0;b<y.length;b++)y[b]=g[b]*r[b]+l[b]
p.set.apply(p,[v.get.apply(v,y)].concat(g))}return p.toTensor().reshape(d)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o])
var a=new Array(e.rank).fill(0),s=e.shape.slice()
s[t]=1
var u=new Array(n)
for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r)
return u},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse")
for(var n=rr(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var o=n.indexToLoc(i),a=o.slice()
t.forEach(function(t){return a[t]=e.shape[t]-1-a[t]}),n.set.apply(n,[r.get.apply(r,a)].concat(o))},o=0;o<n.size;o++)i(o)
return n.toTensor()},e.prototype.concat=function(e,t){var n=this
this.assertNotComplex(e,"concat")
var r=e.map(function(e){var n=I(e.shape.slice(t))
return e.as2D(-1,n)}),i=bn(r.map(function(e){return e.shape}),1),o=rr(i,e[0].dtype).values
if(1===r[0].shape[0]){var a=0
r.forEach(function(e){o.set(n.readSync(e.dataId),a),a+=e.size})}else{var s=0
r.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var u=a*i[1]+s,c=0;c<e.shape[1];++c)o[u+c]=t[r++]
s+=e.shape[1]})}var u=bn(e.map(function(e){return e.shape}),t)
return En(o,u,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(kn(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e+t})},e.prototype.addN=function(e){var t=this
this.assertNotComplex(e,"addN")
for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=rr(e[0].shape,e[0].dtype),i=r.values,o=0;o<e.length;o++)for(var a=n[o],s=0;s<i.length;s++)i[s]+=a[s]
return r.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e-t})},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul")
for(var i=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=l[0],f=l[1],d=l[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=p[0],m=p[1],g=p[2],y=o*a,b=rr([s,o,a],e.dtype),x=b.values,w=this.blockSize,_=0;_<s;_++)for(var R=0;R<o;R+=w)for(var E=0;E<a;E+=w)for(var C=0;C<i;C+=w)for(var k=Math.min(R+w,o),S=Math.min(E+w,a),A=Math.min(C+w,i),T=R;T<k;T++)for(var O=E;O<S;O++){for(var I=0,N=C;N<A;N++)I+=u[_*h+T*f+N*d]*c[N*v+O*m+_*g]
x[_*y+(T*a+O)]+=I}return b.toTensor()},e.prototype.fusedBatchMatMul=function(e,t,n,r,i,o){var a=this.batchMatMul(e,t,n,r)
return i&&(a=this.add(a,i)),o&&(a=function(e,t,n){if("linear"===t)return e.linear(n)
if("relu"===t)return e.relu(n)
throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}(this,o,a)),a},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e*t})},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),pn("sum",t,e.rank)
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,Ie(e.dtype,"int32")),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=0,f=0;f<a;++f)h+=u[l+f]
s[c]=h}return o},e.prototype.prod=function(e,t){this.assertNotComplex(e,"sum")
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,Ie(e.dtype,"int32")),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=1,f=0;f<a;++f)h*=u[l+f]
s[c]=h}return o},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum")
for(var r=[],i=e.rank-t.rank,o=0;o<i;++o)t=t.expandDims(o+1)
for(o=0;o<n;++o){var a=kn(o,"int32"),s=Iu(a,t).asType("float32").mul(e).sum(0)
r.push(s)}return Cr(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin")
var n=[t]
pn("argMin",n,e.rank)
for(var r=fn(e.shape,n),i=r[0],o=r[1],a=Pn(i,"int32"),s=I(o),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p]
v<f&&(f=v,d=p)}u[l]=d}return a},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax")
var n=[t]
pn("argMax",n,e.rank)
for(var r=fn(e.shape,n),i=r[0],o=r[1],a=Pn(i,"int32"),s=I(o),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p]
v>f&&(f=v,d=p)}u[l]=d}return a},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t)
for(var i=Ie(e.dtype,"int32"),o=Pn(e.shape,i),a=this.readSync(o.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],c=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},l=0;l<s.length;l+=u)for(var h=0;h<u;h++){var f=c(l,h)
if(0===h)a[f]=n?0:s[f]
else{var d=c(l,h-1)
a[f]=n?s[d]+a[d]:s[f]+a[d]}}return o},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1
return we.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select")
for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),o=this.readSync(n.dataId),a=Pn(t.shape,Ie(t.dtype,n.dtype)),s=this.readSync(a.dataId),u=0,c=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],l=0;l<r.length;l++)for(var h=0;h<c;h++)1===r[l]?s[u++]=i[l]:s[u++]=o[l]
return a},e.prototype.where=function(e){this.assertNotComplex([e],"where")
var t=this.readSync(e.dataId)
return Si(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),ki(this.readSync(e.dataId),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),pn("min",t,e.rank)
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,e.dtype),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
d<h&&(h=d)}s[c]=h}return o},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t
return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),pn("max",t,e.rank)
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,e.dtype),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
d>h&&(h=d)}s[c]=h}return o},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),pn("all",t,e.rank)
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,e.dtype),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
h=h&&d}s[c]=h}return o},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),pn("any",t,e.rank)
for(var n=fn(e.shape,t),r=n[0],i=n[1],o=Pn(r,e.dtype),a=I(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
h=h||d}s[c]=h}return o},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t
return n*n})},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r])
return we.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r])
return we.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0
return we.make(e.shape,{values:n})},e.prototype.isNaN=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1)
return we.make(e.shape,{values:n},"bool")},e.prototype.isInf=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1)
return we.make(e.shape,{values:n},"bool")},e.prototype.isFinite=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1)
return we.make(e.shape,{values:n},"bool")},e.prototype.round=function(e){this.assertNotComplex(e,"round")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r])
t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return we.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r])
return we.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r])
return we.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.log(i)}return we.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.log1p(i)}return we.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.sqrt(i)}return we.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=1/Math.sqrt(i)}return we.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=i*i}return we.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r]
return we.make(e.shape,{values:n})},e.prototype.linear=function(e){return e},e.prototype.relu=function(e){this.assertNotComplex(e,"relu")
for(var t=Pn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i])
return t},e.prototype.prelu=function(e,t){return this.assertNotComplex([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},e.prototype.elu=function(e){this.assertNotComplex(e,"elu")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r]
t[r]=i>=0?i:Math.exp(i)-1}return we.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer")
for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o]
n[o]=a>=1?i[o]:i[o]*(a+1)}return we.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r]
t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return we.make(e.shape,{values:t})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip")
for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o]
r[o]=a>n?n:a<t?t:a}return we.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r])
return we.make(e.shape,{values:t})},e.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],o=n[2*r+1]
t[r]=Math.hypot(i,o)}return we.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int")
for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r]
return we.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]))
return we.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus")
for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o,a=r[i]>-t,s=r[i]<t,u=Math.exp(r[i])
o=s?u:a?r[i]:Math.log(1+u),n[i]=o}return we.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r])
return we.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r])
return we.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r])
return we.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r])
return we.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r])
return we.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r])
return we.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r])
return we.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r])
return we.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=P(n[r])
return we.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r])
return we.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r])
return we.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r])
return we.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r],o=1/(1+.3275911*i)
t[r]=1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i)}return we.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step")
for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i]
isNaN(o)?n[i]=NaN:n[i]=o>0?1:t}return we.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d")
for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=rr(n.outShape,e.dtype),l=this.readSync(e.dataId),h=this.readSync(t.dataId),f=c.values,d=0;d<n.batchSize;++d)for(var p=d*e.strides[0],v=d*c.strides[0],m=0;m<n.outHeight;++m)for(var g=v+m*c.strides[1],y=m*n.strideHeight-u,b=0;b<r;b++){var x=y+b*o
if(!(x<0||x>=n.inHeight))for(var w=b*t.strides[0],_=p+x*e.strides[1],R=0;R<n.outWidth;++R)for(var E=g+R*n.outChannels,C=R*n.strideWidth-s,k=0;k<i;k++){var S=C+k*a
if(!(S<0||S>=n.inWidth))for(var A=w+k*t.strides[1],T=_+S*n.inChannels,O=A,I=0;I<n.inChannels;++I){for(var N=l[T+I],D=0;D<n.outChannels;++D)f[E+D]+=N*h[O+D]
O+=n.outChannels}}}return c.toTensor()},e.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,h=n.padInfo.top,f=rr(n.outShape,e.dtype),d=this.readSync(e.dataId),p=this.readSync(t.dataId),v=f.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-c,_=0;_<r;_++){var R=w+_*a
if(!(R<0||R>=n.inDepth))for(var E=_*t.strides[0],C=g+R*e.strides[1],k=0;k<n.outHeight;++k)for(var S=x+k*f.strides[2],A=k*n.strideHeight-h,T=0;T<i;T++){var O=A+T*s
if(!(O<0||O>=n.inHeight))for(var I=E+T*t.strides[1],N=C+O*e.strides[2],D=0;D<n.outWidth;++D)for(var P=S+D*n.outChannels,M=D*n.strideWidth-l,F=0;F<o;F++){var L=M+F*u
if(!(L<0||L>=n.inWidth))for(var B=I+F*t.strides[2],j=N+L*n.inChannels,z=B,U=0;U<n.inChannels;++U){for(var W=d[j+U],V=0;V<n.outChannels;++V)v[P+V]+=W*p[z+V]
z+=n.outChannels}}}}return f.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput")
for(var r=rr(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],c=this.readSync(e.dataId),l=e.strides,h=l[0],f=l[1],d=l[2],p=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,_=n.inChannels,R=n.inHeight,E=n.inWidth,C=n.outChannels,k=n.outHeight,S=n.outWidth,A=n.strideHeight,T=n.strideWidth,O=x-1-n.padInfo.top,I=w-1-n.padInfo.left,N=0;N<b;++N)for(var D=0;D<_;++D)for(var P=0;P<R;++P)for(var M=P-O,F=Math.max(0,Math.ceil(M/A)),L=Math.min(k,(x+M)/A),B=0;B<E;++B){for(var j=B-I,z=Math.max(0,Math.ceil(j/T)),U=Math.min(S,(w+j)/T),W=0,V=F;V<L;++V)for(var q=V*A-M,H=z;H<U;++H)for(var G=h*N+f*V+d*H,K=m*(x-1-q)+g*(w-1-(H*T-j))+y*D,$=0;$<C;++$)W+=c[G+$]*p[K+$]
i[a*N+s*P+u*B+D]=W}return r.toTensor()},e.prototype.conv3dDerInput=function(e,t,n){for(var r=rr(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],c=o[3],l=this.readSync(e.dataId),h=e.strides,f=h[0],d=h[1],p=h[2],v=h[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],_=n.batchSize,R=n.filterDepth,E=n.filterHeight,C=n.filterWidth,k=n.inChannels,S=n.inDepth,A=n.inHeight,T=n.inWidth,O=n.outChannels,I=n.outDepth,N=n.outHeight,D=n.outWidth,P=n.strideDepth,M=n.strideHeight,F=n.strideWidth,L=R-1-n.padInfo.front,B=E-1-n.padInfo.top,j=C-1-n.padInfo.left,z=0;z<_;++z)for(var U=0;U<k;++U)for(var W=0;W<S;++W)for(var V=W-L,q=Math.max(0,Math.ceil(V/P)),H=Math.min(I,(R+V)/P),G=0;G<A;++G)for(var K=G-B,$=Math.max(0,Math.ceil(K/M)),X=Math.min(N,(E+K)/M),Y=0;Y<T;++Y){for(var Q=Y-j,J=Math.max(0,Math.ceil(Q/F)),Z=Math.min(D,(C+Q)/F),ee=0,te=q;te<H;++te)for(var ne=te*P-V,re=$;re<X;++re)for(var ie=re*M-K,oe=J;oe<Z;++oe)for(var ae=f*z+d*te+p*re+v*oe,se=y*(R-1-ne)+b*(E-1-ie)+x*(C-1-(oe*F-Q))+w*U,ue=0;ue<O;++ue)ee+=l[ae+ue]*m[se+ue]
i[a*z+s*W+u*G+c*Y+U]=ee}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=rr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=this.bufferSync(e),h=this.bufferSync(t),f=0;f<o;++f)for(var d=Math.max(0,Math.ceil((c-f)/r)),p=Math.min(n.outHeight,(n.inHeight+c-f)/r),v=0;v<a;++v)for(var m=Math.max(0,Math.ceil((u-v)/i)),g=Math.min(n.outWidth,(n.inWidth+u-v)/i),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var x=0,w=0;w<n.batchSize;++w)for(var _=d;_<p;++_)for(var R=f+_*r-c,E=m;E<g;++E){var C=v+E*i-u
x+=l.get(w,R,C,y)*h.get(w,_,E,b)}s.set(x,f,v,y,b)}return s.toTensor()},e.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=rr(n.filterShape,"float32"),l=c.values,h=c.strides,f=h[0],d=h[1],p=h[2],v=h[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],_=this.readSync(e.dataId),R=e.strides,E=R[0],C=R[1],k=R[2],S=R[3],A=n.padInfo.front,T=n.padInfo.left,O=n.padInfo.top,I=0;I<a;++I)for(var N=Math.max(0,Math.ceil((A-I)/r)),D=Math.min(n.outDepth,(n.inDepth+A-I)/r),P=I*f,M=0;M<s;++M)for(var F=Math.max(0,Math.ceil((O-M)/i)),L=Math.min(n.outHeight,(n.inHeight+O-M)/i),B=M*d+P,j=0;j<u;++j)for(var z=Math.max(0,Math.ceil((T-j)/o)),U=Math.min(n.outWidth,(n.inWidth+T-j)/o),W=j*p+B,V=0;V<n.inChannels;++V)for(var q=V*v+W,H=0;H<n.outChannels;++H){for(var G=0,K=0;K<n.batchSize;++K)for(var $=K*E,X=K*y,Y=N;Y<D;++Y)for(var Q=(I+Y*r-A)*C+$,J=Y*b+X,Z=F;Z<L;++Z)for(var ee=(M+Z*i-O)*k+Q,te=Z*x+J,ne=z;ne<U;++ne){var re=ne*w+te
G+=_[(j+ne*o-T)*S+ee+V]*m[re+H]}l[q+H]=G}return c.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D")
for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=rr(n.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(t.dataId),d=l.values,p=0;p<n.batchSize;++p)for(var v=p*e.strides[0],m=p*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],b=g*n.strideHeight-s,x=0;x<r;++x){var w=b+x*o
if(!(w<0||w>=n.inHeight))for(var _=x*t.strides[0],R=v+w*e.strides[1],E=0;E<n.outWidth;++E)for(var C=y+E*l.strides[2],k=E*n.strideWidth-u,S=0;S<i;++S){var A=k+S*a
if(!(A<0||A>=n.inWidth))for(var T=_+S*t.strides[1],O=R+A*n.inChannels,I=C,N=T,D=0;D<n.inChannels;++D){for(var P=h[O+D],M=0;M<c;++M)d[I+M]+=P*f[N+M]
I+=c,N+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput")
for(var r=rr(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],c=this.readSync(e.dataId),l=e.strides,h=l[0],f=l[1],d=l[2],p=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,_=n.inChannels,R=n.inHeight,E=n.inWidth,C=n.outChannels,k=n.outHeight,S=n.outWidth,A=n.strideHeight,T=n.strideWidth,O=x-1-n.padInfo.top,I=w-1-n.padInfo.left,N=C/_,D=0;D<b;++D)for(var P=0;P<_;++P)for(var M=0;M<R;++M)for(var F=M-O,L=Math.max(0,Math.ceil(F/A)),B=Math.min(k,(x+F)/A),j=0;j<E;++j){for(var z=j-I,U=Math.max(0,Math.ceil(z/T)),W=Math.min(S,(w+z)/T),V=0,q=L;q<B;++q)for(var H=q*A-F,G=U;G<W;++G)for(var K=h*D+f*q+d*G,$=m*(x-1-H)+g*(w-1-(G*T-z))+y*P,X=0;X<N;++X)V+=c[K+(P*N+X)]*p[$+X]
i[a*D+s*M+u*j+P]=V}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=rr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<o;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((u-m)/i)),y=Math.min(n.outWidth,(n.inWidth+u-m)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,_=0,R=0;R<n.batchSize;++R)for(var E=p;E<v;++E)for(var C=d+E*r-c,k=g;k<y;++k){var S=m+k*i-u
_+=h.get(R,C,S,x)*f.get(R,E,k,b)}s.set(_,d,m,x,w)}return s.toTensor()},e.prototype.tile=function(e,t){return this.assertNotComplex(e,"tile"),Ci(this.bufferSync(e),t)},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad")
var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),i=t.map(function(e){return e[0]}),o=this.bufferSync(e),a=rr(r,e.dtype)
0!==n&&a.values.fill(n)
for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),c=u.map(function(e,t){return e+i[t]})
a.set.apply(a,[o.get.apply(o,u)].concat(c))}return a.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose")
for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]]
var i=this.readSync(e.dataId),o=rr(n,e.dtype),a=this.bufferSync(e)
for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[t[c]]
var l=o.locToIndex(u)
o.values[l]=i[r]}return o.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather")
var r=e.shape.slice(),i=this.readSync(t.dataId)
r[n]=i.length
for(var o=rr(r,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s),c=u.slice()
c[n]=i[u[n]]
var l=a.locToIndex(c)
o.values[s]=a.values[l]}return o.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND")
var r=t.reduce(function(e,t){return e*t}),i=Or(e.shape,t,r),o=Ir(i.length,t.length),a=Nr(e.shape,t,r),s=Dr(n,t.length),u=Pr(a,n,t.length)
return e.reshape(i).transpose(o).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND")
var r=t.reduce(function(e,t){return e*t}),i=[[0,0]]
i.push.apply(i,n)
for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0])
var a=e.pad(i),s=Or(a.shape,t,r,!1),u=Ir(s.length,t.length,!1),c=Nr(a.shape,t,r,!1)
return a.reshape(s).transpose(u).reshape(c)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool")
for(var r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(e.dataId),d=rr(t.outShape,e.dtype),p=d.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var _=0;_<t.outHeight;++_)for(var R=_*r-c,E=Math.max(0,R),C=Math.min(t.inHeight,s+R),k=b+_*m,S=0;S<t.outWidth;++S){for(var A=S*i-l,T=Math.max(0,A),O=Math.min(t.inWidth,u+A),I=h,N=0,D=0,P=E;P<C;P+=o){for(var M=x+P*e.strides[1],F=T;F<O;F+=a){var L=f[M+F*e.strides[2]+w]
"max"===n&&L>I?I=L:"avg"===n&&(N+=L,D++)}if(isNaN(I))break}p[k+S*g+w]="avg"===n?N/D:I}return d.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=rr(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h=this.bufferSync(e),f=0;f<t.batchSize;++f)for(var d=0;d<t.inChannels;++d)for(var p=0;p<t.outHeight;++p){for(var v=p*r-c,m=v;m<0;)m+=o
for(var g=Math.min(t.inHeight,s+v),y=0;y<t.outWidth;++y){for(var b=y*i-l,x=b;x<0;)x+=a
for(var w=Math.min(t.inWidth,u+b),_=Number.NEGATIVE_INFINITY,R=-1,E=m;E<g;E+=o)for(var C=E-v,k=x;k<w;k+=a){var S=k-b,A=h.get(f,E,k,d)
A>_&&(_=A,R=C*u+S)}n.set(R,f,p,y,d)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop")
for(var i=this.maxPoolPositions(t,r),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,h=l-1-r.padInfo.left,f=c-1-r.padInfo.top,d=rr(t.shape,"float32"),p=this.bufferSync(i),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-f,w=b-h,_=0,R=0;R<c;R+=s){var E=(x+R)/o
if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var C=0;C<l;C+=u){var k=(w+C)/a
if(!(k<0||k>=r.outWidth||Math.floor(k)!==k)){var S=c*l-1-p.get(m,E,k,g)===R*l+C?1:0
0!==S&&(_+=v.get(m,E,k,g)*S)}}}d.set(_,m,y,b,g)}return d.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=l-1-n.padInfo.left,f=c-1-n.padInfo.top,d=rr(t.shape,"float32"),p=1/(o*a),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-h,_=0,R=0;R<c;R+=s){var E=(x+R)/r
if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var C=0;C<l;C+=u){var k=(w+C)/i
k<0||k>=n.outWidth||Math.floor(k)!==k||(_+=v.get(m,E,k,g))}}d.set(_*p,m,y,b,g)}return d.toTensor()},e.prototype.cast=function(e,t){return pi(e,t,this)},e.prototype.reshape=function(e,t){return vi(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear")
for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],c=this.readSync(e.dataId),l=new Float32Array(I([o,t,n,u])),h=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=0,p=h[0]/f[0],v=h[1]/f[1],m=0;m<o;m++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),x=y-b,w=Math.min(a-1,Math.ceil(y)),_=m*e.strides[0]+b*e.strides[1],R=m*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var C=v*E,k=Math.floor(C),S=C-k,A=Math.min(s-1,Math.ceil(C)),T=_+k*e.strides[2],O=R+k*e.strides[2],N=_+ +A*e.strides[2],D=R+A*e.strides[2],P=0;P<u;P++){var M=c[T+P],F=c[O+P],L=M+(c[N+P]-M)*S,B=L+(F+(c[D+P]-F)*S-L)*x
l[d++]=B}return En(l,[o,t,n,u])},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop")
for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(i*o*a*s),f=[n&&c>1?o-1:o,n&&l>1?a-1:a],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],p=f[0]/d[0],v=f[1]/d[1],m=this.readSync(e.dataId),g=0,y=0;y<i;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*p,_=Math.floor(w),R=Math.min(Math.ceil(w),o-1),E=b+_*t.strides[1],C=b+R*t.strides[1],k=w-_,S=1-k,A=0;A<l;A++)for(var T=A*v,O=Math.floor(T),I=Math.min(Math.ceil(T),a-1),N=T-O,D=1-N,P=E+O*t.strides[2],M=E+I*t.strides[2],F=C+O*t.strides[2],L=C+I*t.strides[2],B=S*D,j=S*N,z=k*D,U=k*N,W=0;W<s;W++){var V=m[g++]
h[P+W]+=V*B,h[M+W]+=V*j,h[F+W]+=V*z,h[L+W]+=V*U}return On(h,[i,a,o,s],t.dtype)},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor")
for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],c=this.readSync(e.dataId),l=new Float32Array(o*t*n*u),h=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=h[0]/f[0],p=h[1]/f[1],v=0,m=0;m<o;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var b=d*y,x=g+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var _=p*w,R=x+Math.min(s-1,r?Math.round(_):Math.floor(_))*e.strides[2],E=0;E<u;E++){var C=c[R+E]
l[v++]=C}return En(l,[o,t,n,u],e.dtype)},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop")
for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(i*o*a*s),f=this.readSync(e.dataId),d=[n&&c>1?o-1:o,n&&l>1?a-1:a],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/p[0],m=d[1]/p[1],g=1/v,y=1/m,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var _=w*t.strides[0],R=0;R<o;R++)for(var E=_+R*t.strides[1],C=Math.floor(R*g),k=Math.floor(C-b/2),S=0;S<a;S++)for(var A=E+S*t.strides[2],T=Math.floor(S*y),O=Math.floor(T-x/2),I=0;I<s;I++){for(var N=0,D=0;D<b;D++){var P=D+k
if(!(P<0||P>=c)){var M=_+P*e.strides[1],F=P*v
if(R===Math.min(o-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<x;L++){var B=L+O
if(!(B<0||B>=l)){var j=M+B*e.strides[2],z=B*m
S===Math.min(a-1,n?Math.round(z):Math.floor(z))&&(N+=f[j+I])}}}}h[A+I]=N}return On(h,t.shape,t.dtype)},e.prototype.batchNormalization=function(e,t,n,r,i,o){this.assertNotComplex([e,t,n,i,o],"batchNorm")
for(var a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),l=o?this.readSync(o.dataId):new Float32Array([0]),h=new Float32Array(a.length),f=l.length,d=c.length,p=u.length,v=s.length,m=0,g=0,y=0,b=0,x=0;x<a.length;++x)h[x]=l[m++]+(a[x]-s[g++])*c[y++]/Math.sqrt(u[b++]+r),m>=f&&(m=0),g>=v&&(g=0),y>=d&&(y=0),b>=p&&(b=0)
return On(h,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){this.assertNotComplex(e,"localResponseNormalization4D")
var o=e.shape[3],a=o-1,s=this.readSync(e.dataId),u=e.size,c=new Float32Array(u)
function l(e){for(var n=e%o,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,a),u=0;r<=i;r++){var c=s[r]
u+=c*c}return u}for(var h=0;h<u;h++){var f=l(h),d=s[h]*Math.pow(n+r*f,-i)
c[h]=d}return On(c,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){this.assertNotComplex(e,"LRNGrad")
for(var s=e.shape[3],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),h=new Float32Array(e.size),f=e.size,d=0;d<f;d++){for(var p=d%s,v=d-p+Math.max(0,p-r),m=d-p+Math.min(s,p+r+1),g=0,y=v;y<m;y++)g+=Math.pow(c[y],2)
for(g=o*g+i,y=v;y<m;y++){var b=-2*o*a*c[y]*l[d]/g
d===y&&(b+=Math.pow(g,-a)),b*=u[d],h[y]+=b}}return On(h,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial")
for(var i=t?e:Qr(e),o=i.shape[0],a=i.shape[1],s=Pn([o,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(i.dataId),l=0;l<o;++l){var h=l*a,f=new Float32Array(a-1)
f[0]=c[h]
for(var d=1;d<f.length;++d)f[d]=f[d-1]+c[h+d]
for(var p=er(r.toString()),v=l*n,m=0;m<n;++m){var g=p()
u[v+m]=f.length
for(var y=0;y<f.length;y++)if(g<f[y]){u[v+m]=y
break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot")
var i=new Float32Array(e.size*t)
i.fill(r)
for(var o=this.readSync(e.dataId),a=0;a<e.size;++a)o[a]>=0&&o[a]<t&&(i[a*t+o[a]]=n)
return An(i,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return this.assertNotComplex(e,"nonMaxSuppression"),_i(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},e.prototype.fft=function(e){return this.fftBatch(e,!1)},e.prototype.ifft=function(e){return this.fftBatch(e,!0)},e.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=rr(e.shape,"float32"),o=rr(e.shape,"float32"),a=_n(e).as2D(n,r),s=Rn(e).as2D(n,r),u=0;u<n;u++)for(var c=a.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),h=wn(c,l),f=this.readSync(this.fftImpl(h,t).dataId),d=0;d<r;d++){var p=bi(f,d)
i.values[u*r+d]=p.real,o.values[u*r+d]=p.imag}return wn(i.toTensor(),o.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size
if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1])
return t&&(i=wn(_n(i).div(kn(r)),Rn(i).div(kn(r)))),i}var o=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1]
return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t))
return wn(a.real,a.imag).as2D(e.shape[0],e.shape[1])},e.prototype.isExponentOf2=function(e){return 0==(e&e-1)},e.prototype.fftRadix2=function(e,t,n){if(1===t)return e
var r=this.readSync(e.dataId),i=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1]
return{real:n,imag:r}}(r),a=wn(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1]
return{real:n,imag:r}}(r),u=wn(s.real,s.imag).as1D()
a=this.fftRadix2(a,i,n),u=this.fftRadix2(u,i,n)
var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var o=(t?2:-2)*Math.PI*(i/e)
n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}(t,n),l=wn(c.real,c.imag).mul(u),h=a.add(l),f=a.sub(l),d=_n(h).concat(_n(f)),p=Rn(h).concat(Rn(f))
return wn(d,p).as1D()},e.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,a=0,s=0;s<t;s++){var u=wi(i*s,t,n),c=bi(e,s)
o+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(o/=t,a/=t),xi(r,o,a,i)}return r},e.prototype.depthToSpace=function(e,t,n){S("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),S(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t})
for(var r=e.shape[0],i=e.shape[1],o=e.shape[2],a=e.shape[3],s=i*t,u=o*t,c=a/(t*t),l=this.readSync(e.dataId),h=new Float32Array(r*s*u*c),f=0,d=0;d<r;++d)for(var p=0;p<s;++p)for(var v=Math.floor(p/t),m=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(m*t+g%t)*c,x=0;x<c;++x){var w=x+b+a*(y+o*(v+i*d))
h[f++]=l[w]}return On(h,[r,s,u,c])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=ri(e.shape,t.shape),o=rr(i,n),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=ti(e.shape,i),c=ti(t.shape,i),l=o.values
if(u.length+c.length===0)for(var h=0;h<l.length;++h)l[h]=r(a[h%a.length],s[h%s.length])
else{var f=this.bufferSync(e),d=this.bufferSync(t),p=function(n){var i=o.indexToLoc(n),h=i.slice(-e.rank)
u.forEach(function(e){return h[e]=0})
var p=f.locToIndex(h),v=i.slice(-t.rank)
c.forEach(function(e){return v[e]=0})
var m=d.locToIndex(v)
l[n]=r(a[p],s[m])}
for(h=0;h<l.length;++h)p(h)}return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=ri(e.shape,t.shape),i=rr(r,"float32"),o=rr(r,"float32"),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=ti(e.shape,r),c=ti(t.shape,r),l=i.values,h=o.values
if(u.length+c.length===0)for(var f=0;f<l.length;f++){var d=f%a.length,p=f%s.length,v=n(a[2*d],a[2*d+1],s[2*p],s[2*p+1])
l[f]=v.real,h[f]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=i.indexToLoc(r),f=o.slice(-e.rank)
u.forEach(function(e){return f[e]=0})
var d=m.locToIndex(f),p=o.slice(-t.rank)
c.forEach(function(e){return p[e]=0})
var v=g.locToIndex(p),y=n(a[2*d],a[2*d+1],s[2*v],s[2*v+1])
l[r]=y.real,h[r]=y.imag}
for(f=0;f<l.length;f++)y(f)}return this.complex(i.toTensor(),o.toTensor())},e.prototype.split=function(e,t,n){return Ei(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(e,t,n,r,i,o){for(var a=e.shape,s=a[0],u=a[1],c=a[2],l=a[3],h=t.shape[0],f=r[0],d=r[1],p=rr([h,f,d,l],e.dtype),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<h;x++){var w=4*x,_=v[w],R=v[w+1],E=v[w+2],C=v[w+3],k=m[x]
if(!(k>=s))for(var S=f>1?(E-_)*(u-1)/(f-1):0,A=d>1?(C-R)*(c-1)/(d-1):0,T=0;T<f;T++){var O=f>1?_*(u-1)+T*S:.5*(_+E)*(u-1)
if(O<0||O>u-1)for(var I=0;I<d;I++)for(var N=0;N<l;N++){var D=N+I*b[2]+T*b[1]+x*b[0]
p.values[D]=o}else if("bilinear"===i){var P=Math.floor(O),M=Math.ceil(O),F=O-P
for(I=0;I<d;I++)if((H=d>1?R*(c-1)+I*A:.5*(R+C)*(c-1))<0||H>c-1)for(N=0;N<l;N++)D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=o
else{var L=Math.floor(H),B=Math.ceil(H),j=H-L
for(N=0;N<l;N++){var z=g[D=N+L*y[2]+P*y[1]+k*y[0]],U=g[D=N+B*y[2]+P*y[1]+k*y[0]],W=g[D=N+L*y[2]+M*y[1]+k*y[0]],V=z+(U-z)*j,q=W+(g[D=N+B*y[2]+M*y[1]+k*y[0]]-W)*j
D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=V+(q-V)*F}}}else for(I=0;I<d;++I){var H
if((H=d>1?R*(c-1)+I*A:.5*(R+C)*(c-1))<0||H>c-1)for(N=0;N<l;N++)D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=o
else{var G=Math.round(H),K=Math.round(O)
for(N=0;N<l;N++){var $=N+G*y[2]+K*y[1]+k*y[0],X=N+I*b[2]+T*b[1]+x*b[0]
p.values[X]=g[$]}}}}}return p.toTensor()},e.prototype.sparseToDense=function(e,t,n,r){var i=Br(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,u=i.strides,c=i.outputSize
return this.scatter(e,t,n,c,s,a,o,u,r,!1)},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Mr(e,t),o=i[0],a=i[1],s=i[2],u=i[3]
if(0===a)return En([],o,e.dtype)
for(var c=new ge([a,s],e.dtype),l=this.readSync(t.dataId),h=this.readSync(e.dataId),f=0;f<a;f++){for(var d=[],p=0,v=0;v<r;v++){var m=l[f*r+v]
p+=m*u[v],d.push(m)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+d+" does not index into "+e.shape)
for(var g=0;g<s;g++)c.values[f*s+g]=h[p*s+g]}return c.toTensor().reshape(o)},e.prototype.scatterND=function(e,t,n){var r=Br(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=kn(0)
return this.scatter(e,t,n,u,a,o,i,s,c,!0)},e.prototype.fill=function(e,t,n){var r=W(n=n||Z(t),I(e))
return r.fill(t),we.make(e,{values:r},n)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors")
return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){var t=W(e.dtype,I(e.shape))
return we.make(e.shape,{values:t},e.dtype)},e.prototype.linspace=function(e,t,n){return mi(e,t,n)},e.prototype.scatter=function(e,t,n,r,i,o,a,s,u,c){var l=[r/i,i],h=this.readSync(e.dataId),f=this.readSync(t.dataId)
if(0===r)return En([],n,t.dtype)
var d=new ge(l,t.dtype)
d.values.fill(this.readSync(u.dataId)[0])
for(var p=0;p<o;p++){for(var v=[],m=0,g=0;g<a;g++){var y=h[p*a+g]
v.push(y),m+=y*s[g]}if(m<0||m>=r/i)throw new Error("Invalid indices: "+v+" does not index into "+n)
for(var b=0;b<i;b++)c?d.values[m*i+b]+=f[p*i+b]:d.values[m*i+b]=0===t.rank?f[0]:f[p*i+b]}return d.toTensor().reshape(n)},e}()
ze.registerBackend("cpu",function(){return new gl},1)
var yl=function(){function e(){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return fetch(e,t)},e}()
x.get("IS_BROWSER")&&x.setPlatform("browser",new yl)
var bl,xl=function(){function e(){var e=n(8)
this.textEncoder=new e.TextEncoder,this.textDecoder=new e.TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return 0===e.length?"":this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return null!=x.global.fetch?x.global.fetch(e,t):(null==bl&&(bl=n(7)),bl(e,t))},e}()
x.get("IS_NODE")&&x.setPlatform("node",new xl)
var wl={float32:4,int32:4,uint16:2,uint8:1,bool:1}
function _l(e,t){for(var n={},r=0,i=function(t){var i=t.name,o=t.dtype,a=t.shape,s=I(a),u=void 0
if("quantization"in t){var c=t.quantization
if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.")
var l=wl[c.dtype],h=e.slice(r,r+s*l),f="uint8"===c.dtype?new Uint8Array(h):new Uint16Array(h)
if("float32"===o)u=Float32Array.from(f,function(e){return e*c.scale+c.min})
else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o)
u=Int32Array.from(f,function(e){return Math.round(e*c.scale+c.min)})}r+=s*l}else if("string"===o){var d=t,p=new Uint8Array(e.slice(r,r+d.byteLength))
u=x.platform.decodeUTF8(p).split(d.delimiter),r+=d.byteLength}else{var v=wl[o]
if(h=e.slice(r,r+s*v),"float32"===o)u=new Float32Array(h)
else if("int32"===o)u=new Int32Array(h)
else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o)
u=new Uint8Array(h)}r+=s*v}n[i]=En(u,a,o)},o=0,a=t;o<a.length;o++)i(a[o])
return n}function Rl(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e))
var t=0,n=[]
e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)})
var r=new Uint8Array(t),i=0
return n.forEach(function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}var El="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa)
function Cl(e){return El?Buffer.byteLength(e):new Blob([e]).size}function kl(e){var t=0
e.forEach(function(e){t+=e.byteLength})
var n=new Uint8Array(t),r=0
return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function Sl(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1)
var t=e.split("/")
return t[t.length-1]}function Al(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.")
return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Cl(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Cl(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Tl=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[]
return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r)
null!==n&&i.push(n)}),i},e}(),Ol="://",Il=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){S(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(Ol)&&(t=t.slice(0,t.indexOf(Ol))),S(t.length>0,function(){return"scheme must not be an empty string."})
var r=e.getInstance()
S(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e]
if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'")
return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}()
function Nl(e){if(-1===e.indexOf(Ol))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Il.getSchemes().join(","))
return{scheme:e.split(Ol)[0],path:e.split(Ol)[1]}}function Dl(e,t,n){return void 0===n&&(n=!1),m(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h
return g(this,function(f){switch(f.label){case 0:return S(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),S((r=Tl.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),S(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),i=r[0],S((o=Tl.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),S(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=o[0],s=Nl(e).scheme,u=Nl(e).path,c=s===Nl(e).scheme,[4,i.load()]
case 1:return l=f.sent(),n&&c?[4,Il.getManager(s).removeModel(u)]:[3,3]
case 2:f.sent(),f.label=3
case 3:return[4,a.save(l)]
case 4:return h=f.sent(),!n||c?[3,6]:[4,Il.getManager(s).removeModel(u)]
case 5:f.sent(),f.label=6
case 6:return[2,h.modelArtifactsInfo]}})})}var Pl="models_store",Ml="model_info_store"
function Fl(){if(!x.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.")
var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB
if(null==t)throw new Error("The current browser does not appear to support IndexedDB.")
return t}function Ll(e){var t=e.result
t.createObjectStore(Pl,{keyPath:"modelPath"}),t.createObjectStore(Ml,{keyPath:"modelPath"})}var Bl=function(){function e(e){if(this.indexedDB=Fl(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.")
this.modelPath=e}return e.prototype.save=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.")
return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return m(this,void 0,void 0,function(){return g(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this
return new Promise(function(e,r){var i=n.indexedDB.open("tensorflowjs",1)
i.onupgradeneeded=function(){return Ll(i)},i.onsuccess=function(){var o=i.result
if(null==t){var a=o.transaction(Pl,"readonly"),s=a.objectStore(Pl).get(n.modelPath)
s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."))
e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},a.oncomplete=function(){return o.close()}}else{var u,c=Al(t),l=o.transaction(Ml,"readwrite"),h=l.objectStore(Ml),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c})
f.onsuccess=function(){var i=(u=o.transaction(Pl,"readwrite")).objectStore(Pl).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c})
i.onsuccess=function(){return e({modelArtifactsInfo:c})},i.onerror=function(e){var t=(h=l.objectStore(Ml)).delete(n.modelPath)
t.onsuccess=function(){return o.close(),r(i.error)},t.onerror=function(e){return o.close(),r(i.error)}}},f.onerror=function(e){return o.close(),r(f.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},i.onerror=function(e){return r(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),jl=function(e){return x.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Bl.URL_SCHEME)?(t=e.slice(Bl.URL_SCHEME.length),new Bl(t)):null
var t}
Tl.registerSaveRouter(jl),Tl.registerLoadRouter(jl)
var zl=function(){function e(){this.indexedDB=Fl()}return e.prototype.listModels=function(){return m(this,void 0,void 0,function(){var e=this
return g(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1)
r.onupgradeneeded=function(){return Ll(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(Ml,"readonly"),o=i.objectStore(Ml).getAll()
o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var i=r[n]
e[i.modelPath]=i.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return m(this,void 0,void 0,function(){var t=this
return g(this,function(n){var r
return e=(r=e).startsWith(Bl.URL_SCHEME)?r.slice(Bl.URL_SCHEME.length):r,[2,new Promise(function(n,r){var i=t.indexedDB.open("tensorflowjs",1)
i.onupgradeneeded=function(){return Ll(i)},i.onsuccess=function(){var t,o=i.result,a=o.transaction(Ml,"readwrite"),s=a.objectStore(Ml),u=s.get(e)
u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."))
var i=s.delete(e),a=function(){var i=(t=o.transaction(Pl,"readwrite")).objectStore(Pl).delete(e)
i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(e){return r(u.error)}}
i.onsuccess=a,i.onerror=function(e){return a(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},a.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},i.onerror=function(e){return r(i.error)}})]})})},e}()
if(x.getBool("IS_BROWSER"))try{Il.registerManager(Bl.URL_SCHEME,new zl)}catch(Ae){}var Ul="/",Wl="tensorflowjs_models",Vl="info",ql="model_topology",Hl="weight_specs",Gl="weight_data",Kl="model_metadata"
function $l(e){return{info:[Wl,e,Vl].join(Ul),topology:[Wl,e,ql].join(Ul),weightSpecs:[Wl,e,Hl].join(Ul),weightData:[Wl,e,Gl].join(Ul),modelMetadata:[Wl,e,Kl].join(Ul)}}function Xl(e){var t=e.split(Ul)
if(t.length<3)throw new Error("Invalid key format: "+e)
return t.slice(1,t.length-1).join(Ul)}var Yl=function(){function e(e){if(!x.getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.")
if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.")
this.modelPath=e,this.keys=$l(this.modelPath)}return e.prototype.save=function(e){return m(this,void 0,void 0,function(){var t,n,r
return g(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.")
t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Al(e)
try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(o=e.weightData,El?Buffer.from(o).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(o))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var o
return[2]})})},e.prototype.load=function(){return m(this,void 0,void 0,function(){var e,t,n,r,i,o,a
return g(this,function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'")
if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.")
if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.")
if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.")
if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.")
return t.weightData=function(e){if(El){var t=Buffer.from(e,"base64")
return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i)
return r.buffer}(a),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),Ql=function(e){return x.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yl.URL_SCHEME)?(t=e.slice(Yl.URL_SCHEME.length),new Yl(t)):null
var t}
Tl.registerSaveRouter(Ql),Tl.registerLoadRouter(Ql)
var Jl=function(){function e(){S(x.getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),S(void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return m(this,void 0,void 0,function(){var e,t,n,r,i,o
return g(this,function(a){for(e={},t=Wl+Ul,n=Ul+Vl,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(o=Xl(i),e[o]=JSON.parse(this.LS.getItem(i)))
return[2,e]})})},e.prototype.removeModel=function(e){return m(this,void 0,void 0,function(){var t,n
return g(this,function(r){var i
if(e=(i=e).startsWith(Yl.URL_SCHEME)?i.slice(Yl.URL_SCHEME.length):i,t=$l(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'")
return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}()
if(x.getBool("IS_BROWSER"))try{Il.registerManager(Yl.URL_SCHEME,new Jl)}catch(Ae){}var Zl="model",eh=".json",th=".weights.bin"
function nh(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var rh=function(){function e(t){if(!x.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.")
t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=Zl),this.modelTopologyFileName=t+eh,this.weightDataFileName=t+th}return e.prototype.save=function(e){return m(this,void 0,void 0,function(){var t,n,r,i,o,a
return g(this,function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present")
if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1]
throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.")
case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,nh(function(){return o.dispatchEvent(new MouseEvent("click"))})]
case 2:return s.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,nh(function(){return a.dispatchEvent(new MouseEvent("click"))})])
case 3:s.sent(),s.label=4
case 4:return[2,{modelArtifactsInfo:Al(e)}]}})})},e.URL_SCHEME="downloads://",e}(),ih=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e)
this.files=e}return e.prototype.load=function(){return m(this,void 0,void 0,function(){var e,t,n=this
return g(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,i){var o=new FileReader
o.onload=function(o){var a=JSON.parse(o.target.result),s=a.modelTopology
if(null!=s){0===t.length&&r({modelTopology:s})
var u=a.weightsManifest
if(null!=u){var c
try{c=n.checkManifestAndWeightFiles(u,t)}catch(e){return void i(e)}var l=[],h=[],f=[]
u.forEach(function(e){e.paths.forEach(function(e){h.push(e),f.push(null)}),l.push.apply(l,e.weights)}),u.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader
t.onload=function(t){var n=t.target.result,i=h.indexOf(e)
f[i]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:kl(f)})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return Sl(e.name)}),i={},o=0,a=e;o<a.length;o++)a[o].paths.forEach(function(e){var o=Sl(e)
if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'")
if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.")
i[e]=t[r.indexOf(o)]})
if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").")
return i},e}()
function oh(e,t,n,r){!function(e){S(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){S(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),S(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),S(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r)
var i=0
return Promise.all(e.map(function(o){return o.then(function(o){var a=n+ ++i/e.length*(r-n)
return t(a),o}),o}))}function ah(e,t){return m(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l
return g(this,function(h){switch(h.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?ce:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit)}),i=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)]
case 1:return a=h.sent(),[3,4]
case 2:return[4,oh(r,t.onProgress,i,o)]
case 3:a=h.sent(),h.label=4
case 4:return s=a.map(function(e){return e.arrayBuffer()}),u=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)]
case 5:return l=h.sent(),[3,8]
case 6:return[4,oh(s,t.onProgress,u,c)]
case 7:l=h.sent(),h.label=8
case 8:return[2,l]}})})}function sh(e){var t=this
return function(n,r,i){return void 0===r&&(r=""),m(t,void 0,void 0,function(){var t,o,a,s,u,c,l,h,f,d
return g(this,function(p){switch(p.label){case 0:if(t=n.map(function(){return!1}),o={},a=null!=i?i.map(function(){return!1}):[],s=[],n.forEach(function(e,n){var r=0
e.weights.forEach(function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,c=wl[u]*I(e.shape),l=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})}
null!=i?i.forEach(function(t,n){t===e.name&&(l(),a[n]=!0)}):l(),s.push(e.name),r+=c})}),!a.every(function(e){return e}))throw u=i.filter(function(e,t){return!a[t]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".")
return c=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),l=[],c.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e
l.push(t)})}),[4,e(l)]
case 1:return h=p.sent(),f={},d=0,c.forEach(function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=h[d+i].byteLength
for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,c=0;c<t;c++){var l=new Uint8Array(h[d+c])
s.set(l,u),u+=l.byteLength}o[e].forEach(function(e){var t=_l(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry])
for(var n in t)f[n]=t[n]}),d+=t}),[2,f]}})})}}Tl.registerSaveRouter(function(e){return x.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rh.URL_SCHEME)?(void 0===(t=e.slice(rh.URL_SCHEME.length))&&(t="model"),new rh(t)):null
var t})
var uh=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(S("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ce,S(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&S(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.")
this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return m(this,void 0,void 0,function(){var t,n,r,i
return g(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.")
return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)]
case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Al(e),responses:[i]}]
throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return m(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s
return g(this,function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)]
case 1:if(!(e=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.")
u.label=2
case 2:return u.trys.push([2,4,,5]),[4,e.json()]
case 3:return t=u.sent(),[3,5]
case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n)
case 5:if(r=t.modelTopology,i=t.weightsManifest,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.")
return null==i?[3,7]:[4,this.loadWeights(i)]
case 6:s=u.sent(),o=s[0],a=s[1],u.label=7
case 7:return[2,{modelTopology:r,weightSpecs:o,weightData:a}]}})})},e.prototype.loadWeights=function(e){return m(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h
return g(this,function(f){switch(f.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?")
return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],o=this.weightPathPrefix||r,a=[],s=0,u=e;s<u.length;s++)c=u[s],a.push.apply(a,c.weights)
return l=[],e.forEach(function(e){e.paths.forEach(function(e){l.push(o+e+i)})}),[4,ah(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})]
case 1:return h=f.sent(),[2,[a,kl(h)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}()
function ch(e){return null!=e.match(uh.URL_SCHEME_REGEX)}var lh=function(e,t){return(Array.isArray(e)?e.every(function(e){return ch(e)}):ch(e))?hh(e,{onProgress:t}):null}
function hh(e,t){return new uh(e,t)}Tl.registerSaveRouter(lh),Tl.registerLoadRouter(lh)
var fh=function(){function e(e,t,n,r){this.modelTopology=e,this.weightSpecs=t,this.weightData=n,this.trainingConfig=r}return e.prototype.load=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){return e={},null!=this.modelTopology&&(e=v({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=v({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=v({weightData:this.weightData},e)),null!=this.trainingConfig&&(e=v({trainingConfig:this.trainingConfig},e)),[2,e]})})},e}(),dh=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){return[2,this.saveHandler(e)]})})},e}(),ph=Object.freeze({browserFiles:function(e){return new ih(e)},browserHTTPRequest:function(e,t){return hh(e,t)},concatenateArrayBuffers:kl,decodeWeights:_l,encodeWeights:function(e,t){return m(this,void 0,void 0,function(){var n,r,i,o,a,s=this
return g(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),o=function(o){var a=i[o],u=Array.isArray(e)?e[o].tensor:e[a]
if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+u.dtype)
var c={name:a,shape:u.shape,dtype:u.dtype}
if("string"===u.dtype){var l=new Promise(function(e){return m(s,void 0,void 0,function(){var t,n,r
return g(this,function(i){switch(i.label){case 0:return t=c,[4,u.data()]
case 1:return n=i.sent(),r=x.platform.encodeUTF8(n.join("\0")),t.byteLength=r.length,t.delimiter="\0",e(r),[2]}})})})
r.push(l)}else r.push(u.data())
null!=t&&(c.group=t),n.push(c)},a=0;a<i.length;++a)o(a)
return[4,Promise.all(r)]
case 1:return[2,{data:Rl(u.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return new fh(e,t,n,r)},getLoadHandlers:function(e,t){return Tl.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Al,getSaveHandlers:function(e){return Tl.getSaveHandlers(e)},http:hh,isHTTPScheme:ch,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),m(this,void 0,void 0,function(){return g(this,function(i){return[2,sh(function(e){return ah(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return Tl.registerLoadRouter(e)},registerSaveRouter:function(e){return Tl.registerSaveRouter(e)},weightsLoaderFactory:sh,withSaveHandler:function(e){return new dh(e)},copyModel:function(e,t){return m(this,void 0,void 0,function(){return g(this,function(n){return[2,Dl(e,t,!1)]})})},listModels:function(){return m(this,void 0,void 0,function(){var e,t,n,r,i,o,a
return g(this,function(s){switch(s.label){case 0:e=Il.getSchemes(),t={},n=0,r=e,s.label=1
case 1:return n<r.length?(i=r[n],[4,Il.getManager(i).listModels()]):[3,4]
case 2:for(a in o=s.sent())t[i+Ol+a]=o[a]
s.label=3
case 3:return n++,[3,1]
case 4:return[2,t]}})})},moveModel:function(e,t){return m(this,void 0,void 0,function(){return g(this,function(n){return[2,Dl(e,t,!0)]})})},removeModel:function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){return t=Nl(e),[2,Il.getManager(t.scheme).removeModel(t.path)]})})}}),vh=xn({confusionMatrix_:function(e,t,n){var r=un(e,"labels","confusionMatrix"),i=un(t,"predictions","confusionMatrix")
S(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),S(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),S(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),S(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),S(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n})
var o=dr(r.asType("int32"),n),a=dr(i.asType("int32"),n)
return o.transpose().matMul(a).asType("int32")}}),mh=Object.freeze({confusionMatrix:vh}),gh=xn({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.")
return ze.fromPixels(e,t)}}),yh=Object.freeze({toPixels:function(e,t){return m(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,b,x,w,_,R,E,C
return g(this,function(g){switch(g.label){case 0:if(n=un(e,"img","toPixels"),e instanceof we||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".")
if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a)
return[4,n.data()]
case 1:return s=g.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])]
case 2:if(l=g.sent(),h=l[0],f=l[1],d=h[0],p=f[0],u.dispose(),c.dispose(),"float32"===n.dtype){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.")
if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(v="float32"===n.dtype?255:1,m=new Uint8ClampedArray(o*i*4),y=0;y<i*o;++y)b=void 0,x=void 0,w=void 0,_=void 0,1===a?(b=s[y]*v,x=s[y]*v,w=s[y]*v,_=255):3===a?(b=s[3*y]*v,x=s[3*y+1]*v,w=s[3*y+2]*v,_=255):4===a&&(b=s[4*y]*v,x=s[4*y+1]*v,w=s[4*y+2]*v,_=s[4*y+3]*v),m[0+(R=4*y)]=Math.round(b),m[R+1]=Math.round(x),m[R+2]=Math.round(w),m[R+3]=Math.round(_)
return null!=t&&(t.width=o,t.height=i,E=t.getContext("2d"),C=new ImageData(m,o,i),E.putImageData(C,0,0)),n!==e&&n.dispose(),[2,m]}})})},fromPixels:gh}),bh=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),xh=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}()
function wh(e){S(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),S("string"==typeof e.className,function(){return"className is required to be a string, but got type "+f(e.className)}),S(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),xh.register(e)}var _h=Object.freeze({Serializable:bh,SerializationMap:xh,registerClass:wh}),Rh=.001,Eh=.1
function Ch(){return 32===ze.backend.floatPrecision()?Rh:Eh}function kh(e,t,n){var r=!0
if((K(e)||K(t))&&(r=!1),K(e)&&K(t)&&(r=!0),r){var i=e.constructor.name,o=t.constructor.name
if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var a=an(e),s=an(t)
if(!N(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=K(e)?e:O(e),c=K(t)?t:O(t)
if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".")
for(var l=0;l<c.length;++l){var h=u[l],f=c[l]
if(!n(h,f))throw new Error("Arrays differ: actual["+l+"] = "+h+", expected["+l+"] = "+f+".\nActual:   "+u+".\nExpected: "+c+".")}}function Sh(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}var Ah=Object.freeze({TEST_EPSILON_FLOAT16:Eh,expectArraysClose:function(e,t,n){return null==n&&(n=Ch()),kh(e,t,function(e,t){return Sh(e,t,n)})},testEpsilon:Ch,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t
return Y(e)||Y(e[0])||Y(t)||Y(t[0])?kh(e,n,function(e,t){return e==t}):kh(e,t,function(e,t){return Sh(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=Ch()),!Sh(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Th="1.2.2",Oh=Object.freeze({gpgpu_util:ra,webgl_util:Lt,MathBackendWebGL:Xa,setWebGLContext:qe,GPGPUContext:ia}),Ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1)
var r=this.computeGradients(e,n),i=r.value,o=r.grads
if(null!=n){var a=n.map(function(e){return{name:e.name,tensor:o[e.name]}})
this.applyGradients(a)}else this.applyGradients(o)
return Gt(o),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return $r(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&Gt(this.iterations_)},t.prototype.saveIterations=function(){return m(this,void 0,void 0,function(){return g(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:kn(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){return g(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){return g(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()]
case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(bh)
Object.defineProperty(Ih,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}})
var Nh=function(e){function t(t,n,r){void 0===r&&(r=null)
var i=e.call(this)||this
return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=ze.backend.epsilon()),i}return p(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=ze.registeredVariables[n]
null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Ht(function(){return jn(i).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Ht(function(){return jn(i).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable
Ht(function(){var e=a.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho))
a.assign(e),s.assign(r)
var u=n.mul(-t.learningRate).add(i)
i.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Gt(this.accumulatedGrads.map(function(e){return e.variable})),Gt(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(Ih)
wh(Nh)
var Dh=function(e){function t(t,n){void 0===n&&(n=.1)
var r=e.call(this)||this
return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return p(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=ze.registeredVariables[n]
null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Ht(function(){return Mn(i.shape,t.initialAccumulatorValue).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedGrads[r].variable
Ht(function(){var e=a.add(o.square())
a.assign(e)
var n=o.div(e.add(ze.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i)
i.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Gt(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Ih)
wh(Dh)
var Ph=function(e){function t(t,n,r,i){void 0===i&&(i=null)
var o=e.call(this)||this
return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ht(function(){o.accBeta1=kn(n).variable(),o.accBeta2=kn(r).variable()}),null==i&&(o.epsilon=ze.backend.epsilon()),o}return p(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)
Ht(function(){var r=uc(1,t.accBeta1),i=uc(1,t.accBeta2)
n.forEach(function(n,o){var a=ze.registeredVariables[n]
null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Ht(function(){return jn(a).variable(!1)})}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:Ht(function(){return jn(a).variable(!1)})})
var s=Array.isArray(e)?e[o].tensor:e[n]
if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedSecondMoment[o].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=l.div(r),d=h.div(i)
u.assign(l),c.assign(h)
var p=f.div(d.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a)
a.assign(p)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Gt(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&Gt(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){var t,n=this
return g(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=r.sent(),Ht(function(){n.accBeta1.assign(ic(n.beta1,n.iterations_+1)),n.accBeta2.assign(ic(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Ih)
wh(Ph)
var Mh=function(e){function t(t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=0)
var a=e.call(this)||this
return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.decay=o,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Ht(function(){a.iteration=kn(0).variable(),a.accBeta1=kn(n).variable()}),null==i&&(a.epsilon=ze.backend.epsilon()),a}return p(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)
Ht(function(){var r=uc(1,t.accBeta1),i=Ku(-t.learningRate,t.iteration.mul(t.decay).add(1))
n.forEach(function(n,o){var a=ze.registeredVariables[n]
null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:jn(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:jn(a).variable(!1)})
var s=Array.isArray(e)?e[o].tensor:e[n]
if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedWeightedInfNorm[o].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2),f=s.abs(),d=h.maximum(f)
u.assign(l),c.assign(d)
var p=i.div(r).mul(l.div(d.add(t.epsilon))).add(a)
a.assign(p)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Gt(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&Gt(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){return g(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){return g(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Ih)
wh(Mh)
var Fh=function(e){function t(t){var n=e.call(this)||this
return n.learningRate=t,n.setLearningRate(t),n}return p(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n]
if(null!=i){var o=ze.registeredVariables[n]
Ht(function(){var e=t.c.mul(i).add(o)
o.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Kt(kn(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.")
return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Ih)
wh(Fh)
var Lh=function(e){function t(t,n,r){void 0===r&&(r=!1)
var i=e.call(this,t)||this
return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=kn(i.momentum),i}return p(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=ze.registeredVariables[n]
null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Ht(function(){return jn(i).variable(!1)})})
var o=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n]
null!=a&&Ht(function(){var e,n=t.m.mul(o).add(a)
e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),o.assign(n),i.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Gt(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(Fh)
wh(Lh)
var Bh=function(e){function t(t,n,r,i,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1)
var a=e.call(this)||this
return a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=i,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=o,null==i&&(a.epsilon=ze.backend.epsilon()),a}return p(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=ze.registeredVariables[n]
null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Ht(function(){return jn(i).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Ht(function(){return jn(i).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Ht(function(){return jn(i).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable
Ht(function(){var e=a.mul(t.decay).add(o.square().mul(1-t.decay))
if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(o.mul(1-t.decay)),c=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()))
a.assign(e),n.assign(u),s.assign(c)
var l=i.sub(c)
i.assign(l)}else{var h=a.mul(t.decay).add(o.square().mul(1-t.decay))
c=s.mul(t.momentum).add(o.mul(t.learningRate).div(h.add(t.epsilon).sqrt())),a.assign(h),s.assign(c),l=i.sub(c),i.assign(l)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Gt(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&Gt(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&Gt(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return m(this,void 0,void 0,function(){var e
return g(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return m(this,void 0,void 0,function(){var t
return g(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Ih)
wh(Bh)
var jh=function(){function e(){}return e.sgd=function(e){return new Fh(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Lh(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new Bh(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Ph(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Nh(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new Mh(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Dh(e,t)},e}(),zh={sgd:jh.sgd,momentum:jh.momentum,adadelta:jh.adadelta,adagrad:jh.adagrad,rmsprop:jh.rmsprop,adamax:jh.adamax,adam:jh.adam},Uh="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()}
function Wh(){return new Promise(function(e){return Uh(function(){return e()})})}function Vh(e){return(Vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}be=ml
var qh=function(e,t){return(qh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)}
function Hh(e,t){function n(){this.constructor=e}qh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Gh(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function Kh(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1]
return i[1]},trys:[],ops:[]}
return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.")
for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i
switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o
break
case 4:return a.label++,{value:o[1],done:!1}
case 5:a.label++,r=o[1],o=[0]
continue
case 7:o=a.ops.pop(),a.trys.pop()
continue
default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1]
break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o
break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o)
break}i[2]&&a.ops.pop(),a.trys.pop()
continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1]
return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $h=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e]
console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.")
this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.")
return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this
if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=Xh(this.global.location.search)
"tfjsflags"in t&&t.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],i=n[1]
e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t
if(""+ +t===t)return+t
throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)})}},e}()
function Xh(e){var t={}
return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")}),t}var Yh=null
function Qh(e){Yh=e}function Jh(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Zh(e,t,n){return Math.max(e,Math.min(t,n))}function ef(e){return e%2==0?e:e+1}function tf(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]
return t}function nf(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function rf(e,t,n){void 0===n&&(n=""),nf(uf(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function of(e){nf(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function af(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||_f(e)&&!n)for(var r=0;r<e.length;++r)af(e[r],t,n)
else t.push(e)
return t}function sf(e){if(0===e.length)return 1
for(var t=e[0],n=1;n<e.length;n++)t*=e[n]
return t}function uf(e,t){if(e===t)return!0
if(null==e||null==t)return!1
if(e.length!==t.length)return!1
for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1
return!0}function cf(e){return e%1==0}function lf(e){if(null!=Math.tanh)return Math.tanh(e)
if(e===1/0)return 1
if(e===-1/0)return-1
var t=Math.exp(2*e)
return(t-1)/(t+1)}function hf(e){var t=Math.ceil(Math.sqrt(e))
return[t,Math.ceil(e/t)]}function ff(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function df(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,i){var o=0
!function a(){if(e())r()
else{var s=t(++o)
null!=n&&o>=n?i():setTimeout(a,s)}}()})}function pf(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i]
else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i)
r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i)
if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e)
return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements")
if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n)
var o=e.slice()
return o[r]=t/n,o}function vf(e,t){var n=t.length
return nf((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),nf(e.every(function(e){return cf(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function mf(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:vf(t,e).sort(),a=0,s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function gf(e,t){var n=null
if(null==e||"float32"===e)n=new Float32Array(t)
else if("int32"===e)n=new Int32Array(t)
else{if("bool"!==e)throw new Error("Unknown data type "+e)
n=new Uint8Array(t)}return n}function yf(e,t){var n=null
if(null==e||"float32"===e)n=new Float32Array(t)
else if("int32"===e)n=new Int32Array(t)
else if("bool"===e)n=new Uint8Array(t)
else{if("string"!==e)throw new Error("Unknown data type "+e)
n=new Array(t)}return n}function bf(e,t){for(var n=0;n<e.length;n++){var r=e[n]
if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function xf(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function wf(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function _f(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Rf(e){if("float32"===e||"int32"===e)return 4
if("complex64"===e)return 8
if("bool"===e)return 1
throw new Error("Unknown dtype "+e)}function Ef(e){if(null==e)return 0
var t=0
return e.forEach(function(e){return t+=e.length}),t}function Cf(e){return"string"==typeof e||e instanceof String}function kf(e){return"boolean"==typeof e}function Sf(e){return"number"==typeof e}function Af(e){return Array.isArray(e)?Af(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Sf(e)?"float32":Cf(e)?"string":kf(e)?"bool":"float32"}function Tf(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Of(e,t){for(var n=t;n<e;++n)if(e%n==0)return n
return e}function If(e){var t=e.length
if(t<2)return[]
var n=new Array(t-1)
n[t-2]=e[t-1]
for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1]
return n}function Nf(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray")
if(Array.isArray(e)&&(e=af(e)),n&&bf(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e
if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e)
if("int32"===t)return new Int32Array(e)
if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1)
return r}throw new Error("Unknown data type "+t)}function Df(e,t){if(0===e.length)return t[0]
var n=e.reduce(function(e,t){return e*t})
if(0===n)return[]
if(n!==t.length)throw new Error("["+e+"] does not match the input size.")
return function e(t,n,r){var i=new Array
if(1===n.length)for(var o=n[0],a=0;a<o;a++)i[a]=r[t+a]
else{o=n[0]
var s=n.slice(1),u=s.reduce(function(e,t){return e*t})
for(a=0;a<o;a++)i[a]=e(t+a*u,s,r)}return i}(0,e,t)}function Pf(e,t){for(var n=Mf(e,t),r=0;r<n.length;r++)n[r]=1
return n}function Mf(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e)
if("int32"===t)return new Int32Array(e)
if("bool"===t)return new Uint8Array(e)
throw new Error("Unknown data type "+t)}function Ff(){return Yh.platform.now()}function Lf(e){e.forEach(function(t){nf(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function Bf(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Yh.platform.encode(e,t)}function jf(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Yh.platform.decode(e,t)}Object.freeze({Environment:$h,getQueryParams:Xh,get ENV(){return Yh},setEnvironmentGlobal:Qh}),Object.freeze({shuffle:Jh,clamp:Zh,nearestLargerEven:ef,sum:tf,randUniform:function(e,t){var n=Math.random()
return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r])
n+=i*i}return n},assert:nf,assertShapesMatch:rf,assertNonNull:of,flatten:af,sizeFromShape:sf,isScalarShape:function(e){return 0===e.length},arraysEqual:uf,isInt:cf,tanh:lf,sizeToSquarishShape:hf,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n
return Jh(t),t},rightPad:ff,repeatedTry:df,inferFromImplicitShape:pf,parseAxisParam:vf,squeezeShape:mf,getTypedArrayFromDType:gf,getArrayFromDType:yf,checkConversionForErrors:bf,isValidDtype:xf,hasEncodingLoss:wf,isTypedArray:_f,bytesPerElement:Rf,bytesFromStringArray:Ef,isString:Cf,isBoolean:kf,isNumber:Sf,inferDtype:Af,isFunction:Tf,nearestDivisor:Of,computeStrides:If,toTypedArray:Nf,toNestedArray:Df,makeOnesTypedArray:Pf,makeZerosTypedArray:Mf,now:Ff,assertNonNegativeIntegerDimensions:Lf,fetch:function(e,t){return Yh.platform.fetch(e,t)},encodeString:Bf,decodeString:jf})
var zf=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Uf)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,o=this.backendTimer.time(function(){r=n()})
return(Array.isArray(r)?r:[r]).forEach(function(n){n.data().then(function(r){!function(e,t,n){if("float32"!==t)return!1
for(var r=0;r<e.length;r++){var i=e[r]
if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),o.then(function(o){var a=""
null!=o.getExtraProfileInfo&&(a=o.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,o.kernelMs,t,a)})})}),r},e}(),Uf=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,o){var a=ff(r+"ms",9),s=ff(e,25),u=t.rank,c=t.size,l=ff(t.shape.toString(),14),h=""
for(var f in i){var d=i[f].shape,p=d.length
h+=f+": "+p+"D "+(p>0?d:"")+" "}console.log("%c"+s+"\t%c"+a+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+h+"\t%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Wf=7
function Vf(e,t,n){return ff(Array.isArray(e)?parseFloat(e[0].toFixed(Wf))+" + "+parseFloat(e[1].toFixed(Wf))+"j":Cf(e)?"'"+e+"'":"bool"===n?qf(e):parseFloat(e.toFixed(Wf)).toString(),t)}function qf(e){return 0===e?"false":"true"}function Hf(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]])
return t}var Gf=function(){function e(e,t,n){var r=this
if(this.dtype=t,this.shape=e.slice(),this.size=sf(e),null!=n){var i=n.length
nf(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).")
this.values=n||yf(t,this.size),this.strides=If(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r]
0===n.length&&(n=[0]),nf(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"})
var i=this.locToIndex(n)
this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
0===e.length&&(e=[0])
for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r]
if(o<0||o>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape
throw new Error(a)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u]
return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0
if(1===this.rank)return e[0]
for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n]
return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[]
if(1===this.rank)return[e]
for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n]
return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Yf.make(this.shape,{values:this.values},this.dtype)},e}(),Kf=null,$f=null,Xf=null,Yf=function(){function e(e,t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=sf(e),this.strides=If(e),this.dataId=null!=r?r:{},this.id=Kf().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",Kf().registerTensor(this,i),null!=n&&Kf().write(i,this.dataId,n)}return e.make=function(t,n,r,i){var o=n.values
return null!=n.values&&"string"===r&&Cf(n.values[0])&&(o=n.values.map(function(e){return Bf(e)})),new e(t,r,o,n.dataId,i)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),nf(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),$f.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return[4,this.data()]
case 1:return e=t.sent(),[2,$f.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return $f.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return[4,this.data()]
case 1:return e=t.sent(),[2,Df(this.shape,e)]}})})},e.prototype.arraySync=function(){return Df(this.shape,this.dataSync())},e.prototype.data=function(){return Gh(this,void 0,void 0,function(){var e,t
return Kh(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Kf().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e]
case 1:t=n.sent()
try{return[2,t.map(function(e){return jf(e)})]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2
case 2:return[2,e]}})})},e.prototype.dataSync=function(){this.throwIfDisposed()
var e=Kf().readSync(this.dataId)
if("string"===this.dtype)try{return e.map(function(e){return jf(e)})}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Kf().read(this.dataId)]
case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Kf().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),$f.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),$f.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),$f.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),$f.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),$f.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),$f.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),$f.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=If(t),o=function(e,t,n,r){var i=sf(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,u="complex64"===n?Hf(e):e
if(s>1)for(var c=0;c<i/o;c++)for(var l=c*o,h=0;h<o;h++)a[h]=Math.max(a[h],Vf(u[l+h],0,n).length)
return a}(e,t,n,i),a=t.length,s=function e(t,n,r,i,o,a){void 0===a&&(a=!0)
var s="complex64"===r?2:1,u=n[0],c=n.length
if(0===c)return"complex64"===r?[Vf(Hf(t)[0],0,r)]:"bool"===r?[qf(t[0])]:[t[0].toString()]
if(1===c){if(u>20){var l=3*s,h=Array.from(t.slice(0,l)),f=Array.from(t.slice(u-3*s,u))
return"complex64"===r&&(h=Hf(h),f=Hf(f)),["["+h.map(function(e,t){return Vf(e,o[t],r)}).join(", ")+", ..., "+f.map(function(e,t){return Vf(e,o[u-3+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?Hf(t):Array.from(t)).map(function(e,t){return Vf(e,o[t],r)}).join(", ")+"]"]}var d=n.slice(1),p=i.slice(1),v=i[0]*s,m=[]
if(u>20){for(var g=0;g<3;g++){var y=(b=g*v)+v
m.push.apply(m,e(t.slice(b,y),d,r,p,o,!1))}for(m.push("..."),g=u-3;g<u;g++)y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,p,o,g===u-1))}else for(g=0;g<u;g++){var b
y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,p,o,g===u-1))}var x=2===c?",":""
for(m[0]="["+m[0]+x,g=1;g<m.length-1;g++)m[g]=" "+m[g]+x
var w=",\n"
for(g=2;g<c;g++)w+="\n"
return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":w),m}(e,t,n,i,o),u=["Tensor"]
return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(e){return"    "+e}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),$f.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),$f.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),$f.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),$f.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),$f.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),$f.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),$f.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),$f.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),$f.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),$f.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),$f.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),$f.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),Xf("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),$f.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),$f.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),$f.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),$f.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),$f.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),$f.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),$f.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),$f.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),$f.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),$f.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),$f.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),$f.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),$f.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),$f.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),$f.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),$f.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),$f.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),$f.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),$f.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),$f.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),$f.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),$f.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),$f.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),$f.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),$f.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),$f.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),$f.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),$f.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),$f.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),$f.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),$f.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),$f.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),$f.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),$f.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),$f.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),$f.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),$f.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),$f.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),$f.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),$f.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),$f.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),$f.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),$f.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),$f.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),$f.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),$f.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),$f.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),$f.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),$f.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),$f.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),$f.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),$f.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),$f.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),$f.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),$f.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),$f.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),$f.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),$f.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),$f.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),$f.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),$f.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),$f.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),$f.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),$f.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),$f.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),$f.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),$f.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),$f.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),$f.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),$f.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),$f.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),$f.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),$f.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),$f.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),$f.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),$f.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),$f.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),$f.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),$f.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),$f.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),$f.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),$f.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),$f.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),$f.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),$f.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),$f.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),$f.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),$f.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),$f.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,o){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),$f.conv1d(this,e,t,n,r,i,o)},e.prototype.conv2d=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),$f.conv2d(this,e,t,n,r,i,o)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),$f.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),$f.depthwiseConv2d(this,e,t,n,r,i,o)},e.prototype.separableConv2d=function(e,t,n,r,i,o){return void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),$f.separableConv2d(this,e,t,n,r,i,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),$f.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),$f.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),$f.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),$f.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),nd.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),$f.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),$f.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),$f.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),$f.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),$f.stridedSlice(this,e,t,n,r,i,o,a,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),$f.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),$f.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),$f.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),$f.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),$f.spectral.irfft(this)},e}()
Object.defineProperty(Yf,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}})
var Qf,Jf,Zf,ed,td,nd=function(e){function t(t,n,r){void 0===n&&(n=!0)
var i=e.call(this,t.shape,t.dtype,null,t.dataId)||this
i.trainable=n,i.name=r,null==i.name&&(i.name=Kf().nextVariableId().toString())
try{Kf().registerVariable(i)}catch(e){throw Kf().disposeTensor(i),e}return i}return Hh(t,e),t.variable=function(e,n,r,i){return void 0===n&&(n=!0),null!=i&&i!==e.dtype&&(e=e.asType(i)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match")
if(!uf(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match")
Kf().disposeTensor(this),this.dataId=e.dataId,Kf().registerTensor(this)},t.prototype.dispose=function(){Kf().disposeVariable(this),this.isDisposedInternal=!0},t}(Yf)
Object.defineProperty(nd,Symbol.hasInstance,{value:function(e){return e instanceof Yf&&null!=e.assign&&e.assign instanceof Function}}),nd.variable,function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Qf||(Qf={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Jf||(Jf={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Zf||(Zf={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ed||(ed={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(td||(td={}))
var rd={float32:ed,int32:Jf,bool:Zf,complex64:td}
function id(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string"
throw new Error("Can not upcast "+e+" with "+t)}return rd[e][t]}function od(e){return id(e,"int32")}function ad(e,t){if(e.dtype===t.dtype)return[e,t]
var n=id(e.dtype,t.dtype)
return[e.cast(n),t.cast(n)]}function sd(e,t){nf(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function ud(e){var t=[]
return function e(t,n,r){if(null!=t)if(t instanceof Yf)n.push(t)
else if(i=t,Array.isArray(i)||"object"==Vh(i)){var i,o=t
for(var a in o){var s=o[a]
r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:ad,assertTypesMatch:sd,isTensorInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0
return!1},getTensorsInContainer:ud})
var cd,ld=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),hd=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ld}return e.prototype.ready=function(){return Gh(this,void 0,void 0,function(){var e,t,n
return Kh(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})]
if(null!=this.backendInstance)return[2]
e=this.getSortedBackends(),t=0,r.label=1
case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5]
case 2:return r.sent()?[4,this.setBackend(n)]:[3,4]
case 3:return r.sent(),[2]
case 4:return t++,[3,1]
case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods")
if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name
if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods")
this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null
if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Gh(this,void 0,void 0,function(){var t,n,r
return Kh(this,function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry")
return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2])
case 1:return r=i.sent(),[3,3]
case 2:r=n,i.label=3
case 3:if(!r)return[2,!1]
i.label=4
case 4:return this.backendInstance=this.registry[e],this.profiler=new zf(this.backendInstance),[2,!0]}})})},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e]
if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.")
try{var r=n.factory()
if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,o=r.then(function(n){return!(i<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))}).catch(function(n){return!(i<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),1))})
return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry")
this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this
if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.")
return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,o=r.asyncInit
if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){this.write(e,t,this.readSync(t))},e.prototype.tidy=function(e,t){var n,r=this,i=null
if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()")
t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string")
if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function")
i=e}return this.scopedRun(function(){return r.startScope(i)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e()
try{var r=n()
return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=Yf.make(e.shape,{dataId:e.dataId},e.dtype)
return this.addTapeNode([e],t,function(e){return[e.toFloat()]}),t},e.prototype.runKernel=function(e,t,n){var r,i=this,o=[],a=this.isTapeOn(),s=null!=this.state.activeScope?this.state.activeScope.name:"",u=function(e){a&&(o=e.map(function(e){return i.keep(i.clone(e))}))},c=this.state.numBytes,l=this.state.numTensors
if(this.scopedRun(function(){return i.state.kernelDepth++},function(){return i.state.kernelDepth--},function(){r=i.ENV.getBool("DEBUG")?i.profiler.profileKernel(s,t,function(){return e(i.backend,u)}):e(i.backend,u)}),a){var h={id:this.state.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r],saved:o}
null!=n&&(h.gradient=function(e){return n(e,o)}),this.state.activeTape.push(h)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShape:Array.isArray(r)?r.map(function(e){return e.shape}):r.shape}),r},e.prototype.registerTensor=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0
if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++
var r=0
"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*Rf(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:null!=t?t:this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=t?t.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof nd||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.state.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered")
this.state.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--
var t=this.state.tensorInfo.get(e.dataId)
t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e]
this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory()
return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Gh(this,void 0,void 0,function(){var t,n
return Kh(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n){var r={}
e.forEach(function(e,t){r[t]=e})
var i={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t=n(e),r={}
return t.forEach(function(e,t){r[t]=function(){return e}}),r}}
this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++}
e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=ud(e),r=new Set(n.map(function(e){return e.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i]
o.kept||r.has(o.id)||o.dispose()}var a=this.state.scopeStack.pop()
this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==a.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var i=this
if(void 0===r&&(r=!1),nf(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'")
var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)})
nf(o instanceof Yf,function(){return"The result y returned by f() must be a tensor."})
var a=function(e,t,n){for(var r={},i={},o=0;o<t.length;o++)r[t[o].id]=!0
for(o=0;o<e.length;o++){var a=(p=e[o]).inputs
for(var s in a){for(var u=a[s],c=!1,l=0;l<t.length;l++)if(r[u.id]){p.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,i[p.id]=!0
break}if(c)break}}var h={}
h[n.id]=!0
var f={}
for(o=e.length-1;o>=0;o--)for(a=(p=e[o]).inputs,l=0;l<p.outputs.length;l++)if(h[p.outputs[l].id]){for(var s in a)h[a[s].id]=!0,f[p.id]=!0
break}var d=[]
for(o=0;o<e.length;o++){var p
if(i[(p=e[o]).id]&&f[p.id]){var v={}
for(var s in p.inputs){var m=p.inputs[s]
r[m.id]&&(v[s]=m)}var g=Object.assign({},p)
g.inputs=v,g.outputs=p.outputs,d.push(g)}}return d}(this.state.activeTape,t,o)
if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.")
return this.tidy("backward",function(){var e,r,s={}
s[o.id]=null==n?(r=Pf(sf(e=o.shape),"float32"),Yf.make(e,{values:r})):n,function(e,t,n){for(var r=function(r){var i=t[r],o=[]
if(i.outputs.forEach(function(t){var n=e[t.id]
if(null!=n)o.push(n)
else{var r=Yf.make(t.shape,{values:Mf(t.size,t.dtype)},t.dtype)
o.push(r)}}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".")
var a=i.gradient(1===i.outputs.length?o[0]:o),s=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".")
var r=n(function(){return a[t]()})
if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.name+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'")
var o=i.inputs[t]
if(!uf(r.shape,o.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'")
if(null==e[o.id])e[o.id]=r
else{var s=e[o.id]
e[o.id]=s.add(r),s.dispose()}}
for(var u in i.inputs)s(u)},i=t.length-1;i>=0;i--)r(i)}(s,a,function(e){return i.tidy(e)})
var u=t.map(function(e){return s[e.id]})
return 0===i.state.gradientDepth&&(i.state.activeTape.forEach(function(e){for(var t in e.saved)e.saved[t].dispose()}),i.state.activeTape=null),{value:o,grads:u}})},e.prototype.customGrad=function(e){var t=this
return nf(Tf(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i]
nf(r.every(function(e){return e instanceof Yf}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"})
var o={}
return r.forEach(function(e,t){o[t]=e}),t.runKernel(function(t,i){return nf((n=e.apply(void 0,r.concat([i]))).value instanceof Yf,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),nf(Tf(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(e,t){var i=n.gradFunc(e,t),o=Array.isArray(i)?i:[i]
nf(o.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),nf(o.every(function(e){return e instanceof Yf}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."})
var a={}
return o.forEach(function(e,t){a[t]=function(){return e}}),a})}},e.prototype.write=function(e,t,n){var r=this.state.tensorInfo.get(t),i=r.backend
if(e=e||this.backend,"string"===r.dtype){var o=Ef(n)
this.state.numBytes+=o-r.bytes,r.bytes=o}e!==i&&(i.disposeData(t),r.backend=e,e.register(t,r.shape,r.dtype)),e.write(t,n)},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return Gh(this,void 0,void 0,function(){var t,n
return Kh(this,function(r){switch(r.label){case 0:return t=Ff(),[4,this.backend.time(e)]
case 1:return(n=r.sent()).wallMs=Ff()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ld,this.registry)this.registry[e].dispose(),delete this.registry[e]
this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),fd=function(){var e=function(){if(null==cd){var e=void 0
if("undefined"!=typeof window)e=window
else if("undefined"!=typeof global)e=global
else if("undefined"!=typeof process)e=process
else{if("undefined"==typeof self)throw new Error("Could not find a global object")
e=self}cd=e}return cd}()
if(null==e._tfengine){var t=new $h(e)
e._tfengine=new hd(t)}return Qh(e._tfengine.ENV),Kf=function(){return e._tfengine},e._tfengine}()
function dd(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Yh.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Yh.registerFlag("IS_BROWSER",function(){return dd()}),Yh.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),Yh.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Yh.registerFlag("PROD",function(){return!1}),Yh.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Yh.getBool("DEBUG")}),Yh.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Yh.registerFlag("IS_TEST",function(){return!1})
var pd,vd,md={},gd={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}
function yd(e,t){md[e]=t}function bd(e){e in md||(md[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.")
var t=xd(e)
return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete md[e]},!1),1===e?t.getContext("webgl",gd)||t.getContext("experimental-webgl",gd):t.getContext("webgl2",gd)}(e))
var t=md[e]
return t.isContextLost()?(delete md[e],bd(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),md[e])}function xd(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150)
if("undefined"!=typeof document)return document.createElement("canvas")
throw new Error("Cannot create a canvas in this context")}function wd(e,t){return[t,e]}function _d(e){var t=sf(e)
return hf(Math.ceil(t/4))}function Rd(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Ed(e,t){var n,r,i,o,a,s,u,c,l,h=e
return 2===Yh.getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,i=h.RGBA16F,o=h.RGBA32F,a=h.RED,s=4,u=1,c=h.HALF_FLOAT,l=h.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=h.RGBA,a=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function Cd(e,t,n){var r=n()
return t&&function(e){var t=e.getError()
if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Td(e,t))}(e),r}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(pd||(pd={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(vd||(vd={}))
var kd=5.96e-8,Sd=65504
function Ad(e){return!!(Yh.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||kd<Math.abs(e)&&Math.abs(e)<Sd)}function Td(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR"
case e.INVALID_ENUM:return"INVALID_ENUM"
case e.INVALID_VALUE:return"INVALID_VALUE"
case e.INVALID_OPERATION:return"INVALID_OPERATION"
case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION"
case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY"
case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL"
default:return"Unknown error code "+t}}function Od(e,t,n){return Zd(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Id(e,t,n){var r=Zd(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.")
if(Cd(e,t,function(){return e.shaderSource(r,n)}),Cd(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.")
return r}function Nd(e,t,n){var r=Zd(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.")
if(Cd(e,t,function(){return e.shaderSource(r,n)}),Cd(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Md.exec(t)
if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e)
for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(function(e,t){return ff((t+1).toString(),o)+e}),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s)
var c=a.slice(0,r-1),l=a.slice(r-1,r),h=a.slice(r)
console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+ff(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.")
return r}var Dd,Pd,Md=/ERROR: [0-9]+:([0-9]+):/g
function Fd(e,t){return Zd(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function Ld(e,t,n){if(Cd(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Bd(e,t,n){if(Cd(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function jd(e,t,n){var r=Zd(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer")
return Cd(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Cd(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function zd(e,t,n){var r=Zd(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer")
return Cd(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Cd(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Ud(e,t){return Zd(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function Wd(e,t){var n=Yh.getNumber("WEBGL_MAX_TEXTURE_SIZE")
if(e<=0||t<=0){var r="["+e+"x"+t+"]"
throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Vd(e,t){return Zd(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function qd(e,t,n,r,i,o,a,s){var u=e.getAttribLocation(n,r)
return-1!==u&&(Cd(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,i)}),Cd(e,t,function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,a,s)}),Cd(e,t,function(){return e.enableVertexAttribArray(u)}),!0)}function Hd(e,t,n,r){ep(e,r),Cd(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function Gd(e,t,n,r){return Zd(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Kd(e,t,n){return e.getUniformLocation(t,n)}function $d(e,t,n,r,i,o){Cd(e,t,function(){return Hd(e,t,r,o)}),Cd(e,t,function(){return e.uniform1i(i,o)})}function Xd(e,t,n,r){Cd(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Cd(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function Yd(e,t,n){Cd(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Cd(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Qd(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER)
if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Jd(e,t))}function Jd(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT"
case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"
case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS"
case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED"
default:return"unknown error "+t}}function Zd(e,t,n,r){var i=Cd(e,t,function(){return n()})
if(null==i)throw new Error(r)
return i}function ep(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0
if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function tp(e,t){return void 0===t&&(t=2),sf(e.slice(0,e.length-t))}function np(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.")
return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function rp(e){var t=[1,1,1]
return 0===e.length||1===e.length&&1===e[0]||(t=[tp(e)].concat(np(e))),t}function ip(e,t){var n
void 0===t&&(t=!1)
var r=Yh.getNumber("WEBGL_MAX_TEXTURE_SIZE")
if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?ef(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var i=mf(e)
e=i.newShape}var o=sf(e)
if(e.length<=1&&o<=r)return[1,o]
if(2===e.length&&e[0]<=r&&e[1]<=r)return e
if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]]
if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]]
if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]]
if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]]
if(t){var a=tp(e),s=2,u=2
return e.length&&(s=(n=np(e))[0],u=n[1]),hf(o=a*(s/2)*(u/2)).map(function(e){return 2*e})}return hf(o)}function op(e){return e%2==0}function ap(e,t){if(uf(e=e.slice(-2),t=t.slice(-2)))return!0
if(!e.length||!t.length)return!0
if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0
if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0]
if(n===r)return!0
if(op(n)&&op(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&op(e[0])&&op(t[0])}function sp(e){if(null==Dd){var t=bd(e)
Dd=t.getParameter(t.MAX_TEXTURE_SIZE)}return Dd}function up(e){if(null==Pd){var t=bd(e)
Pd=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Pd)}function cp(e){if(0===e)return 0
var t=bd(e)
return lp(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:lp(t,"EXT_disjoint_timer_query")?1:0}function lp(e,t){return null!=e.getExtension(t)}function hp(e){try{if(null!=bd(e))return!0}catch(e){return!1}return!1}function fp(e){if(0===e)return!1
var t=bd(e)
if(1===e){if(!lp(t,"OES_texture_float"))return!1}else if(!lp(t,"EXT_color_buffer_float"))return!1
return pp(t)}function dp(e){if(0===e)return!1
var t=bd(e)
if(1!==e){if(lp(t,"EXT_color_buffer_float"))return pp(t)
if(lp(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float")
return function(e,t){var n=Ed(e,t),r=e.createTexture()
e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null)
var i=e.createFramebuffer()
e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)
var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE
return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}return!!lp(t,"OES_texture_float")&&!!lp(t,"WEBGL_color_buffer_float")&&pp(t)}function pp(e){var t=Ed(e),n=e.createTexture()
e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null)
var r=e.createFramebuffer()
e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)
var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE
return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function vp(e){return 2===e&&null!=bd(e).fenceSync}var mp=Object.freeze({callAndCheck:Cd,canBeRepresented:Ad,getWebGLErrorMessage:Td,getExtensionOrThrow:Od,createVertexShader:Id,createFragmentShader:Nd,createProgram:Fd,linkProgram:Ld,validateProgram:Bd,createStaticVertexBuffer:jd,createStaticIndexBuffer:zd,getNumChannels:function(){return 2===Yh.getNumber("WEBGL_VERSION")?1:4},createTexture:Ud,validateTextureSize:Wd,createFramebuffer:Vd,bindVertexBufferToProgramAttribute:qd,bindTextureUnit:Hd,unbindTextureUnit:function(e,t,n){ep(e,n),Cd(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Gd,getProgramUniformLocation:Kd,bindTextureToProgramUniformSampler:$d,bindCanvasToFramebuffer:function(e,t){Cd(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Cd(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Cd(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:Xd,unbindColorTextureFromFramebuffer:Yd,validateFramebuffer:Qd,getFramebufferErrorMessage:Jd,getBatchDim:tp,getRowsCols:np,getShapeAs3D:rp,getTextureShapeFromLogicalShape:ip,isReshapeFree:ap,getWebGLMaxTextureSize:sp,resetMaxTextureSize:function(){Dd=null},resetMaxTexturesInShader:function(){Pd=null},getMaxTexturesInShader:up,getWebGLDisjointQueryTimerVersion:cp,hasExtension:lp,isWebGLVersionEnabled:hp,isCapableOfRenderingToFloatTexture:fp,isDownloadFloatTextureEnabled:dp,isWebGLFenceEnabled:vp})
function gp(e){Yh.getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function yp(e,t){return fd.tidy(e,t)}function bp(e){ud(e).forEach(function(e){return e.dispose()})}function xp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
Yh.getBool("IS_TEST")||console.warn.apply(console,e)}function wp(e,t){var n=e
if(_f(e))return"string"===t?[]:[e.length]
if(!Array.isArray(e))return[]
for(var r=[];Array.isArray(n)||_f(n)&&"string"!==t;)r.push(n.length),n=n[0]
return Array.isArray(e)&&Yh.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||_f(t)){nf(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),nf(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"})
for(var i=n.slice(1),o=0;o<t.length;++o)e(t[o],i,r.concat(o))}else nf(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,r,[]),r}function _p(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Rp(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Yf)return _p(r,e.dtype,t,n),e
var i=Af(e)
if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),_p(r,i,t,n),null==e||!_f(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name
throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=wp(e,i)
_f(e)||Array.isArray(e)||(e=[e])
var s="string"!==i?Nf(e,i,Yh.getBool("DEBUG")):af(e,[],!0)
return Yf.make(a,{values:s},i)}function Ep(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`")
return e.map(function(e,r){return Rp(e,t+"["+r+"]",n)},r)}function Cp(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1
return!0}function kp(e,t,n){for(var r=e.length+t.length,i=[],o=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++])
return i}function Sp(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i])
return[n,t.map(function(t){return e[t]})]}function Ap(e,t){return kp(e,t.map(function(e){return 1}),t)}function Tp(e,t,n){nf(Cp(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function Op(e,t){if(Cp(e,t))return null
for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r)
return e.forEach(function(e){return n.push(e)}),n}function Ip(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Np(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r)
return n}function Dp(e,t){var n=e[0].length
e.forEach(function(e,t){nf(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),nf(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."})
var r=e[0]
e.forEach(function(e,i){for(var o=0;o<n;o++)nf(o===t||e[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Pp(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t]
return n}function Mp(e){var t=Object.keys(e)
if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.")
var n=t[0],r=e[n]
n.endsWith("_")&&(n=n.substring(0,n.length-1))
var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]
fd.startScope(n)
try{var i=r.apply(void 0,e)
return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),fd.endScope(i),i}catch(e){throw fd.endScope(null),e}}
return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Yh.registerFlag("HAS_WEBGL",function(){return Yh.getNumber("WEBGL_VERSION")>0}),Yh.registerFlag("WEBGL_VERSION",function(){return hp(2)?2:hp(1)?1:0}),Yh.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===Yh.get("WEBGL_VERSION")}),Yh.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Yh.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Yh.registerFlag("WEBGL_PACK",function(){return Yh.getBool("HAS_WEBGL")}),Yh.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_CLIP",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Yh.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_PACK_REDUCE",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_CONV_IM2COL",function(){return Yh.getBool("WEBGL_PACK")}),Yh.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return sp(Yh.getNumber("WEBGL_VERSION"))}),Yh.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return up(Yh.getNumber("WEBGL_VERSION"))}),Yh.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Yh.getNumber("WEBGL_VERSION")
return 0===e?0:cp(e)}),Yh.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))))
var e}),Yh.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return fp(Yh.getNumber("WEBGL_VERSION"))}),Yh.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Yh.getBool("WEBGL_FORCE_F16_TEXTURES")&&Yh.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Yh.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return dp(Yh.getNumber("WEBGL_VERSION"))}),Yh.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return vp(Yh.getNumber("WEBGL_VERSION"))}),Yh.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Yh.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Xf=gp
var Fp=Mp({complex_:function(e,t){var n=Rp(e,"real","complex"),r=Rp(t,"imag","complex")
return rf(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),fd.runKernel(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),Lp=Mp({real_:function(e){var t=Rp(e,"input","real")
return fd.runKernel(function(e){return e.real(t)},{$input:t})}}),Bp=Mp({imag_:function(e){var t=Rp(e,"input","imag")
return fd.runKernel(function(e){return e.imag(t)},{$input:t})}})
function jp(e,t,n){return zp(e,t,wp(e,n),n)}function zp(e,t,n,r){if(null==r&&(r=Af(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).")
if(!_f(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray")
if(null!=t){Lf(t)
var i=sf(t),o=sf(n)
nf(i===o,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o})
for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==sf(t.slice(a))
nf(n[a]===t[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return _f(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Nf(e,r,Yh.getBool("DEBUG")):af(e,[],!0),Yf.make(t,{values:e},r)}function Up(e,t){if((_f(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)")
if("string"===t&&_f(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.")
return zp(e,[],[],t)}function Wp(e,t){of(e)
var n=wp(e,t)
if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray")
return zp(e,null,n,t)}function Vp(e,t,n){if(of(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers")
var r=wp(e,n)
if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray")
return zp(e,t,r,n)}function qp(e,t,n){if(of(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers")
var r=wp(e,n)
if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array")
return zp(e,t,r,n)}function Hp(e,t,n){if(of(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers")
var r=wp(e,n)
if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array")
return zp(e,t,r,n)}function Gp(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Gp(e,"float32"),r=Kp(e,"float32")
return Fp(n,r)}var i=Pf(sf(e),t)
return Yf.make(e,{values:i},t)}function Kp(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Kp(e,"float32"),r=Kp(e,"float32")
return Fp(n,r)}var i=Mf(sf(e),t)
return Yf.make(e,{values:i},t)}function $p(e,t,n){return fd.runKernel(function(r){return r.fill(e,t,n)},{})}function Xp(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero")
if(e===t||e<t&&n<0||t<e&&n>1)return Kp([0],r)
var i=Mf(Math.abs(Math.ceil((t-e)/n)),r)
t<e&&1===n&&(n=-1),i[0]=e
for(var o=1;o<i.length;o++)i[o]=i[o-1]+n
return Wp(i,r)}var Yp=Mp({onesLike_:function(e){var t=Rp(e,"x","onesLike")
if("complex64"===t.dtype){var n=Yp(Lp(t)),r=Qp(Bp(t))
return Fp(n,r)}return fd.runKernel(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return Qp(e)}}})}}),Qp=Mp({zerosLike_:function(e){var t=Rp(e,"x","zerosLike")
return fd.runKernel(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return Qp(e)}}})}}),Jp=Mp({concat_:function(e,t){void 0===t&&(t=0),nf(e.length>=1,function(){return"Pass at least one tensor to concat"})
var n=Ep(e,"tensors","concat")
"complex64"===n[0].dtype&&n.forEach(function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")}),t=vf(t,n[0].shape)[0]
var r=Pp(n.map(function(e){return e.shape}),t)
if(0===sf(r))return jp([],r)
if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0]
var i=n.map(function(e){return e.shape})
Dp(i,t)
var o=n
return fd.runKernel(function(e){return e.concat(n,t)},o,function(e){var n=i.map(function(e){return e[t]})
return rv(e,n,t).map(function(e){return function(){return e}})})}}),Zp=Mp({concat1d_:function(e){return Jp(e,0)}}),ev=Mp({concat2d_:function(e,t){return Jp(e,t)}}),tv=Mp({concat3d_:function(e,t){return Jp(e,t)}}),nv=Mp({concat4d_:function(e,t){return Jp(e,t)}}),rv=Mp({split_:function(e,t,n){void 0===n&&(n=0)
var r,i=Rp(e,"x","split")
return n=vf(n,i.shape)[0],"number"==typeof t?(nf(i.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(i.shape[n]/t)):(nf(i.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),fd.runKernel(function(e){return e.split(i,r,n)},{$x:i},function(e){return{$x:function(){return Jp(e,n)}}})}})
function iv(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self
var ov=iv(function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString()
for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n))
r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)})
n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c
return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,a=n.next
return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,o&&("object"==Vh(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.alea=o}(0,e)}),av=iv(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11
return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e
for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==Vh(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor128=o}(0,e)}),sv=iv(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.next=function(){var e=t.x^t.x>>>2
return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e
for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==Vh(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)}),uv=iv(function(e){!function(e,t,n){function r(e){var t=this
t.next=function(){var e,n,r=t.x,i=t.i
return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[]
if(t===(0|t))r[0]=t
else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13
for(;r.length<8;)r.push(0)
for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date)
var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)}),cv=iv(function(e){!function(e,t,n){function r(e){var t=this
t.next=function(){var e,n,r=t.w,i=t.X,o=t.i
return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],u=128
for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0)
for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n
e.w=a,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date)
var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)}),lv=iv(function(e){!function(e,t,n){function r(e){var t=this,n=""
t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a
return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e
for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296}
return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e)
return e},a.int32=n.next,a.quick=a,o&&("object"==Vh(o)&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.tychei=o}(0,e)}),hv=iv(function(e){!function(t,r){var i,o=this,a=256,s=6,u="random",c=r.pow(a,s),l=r.pow(2,52),h=2*l,f=a-1
function d(e,n,f){var d=[],y=m(function e(t,n){var r,i=[],o=Vh(t)
if(n&&"object"==o)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e
return i&&(e=i.randomBytes)?e=e(a):(e=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=o.navigator,r=n&&n.plugins
return[+new Date,o,r,o.screen,g(t)]}}():e,3),d),b=new p(d),x=function(){for(var e=b.g(s),t=c,n=0;e<l;)e=(e+n)*a,t*=a,n=b.g(1)
for(;e>=h;)e/=2,t/=2,n>>>=1
return(e+n)/t}
return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,m(g(b.S),t),(n.pass||f||function(e,t,n,i){return i&&(i.S&&v(i,b),e.state=function(){return v(b,{})}),n?(r[u]=e,t):e})(x,y,"global"in n?n.global:this==r,n.state)}function p(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[]
for(n||(e=[n++]);i<a;)s[i]=i++
for(i=0;i<a;i++)s[i]=s[o=f&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=f&i+1],n=n*a+s[f&(s[i]=s[o=f&o+t])+(s[o]=t)]
return r.i=i,r.j=o,n})(a)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[f&i]=f&(n^=19*t[f&i])+r.charCodeAt(i++)
return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+u]=d,m(r.random(),t),e.exports){e.exports=d
try{i=n(9)}catch(e){}}}([],Math)})
hv.alea=ov,hv.xor128=av,hv.xorwow=sv,hv.xorshift7=uv,hv.xor4096=cv,hv.tychei=lv
var fv=hv.alea,dv=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev)
var o=i||Math.random()
this.random=fv(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal
return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,o=void 0,a=void 0
do{a=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o}while(a>=1||0===a)
var s=Math.sqrt(-2*Math.log(a)/a)
t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),pv=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n
var i=r||Math.random()
this.randu=fv(i.toString()),this.randn=new dv(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0)
if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),vv=function(){function e(e,t,n,r){var i=this
if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float")
this.random=fv(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}()
function mv(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Lf(e),new Gf(e,t,n)}var gv=Mp({batchToSpaceND_:function(e,t,n){var r=Rp(e,"x","batchToSpaceND"),i=t.reduce(function(e,t){return e*t})
return nf(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),nf(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),nf(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i}),fd.runKernel(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),yv=Mp({cast_:function(e,t){var n=Rp(e,"x","cast")
if(!xf(t))throw new Error("Failed to cast to unknown dtype "+t)
if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings")
return fd.runKernel(function(e){return e.cast(n,t)},{$x:n},function(e){return{$x:function(){return e.clone()}}})}}),bv=Mp({clone_:function(e){var t=Rp(e,"x","clone",null)
return fd.runKernel(function(e){return Yf.make(t.shape,{dataId:t.dataId},t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),xv=Mp({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1)
var i=Rp(e,"x","cumsum"),o=Op([t|=0],i.rank),a=i
null!=o&&(a=i.transpose(o))
var s=Np(1,i.rank)[0],u=fd.runKernel(function(e){return e.cumsum(a,s,n,r)},{permutedX:a},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}})
return null!=o&&(u=u.transpose(o)),u}}),wv=Mp({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC")
var r=Rp(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1]
return nf(i*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),nf(o*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),nf(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),fd.runKernel(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),_v=Mp({expandDims_:function(e,t){void 0===t&&(t=0)
var n=Rp(e,"x","expandDims",null)
nf(t<=n.rank,function(){return"Axis must be <= rank of the tensor"})
var r=n.shape.slice()
return t<0&&(nf(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),Mv(n,r)}}),Rv=Mp({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e)
for(var i=mv([e,t],r),o=e<=t?e:t,a=0;a<o;++a)i.set(1,a,a)
var s=i.toTensor().as2D(e,t)
if(null==n)return s
if(1===n.length)return jv(_v(s,0),[n[0],1,1])
if(2===n.length)return jv(_v(_v(s,0),0),[n[0],n[1],1,1])
if(3===n.length)return jv(_v(_v(_v(s,0),0),0),[n[0],n[1],n[2],1,1])
throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Ev=Mp({multinomial_:function(e,t,n,r){void 0===r&&(r=!1)
var i=Rp(e,"logits","multinomial"),o=i.size,a=i.rank
if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".")
if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a)
n=n||Math.random()
var s=1===a?i.as2D(1,-1):i,u=fd.runKernel(function(e){return e.multinomial(s,r,t,n)},{logits2D:s})
return 1===a?u.as1D():u}}),Cv=Mp({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t)
var i=Rp(e,"indices","oneHot","int32"),o=i.shape.concat([t])
return i=i.flatten(),fd.runKernel(function(e){return e.oneHot(i,t,n,r)},{$indices:i},function(e){return{$indices:function(){return Kp(i.shape,"float32")}}}).reshape(o)}}),kv=Mp({pad_:function(e,t,n){void 0===n&&(n=0)
var r=Rp(e,"x","pad")
if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad")
var i=t.map(function(e){return e[0]})
return fd.runKernel(function(e){return e.pad(r,t,n)},{$x:r},function(e){return{$x:function(){return e.slice(i,r.shape)}}})}}),Sv=Mp({pad1d_:function(e,t,n){return void 0===n&&(n=0),nf(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),kv(e,[t],n)}}),Av=Mp({pad2d_:function(e,t,n){return void 0===n&&(n=0),nf(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kv(e,t,n)}}),Tv=Mp({pad3d_:function(e,t,n){return void 0===n&&(n=0),nf(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kv(e,t,n)}}),Ov=Mp({pad4d_:function(e,t,n){return void 0===n&&(n=0),nf(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kv(e,t,n)}}),Iv=Mp({rand_:function(e,t,n){var r=sf(e),i=null
if(null==n||"float32"===n)i=new Float32Array(r)
else if("int32"===n)i=new Int32Array(r)
else{if("bool"!==n)throw new Error("Unknown data type "+n)
i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t()
return Yf.make(e,{values:i},n)}}),Nv=Mp({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r)
for(var o=new dv(t,n,r,!1,i),a=mv(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue()
return a.toTensor()}}),Dv=Mp({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r)
for(var o=new pv(t,n,r,i),a=mv(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue()
return a.toTensor()}}),Pv=Mp({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32")
for(var o=mv(e,r),a=new vv(t,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue()
return o.toTensor()}}),Mv=Mp({reshape_:function(e,t){var n=Rp(e,"x","reshape",null)
return t=pf(t,n.size),nf(n.size===sf(t),function(){return"new shape and old shape must have the same number of elements."}),fd.runKernel(function(e){return e.reshape(n,t)},{$x:n},function(e){return{$x:function(){return e.reshape(n.shape)}}})}}),Fv=Mp({spaceToBatchND_:function(e,t,n){var r=Rp(e,"x","spaceToBatchND")
return nf(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),nf(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),nf(r.shape.reduce(function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),fd.runKernel(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),Lv=Mp({squeeze_:function(e,t){var n=Rp(e,"x","squeeze")
return Mv(n,mf(n.shape,t).newShape)}}),Bv=Mp({stack_:function(e,t){void 0===t&&(t=0)
var n=Ep(e,"tensors","stack")
if(nf(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t)
var r=n[0].rank,i=n[0].shape,o=n[0].dtype
nf(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){rf(i,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){nf(o===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})})
var a=n.map(function(e){return e.expandDims(t)})
return Jp(a,t)}}),jv=Mp({tile_:function(e,t){var n=Rp(e,"x","tile",null)
return nf(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}),fd.runKernel(function(e,r){var i=e.tile(n,t)
return r([n]),i},{$x:n},function(e,n){var r=n[0]
return{$x:function(){var n=Qp(r)
if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]))
else if(2===r.rank)for(i=0;i<t[0];++i)for(var o=0;o<t[1];++o)n=n.add(e.slice([i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]))
else if(3===r.rank)for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(var a=0;a<t[2];++a)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]))
else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.")
for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}})}}),zv=Mp({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r)
for(var o=new dv(t,n,r,!0,i),a=mv(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue()
return a.toTensor()}}),Uv=Mp({unstack_:function(e,t){void 0===t&&(t=0),t=t||0
var n=Rp(e,"x","unstack")
return nf(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length),fd.runKernel(function(e){return e.unstack(n,t)},{$x:n},function(e){return{$x:function(){return Bv(e,t)}}})}})
function Wv(e,t,n,r){void 0===r&&(r=!0)
var i=[]
if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1))
else{i=i.concat(e[0])
for(var o=t.length,a=0;a<o;++a)i=i.concat([e[a+1]/t[a],t[a]])
i=i.concat(e.slice(o+1))}return i}function Vv(e,t,n){void 0===n&&(n=!0)
var r=[]
if(n){r.push(t)
for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],a=[]
for(i=1;i<e;++i)i>=2*t+1||i%2==1?a.push(i):o.push(i)
r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function qv(e,t,n,r){void 0===r&&(r=!0)
var i=[]
r?i.push(e[0]/n):i.push(e[0]*n)
for(var o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o])
return i}function Hv(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0])
return n}function Gv(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1])
return r}function Kv(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".")
if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".")
if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".")
if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank)
if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".")
for(var n=t.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o]
var a=e.shape,s=n.slice()
s.pop()
var u=1
for(o=r;o<e.rank;++o)u*=a[o],s.push(a[o])
var c=If(e.shape).map(function(e){return e/u}).concat([1]).slice(0,r)
return[s,i,u,c]}var $v=30
function Xv(e){return e<=$v?e:Of(e,Math.floor(Math.sqrt(e)))}function Yv(e,t,n){for(var r=t.rank>1?t.shape[t.rank-1]:1,i=n.length,o=1,a=r;a<i;++a)o*=n[a]
var s=r<1?1:r
return{sliceRank:r,numUpdates:t.size/s,sliceSize:o,strides:If(n.slice(0,r)).concat([1]),outputSize:sf(n)}}function Qv(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++
return t}function Jv(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i])
return r}function Zv(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER)
var s=r[i]
return o<0&&(o+=s),Zh(0,o,s-1)}function em(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER)
var s=r[i]
return o<0&&(o+=s),a>0?Zh(0,o,s):Zh(-1,o,s-1)}function tm(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i
break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1
return!0}function nm(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r]
return n}function rm(e){return fd.customGrad(e)}var im=Mp({softmax_:function(e,t){void 0===t&&(t=-1)
var n=Rp(e,"logits","softmax")
if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t)
return rm(function(e,n){var r=e.logSumExp([t],!0),i=e.toFloat().sub(r).exp()
return n([i]),{value:i,gradFunc:function(e,n){var r=n[0],i=e.mul(r)
return i.sub(i.sum([t],!0).mul(r))}}})(n)}}),om=Mp({logSoftmax_:function(e,t){void 0===t&&(t=-1)
var n=Rp(e,"logits","logSoftmax")
if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t)
return rm(function(e,n){var r=e.max(t,!0),i=e.sub(r),o=i.toFloat().sub(i.exp().sum(t,!0).log())
return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp()
return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),am=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.data.delete(e)},e}()
function sm(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function um(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function cm(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var o=e[e.length-i-1]
null==o&&(o=1)
var a=t[t.length-i-1]
if(null==a&&(a=1),1===o)n.unshift(a)
else if(1===a)n.unshift(o)
else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".")
n.unshift(o)}}return n}function lm(e,t,n,r,i,o,a){void 0===a&&(a="channelsLast")
var s,u=vm(t),c=u[0],l=u[1]
if("channelsLast"===a)s=[c,l,e[3],e[3]]
else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a)
s=[c,l,e[1],e[1]]}return fm(e,s,n,r,i,o,!1,a)}function hm(e,t,n,r,i,o,a){void 0===a&&(a="NDHWC")
var s,u,c=mm(t),l=c[0],h=c[1],f=c[2]
if("NDHWC"===a)u="channelsLast",s=[l,h,f,e[4],e[4]]
else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a)
u="channelsFirst",s=[l,h,f,e[1],e[1]]}return dm(e,s,n,r,i,!1,u,o)}function fm(e,t,n,r,i,o,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast")
var u=[-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],f=u[3]
if("channelsLast"===s)c=e[0],l=e[1],h=e[2],f=e[3]
else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s)
c=e[0],f=e[1],l=e[2],h=e[3]}var d,p=t[0],v=t[1],m=t[3],g=vm(n),y=g[0],b=g[1],x=vm(r),w=x[0],_=x[1],R=gm(p,w),E=gm(v,_),C=function(e,t,n,r,i,o,a,s){var u,c,l
if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"}
var h=function(e,t,n,r,i){null==r&&(r=pm(e,t,n))
var o=e[1],a=ym((e[0]-t+2*r)/n+1,i)
nf(cf(a),function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"})
var s=ym((o-t+2*r)/n+1,i)
return nf(cf(s),function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"}),[a,s]}([t,n],o,r,e,s)
c=h[0],l=h[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/i)
var f=Math.max(0,(c-1)*r+o-t),d=Math.max(0,(l-1)*i+a-n),p=Math.floor(f/2),v=f-p,m=Math.floor(d/2)
u={top:p,bottom:v,left:m,right:d-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e)
u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),l=Math.ceil((n-a+1)/i)}return{padInfo:u,outHeight:c,outWidth:l}}(i,l,h,y,b,R,E,o),k=C.padInfo,S=C.outHeight,A=C.outWidth,T=a?m*f:m
return"channelsFirst"===s?d=[c,T,S,A]:"channelsLast"===s&&(d=[c,S,A,T]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:h,inChannels:f,outHeight:S,outWidth:A,outChannels:T,padInfo:k,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:v,effectiveFilterHeight:R,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:_,inShape:e,outShape:d,filterShape:t}}function dm(e,t,n,r,i,o,a,s){void 0===o&&(o=!1),void 0===a&&(a="channelsLast")
var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],h=u[2],f=u[3],d=u[4]
if("channelsLast"===a)c=e[0],l=e[1],h=e[2],f=e[3],d=e[4]
else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a)
c=e[0],d=e[1],l=e[2],h=e[3],f=e[4]}var p,v=t[0],m=t[1],g=t[2],y=t[4],b=mm(n),x=b[0],w=b[1],_=b[2],R=mm(r),E=R[0],C=R[1],k=R[2],S=gm(v,E),A=gm(m,C),T=gm(g,k),O=function(e,t,n,r,i,o,a,s,u,c,l){var h,f,d,p
if("number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"}
var v=function(e,t,n,r,i,o){null==i&&(i=pm(e,t,r))
var a=e[1],s=e[2],u=ym((e[0]-t+2*i)/r+1,o)
nf(cf(u),function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"})
var c=ym((a-t+2*i)/r+1,o)
nf(cf(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"})
var l=ym((s-t+2*i)/r+1,o)
return nf(cf(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,c,l,1]}([t,n,r,1],s,0,i,e,l)
f=v[0],d=v[1],p=v[2]}else if("same"===e){var m=((f=Math.ceil(t/i))-1)*i+s-t,g=((d=Math.ceil(n/o))-1)*o+u-n,y=((p=Math.ceil(r/a))-1)*a+c-r,b=Math.floor(m/2),x=m-b,w=Math.floor(g/2),_=g-w,R=Math.floor(y/2)
h={top:w,bottom:_,left:R,right:y-R,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e)
h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/i),d=Math.ceil((n-u+1)/o),p=Math.ceil((r-c+1)/a)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}(i,l,h,f,x,w,_,S,A,T,s),I=O.padInfo,N=O.outDepth,D=O.outHeight,P=O.outWidth,M=o?y*d:y
return"channelsFirst"===a?p=[c,M,N,D,P]:"channelsLast"===a&&(p=[c,N,D,P,M]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:h,inWidth:f,inChannels:d,outDepth:N,outHeight:D,outWidth:P,outChannels:M,padInfo:I,strideDepth:x,strideHeight:w,strideWidth:_,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:A,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:C,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function pm(e,t,n,r){void 0===r&&(r=1)
var i=gm(t,r)
return Math.floor((e[0]*(n-1)-n+i)/2)}function vm(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function mm(e){return"number"==typeof e?[e,e,e]:e}function gm(e,t){return t<=1?e:e+(e-1)*(t-1)}function ym(e,t){if(!t)return e
switch(t){case"round":return Math.round(e)
case"ceil":return Math.ceil(e)
case"floor":return Math.floor(e)
default:throw new Error("Unknown roundingMode "+t)}}function bm(e){var t=vm(e),n=t[0],r=t[1],i=t[2]
return 1===n&&1===r&&1===i}function xm(e,t){return bm(e)||bm(t)}function wm(e){if("NHWC"===e)return"channelsLast"
if("NCHW"===e)return"channelsFirst"
throw new Error("Unknown dataFormat "+e)}function _m(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone()
var r=Kp(e.shape),i=e.toFloat(),o=n.complex(i,r)
return r.dispose(),i.dispose(),o}if(!wf(e.dtype,t))return Yf.make(e.shape,{dataId:e.dataId},t)
if("complex64"===e.dtype){var a=n.real(e)
return o=a.cast(t),a.dispose(),o}if("int32"===t)return n.int(e)
if("bool"===t){var s=Up(0,e.dtype)
return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Rm(e,t){return Yf.make(t,{dataId:e.dataId},e.dtype)}function Em(e,t,n){var r=(t-e)/(n-1),i=Mf(n,"float32")
i[0]=e
for(var o=1;o<i.length;o++)i[o]=i[o-1]+r
return Wp(i,"float32")}function Cm(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".")
for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2]
return n}function km(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Sm(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Am(e,t,n){var r=(n?2:-2)*Math.PI*(e/t)
return{real:Math.cos(r),imag:Math.sin(r)}}function Tm(e,t,n,r,i){for(var o=Array.from(t).map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>i}).sort(function(e,t){return t.score-e.score}),a=[],s=0;s<o.length;s++){var u=o[s],c=u.score,l=u.boxIndex
if(c<i)break
for(var h=!1,f=a.length-1;f>=0;--f)if(Om(e,l,a[f])>=r){h=!0
break}if(!h&&(a.push(l),a.length>=n))break}return Wp(a,"int32")}function Om(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(s-o)*(u-a),p=(h-c)*(f-l)
if(d<=0||p<=0)return 0
var v=Math.max(o,c),m=Math.max(a,l),g=Math.min(s,h),y=Math.min(u,f),b=Math.max(g-v,0)*Math.max(y-m,0)
return b/(d+p-b)}function Im(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice()
return t.map(function(t){i[n]=t
var o=e.slice(r,i)
return r[n]+=t,o})}function Nm(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r]
var i=mv(n,e.dtype)
for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=o[s]%e.shape[s]
var u=e.locToIndex(a)
i.values[r]=e.values[u]}return i.toTensor()}function Dm(e,t,n,r,i){for(var o=t[t.length-1],a=[e.length/o,o],s=a[0],u=a[1],c=gf(n,s*r),l=gf("int32",s*r),h=0;h<s;h++){for(var f=h*u,d=e.subarray(f,f+u),p=[],v=0;v<d.length;v++)p.push({value:d[v],index:v})
p.sort(function(e,t){return t.value-e.value})
var m=h*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r)
for(v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}var b=t.slice()
return b[b.length-1]=r,[jp(c,b,n),jp(l,b,"int32")]}function Pm(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r)
var i=mv(e,"int32"),o=mv([n.length,e.length],"int32")
for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*e.length
o.values.set(a,s)}return o.toTensor()}!function(){function e(){}e.prototype.time=function(e){throw new Error("Not yet implemented.")},e.prototype.read=function(e){throw new Error("Not yet implemented.")},e.prototype.readSync=function(e){throw new Error("Not yet implemented.")},e.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},e.prototype.write=function(e,t){throw new Error("Not yet implemented.")},e.prototype.fromPixels=function(e,t){throw new Error("Not yet implemented.")},e.prototype.register=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.memory=function(){throw new Error("Not yet implemented.")},e.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fusedBatchMatMul=function(e){throw e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},e.prototype.slice=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.stridedSlice=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.unstack=function(e,t){throw new Error("Not yet implemented")},e.prototype.reverse=function(e,t){throw new Error("Not yet implemented")},e.prototype.concat=function(e,t){throw new Error("Not yet implemented")},e.prototype.neg=function(e){throw new Error("Not yet implemented")},e.prototype.add=function(e,t){throw new Error("Not yet implemented")},e.prototype.addN=function(e){throw new Error("Not yet implemented")},e.prototype.subtract=function(e,t){throw new Error("Not yet implemented")},e.prototype.multiply=function(e,t){throw new Error("Not yet implemented")},e.prototype.realDivide=function(e,t){throw new Error("Not yet implemented")},e.prototype.floorDiv=function(e,t){throw new Error("Not yet implemented")},e.prototype.sum=function(e,t){throw new Error("Not yet implemented")},e.prototype.prod=function(e,t){throw new Error("Not yet implemented")},e.prototype.unsortedSegmentSum=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.argMin=function(e,t){throw new Error("Not yet implemented")},e.prototype.argMax=function(e,t){throw new Error("Not yet implemented")},e.prototype.equal=function(e,t){throw new Error("Not yet implemented")},e.prototype.notEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.less=function(e,t){throw new Error("Not yet implemented")},e.prototype.lessEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.greater=function(e,t){throw new Error("Not yet implemented")},e.prototype.greaterEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},e.prototype.logicalAnd=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalOr=function(e,t){throw new Error("Not yet implemented")},e.prototype.where=function(e){throw new Error("Not yet implemented")},e.prototype.select=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.topk=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.min=function(e,t){throw new Error("Not yet implemented")},e.prototype.minimum=function(e,t){throw new Error("Not yet implemented")},e.prototype.mod=function(e,t){throw new Error("Not yet implemented")},e.prototype.max=function(e,t){throw new Error("Not yet implemented")},e.prototype.maximum=function(e,t){throw new Error("Not yet implemented")},e.prototype.all=function(e,t){throw new Error("Not yet implemented")},e.prototype.any=function(e,t){throw new Error("Not yet implemented")},e.prototype.squaredDifference=function(e,t){throw new Error("Not yet implemented")},e.prototype.ceil=function(e){throw new Error("Not yet implemented")},e.prototype.floor=function(e){throw new Error("Not yet implemented")},e.prototype.round=function(e){throw new Error("Not yet implemented")},e.prototype.sign=function(e){throw new Error("Not yet implemented")},e.prototype.isNaN=function(e){throw new Error("Not yet implemented")},e.prototype.isInf=function(e){throw new Error("Not yet implemented")},e.prototype.isFinite=function(e){throw new Error("Not yet implemented")},e.prototype.pow=function(e,t){throw new Error("Not yet implemented")},e.prototype.exp=function(e){throw new Error("Not yet implemented")},e.prototype.expm1=function(e){throw new Error("Not yet implemented")},e.prototype.log=function(e){throw new Error("Not yet implemented")},e.prototype.log1p=function(e){throw new Error("Not yet implemented")},e.prototype.sqrt=function(e){throw new Error("Not yet implemented")},e.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},e.prototype.square=function(e){throw new Error("Not yet implemented")},e.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},e.prototype.relu=function(e){throw new Error("Not yet implemented")},e.prototype.prelu=function(e,t){throw new Error("Not yet implemented")},e.prototype.elu=function(e){throw new Error("Not yet implemented")},e.prototype.eluDer=function(e,t){throw new Error("Not yet implemented")},e.prototype.selu=function(e){throw new Error("Not yet implemented")},e.prototype.int=function(e){throw new Error("Not yet implemented")},e.prototype.clip=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.abs=function(e){throw new Error("Not yet implemented")},e.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},e.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},e.prototype.softplus=function(e){throw new Error("Not yet implemented")},e.prototype.sin=function(e){throw new Error("Not yet implemented")},e.prototype.cos=function(e){throw new Error("Not yet implemented")},e.prototype.tan=function(e){throw new Error("Not yet implemented")},e.prototype.asin=function(e){throw new Error("Not yet implemented")},e.prototype.acos=function(e){throw new Error("Not yet implemented")},e.prototype.atan=function(e){throw new Error("Not yet implemented")},e.prototype.atan2=function(e,t){throw new Error("Not yet implemented")},e.prototype.sinh=function(e){throw new Error("Not yet implemented")},e.prototype.cosh=function(e){throw new Error("Not yet implemented")},e.prototype.tanh=function(e){throw new Error("Not yet implemented")},e.prototype.asinh=function(e){throw new Error("Not yet implemented")},e.prototype.acosh=function(e){throw new Error("Not yet implemented")},e.prototype.atanh=function(e){throw new Error("Not yet implemented")},e.prototype.erf=function(e){throw new Error("Not yet implemented")},e.prototype.step=function(e,t){throw new Error("Not yet implemented")},e.prototype.fusedConv2d=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.conv2d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2D=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPoolBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.avgPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPoolBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.avgPool3d=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPool3dBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool3d=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPool3dBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.reshape=function(e,t){throw new Error("Not yet implemented")},e.prototype.cast=function(e,t){throw new Error("Not yet implemented")},e.prototype.tile=function(e,t){throw new Error("Not yet implemented")},e.prototype.pad=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.transpose=function(e,t){throw new Error("Not yet implemented")},e.prototype.gather=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.gatherND=function(e,t){throw new Error("Not yet implemented")},e.prototype.scatterND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchToSpaceND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.spaceToBatchND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeBilinear=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeBilinearBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchNormalization=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){throw new Error("Not yet implemented")},e.prototype.multinomial=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.oneHot=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.cumsum=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.fft=function(e){throw new Error("Not yet implemented")},e.prototype.ifft=function(e){throw new Error("Not yet implemented")},e.prototype.complex=function(e,t){throw new Error("Not yet implemented")},e.prototype.real=function(e){throw new Error("Not yet implemented")},e.prototype.imag=function(e){throw new Error("Not yet implemented")},e.prototype.cropAndResize=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.depthToSpace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.split=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.sparseToDense=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.diag=function(e){throw new Error("Not yet implemented")},e.prototype.fill=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.onesLike=function(e){throw new Error("Not yet implemented")},e.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},e.prototype.linspace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.dispose=function(){throw new Error("Not yet implemented")}}(),Object.freeze({castTensor:_m,reshapeTensor:Rm,linspaceImpl:Em,upcastType:id,axesAreInnerMostDims:Cp,combineLocations:kp,computeOutAndReduceShapes:Sp,expandShapeToKeepDim:Ap,assertAxesAreInnerMostDims:Tp,getAxesPermutation:Op,getUndoAxesPermutation:Ip,getInnerMostAxes:Np,getBroadcastDims:sm,getReductionAxes:um,assertAndGetBroadcastShape:cm,assertParamsConsistent:Dp,computeOutShape:Pp,computePool2DInfo:lm,computePool3DInfo:hm,computeConv2DInfo:fm,computeConv3DInfo:dm,computeDefaultPad:pm,tupleValuesAreOne:bm,eitherStridesOrDilationsAreOne:xm,convertConv2DDataFormat:wm})
var Mm=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t})
var n=[]
this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")})
var r=this.variableNames.map(function(e){return"v"+e}).join(" + ")
this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Fm=function(e,t){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t})
var n=[]
this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")})
var r=this.variableNames.map(function(e){return"v"+e}).join(" + ")
this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Lm=function(e,t,n){this.variableNames=["A"]
var r=e.windowSize,i=e.batchSize,o=e.inSize,a=Math.ceil(o/r)
n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a]
var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"
this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}
function Bm(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function jm(e,t){return 1===t?[e]:Bm(e,t)}function zm(){var e,t,n,r,i,o,a,s,u,c
return 2===Yh.getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 0. || val == 0.) ? false : true;\n      }\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Um(e,t,n){void 0===n&&(n="index")
var r=If(t)
return r.map(function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"}).join("")}function Wm(e){var t=If(e).map(function(e){return e.toString()})
return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Vm="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n"
var qm="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Hm="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Gm="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Km="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n"
function $m(e){return"offset"+e}function Xm(e){var t=e.name,n=sf(e.shapeInfo.logicalShape)
return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Ym(e){if(e<=1)return"int"
if(2===e)return"ivec2"
if(3===e)return"ivec3"
if(4===e)return"ivec4"
if(5===e)return"ivec5"
if(6===e)return"ivec6"
throw Error("GPU for rank "+e+" is not yet supported")}function Qm(e,t){var n=JSON.parse(JSON.stringify(e))
return n.shapeInfo.logicalShape=t,n}function Jm(e,t){return t.map(function(t){return e[t]}).join(", ")}var Zm=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,nf(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."})
var i=e[e.length-1],o=Math.ceil(i/t)
this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA")
var a,s,u=this.outputShape,c=u.length,l=Ym(c),h=jm("coords",c)
if(1===o){var f=Ym(s=c+1)
a="\n        "+f+" sourceLocR = "+f+"("+h.join()+", 0);\n        ++"+h[c-1]+";\n        "+f+" sourceLocG = "+f+"("+h.join()+", 0);\n        ++"+h[c-2]+";\n        "+f+" sourceLocA = "+f+"("+h.join()+", 0);\n        --"+h[c-1]+";\n        "+f+" sourceLocB = "+f+"("+h.join()+", 0);\n        --"+h[c-2]+";"}else s=c,a="\n        "+l+" sourceLocR = coords;\n        ++"+h[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+h[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+h[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+h[c-2]+";"
var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],v=d.map(function(e){return"int "+e}),m=jm("sourceLocR",s-1).concat("inIdx.r"),g=jm("sourceLocG",s-1).concat("inIdx.g"),y=jm("sourceLocB",s-1).concat("inIdx.b"),b=jm("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",_="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",R=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }"
this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+R+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+h[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+h[c-2]+" < "+(u[c-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},eg=function(e){this.variableNames=["dy"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,h=1/(t*n)
this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+h+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},tg=function(e){this.variableNames=["dy"],this.outputShape=e.inShape
var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=h-1-e.padInfo.top,v=f-1-e.padInfo.left,m=1/(t*n*r)
this.userCode="\n      const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+h+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ng=function(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],cm(e,t),cm(e,n)
var a="0.0"
null!=r&&(cm(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()")
var s="1.0"
null!=i&&(cm(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},rg=function(e,t,n,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],cm(e,t),cm(e,n)
var a="vec4(0.0)"
null!=r&&(cm(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()")
var s="vec4(1.0)"
null!=i&&(cm(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},ig=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=cm(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},og="return (a < 0.) ? b * a : a;",ag=function(e,t,n){this.variableNames=["A","B"],this.outputShape=cm(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},sg="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ug=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=cm(t,n)
var i=this.outputShape.length,o=""
if(r)if(0===i||1===sf(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        "
else if(o="\n          "+Ym(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          "
else{var a=jm("coords",i)
o+="\n            bool nextRowOutOfBounds =\n              ("+a[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+a[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},cg=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this
return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),lg=function(){function e(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this
return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),hg=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},fg=function(e){this.outputShape=[],this.outputShape=Pp(e,1),this.variableNames=e.map(function(e,t){return"T"+t})
var t=new Array(e.length-1)
t[0]=e[0][1]
for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1]
var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"]
for(n=1;n<t.length;n++){var i=t[n-1]
r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=t.length,a=t[t.length-1]
r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},dg=function(e,t){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Pp(e,t)
var n=this.outputShape,r=n.length,i=Ym(r),o=jm("coords",r),a=["x","y","z","w","u","v"].slice(0,r)
this.variableNames=e.map(function(e,t){return"T"+t})
var s=new Array(e.length-1)
s[0]=e[0][t]
for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t]
var c=a[t],l="vec2("+a.slice(-2).join()+")",h=a.join(),f="if ("+c+" < "+s[0]+")\n          return getChannel(getT0("+h+"), "+l+");"
for(u=1;u<s.length;u++){var d=s[u-1]
f+="\n        else if ("+c+" < "+s[u]+") {\n          "+c+" -= "+d+";\n          return getChannel(getT"+u+"("+h+"), "+l+");\n        }"}var p=s.length
f+="\n        else {\n          "+c+" -= "+s[s.length-1]+";\n          return getChannel(getT"+p+"("+h+"), "+l+");\n        }",this.userCode="\n      float getValue("+a.map(function(e){return"int "+e})+") {\n        "+f+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n        if (++"+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n        if (++"+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            --"+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "},pg=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+o+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vg=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=o?1:2,c=o?2:3,l=o?3:1
this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mg=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left
this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},gg=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left
this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},yg=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape
var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bg=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape
var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels
this.userCode="\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xg=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape
var i=e.padInfo.top,o=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),d=e.inChannels%4,p="channelsLast"===e.dataFormat,v=p?1:2,m=p?2:3,g=p?3:1,y="",b=""
n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);")
var x=t?"result += getBiasAtOutCoords();":""
t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+f+") *\n                    getW(wR, wC, "+f+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+f+", xR, xC) *\n                    getW(wR, wC, "+f+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2),\n                getW(wR, wC, "+f+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1),\n                  getX(batch, xR, xC, "+f+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC),\n                  getX(batch, "+f+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},wg=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape
var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,h=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4
this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_g=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape
var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,h=e.outChannels/e.inChannels
this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+l+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rg=function(e){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=e.outShape
for(var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,h=l,f="int xR; int xC; int xCOffset;",d=0;d<c;d++)for(var p=0;p<l;p++)f+="\n          vec4 xTexelR"+d+"C"+2*p+" = vec4(0.);\n          vec4 wR"+d+"C"+p+" = vec4(0.);\n          vec4 xR"+d+"C"+p+" = vec4(0.);"
for(d=0;d<c;d++)for(var v=0;v<h;v++){if(f+="\n          xR = xRCorner + "+d*s+";\n          xC = xCCorner + "+(p=2*v)*u+";\n        ",1===a){if(p<l&&(f+=i%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+d+"C"+p+" = vec4(previous.zw, xTexelR"+d+"C"+p+".xy);\n                } else {\n                  xR"+d+"C"+p+" = vec4(0, 0, xTexelR"+d+"C"+p+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+t+" && xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = xTexelR"+d+"C"+p+";\n              ",p+1<l)){var m=i%2==0?ef(u):u
u%2==0&&i%2==1||u%2!=0&&i%2!=1?(f+="\n                  xCOffset = xC + "+i%2+" + "+m+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(f+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+t+" &&\n                      xCOffset >= 0 && xCOffset < "+n+") {\n                      xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+d+"C"+p+" = vec4(0.);\n                    }\n                  "),f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".xy);\n                "):f+="\n                  xCOffset = xC + "+m+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+d+"C"+(p+1)+" = xTexelR"+d+"C"+(p+2)+";\n                "}}else p<l&&(f+="\n              if(xR >= 0 && xR < "+t+") {\n            ",i%2==1?(f+="\n                xCOffset = xC + 1 - "+a+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n              ",p+1<l&&(f+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+a+";\n                  if(xCOffset >= 0 && xCOffset < "+n+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+d+"C"+(p+1)+" = vec4(xTexelR"+d+"C"+(p+2)+".xy, final.xy);\n                ")):(f+="\n                if(xC >= 0 && xC < "+n+") {\n                  xTexelR"+d+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+d+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+a+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+d+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+d+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+d+"C"+p+" = vec4(\n                  xTexelR"+d+"C"+p+".xy, xTexelR"+d+"C"+(p+2)+".xy);\n              ",p+1<l&&(f+="\n                  xR"+d+"C"+(p+1)+" = vec4(\n                    xTexelR"+d+"C"+p+".zw, xTexelR"+d+"C"+(p+2)+".zw);\n                ")),f+="}")
p<l&&(f+="\n            vec4 wTexelR"+d+"C"+p+" = getW("+d+", "+p+", d1, q);\n            wR"+d+"C"+p+" = vec4(wTexelR"+d+"C"+p+".xz, wTexelR"+d+"C"+p+".xz);\n          ",p+1<l&&(f+="\n              vec4 wTexelR"+d+"C"+(p+1)+" = getW("+d+", "+(p+1)+", d1, q);\n              wR"+d+"C"+(p+1)+" =\n                vec4(wTexelR"+d+"C"+(p+1)+".xz, wTexelR"+d+"C"+(p+1)+".xz);"))}for(d=0;d<c;d++)for(p=0;p<l;p++)f+="result += xR"+d+"C"+p+" * wR"+d+"C"+p+";"
this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},Eg=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[]
var o=e[0],a=e[1],s=e[2],u=e[3],c=t[0],l=n[0],h=n[1]
this.outputShape=[c,l,h,u]
var f="bilinear"===r?1:0,d=[a-1+".0",s-1+".0"],p=d[0],v=d[1],m=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=m[0],y=m[1],b=m[2],x=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],_=x[1],R=x[2]
this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+_+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+R+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Cg=function(e,t,n){this.variableNames=["x"],this.outputShape=e
var r=e.length,i=e[e.length-1],o=n?"<":">"
this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Ym(r)+" coords = getOutputCoords();\n        int end = "+kg(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+kg(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===r)return""+t
if(2===r)return t+".x, "+t+".y"
if(3===r)return t+".x, "+t+".y, "+t+".z"
if(4===r)return t+".x, "+t+".y, "+t+".z, "+t+".w"
throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}
function kg(e,t){if(1===e)return""+t
if(2===e)return t+".y"
if(3===e)return t+".z"
if(4===e)return t+".w"
throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Sg=function(e,t){this.variableNames=["A"]
var n=zm()
this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Um(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ag=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0
var n=zm()
this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Um(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Tg=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Og=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Ig=function(e){this.variableNames=["A"]
var t=zm()
this.outputShape=e,this.userCode="\n      "+Vm+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Ng=function(e){this.variableNames=["A"],this.usesPackedTextures=!0
var t=zm()
this.outputShape=e,this.userCode="\n      "+Vm+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Dg=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"]
var r=zm(),i=t[0],o=t[1]
this.outputShape=e
var a="result"
n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Wm(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Pg=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"]
var r=zm(),i=t[0],o=t[1]
this.outputShape=e
var a="",s="result"
n&&(s="floor(result * 255. + 0.5)")
for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c
a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Wm(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Mg=function(e,t,n){this.variableNames=["real","imag"]
var r=t[1]
this.outputShape=t
var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0"
this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Fg=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Lg=function(e){this.variableNames=["A"]
var t=zm(),n=e[0],r=e[1]
this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Bg=function(e){this.variableNames=["A"]
var t=zm(),n=e[0],r=e[1]
this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},jg=function(e,t,n){this.variableNames=["A","indices"]
var r=e.slice()
r[n]=t,this.outputShape=r,this.rank=r.length
var i=Ym(this.rank),o=function(e,t){var n=e.length
if(n>4)throw Error("Gather for rank "+n+" is not yet supported")
if(1===n)return"int(getIndices(resRC))"
for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<e.length;o++)o===t?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o])
return i.join()}(e,n)
this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},zg=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n
var r=Ym(t.length),i=Ym(n.length),o=this.sliceDim>1?"strides[j]":"strides"
this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "}
function Ug(e,t){var n=zm()
return Id(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Wg(e,t){return jd(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Vg(e,t){return zd(e,t,new Uint16Array([0,1,2,2,1,3]))}function qg(e,t,n,r,i,o,a){Wd(n,r)
var s=Ud(e,t),u=e.TEXTURE_2D
return Cd(e,t,function(){return e.bindTexture(u,s)}),Cd(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Cd(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Cd(e,t,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Cd(e,t,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Cd(e,t,function(){return e.texImage2D(u,0,i,n,r,0,o,a,null)}),Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function Hg(e,t,n,r,i){var o=wd(n,r)
return qg(e,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function Gg(e,t,n,r,i){var o=wd(n,r)
return qg(e,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Kg(e,t,n,r,i){var o=wd(n,r)
return qg(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function $g(e,t,n,r,i){var o=Rd(n,r)
return qg(e,t,o[0],o[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Xg(e,t,n,r,i){var o=Rd(n,r)
return qg(e,t,o[0],o[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function Yg(e,t,n,r){return Cd(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),qd(e,t,n,"clipSpacePos",r,3,20,0)&&qd(e,t,n,"uv",r,2,20,12)}function Qg(e,t,n,r,i,o,a){var s,u,c
Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*i*4),u=e.FLOAT,c=a.internalFormatPackedFloat),s.set(o),Cd(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,i,0,e.RGBA,u,s)}),Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Jg(e,t,n,r){Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Cd(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Cd(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Cd(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Zg(e,t,n,r,i){var o=e.createBuffer()
Cd(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)})
var a=16*n*r
return Cd(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),Cd(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Cd(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),o}function ey(e,t,n){var r=e,i=new Float32Array(n)
return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function ty(e,t,n,r,i){var o=wd(n,r),a=o[0],s=o[1],u=new Uint8Array(n*r*4)
return Cd(e,t,function(){return e.readPixels(0,0,a,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function ny(e,t,n,r,i,o,a,s){var u=e,c=new Float32Array(function(e,t){var n=Rd(o,a)
return n[0]*n[1]*4}())
return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function ry(e,t,n,r){var i=new Float32Array(n*r*4)
return Cd(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)}),i}var iy=Object.freeze({createVertexShader:Ug,createVertexBuffer:Wg,createIndexBuffer:Vg,createFloat32MatrixTexture:Hg,createFloat16MatrixTexture:Gg,createUnsignedBytesMatrixTexture:Kg,createPackedMatrixTexture:$g,createFloat16PackedMatrixTexture:Xg,bindVertexProgramAttributeStreams:Yg,uploadDenseMatrixToTexture:Qg,uploadPixelDataToTexture:Jg,createBufferFromOutputTexture:Zg,downloadFloat32MatrixFromBuffer:ey,downloadByteEncodedFloatMatrixFromOutputTexture:ty,downloadPackedMatrixFromBuffer:ny,downloadMatrixFromPackedOutputTexture:ry}),oy=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[]
var t=Yh.getNumber("WEBGL_VERSION")
if(null!=e?(this.gl=e,yd(t,e)):this.gl=bd(t),1===Yh.getNumber("WEBGL_VERSION"))this.textureFloatExtension=Od(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=Od(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")
else if(lp(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float")
else{if(!lp(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats")
this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Wg(this.gl,this.debug),this.indexBuffer=Vg(this.gl,this.debug),this.framebuffer=Vd(this.gl,this.debug),this.textureConfig=Ed(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Yh.getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this
if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.")
var t=this.gl
Cd(t,this.debug,function(){return t.finish()}),Cd(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Cd(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Cd(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Cd(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Cd(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Hg(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Gg(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Kg(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Jg(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),Qg(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Xg(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),$g(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this
this.throwIfDisposed(),this.outputTexture===e&&(Yd(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Cd(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this
return this.downloadMatrixDriver(e,function(){return ty(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,o){return ny(this.gl,e,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return ey(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e)
var r=Zg(this.gl,this.debug,t,n,this.textureConfig)
return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl)
return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this
if(Yh.getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0)
e.flush(),n=function(){var e=i.clientWaitSync(o,0,0)
return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0}
return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this
return this.downloadMatrixDriver(e,function(){return ry(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed()
var t=this.gl,n=Nd(t,this.debug,e),r=Ug(t,this.debug),i=Fd(t,this.debug)
return Cd(t,this.debug,function(){return t.attachShader(i,r)}),Cd(t,this.debug,function(){return t.attachShader(i,n)}),Ld(t,this.debug,i),this.debug&&Bd(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Yg(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this
this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Cd(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this
this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Bd(this.gl,this.debug,this.program),Cd(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Gd(this.gl,this.debug,e,t):Kd(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this
return this.throwIfDisposed(),Cd(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),$d(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed()
var r=Rd(t,n),i=r[0],o=r[1]
this.setOutputMatrixTextureDriver(e,i,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Bd(this.gl,this.debug,this.program),Qd(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram()
var e=this.gl
this.debug&&this.debugValidate(),Cd(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this
this.throwIfDisposed(),Cd(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Od(this.gl,this.debug,2===Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery()
return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT()
return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1()
e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2()
t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Gh(this,void 0,void 0,function(){var t=this
return Kh(this,function(n){switch(n.label){case 0:return[4,df(function(){return t.disposed||t.isQueryAvailable(e,Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})]
case 1:return n.sent(),[2,this.getQueryTime(e,Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null
if(2===t){var n=this.gl
return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1()
return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0
if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE)
return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this
return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)()
this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this
this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||df(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Xd(this.gl,this.debug,e,this.framebuffer),this.debug&&Qd(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Xd(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Qd(this.gl)):Yd(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e)
var n=t()
return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed()
var r=this.gl
Xd(r,this.debug,e,this.framebuffer),this.debug&&Qd(r),this.outputTexture=e,Cd(r,this.debug,function(){return r.viewport(0,0,t,n)}),Cd(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this
this.throwIfDisposed(),Cd(this.gl,this.debug,function(){return i.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}()
function ay(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs")
e.forEach(function(e,n){var r=e.logicalShape,i=t[n],o=i.shape
if(!uf(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match")
if(!e.isUniform||!i.isUniform){var a=e.texShape,s=i.isUniform?null:i.texData.texShape
if(!uf(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}})}var sy=function(e,t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,h=n.dataFormat,f=s.left,d=s.top,p=i*r,v=zm(),m="channelsLast"===h,g=m?0:1,y=m?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+a+" - "+d+";\n            d0 = offsetY + "+l+" * (pos / "+p+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+f+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+p+".) / "+i+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        "
this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "},uy=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[]
var o,a=t,s=e[3]-1
this.outputShape=e
var u="float("+n+") + float("+r+") * sum"
o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},cy=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},ly=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0
var o,a=t,s=e[3]-1
this.outputShape=e
var u="float("+n+") + float("+r+") * sum"
o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},hy=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape
var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,u=i*o-1
this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fy=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape
var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.front,h=u-1-e.padInfo.top,f=c-1-e.padInfo.left,d=s*u*c-1
this.userCode="\n      const ivec3 pads = ivec3("+l+", "+h+", "+f+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+d+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},dy=function(e,t,n,r,i,o,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=t
var s=n?e[1]:e[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p=""
o&&(d=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",p="result = activation(result);")
var v=i?"result += getBiasAtOutCoords();":""
i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+h[0]+" * "+f[0]+");\n          result += ("+h[1]+" * "+f[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},py=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),vy=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},my=function(e){this.variableNames=["A"],this.outputShape=e
var t=e.length
if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      "
else{var n=jm("rc",t),r=Ym(t),i=function(e,t,n){if(1===e)return"rc > "+t[0]
for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||")
return r}(t,e,n),o=function(e,t,n,r){if(1===e)return""
var i=r.slice(-2)
return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),a=2;a<e;a++)o=t[t.length-1-a]+","+o
n.push(o)}return n}(n,t)
return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n)
this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},gy=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]})
var r=e.length,i=Ym(r),o=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r)
this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},yy=function(e,t,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]})
for(var r=e.length,i=Ym(r),o=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),s=jm("rc",r),u=jm("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",h=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,v=1===r?2:4;p<v;p++)d+="\n        "+h[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      "
d+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},by=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.")
var r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,h=e.padInfo.left
this.outputShape=e.outShape
var f="avg"===t,d="0.0"
if(f||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+l+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "
else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])"
"avg"===t&&(p="avgValue / count")
var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    "
this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+l+", "+h+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},xy=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.")
var r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,v=e.padInfo.left
this.outputShape=e.outShape
var m="avg"===t,g="0.0"
if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+a+");\n        const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+f+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+h+" * "+f+" +\n                      wR * "+f+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "
else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])"
"avg"===t&&(y="avgValue / count")
var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    "
this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+d+", "+p+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},wy=function(e,t){this.variableNames=["x"]
var n=e.windowSize,r=e.batchSize,i=e.inSize,o=Math.ceil(i/n)
this.outputShape=[r,o]
var a="0.0",s=""
"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max")
var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])"
"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue")
var c=4*Math.floor(n/4),l=n%4,h="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4"
"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4")
var d=""
i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(2===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+h+"\n        } else if ("+(3===l)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+h+"\n        }\n        setOutput("+u+");\n      }\n    "},_y=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
for(var n="",r=0;r<4;r++){var i="thisRC = rc;"
r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Um(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Wm(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ry=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape
var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?i-1:i,n&&u>1?o-1:o],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ey=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n]
this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Cy=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n]
this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},ky=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape
var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],c=[n&&s>1?i-1:i,n&&u>1?o-1:o],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=c[0]/l[0],f=c[1]/l[1],d=1/h,p=1/f,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2
this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+h+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Sy=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[]
var i=e[0],o=e[1],a=e[2],s=e[3]
this.outputShape=[i,t,n,s]
var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0"
this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ay=function(e,t){this.variableNames=["x"]
var n=e.length
if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported")
if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=Ym(n)
this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Ty=function(e,t){this.variableNames=["x"],this.usesPackedTextures=!0
var n=e.length
if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported")
this.outputShape=e
var r=jm("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Ym(n)
function s(n){var r=e.map(function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)})
return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+s(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Oy=function(e,t,n,r,i,o,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o
var s=Ym(i.length),u=Ym(o.length),c=""
1===n?c="i":2===n&&(c="i, j")
var l="getIndices("+c+")",h=""
1===r?h="i":2===r&&(h="i, coords[1]")
var f="getUpdates("+h+")",d=t>1?"strides[j]":"strides"
this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Iy=function(e,t){this.variableNames=["x","segmentIds"]
var n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n)
this.outputShape=[r,a]
var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l=""
i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ")
var h=""
i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+h+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ny=function(e,t,n){var r,i
if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported")
if(1===n)i="resRC",r="resRC"
else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&a.push(""+o[u])
r=a.join(),i=s.join()}var c=Ym(n)
this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Dy=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length
var t,n=Ym(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc"
if(e<=6)return Py.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",")
throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank)
t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+Py[t]+" = start["+t+"] + coords."+Py[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")")
return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Py=["x","y","z","w","u","v"],My=function(){function e(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length
var t=Ym(this.rank),n=jm("coords",this.rank),r=jm("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+i+")",a="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n")
this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+" \n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this
if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")")
return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Fy=function(e,t,n){this.variableNames=["x"],this.outputShape=n
var r=n.length,i=Ym(n.length),o=Ym(n.length),a=""
if(1===r)a="coords * strides + begin"
else{var s=0
a=n.map(function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},Ly=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=By(t,n),o=jy(e,i,n)
if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log()
var a=this.freeTextures[o].shift()
return this.usedTextures[o].push(a),a}return this.numUsedTextures++,this.log(),i===vd.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===vd.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===vd.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===vd.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===vd.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=jy(t,By(n,r),r)
i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--
var o=this.usedTextures[i],a=o.indexOf(e)
if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager")
o.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures
console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this
if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)})
for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)})
this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}()
function By(e,t){if(e===pd.UPLOAD)return vd.PACKED_2X2_FLOAT32
if(e===pd.RENDER||null==e)return function(e){return Yh.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?vd.PACKED_2X2_FLOAT32:vd.UNPACKED_FLOAT32:e?vd.PACKED_2X2_FLOAT16:vd.UNPACKED_FLOAT16}(t)
if(e===pd.DOWNLOAD||e===pd.PIXELS)return vd.PACKED_4X1_UNSIGNED_BYTE
throw new Error("Unknown logical texture type "+e)}function jy(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var zy=function(e,t){this.variableNames=["A"]
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r]
this.outputShape=n,this.rank=n.length
var i=Ym(this.rank),o=function(e){var t=e.length
if(t>5)throw Error("Tile for rank "+t+" is not yet supported")
if(1===t)return"imod(resRC, "+e[0]+")"
for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")")
return r.join()}(e)
this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Uy=function(e,t){this.variableNames=["A"]
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]]
this.outputShape=n,this.rank=n.length
var i=Ym(this.rank),o=function(e){var t=e.length
if(t>6)throw Error("Transpose for rank "+t+" is not yet supported")
for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i]
return r.join()}(t)
this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},Wy=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0
for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]]
if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.")
var i=Ym(this.rank),o=Bm("rc",this.rank),a=new Array(this.rank)
for(r=0;r<t.length;r++)a[t[r]]=o[r]
var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+s+")"
this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},Vy=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},qy="if (isnan(x)) return x;",Hy="return x;",Gy=qy+"\n  return (x < 0.0) ? 0.0 : x;\n",Ky="return (x >= 0.0) ? x : (exp(x) - 1.0);",$y="return x;",Xy="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Yy="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Qy=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Jy=function(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e
var t=e.length,n=jm("rc",t),r=Ym(t),i=function(e,t){if(1===e)return"rc"
for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",")
return n}(t,n),o=n.slice(-2),a=t<=1?"rc":"vec2("+o.join(",")+")"
this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},Zy={}
function eb(e,t){if(void 0===t&&(t=!1),"linear"===e)return t?$y:Hy
if("relu"===e)return t?Xy:Gy
if("elu"===e)return t?Yy:Ky
if("prelu"===e)return t?sg:og
throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var tb=600,nb=function(){function e(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!Yh.getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device")
if(null==e){var t=bd(Yh.getNumber("WEBGL_VERSION"))
this.binaryCache=(n=Yh.getNumber("WEBGL_VERSION"))in Zy?Zy[n]:(Zy[n]={},Zy[n]),this.gpgpu=new oy(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas
var n
this.textureManager=new Ly(this.gpgpu),this.numMBBeforeWarning=null==Yh.global.screen?1024:Yh.global.screen.height*Yh.global.screen.width*window.devicePixelRatio*tb/1024/1024,this.texData=new am(this,fd)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered")
this.texData.set(e,{shape:t,dtype:n})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null")
var n="undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement,r=e.data instanceof Uint8Array,i="undefined"!=typeof ImageData&&e instanceof ImageData,o="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement,a="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,s=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=s[0],c=s[1],l=[c,u],h=[c,u,t]
if(!(n||r||i||o||a))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);(a||o)&&(null==this.fromPixels2DContext&&(this.fromPixels2DContext=xd(Yh.getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=u,this.fromPixels2DContext.canvas.height=c,this.fromPixels2DContext.drawImage(e,0,0,u,c),e=this.fromPixels2DContext.canvas)
var f,d,p=this.makeTensorHandle(l,"int32")
if(this.texData.get(p.dataId).usage=pd.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(p.dataId),e),Yh.getBool("WEBGL_PACK")){f=new Bg(h)
var v=this.makePackedTensor(f.outputShape,p.dtype)
d=this.compileAndRun(f,[p],v)}else f=new Lg(h),d=this.compileAndRun(f,[p])
return this.disposeData(p.dataId),d},e.prototype.makeTensorHandle=function(e,t){var n={}
return this.register(n,e,t),{dataId:n,shape:e,dtype:t}},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null")
if(Yh.getBool("DEBUG"))for(var n=0;n<t.length;n++){var r=t[n]
if(!Ad(r)){if(Yh.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+r+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.ENV.set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")
throw Error("The value "+r+" cannot be represented on this device.")}}var i=this.texData.get(e)
if("complex64"===i.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).")
this.releaseGPUData(e),i.usage=pd.UPLOAD,i.values=t},e.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,o=t.slice,a=t.shape,s=t.isPacked
if(null!=o){var u
u=s?new Qy(a,"return x;"):new Vy(a,"return x;")
var c=this.compileAndRun(u,[{dataId:e,shape:a,dtype:r}]),l=this.readSync(c.dataId)
return c.dispose(),l}if(null!=n)return this.convertAndCacheOnCPU(e)
if("string"===r)return n
var h,f,d=null!=this.activeTimers
return d&&(h=Ff()),f="complex64"===r?Cm(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),d&&(this.downloadWaitMs+=Ff()-h),this.convertAndCacheOnCPU(e,f)},e.prototype.read=function(e){return Gh(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_
return Kh(this,function(R){switch(R.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})]
if(n=this.texData.get(e),r=n.values,i=n.shape,o=n.slice,a=n.dtype,s=n.complexTensors,u=n.isPacked,null!=o)return c=u?new Qy(i,"return x;"):new Vy(i,"return x;"),l=this.compileAndRun(c,[{dataId:e,shape:i,dtype:a}]),h=this.read(l.dataId),l.dispose(),[2,h]
if(null!=r)return[2,this.convertAndCacheOnCPU(e)]
if(!Yh.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Yh.getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.")
return f=null,"complex64"!==a&&Yh.get("WEBGL_BUFFER_SUPPORTED")&&(d=this.decode(e),p=this.texData.get(d.dataId),f=(_=this.gpgpu).createBufferFromTexture.apply(_,[p.texture].concat(_d(i)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()]
case 1:R.sent(),R.label=2
case 2:return"complex64"!==a?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])]
case 3:return m=R.sent(),g=m[0],y=m[1],v=Cm(g,y),[3,5]
case 4:null==f?v=this.getValuesFromTexture(e):(b=sf(i),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,b)),R.label=5
case 5:return null!=d&&this.disposeData(d.dataId),x=this.convertAndCacheOnCPU(e,v),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach(function(e){return e(x)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,x]}})})},e.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),i=r.shape,o=r.dtype,a=r.isPacked,s=sf(i)
if(Yh.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),c=this.texData.get(u.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[c.texture].concat(_d(i))).subarray(0,s)
return this.disposeData(u.dataId),l}var h=Yh.getBool("WEBGL_PACK")&&!0===a,f=h?rp(i):i,d=this.makeTensorHandle(f,"float32")
d.size=sf(i),this.texData.get(d.dataId).usage=pd.DOWNLOAD
var p=yp(function(){var t=h?new Ng(f):new Ig(f)
return n.compileAndRun(t,[{shape:f,dtype:o,dataId:e}],d,null)}),v=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,s)
return this.disposeData(d.dataId),m},e.prototype.time=function(e){return Gh(this,void 0,void 0,function(){var t,n,r,i,o,a,s
return Kh(this,function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=af(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),o=af(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(i)]
case 1:return a=u.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:tf(a),getExtraProfileInfo:function(){return a.map(function(e,t){return{name:o[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:Ff(),endMs:null}},e.prototype.endTimer=function(e){return Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ff(),e)},e.prototype.getQueryTime=function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){return Yh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e)
else if(this.texData.has(e)){this.releaseGPUData(e)
var t=this.texData.get(e).complexTensors
null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}},e.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,o=t.usage,a=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u)
c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,a)))
var l=this.texData.get(e)
l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getDataInfo=function(e){return this.texData.get(e)},e.prototype.getCPUBackend=function(){return Yh.getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=fd.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(e,t){var n=this
return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(e,t){var n=this.makeOutputArray(e.shape,"complex64")
return this.texData.get(n.dataId).complexTensors={real:fd.keep(e.clone()),imag:fd.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n)
if(0===sf(n))return jp([],n,e.dtype)
var r=this.texData.get(e.dataId).isPacked,i=tm(e.shape,t,n)
if(r||!i){var o=Yh.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new My(n):new Dy(n),a=o.getCustomSetupFunc(t)
return this.compileAndRun(o,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},e.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=Yf.make(n,{},e.dtype,this),o=this.texData.get(i.dataId)
Object.assign(o,r),o.shape=n,o.dtype=e.dtype
var a=nm(t,e.strides)
r.slice&&(a+=r.slice.flatOffset),o.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId}
var s=this.dataRefCount.get(o.slice.origDataId)||1
return this.dataRefCount.set(o.slice.origDataId,s+1),i},e.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r)
var i=Jv(t,n,r)
if(i.some(function(e){return 0===e}))return jp([],i)
var o=new Fy(t,r,i)
return this.compileAndRun(o,[e])},e.prototype.reverse=function(e,t){var n=Yh.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ty(e.shape,t):new Ay(e.shape,t)
return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map(function(e){return Lp(e)}),r=e.map(function(e){return Bp(e)})
return Fp(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t)
if(1===e.length)return e[0]
if(e.length>Yh.getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),o=this.concat(e.slice(0,i),t),a=this.concat(e.slice(i),t)
return this.concat([o,a],t)}if(Yh.getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new dg(e.map(function(e){return e.shape}),t)
return this.compileAndRun(s,e)}var u=Pp(e.map(function(e){return e.shape}),t),c=e.map(function(e){return e.as2D(-1,sf(e.shape.slice(t)))}),l=new fg(c.map(function(e){return e.shape}))
return this.compileAndRun(l,c).reshape(u)},e.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return -x;",e.dtype)
var t=new Vy(e.shape,"return -x;")
return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],s=e.shape[0]
if((1===i||1===o)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]))
var u=1===o?e:e.as3D(s,a,1),c=1===o?2:1,l=1===o?t.as3D(s,1,a):t
return this.multiply(u,l).sum(c,!0)}var h=id(e.dtype,t.dtype),f=new dy(e.shape,[s,i,o],n,r),d=this.makePackedTensor(f.outputShape,h)
return this.compileAndRun(f,[e,t],d)},e.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],c=i?n.shape[1]:n.shape[2],l=t.shape[0],h=id(t.dtype,n.dtype),f=null!=o,d=null!=s,p=a?eb(a,!0):null,v=new dy(t.shape,[l,u,c],r,i,f,p,d),m=this.makePackedTensor(v.outputShape,h),g=[t,n]
return o&&g.push(o),s&&g.push(s),this.compileAndRun(v,g,m)},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new ig("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new ig("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(i,a),u=this.compileAndRun(o,a),c=this.complex(s,u)
return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t)
if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"return a * b;",e.dtype)
var l=new ag("return a * b;",e.shape,t.shape),h=this.makeOutputArray(l.outputShape,e.dtype)
return this.compileAndRun(l,[e,t],h)},e.prototype.batchNormalization=function(e,t,n,r,i,o){var a=[e,t,n],s=null
null!=o&&(s=o.shape,a.push(o))
var u=null
if(null!=i&&(u=i.shape,a.push(i)),Yh.getBool("WEBGL_PACK_NORMALIZATION")){var c=new rg(e.shape,t.shape,n.shape,s,u,r)
return this.compileAndRun(c,a)}var l=new ng(e.shape,t.shape,n.shape,s,u,r)
return this.compileAndRun(l,a)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){var o=Yh.getBool("WEBGL_PACK_NORMALIZATION")?new ly(e.shape,t,n,r,i):new uy(e.shape,t,n,r,i)
return this.compileAndRun(o,[e])},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){var s=new cy(t.shape,r,i,o,a)
return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map(function(e){return jf(e)})
return Nm(mv(e.shape,e.dtype,n),t)}var r=new zy(e.shape,t)
return this.compileAndRun(r,[e])},e.prototype.pad=function(e,t,n){var r=Yh.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yy(e.shape,t,n):new gy(e.shape,t,n)
return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t)
var n=Yh.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wy(e.shape,t):new Uy(e.shape,t)
return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n)
var r=new jg(e.shape,t.size,n)
return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){nf(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"})
var r=t.reduce(function(e,t){return e*t}),i=Wv(e.shape,t,r),o=Vv(i.length,t.length),a=qv(e.shape,t,r),s=Hv(n,t.length),u=Gv(a,n,t.length)
return e.reshape(i).transpose(o).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){nf(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"})
var r=t.reduce(function(e,t){return e*t}),i=[[0,0]]
i.push.apply(i,n)
for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0])
var a=e.pad(i),s=Wv(a.shape,t,r,!1),u=Vv(s.length,t.length,!1),c=qv(a.shape,t,r,!1)
return a.reshape(s).transpose(u).reshape(c)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],o=Xv(i),a=new wy({windowSize:o,inSize:i,batchSize:r},t),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],n)
return this.compileAndRun(a,[e],l),1===l.shape[1]?l:this.reduce(l,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null)
var r=e.shape[0],i=e.shape[1]
null!=n&&(r=n.shape[0],i=n.shape[1])
var o=Xv(i),a=new Lm({windowSize:o,inSize:i,batchSize:r},t,null==n),s=a.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],"int32"),h=[e]
return null!=n&&h.push(n),this.compileAndRun(a,h,l),1===l.shape[1]?l:this.argReduce(e,t,l)},e.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null)
var r=null!=n?n.shape:e.shape,i=Xv(r[r.length-1]),o=new Zm(r,i,t,null==n),a=this.makePackedTensor(o.outputShape,"int32"),s=null==n?[e]:[e,n]
return this.compileAndRun(o,s,a),a.rank===e.rank?this.argReducePacked(e,t,a):a},e.prototype.sum=function(e,t){Tp("sum",t,e.rank)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i),a=od(e.dtype)
return this.reduce(o,"sum",a).reshape(r)},e.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i),a=od(e.dtype)
return this.reduce(o,"prod",a).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=Op([r],e.rank),o=e
null!=i&&(o=e.transpose(i),r=Np(1,e.rank)[0])
var a=function(e,t,n){for(var r=[],i=e.length,o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n)
return r}(o.shape,r,n),s=sf([o.shape[r]]),u=o.as2D(-1,s),c=od(e.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",t,c,n).reshape(a)
return null!=i&&(l=l.transpose(Ip(i))),l},e.prototype.segOpCompute=function(e,t,n,r,i){var o=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1
for(e<=$v?(n=e,r=!0):n=Of(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Of(e,n+1)
return n}(a,i),u=new Iy({windowSize:s,inSize:a,batchSize:o,numSegments:i},t),c=u.outputShape,l=c[0],h=c[1],f=this.makeOutputArray([l,h],r)
return this.compileAndRun(u,[e,n],f),f.shape[1]===i?f:(n=Xp(0,i).tile([a/s]),this.segOpCompute(f,t,n,r,i))},e.prototype.argMinMaxReduce=function(e,t,n){var r=[t]
if(Tp("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Yh.getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=Sp(e.shape,r),o=i[0],a=sf(i[1]),s=e.as2D(-1,a)
return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},e.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},e.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t)
var i=new Cg(e.shape,n,r)
return this.compileAndRun(i,[e])},e.prototype.equal=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool")
var n=new ag("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool")
var n=new ag("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t)
if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool")
var n=new ag("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool")
var n=new ag("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t)
if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool")
var n=new ag("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool")
var n=new ag("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new Vy(e.shape,"return float(!(x >= 1.0));")
return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool")
var n=new ag("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool")
var n=new ag("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool")
return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new Ny(e.rank,t.shape,t.rank),i=this.makeOutputArray(r.outputShape,id(t.dtype,n.dtype))
return this.compileAndRun(r,[e,t,n],i)},e.prototype.where=function(e){xp("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead")
var t=e.dataSync()
return Pm(e.shape,t)},e.prototype.topk=function(e,t,n){return Dm(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){Tp("min",t,e.rank)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"min",o.dtype).reshape(r)},e.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t)
var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new ag("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new ag("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t)
Tp("max",t,e.rank)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"max",o.dtype).reshape(r)},e.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t)
var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new ag("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){Tp("all",t,e.rank)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"all",o.dtype).reshape(r)},e.prototype.any=function(e,t){Tp("any",t,e.rank)
var n=Sp(e.shape,t),r=n[0],i=sf(n[1]),o=e.as2D(-1,i)
return this.reduce(o,"any",o.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("return (a - b) * (a - b);",e.shape,t.shape):new ag("return (a - b) * (a - b);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(b.x == 0.0) {\n    result.x = NAN;\n  } else if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(b.y == 0.0) {\n    result.y = NAN;\n  } else if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(b.z == 0.0) {\n    result.z = NAN;\n  } else if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(b.w == 0.0) {\n    result.w = NAN;\n  } else if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0)
var n=new ag("\nif (b == 0.0) {\n  return NAN;\n}\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32")
var n=new ag("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32")
return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,"return a + b;")
if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t)
var n=id(e.dtype,t.dtype)
if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"return a + b;",n)
var r=new ag("return a + b;",e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n)
return this.compileAndRun(r,[e,t],i)},e.prototype.packedUnaryOp=function(e,t,n){var r=new Qy(e.shape,t),i=this.makePackedTensor(r.outputShape,n)
return this.compileAndRun(r,[e],i)},e.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1)
var o=new ug(n,e.shape,t.shape,i),a=this.makePackedTensor(o.outputShape,r)
return this.compileAndRun(o,[e,t],a)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=[[i.complexTensors.real,o.complexTensors.real],[i.complexTensors.imag,o.complexTensors.imag]].map(function(i){var o=i[0],a=i[1],s=r.makeComplexComponentTensorHandle(e,o),u=r.makeComplexComponentTensorHandle(t,a),c=new ag(n,e.shape,t.shape),l=r.makeOutputArray(c.outputShape,id(o.dtype,a.dtype))
return r.compileAndRun(c,[s,u],l)}),s=a[0],u=a[1],c=this.complex(s,u)
return s.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){if(1===e.length)return e[0]
if(e.length>Yh.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t))
return this.addN([n,r])}var i=e.map(function(e){return e.dtype}).reduce(function(e,t){return id(e,t)}),o=e.map(function(e){return e.shape}),a=Yh.getBool("WEBGL_PACK"),s=a?new Fm(e[0].shape,o):new Mm(e[0].shape,o),u=a?this.makePackedTensor(s.outputShape,i):this.makeOutputArray(s.outputShape,i)
return this.compileAndRun(s,e,u)},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,"return a - b;")
if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t)
var n=id(e.dtype,t.dtype)
if(Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"return a - b;",e.dtype)
var r=new ag("return a - b;",e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n)
return this.compileAndRun(r,[e,t],i)},e.prototype.pow=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new ug("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new ag("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),i=id(e.dtype,t.dtype),o=n?this.makePackedTensor(r.outputShape,i):this.makeOutputArray(r.outputShape,i)
return this.compileAndRun(r,[e,t],o)},e.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return ceil(x);",e.dtype)
var t=new Vy(e.shape,"return ceil(x);")
return this.compileAndRun(t,[e])},e.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return floor(x);",e.dtype)
var t=new Vy(e.shape,"return floor(x);")
return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new Vy(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n")
return this.compileAndRun(t,[e])},e.prototype.isNaN=function(e){var t=new Vy(e.shape,"return float(isnan(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.isInf=function(e){var t=new Vy(e.shape,"return float(isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.isFinite=function(e){var t=new Vy(e.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool")
return this.compileAndRun(t,[e],n)},e.prototype.round=function(e){var t=new Vy(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n")
return this.compileAndRun(t,[e])},e.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return exp(x);",e.dtype)
var t=new Vy(e.shape,"return exp(x);")
return this.compileAndRun(t,[e])},e.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return exp(x) - 1.0;",e.dtype)
var t=new Vy(e.shape,"return exp(x) - 1.0;")
return this.compileAndRun(t,[e])},e.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype)
var t=new Vy(e.shape,"if (x < 0.0) return NAN;\n  return log(x);")
return this.compileAndRun(t,[e])},e.prototype.log1p=function(e){var t=new Vy(e.shape,"return log(1.0 + x);")
return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new Vy(e.shape,"return sqrt(x);")
return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e)
var t=new Vy(e.shape,"return inversesqrt(x);")
return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new Vy(e.shape,"return x * x;")
return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new Vy(e.shape,"return 1.0 / x;")
return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t
return t=Yh.getBool("WEBGL_PACK")?new Qy(e.shape,Xy):new Vy(e.shape,Gy),this.compileAndRun(t,[e])},e.prototype.prelu=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug(sg,e.shape,t.shape):new ag(og,e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.elu=function(e){if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Yy,e.dtype)
var t=new Vy(e.shape,Ky)
return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new ag("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new Vy(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")
return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new Vy(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32")
return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r,i=(r=Yh.getBool("WEBGL_PACK_CLIP")?new lg(e.shape):new cg(e.shape)).getCustomSetupFunc(t,n)
return this.compileAndRun(r,[e],null,i)},e.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e)
if(Yh.getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"return abs(x);",e.dtype)
var t=new Vy(e.shape,"return abs(x);")
return this.compileAndRun(t,[e])},e.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new hg(e.shape),r=[this.makeComplexComponentTensorHandle(e,t.complexTensors.real),this.makeComplexComponentTensorHandle(e,t.complexTensors.imag)]
return this.compileAndRun(n,r)},e.prototype.sigmoid=function(e){var t=new Vy(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));")
return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new Vy(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n")
return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new Vy(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n")
return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new Vy(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n")
return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new Vy(e.shape,"return tan(x);")
return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new Vy(e.shape,"return asin(x);")
return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new Vy(e.shape,"return acos(x);")
return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new Vy(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n")
return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ug("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new ag("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape)
return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new Vy(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n")
return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new Vy(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n")
return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new Vy(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n")
return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new Vy(e.shape,"return log(x + sqrt(x * x + 1.0));")
return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new Vy(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));")
return this.compileAndRun(t,[e])},e.prototype.atanh=function(e){var t=new Vy(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;")
return this.compileAndRun(t,[e])},e.prototype.erf=function(e){var t=new Vy(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n')
return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new Vy(e.shape,function(e){return void 0===e&&(e=0),qy+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t))
return this.compileAndRun(n,[e])},e.prototype.conv2dByMatMul=function(e,t,n,r,i,o){var a=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,c=a[0]*a[1]*a[2],l=n.outChannels,h="channelsLast"===n.dataFormat,f=(1===c||1===l)&&u>1e3,d=a[2]%2!=0&&!!s.isPacked
if(f||!Yh.getBool("WEBGL_LAZILY_UNPACK")||!Yh.getBool("WEBGL_PACK_BINARY_OPERATIONS")||!d){var p=h?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],v=this.reshape(e,[1,p,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels])
return this.reshape(this.fusedBatchMatMul({a:v,b:m,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),n.outShape)}var g=h?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y=Yf.make([1,g,n.inChannels],{dataId:e.dataId},e.dtype,this),b=s.shape
s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,nf(ap(s.shape,y.shape),function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"})
var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),_=this.texData.get(w.dataId)
return nf(_.isPacked,function(){return"batchMatMul result is expected to be packed"}),s.shape=b,_.shape=n.outShape,Yf.make(n.outShape,{dataId:w.dataId},w.dtype,this)},e.prototype.conv2dWithIm2Row=function(e,t,n,r,i,o){var a=n.filterWidth,s=n.filterHeight,u=n.inChannels,c=n.outWidth,l=n.outHeight,h="channelsLast"===n.dataFormat,f=a*s*u,d=l*c,p=[f,d],v=e.squeeze([0]),m=t.reshape([1,f,-1]),g=new sy(p,v.shape,n),y=this.compileAndRun(g,[v]).reshape([1,p[0],p[1]]),b=null!=r,x=null!=o,w=i?eb(i,!0):null,_=new dy(y.shape,[1,d,n.outChannels],!0,!1,b,w,x),R=[y,m]
r&&R.push(r),x&&R.push(o)
var E=this.compileAndRun(_,R)
return h?E.reshape([1,l,c,n.outChannels]):E.reshape([1,n.outChannels,l,c])},e.prototype.fusedConv2d=function(e,t,n,r,i,o){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n,r,i,o)
if(Yh.getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n,r,i,o)
var a=null!=r,s=null!=o,u=i?eb(i,!1):null,c=new xg(n,a,u,s),l=[e,t]
return r&&l.push(r),o&&l.push(o),this.compileAndRun(c,l)},e.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n)
if(Yh.getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n)
var r=new xg(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new vg(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new pg(n)
return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r
return Yh.getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Rg(n),this.compileAndRun(r,[e,t],this.makePackedTensor(n.outShape,e.dtype))):(r=new _g(n),this.compileAndRun(r,[e,t]))},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new bg(n)
return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new yg(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3d=function(e,t,n){var r=new wg(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerInput=function(e,t,n){var r=new gg(n)
return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerFilter=function(e,t,n){var r=new mg(n)
return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new by(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype)
return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new by(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var i=new by(r,"max",!0),o=this.compileAndRun(i,[t]),a=new hy(r),s=this.makeOutputArray(a.outputShape,t.dtype),u=this.compileAndRun(a,[e,o],s)
return o.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new eg(n),i=this.makeOutputArray(r.outputShape,t.dtype)
return this.compileAndRun(r,[e],i)},e.prototype.cast=function(e,t){return _m(e,t,this)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o])
var a=new Array(e.rank).fill(0),s=e.shape.slice()
s[t]=1
var u=new Array(n)
for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r)
return u},e.prototype.avgPool3d=function(e,t){var n=new xy(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e],r)},e.prototype.avgPool3dBackprop=function(e,t,n){var r=new tg(n),i=this.makeOutputArray(r.outputShape,t.dtype)
return this.compileAndRun(r,[e],i)},e.prototype.maxPool3d=function(e,t){var n=new xy(t,"max",!1),r=this.makeOutputArray(n.outputShape,"float32")
return this.compileAndRun(n,[e],r)},e.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new xy(r,"max",!0),o=this.compileAndRun(i,[t]),a=new fy(r),s=this.makeOutputArray(a.outputShape,t.dtype),u=this.compileAndRun(a,[e,o],s)
return o.dispose(),u},e.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId)
return!n.isPacked||ap(e.shape,t)||null!==n.texture&&ap(n.shape,t)?Rm(e,t):this.packedReshape(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var i=Yh.getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Cy(e.shape,t,n,r):new Ey(e.shape,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Ry(e,t,n)
return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new Sy(e.shape,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new ky(e,t,n)
return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var i=t?e:im(e),o=i.shape[0],a=i.shape[1],s=new py(o,a,n),u=this.makeOutputArray(s.outputShape,"int32"),c=s.getCustomSetupFunc(r)
return this.compileAndRun(s,[i],u,c)},e.prototype.oneHot=function(e,t,n,r){var i=new vy(e.size,t,n,r)
return this.compileAndRun(i,[e])},e.prototype.diag=function(e){var t=new Og(e.size)
return this.compileAndRun(t,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return xp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Tm(e.dataSync(),t.dataSync(),n,r,i)},e.prototype.cropAndResize=function(e,t,n,r,i,o){var a=new Eg(e.shape,t.shape,r,i,o)
return this.compileAndRun(a,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){nf(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t})
var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,u=o*t,c=a/(t*t),l=new Tg("NHWC"===n?[r,s,u,c]:[r,c,s,u],t,n)
return this.compileAndRun(l,[e])},e.prototype.split=function(e,t,n){return Im(e,t,n)},e.prototype.scatterND=function(e,t,n){var r=Yv(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/a,a],l=e.reshape([o,i]),h=t.reshape([o,a])
if(0===u)return Rm(jp([]),n)
var f=Up(0),d=new Oy(o,i,l.rank,h.rank,s,c)
return this.compileAndRun(d,[h,l,f]).reshape(n)},e.prototype.sparseToDense=function(e,t,n,r){var i=Yv(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.strides,u=i.outputSize,c=new Oy(a,o,e.rank,t.rank,s,[u,1],!1)
return this.compileAndRun(c,[t,e,r]).reshape(n)},e.prototype.fft=function(e){return this.fftImpl(e,!1)},e.prototype.ifft=function(e){return this.fftImpl(e,!0)},e.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Mg("return real * expR - imag * expI;",e.shape,t),i=new Mg("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)],a=this.compileAndRun(r,o),s=this.compileAndRun(i,o),u=this.complex(a,s).as2D(e.shape[0],e.shape[1])
return a.dispose(),s.dispose(),u},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Kv(e,t),o=i[0],a=i[1],s=i[2],u=i[3],c=t.reshape([a,r]),l=e.reshape([e.size/s,s]),h=new zg(r,u,[a,s])
return this.compileAndRun(h,[l,c]).reshape(o)},e.prototype.fill=function(e,t,n){if("string"===(n=n||Af(t))){var r=yf(n,sf(e))
return r.fill(t),Yf.make(e,{values:r},n)}var i=new Fg(e,t),o=i.getCustomSetupFunc(t),a=this.makeOutputArray(e,n)
return this.compileAndRun(i,[],a,o)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype")
return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},e.prototype.linspace=function(e,t,n){return Em(e,t,n)},e.prototype.makeOutputArray=function(e,t){return Yf.make(e,{},t,this)},e.prototype.makePackedTensor=function(e,t){var n=Yf.make(e,{},t,this)
return this.texData.get(n.dataId).isPacked=!0,n},e.prototype.unpackTensor=function(e){var t=new Jy(e.shape)
return this.compileAndRun(t,[e],Yf.make(t.outputShape,{},e.dtype,this))},e.prototype.packTensor=function(e){var t=new my(e.shape)
return this.compileAndRun(t,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},e.prototype.packedReshape=function(e,t){var n=e.reshape([tp(e.shape)].concat(np(e.shape))),r=[tp(t)].concat(np(t)),i=new _y(r,n.shape)
return this.compileAndRun(i,[n]).reshape(t)},e.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,o=n.dtype,a=rp(i),s=_d(i),u=this.makeTensorHandle(i,"float32")
return this.texData.get(u.dataId).isPacked=!0,this.texData.get(u.dataId).dtype=o,this.texData.get(u.dataId).texShape=s.map(function(e){return 2*e}),t=r?new Ag(a,s):new Sg(a,s),this.compileAndRun(t,[{shape:a,dtype:o,dataId:e}],u,null,!0),u},e.prototype.compileAndRun=function(e,t,n,r,i){var o=this
if(void 0===i&&(i=!1),null==n&&(n=e.usesPackedTextures?this.makePackedTensor(e.outputShape,t[0].dtype):this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=gf(n.dtype,0),n
var a=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.")
var n=o.texData.get(t.dataId)
if(null==n.texture){if(!e.usesPackedTextures&&sf(t.shape)<=Yh.getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values}
e.usesPackedTextures&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.usesPackedTextures)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),n=o.texData.get(t.dataId)
else if(n.isPacked&&!ap(n.shape,t.shape)){var r=t,i=t.shape
t.shape=n.shape,t=o.packedReshape(t,i),n=o.texData.get(t.dataId),r.shape=i}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}})
this.uploadToGPU(n.dataId)
var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},c=function(e,t,n){var r=""
a.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape
r+=e.shape+"_"+n+"_"+t})
var i=e.userCode
return e.constructor.name+"_"+r+"_"+i}(e,0,u),l=this.getAndSaveBinary(c,function(){return function(e,t,n,r){var i=t.userCode,o=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null}
return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),a=o.map(function(e){return e.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=function(e,t,n,r){var i=[]
e.forEach(function(e){var t=sf(e.shapeInfo.logicalShape)
e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))})
var o,a,s=i.join("\n"),u=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1)
var r=""
r+=n?function e(t){var n
switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(n=t.name).charAt(0).toUpperCase()+n.slice(1)+"() {\n      return "+zm().texture2D+"("+n+", halfCR);\n    }\n  "
case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=zm()
return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(t)
case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],a=i[1],s=zm()
if(null!=i&&uf(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    "
var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)]
return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(t)
case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)]
if(1===n[0]){var s=Qm(t,n.slice(1))
return"\n        "+e(s)+"\n        vec4 "+i+"(int b, int row, int col) {\n          return "+i+"("+Jm(["b","row","col"],[1,2])+");\n        }\n      "}var u=a[0],c=a[1],l=Math.ceil(n[2]/2)
return"\n    vec4 "+i+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+u+", "+c+", "+l*Math.ceil(n[1]/2)+", "+l+", b, row, col);\n      return "+zm().texture2D+"("+r+", uv);\n    }\n  "}(t)
default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],u=a[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),h="int b, int row, int col",f="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)h="int b"+d+", "+h,f="b"+d+" * "+(l*=t[n-d-1])+" + "+f
return"\n    vec4 "+i+"("+h+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+zm().texture2D+"("+r+", uv);\n    }\n  "}(t)}}(e):function e(t){var n=t.shapeInfo.logicalShape
switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)
if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}"
var r=e.shapeInfo.texShape,i=r[0],o=r[1]
if(1===i&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    "
var a=e.shapeInfo.texShape
return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+$m(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t)
case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)
if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Xm(e)+"\n      }\n    "
var r=e.shapeInfo.texShape,i=r[0],o=r[1]
if(1===o&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    "
var a=$m(t)
return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+o+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t)
case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape
if(null!=o&&uf(n,o)){var a=o[0]
return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+r+", uv);\n    }\n  "}var s=mf(n),u=s.newShape,c=s.keptDims,l=u
if(l.length<n.length){var h=Qm(t,l)
return"\n      "+e(h)+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+Jm(["row","col"],c)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+Xm(t)+"\n      }\n    "
var f=o[0],d=o[1],p=$m(r)
return 1===d?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+p+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+f+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===f?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+p+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+p+";\n    vec2 uv = uvFromFlat("+f+", "+d+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(t)
case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],s=mf(n),u=s.newShape,c=s.keptDims,l=u
if(l.length<n.length){var h=Qm(t,l)
return"\n        "+e(h)+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+Jm(["row","col","depth"],c)+");\n        }\n      "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+Xm(t)+"\n      }\n    "
var f=t.shapeInfo.texShape,d=f[0],p=f[1],v=t.shapeInfo.flatOffset
return p===o&&null==v?"\n        float "+i+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+p+".0, "+d+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":p===a&&null==v?"\n    float "+i+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+".0, "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+i+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+$m(r)+";\n        vec2 uv = uvFromFlat("+d+", "+p+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(t)
case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,u=mf(n),c=u.newShape,l=u.keptDims
if(c.length<n.length){var h=Qm(t,c)
return"\n      "+e(h)+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+Jm(["row","col","depth","depth2"],l)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+s+", "+a+", "+o+", 1)));\n        "+Xm(t)+"\n      }\n    "
var f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],v=d[1]
return v===s&&null==f?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":v===o&&null==f?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+p+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+p+", "+v+", index + "+$m(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[4],a=n[3]*o,s=n[2]*a,u=n[1]*s,c=mf(n),l=c.newShape,h=c.keptDims
if(l.length<n.length){var f=Qm(t,l)
return"\n      "+e(f)+"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+i+"("+Jm(["row","col","depth","depth2","depth3"],h)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+u+", "+s+", "+a+", "+o+")) +\n          depth3;\n        "+Xm(t)+"\n      }\n    "
var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,v=p[0],m=p[1]
return m===u&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+s+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===o&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+s+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+$m(r)+";\n      vec2 uv = uvFromFlat("+v+", "+m+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=mf(n),a=o.newShape,s=o.keptDims
if(a.length<n.length){var u=Qm(t,a)
return"\n      "+e(u)+"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+i+"("+Jm(["row","col","depth","depth2","depth3","depth4"],s)+");\n      }\n    "}var c=n[5],l=n[4]*c,h=n[3]*l,f=n[2]*h,d=n[1]*f
if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+f+", "+h+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+Xm(t)+"\n      }\n    "
var p=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,m=v[0],g=v[1]
return g===d&&null==p?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+f+", "+h+", "+l+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":g===c&&null==p?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+f+" + depth * "+h+" +\n          depth2 * "+l+" + depth3 * "+c+" + depth4 + "+$m(r)+";\n      vec2 uv = uvFromFlat("+m+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t)
default:throw new Error(n.length+"-D input sampling is not yet supported")}}(e)
var i=e.shapeInfo.logicalShape,o=t.logicalShape
return i.length<=o.length&&(r+=n?function(e,t){var n,r,i=e.name,o=i.charAt(0).toUpperCase()+i.slice(1),a="get"+o+"AtOutCoords",s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,c=sm(e.shapeInfo.logicalShape,t.logicalShape),l=Ym(u),h=u-s,f=["x","y","z","w","u","v"]
n=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map(function(e){return"coords."+f[e+h]+" = 0;"}).join("\n"),r=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+h]}).join(", ")
var d="return outputValue;",p=1===sf(e.shapeInfo.logicalShape),v=1===sf(t.logicalShape)
if(1!==s||p||v){if(p&&!v)d=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      "
else if(c.length){var m=s-2,g=s-1
c.indexOf(m)>-1&&c.indexOf(g)>-1?d="return vec4(outputValue.x);":c.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    "
return"\n    vec4 "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+r+");\n      "+d+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length
if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&uf(a,o))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    "
var c=Ym(u),l=sm(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,f=["x","y","z","w","u","v"]
return"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+f[e+h]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(u<2&&s>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+h]}).join(", "))+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,l=zm(),h="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",f=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    #define isnan(value) isnan_custom(value)\n    "+e.defineSpecialNaN+"\n    bvec4 isnan_custom(vec4 val) {\n      return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n    }\n\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+qm+"\n    "+Hm+"\n    "+Gm+"\n  "}(l)
return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "
case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)]
return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t)
case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)]
if(uf(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    "
var r=Math.ceil(e[1]/2)
return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t)
case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  "
default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),o=i,a="",s="b, r, c",u=2;u<e.length-1;u++)a="\n      int b"+u+" = index / "+(o*=e[e.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+a,s="b"+u+", "+s
return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,o,a}(t.logicalShape,c),a="\n    void setOutput(vec4 val) {\n      "+l.output+" = val;\n    }\n  "):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "
case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t)
case 2:return function(e,t){return uf(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t)
case 3:return n=t,r=Um(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  "
case 4:return function(e,t){var n=Um(["r","c","d","d2"],e)
return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t)
case 5:return function(e,t){var n=Um(["r","c","d","d2","d3"],e)
return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t)
case 6:return function(e,t){var n=Um(["r","c","d","d2","d3","d4"],e)
return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t)
default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),a="\n    void setOutput(float val) {\n      "+l.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(f+=Km),[f,h,a,s,o,u,n].join("\n")}(o,s,i,t.usesPackedTextures),c=e.createProgram(u),l=null,h=e.getUniformLocation(c,"NAN",!1)
1===Yh.getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1))
for(var f={},d=0;d<t.variableNames.length;d++){var p=t.variableNames[d]
f[p]=e.getUniformLocation(c,p,!1),f["offset"+p]=e.getUniformLocation(c,"offset"+p,!1)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:a,outShapeInfo:s,infLoc:l,nanLoc:h}}(o.gpgpu,e,a,u)}),h=null!=this.activeTimers
return h&&(s=this.startTimer()),function(e,t,n,r,i){ay(t.inShapeInfos,n),ay([t.outShapeInfo],[r])
var o=r.texData.texture,a=r.texData.texShape
r.texData.isPacked?e.setOutputPackedMatrixTexture(o,a[0],a[1]):e.setOutputMatrixTexture(o,a[0],a[1]),e.setProgram(t.webGLProgram),1===Yh.getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],a=t.uniformLocations["offset"+i]
if(null!=o)if(n.isUniform)if(sf(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0])
else{var s=n.uniformValues
s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,l,a,u,r),h&&(s=this.endTimer(s),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(s)})),!Yh.getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(n.dataId).isPacked&&!1===i?this.unpackTensor(n):n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),null!=this.canvas&&null!=this.canvas.remove?this.canvas.remove():this.canvas=null,null!=this.fromPixels2DContext&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var e=this
return null==this.floatPrecisionValue&&(this.floatPrecisionValue=yp(function(){if(!Yh.get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Yh.getBool("DEBUG")
Yh.set("DEBUG",!1)
var n=e.abs(Up(1e-8)).dataSync()[0]
if(Yh.set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,o=n.values,a=n.texture,s=n.usage,u=n.isPacked
if(null==a){var c,l=null!=this.activeTimers
l&&(c=Ff())
var h=n.texShape
if(null==h&&(h=ip(r,u),n.texShape=h),null!=o){var f=rp(r),d=void 0,p=h[1],v=h[0],m=o instanceof Uint8Array
u?(p=(t=Rd(h[0],h[1]))[0],v=t[1],d=new Pg(f,[v,p],m)):d=new Dg(f,[v,p],m)
var g=this.makeTensorHandle([v,p],i)
this.texData.get(g.dataId).usage=m?pd.PIXELS:pd.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,v,o)
var y=this.makeTensorHandle(d.outputShape,g.dtype)
y.size=sf(d.outputShape),this.texData.get(y.dataId).isPacked=u,this.compileAndRun(d,[g],y)
var b=this.texData.get(y.dataId)
n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=Ff()-c)}else{var x=this.acquireTexture(h,s,i,u)
n.texture=x}}},e.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype
return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e
if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r])
return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},e.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2)
this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},e.prototype.computeBytes=function(e,t){return e[0]*e[1]*Rf(t)},e}()
dd()&&fd.registerBackend("webgl",function(){return new nb},2)
var rb=Mp({abs_:function(e){var t=Rp(e,"x","abs")
return"complex64"===t.dtype?fd.runKernel(function(e){return e.complexAbs(t)},{$x:t}):fd.runKernel(function(e,n){var r=e.abs(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.toFloat().step(-1))}}})}}),ib=Mp({acos_:function(e){var t=Rp(e,"x","acos")
return fd.runKernel(function(e,n){var r=e.acos(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(Up(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),ob=Mp({acosh_:function(e){var t=Rp(e,"x","acosh")
return fd.runKernel(function(e,n){var r=e.acosh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),ab=Mp({asin_:function(e){var t=Rp(e,"x","asin")
return fd.runKernel(function(e,n){var r=e.asin(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(Up(1).sub(n.toFloat().square()).sqrt())}}})}}),sb=Mp({asinh_:function(e){var t=Rp(e,"x","asinh")
return fd.runKernel(function(e,n){var r=e.asinh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.divStrict(Up(1).add(n.toFloat().square()).sqrt())}}})}}),ub=Mp({atan_:function(e){var t=Rp(e,"x","atan")
return fd.runKernel(function(e,n){var r=e.atan(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),cb=Mp({atanh_:function(e){var t=Rp(e,"x","atanh")
return fd.runKernel(function(e,n){var r=e.atanh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(Up(1).sub(n.toFloat().square()))}}})}}),lb=Mp({ceil_:function(e){var t=Rp(e,"x","ceil")
return fd.runKernel(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),hb=Mp({clipByValue_:function(e,t,n){var r=Rp(e,"x","clipByValue")
return nf(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}),fd.runKernel(function(e,i){var o=e.clip(r,t,n)
return i([r]),o},{$x:r},function(e,r){var i=r[0]
return{$x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),Qp(e))}}})}}),fb=Mp({cos_:function(e){var t=Rp(e,"x","cos")
return fd.runKernel(function(e,n){var r=e.cos(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().sin().neg().mul(e)}}})}}),db=Mp({cosh_:function(e){var t=Rp(e,"x","cosh")
return fd.runKernel(function(e,n){var r=e.cosh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),pb=Mp({erf_:function(e){var t=Rp(e,"x","erf")
return nf("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),fd.runKernel(function(e,n){var r=e.erf(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),vb=Mp({exp_:function(e){var t=Rp(e,"x","exp")
return fd.runKernel(function(e,n){var r=e.exp(t)
return n([r]),r},{$x:t},function(e,t){return{$x:function(){return e.mulStrict(t[0])}}})}}),mb=Mp({expm1_:function(e){var t=Rp(e,"x","expm1")
return fd.runKernel(function(e,n){var r=e.expm1(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.exp())}}})}}),gb=Mp({floor_:function(e){var t=Rp(e,"x","floor")
return fd.runKernel(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),yb=Mp({log_:function(e){var t=Rp(e,"x","log")
return fd.runKernel(function(e,n){var r=e.log(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat())}}})}}),bb=Mp({log1p_:function(e){var t=Rp(e,"x","log1p")
return fd.runKernel(function(e,n){var r=e.log1p(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.add(1))}}})}}),xb=Mp({logSigmoid_:function(e){var t=Rp(e,"x","logSigmoid")
return fd.runKernel(function(e,n){var r=e.softplus(t.neg()).neg()
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),wb=Mp({neg_:function(e){var t=Rp(e,"x","neg")
return fd.runKernel(function(e){return e.neg(t)},{$x:t},function(e){return{$x:function(){return e.neg()}}})}}),_b=Mp({reciprocal_:function(e){var t=Rp(e,"x","reciprocal")
return fd.runKernel(function(e,n){var r=e.reciprocal(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.square().neg())}}})}}),Rb=Mp({round_:function(e){var t=Rp(e,"x","round")
return fd.runKernel(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),Eb=Mp({rsqrt_:function(e){var t=Rp(e,"x","rsqrt")
return fd.runKernel(function(e,n){var r=e.rsqrt(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}})}}),Cb=Mp({sigmoid_:function(e){var t=Rp(e,"x","sigmoid")
return fd.runKernel(function(e,n){var r=e.sigmoid(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.mul(Up(1).sub(n)))}}})}}),kb=Mp({sign_:function(e){var t=Rp(e,"x","sign")
return fd.runKernel(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),Sb=Mp({isNaN_:function(e){var t=Rp(e,"x","isNaN")
return fd.runKernel(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),Ab=Mp({isInf_:function(e){var t=Rp(e,"x","isInf")
return fd.runKernel(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),Tb=Mp({isFinite_:function(e){var t=Rp(e,"x","isFinite")
return fd.runKernel(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return Qp(e)}}})}}),Ob=Mp({sin_:function(e){var t=Rp(e,"x","sin")
return fd.runKernel(function(e,n){var r=e.sin(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().cos().mul(e)}}})}}),Ib=Mp({sinh_:function(e){var t=Rp(e,"x","sinh")
return fd.runKernel(function(e,n){var r=e.sinh(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),Nb=Mp({softplus_:function(e){var t=Rp(e,"x","softplus")
return fd.runKernel(function(e,n){var r=e.softplus(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.sigmoid())}}})}}),Db=Mp({sqrt_:function(e){var t=Rp(e,"x","sqrt")
return fd.runKernel(function(e,n){var r=e.sqrt(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),Pb=Mp({square_:function(e){var t=Rp(e,"x","square")
return fd.runKernel(function(e,n){return n([t]),e.square(t)},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mul(n.toFloat().mul(2))}}})}}),Mb=Mp({step_:function(e,t){void 0===t&&(t=0)
var n=Rp(e,"x","step")
return fd.runKernel(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return Qp(e)}}})}}),Fb=Mp({tan_:function(e){var t=Rp(e,"x","tan")
return fd.runKernel(function(e,n){var r=e.tan(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.div(n.cos().square())}}})}}),Lb=Mp({tanh_:function(e){var t=Rp(e,"x","tanh")
return fd.runKernel(function(e,n){var r=e.tanh(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return Up(1).sub(n.square()).mulStrict(e)}}})}})
function Bb(e,t,n,r,i,o){var a,s,u=Rp(e,"x","batchNorm"),c=Rp(t,"mean","batchNorm"),l=Rp(n,"variance","batchNorm")
return null!=i&&(a=Rp(i,"scale","batchNorm")),null!=r&&(s=Rp(r,"offset","batchNorm")),nf(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),nf(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),nf(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=a&&nf(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),null!=s&&nf(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Ub(u,c,l,s,a,o)}function jb(e,t,n,r,i,o){var a,s,u=Rp(e,"x","batchNorm"),c=Rp(t,"mean","batchNorm"),l=Rp(n,"variance","batchNorm")
return null!=i&&(a=Rp(i,"scale","batchNorm")),null!=r&&(s=Rp(r,"offset","batchNorm")),nf(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),nf(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),nf(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=a&&nf(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),null!=s&&nf(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Ub(u,c,l,s,a,o)}function zb(e,t,n,r,i,o){var a,s,u=Rp(e,"x","batchNorm"),c=Rp(t,"mean","batchNorm"),l=Rp(n,"variance","batchNorm")
return null!=i&&(a=Rp(i,"scale","batchNorm")),null!=r&&(s=Rp(r,"offset","batchNorm")),nf(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),nf(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),nf(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=a&&nf(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),null!=s&&nf(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Ub(u,c,l,s,a,o)}function Ub(e,t,n,r,i,o){null==o&&(o=.001)
var a,s,u,c=Rp(e,"x","batchNorm"),l=Rp(t,"mean","batchNorm"),h=Rp(n,"variance","batchNorm")
return null!=i&&(a=Rp(i,"scale","batchNorm")),null!=r&&(s=Rp(r,"offset","batchNorm")),nf(l.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),nf(null==s||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),nf(null==a||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,fd.runKernel(function(e,t){var n=e.batchNormalization(u,Wb(l),Wb(h),o,Wb(a),Wb(s))
return t([c,l,h,a]),n},{$x:c,$mean:l,$variance:h,$scale:a,$offset:s},function(e,t){var n=t,r=n[0],i=n[1],a=n[2],s=n[3],c=null==s?Up(1):s,l=um(i.shape,u.shape),h=[]
if(1===i.rank){for(var f=0;f<u.shape.length-1;++f)h.push(u.shape[f])
h.push(1)}var d=r.sub(i),p=e.mul(c),v=Eb(a.add(Up(o))),m=v.mul(v).mul(v).mul(Up(-.5))
return{$x:function(){return 1===i.rank?e.mul(jv(v.as4D(1,1,1,i.shape[0]),h)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},$mean:function(){var e=v.mul(Up(-1)).mul(p)
return 1===i.rank&&(e=e.sum(l)),e.reshape(i.shape)},$variance:function(){var e=m.mul(d).mul(p)
return 1===i.rank&&(e=e.sum(l)),e.reshape(i.shape)},$scale:function(){var t=d.mul(v),n=e.mul(t)
return 1===i.rank&&(n=n.sum(l)),n.reshape(i.shape)},$offset:function(){var t=e
return 1===i.rank&&(t=t.sum(l)),t.reshape(i.shape)}}}).reshape(c.shape)}function Wb(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Vb(){gp("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var qb=Mp({batchNormalization2d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Vb(),Bb(e,t,n,o,i,r)}}),Hb=Mp({batchNormalization3d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Vb(),jb(e,t,n,o,i,r)}}),Gb=Mp({batchNormalization4d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Vb(),zb(e,t,n,o,i,r)}}),Kb=Mp({batchNormalization_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),Vb(),Ub(e,t,n,o,i,r)}}),$b=Mp({batchNorm_:Ub}),Xb=Mp({batchNorm2d_:Bb}),Yb=Mp({batchNorm3d_:jb}),Qb=Mp({batchNorm4d_:zb}),Jb=Mp({logicalAnd_:function(e,t){var n=Rp(e,"a","logicalAnd","bool"),r=Rp(t,"b","logicalAnd","bool")
return cm(n.shape,r.shape),fd.runKernel(function(e){return e.logicalAnd(n,r)},{$a:n,$b:r})}}),Zb=Mp({logicalNot_:function(e){var t=Rp(e,"x","logicalNot","bool")
return fd.runKernel(function(e){return e.logicalNot(t)},{$x:t})}}),ex=Mp({logicalOr_:function(e,t){var n=Rp(e,"a","logicalOr","bool"),r=Rp(t,"b","logicalOr","bool")
return cm(n.shape,r.shape),fd.runKernel(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),tx=Mp({logicalXor_:function(e,t){var n=Rp(e,"a","logicalXor","bool"),r=Rp(t,"b","logicalXor","bool")
return cm(n.shape,r.shape),ex(e,t).logicalAnd(Jb(e,t).logicalNot())}}),nx=Mp({where_:function(e,t,n){var r=Rp(t,"a","where"),i=Rp(n,"b","where"),o=Rp(e,"condition","where","bool")
return rf(r.shape,i.shape,"Error in where: "),1===o.rank?nf(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):rf(o.shape,i.shape,"Error in where: "),fd.runKernel(function(e,t){var n=e.select(o,r,i)
return t([o]),n},{$condition:o,$a:r,$b:i},function(e,t){var n=t[0]
return{$condition:function(){return Qp(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),rx=function(e){return Gh(this,void 0,void 0,function(){var t,n,r
return Kh(this,function(i){switch(i.label){case 0:return[4,(t=Rp(e,"condition","whereAsync","bool")).data()]
case 1:return n=i.sent(),r=Pm(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},ix=Mp({add_:function(e,t){var n,r=Rp(e,"a","add"),i=Rp(t,"b","add")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e){return e.add(r,i)},{$a:r,$b:i},function(e){return{$a:function(){var t=e,n=um(r.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=um(i.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}})}}),ox=Mp({addN_:function(e){nf(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),nf(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length})
var t=e.map(function(e,t){return Rp(e,"tensors"+t,"addN")}),n=t[0]
t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!uf(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")})
var r=t
return fd.runKernel(function(e){return e.addN(t)},r,function(e){var n={}
return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n})}}),ax=Mp({addStrict_:function(e,t){var n=Rp(e,"a","addStrict"),r=Rp(t,"b","addStrict")
return rf(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),sx=Mp({atan2_:function(e,t){var n,r=Rp(e,"a","atan2"),i=Rp(t,"b","atan2")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e,t){var n=e.atan2(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=ix(n.square(),r.square()),i=e.mul(r.div(t)),a=um(n.shape,o)
return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},$b:function(){var t=ix(n.square(),r.square()),i=wb(e.mul(n.div(t))),a=um(r.shape,o)
return a.length>0&&(i=i.sum(a)),i.reshape(r.shape)}}})}}),ux=Mp({div_:function(e,t){var n,r=Rp(e,"a","div"),i=Rp(t,"b","div")
if(n=ad(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return lx(r,i)
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e,t){var n=e.realDivide(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.div(r.toFloat()),i=um(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=um(r.shape,o)
i.length>0&&(t=t.sum(i).reshape(r.shape))
var a=r.square()
return t.div(a.toFloat()).neg()}}})}}),cx=Mp({divStrict_:function(e,t){var n=Rp(e,"a","div"),r=Rp(t,"b","div")
return rf(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),lx=Mp({floorDiv_:function(e,t){var n,r=Rp(e,"a","floorDiv"),i=Rp(t,"b","floorDiv")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e,t){var n=e.floorDiv(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.div(r.toFloat()),i=um(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=um(r.shape,o)
i.length>0&&(t=t.sum(i).reshape(r.shape))
var a=r.square()
return t.div(a.toFloat()).neg()}}})}}),hx=Mp({maximum_:function(e,t){var n,r=Rp(e,"a","maximum"),i=Rp(t,"b","maximum")
return n=ad(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),cm(r.shape,i.shape),fd.runKernel(function(e,t){var n=e.maximum(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}})}}),fx=Mp({maximumStrict_:function(e,t){var n=Rp(e,"a","maximumStrict"),r=Rp(t,"b","maximumStrict")
return rf(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),dx=Mp({minimum_:function(e,t){var n,r=Rp(e,"a","minimum"),i=Rp(t,"b","minimum")
return n=ad(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),cm(r.shape,i.shape),fd.runKernel(function(e,t){var n=e.minimum(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}})}}),px=Mp({minimumStrict_:function(e,t){var n=Rp(e,"a","minimumStrict"),r=Rp(t,"b","minimumStrict")
return rf(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),vx=Mp({mod_:function(e,t){var n,r=Rp(e,"a","mod"),i=Rp(t,"b","mod")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e,t){var n=e.mod(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=um(n.shape,o)
return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=um(r.shape,o)
return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),mx=Mp({modStrict_:function(e,t){var n=Rp(e,"a","modStrict"),r=Rp(t,"b","modStrict")
return rf(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),gx=Mp({mul_:function(e,t){var n,r=Rp(e,"a","mul"),i=Rp(t,"b","mul")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e,t){var n=e.multiply(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){var t=e.mul(r.toFloat()),i=um(n.shape,o)
return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=um(r.shape,o)
return i.length>0?t.sum(i).reshape(r.shape):t}}})}}),yx=Mp({mulStrict_:function(e,t){var n=Rp(e,"a","mul"),r=Rp(t,"b","mul")
return rf(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),bx=Mp({pow_:function(e,t){var n=Rp(e,"base","pow"),r=Rp(t,"exp","pow"),i=cm(n.shape,r.shape)
return e=n.cast(id(n.dtype,r.dtype)),t=r.cast(id(n.dtype,r.dtype)),fd.runKernel(function(e,t){var i=e.pow(n,r)
return t([n,r,i]),i},{$base:n,$exp:r},function(e,t){var n=t[0],r=t[1],o=t[2]
return{$base:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(Up(1))))),a=um(n.shape,i)
return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$exp:function(){var t=n.greater(0),a=n.log().where(t,Qp(n)),s=e.mul(o.mul(a)),u=um(r.shape,i)
return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}})}}),xx=Mp({powStrict_:function(e,t){return rf(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),wx=Mp({squaredDifference_:function(e,t){var n,r=Rp(e,"a","squaredDifference"),i=Rp(t,"b","squaredDifference")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e,t){var n=e.squaredDifference(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1],i=Up(2)
return{$a:function(){return e.mul(n.sub(r).mul(i))},$b:function(){return e.mul(r.sub(n).mul(i))}}})}}),_x=Mp({squaredDifferenceStrict_:function(e,t){var n=Rp(e,"a","squaredDifferenceStrict"),r=Rp(t,"b","squaredDifferenceStrict")
return rf(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Rx=Mp({sub_:function(e,t){var n,r=Rp(e,"a","sub"),i=Rp(t,"b","sub")
n=ad(r,i),r=n[0],i=n[1]
var o=cm(r.shape,i.shape)
return fd.runKernel(function(e){return e.subtract(r,i)},{$a:r,$b:i},function(e){return{$a:function(){var t=e,n=um(r.shape,o)
return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=um(i.shape,o)
return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}})}}),Ex=Mp({subStrict_:function(e,t){var n=Rp(e,"a","subStrict"),r=Rp(t,"b","subStrict")
return rf(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Cx=Mp({equal_:function(e,t){var n,r=Rp(e,"a","equal"),i=Rp(t,"b","equal")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e){return e.equal(r,i)},{$a:r,$b:i})}}),kx=Mp({equalStrict_:function(e,t){var n=Rp(e,"a","equalStrict"),r=Rp(t,"b","equalStrict")
return rf(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Sx=Mp({greater_:function(e,t){var n,r=Rp(e,"a","greater"),i=Rp(t,"b","greater")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e){return e.greater(r,i)},{$a:r,$b:i})}}),Ax=Mp({greaterEqual_:function(e,t){var n,r=Rp(e,"a","greaterEqual"),i=Rp(t,"b","greaterEqual")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e,t){var n=e.greaterEqual(r,i)
return t([r,i]),n},{$a:r,$b:i},function(e,t){var n=t[0],r=t[1]
return{$a:function(){return Qp(n)},$b:function(){return Qp(r)}}})}}),Tx=Mp({greaterEqualStrict_:function(e,t){var n=Rp(e,"a","greaterEqualStrict"),r=Rp(t,"b","greaterEqualStrict")
return rf(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Ox=Mp({greaterStrict_:function(e,t){var n=Rp(e,"a","greaterStrict"),r=Rp(t,"b","greaterStrict")
return rf(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Ix=Mp({less_:function(e,t){var n,r=Rp(e,"a","less"),i=Rp(t,"b","less")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e){return e.less(r,i)},{$a:r,$b:i})}}),Nx=Mp({lessEqual_:function(e,t){var n,r=Rp(e,"a","lessEqual"),i=Rp(t,"b","lessEqual")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e){return e.lessEqual(r,i)},{$a:r,$b:i})}}),Dx=Mp({lessEqualStrict_:function(e,t){var n=Rp(e,"a","lessEqualStrict"),r=Rp(t,"b","lessEqualStrict")
return rf(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Px=Mp({lessStrict_:function(e,t){var n=Rp(e,"a","lessStrict"),r=Rp(t,"b","lessStrict")
return rf(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Mx=Mp({notEqual_:function(e,t){var n,r=Rp(e,"a","notEqual"),i=Rp(t,"b","notEqual")
return n=ad(r,i),r=n[0],i=n[1],cm(r.shape,i.shape),fd.runKernel(function(e){return e.notEqual(r,i)},{$a:r,$b:i})}}),Fx=Mp({notEqualStrict_:function(e,t){var n=Rp(e,"a","notEqualStrict"),r=Rp(t,"b","notEqualStrict")
return rf(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}})
function Lx(e,t){for(var n=[],r=e;r<t;++r)n.push(r)
return n}function Bx(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r])
return t}var jx=Mp({gather_:function(e,t,n){void 0===n&&(n=0)
var r=Rp(e,"x","gather"),i=Rp(t,"indices","gather","int32")
n=vf(n,r.shape)[0]
var o=function(e,t,n){for(var r=e.shape[n],i=[],o=1,a=1,s=0;s<n;s++)i.push(e.shape[s]),o*=e.shape[s]
for(s=0;s<t.rank;s++)i.push(t.shape[s])
for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),a*=e.shape[s]
return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}(r,i,n)
return fd.runKernel(function(e,t){var o=e.gather(r,i.flatten(),n)
return t([i]),o},{$x:r},function(e,t){var i=t[0]
return{$x:function(){var t=r.shape,o=i.size,a=t.slice(0,n),s=a.length,u=t.slice(n,t.length).slice(1),c=u.length,l=Lx(0,s),h=Lx(s+1,s+1+c),f=Bx([a,[o],u]),d=e.reshape(f),p=i.reshape([o]),v=Bx([[s],l,h]),m=d.transpose(v),g=zx(m,p,r.shape[n]),y=Ip(v)
return g.transpose(y)}}}).reshape(o.outputShape)}}),zx=Mp({unsortedSegmentSum_:function(e,t,n){var r=Rp(e,"x","unsortedSegmentSum"),i=Rp(t,"segmentIds","unsortedSegmentSum","int32")
return nf(cf(n),function(){return"numSegments must be of dtype int"}),fd.runKernel(function(e,t){var o=e.unsortedSegmentSum(r,i,n)
return t([i]),o},{$x:r},function(e,t){var n=t[0]
return{$x:function(){return function(e,t){for(var n=hx(t,Qp(t)),r=jx(e,n),i=Ax(t,Up(0,"int32")),o=r.rank-i.rank,a=0;a<o;++a)i=_v(i,a+1)
i=Jb(i,Gp(r.shape,"bool"))
var s=Qp(r)
return nx(i,r,s)}(e,n)}}})}})
function Ux(e,t,n,r,i,o,a){void 0===o&&(o="NHWC"),nf(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"})
var s=e,u=t,c=!1
3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),nf(4===s.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),nf(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),nf(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank})
var l="NHWC"===o?s[3]:s[1],h="NHWC"===o?u.shape[3]:u.shape[1]
nf(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),nf(h===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+n.shape[3]+"."}),null!=a&&nf(cf(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."})
var f=wm(o),d=fm(s,n.shape,r,1,i,a,!1,f),p=fd.runKernel(function(e,t){var r=e.conv2dDerInput(u,n,d)
return t([n,u]),r},{dy4D:u,filter:n},function(e,t){var n=t[0],s=t[1]
return{dy4D:function(){return Gx(e,n,r,i,o,1,a)},filter:function(){return $x(e,s,n.shape,r,i,o,a)}}})
return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Wx(e,t,n,r,i,o,a){void 0===o&&(o="NHWC")
var s=e
3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]))
var u=t
3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),nf(4===s.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),nf(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),nf(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."})
var c="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1]
nf(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),nf(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),null!=a&&nf(cf(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."})
var h=wm(o),f=fm(s.shape,n,r,1,i,a,!1,h)
return fd.runKernel(function(e){return e.conv2dDerFilter(s,u,f)},{x4D:s,dy4D:u})}function Vx(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2]
return 1===n&&1===r&&1===i}function qx(e,t,n,r,i){nf(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"})
var o=e,a=t,s=!1
4===t.rank&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]])
var u=o[4],c=a.shape[4]
nf(5===o.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),nf(5===a.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),nf(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),nf(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),nf(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."})
var l=dm(o,n.shape,r,1,i),h=fd.runKernel(function(e){return e.conv3dDerInput(a,n,l)},{dy5D:a})
return s?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var Hx=Mp({conv1d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NWC"),void 0===o&&(o=1)
var s=Rp(e,"x","conv1d"),u=Rp(t,"filter","conv1d"),c=s,l=!1
2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),nf(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),nf(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=a&&nf(cf(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),nf(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),nf(xm(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),nf("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."})
var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=Gx(f,h,[1,n],r,"NHWC",[1,o],a)
return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Gx=Mp({conv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1])
var s=Rp(e,"x","conv2d"),u=Rp(t,"filter","conv2d"),c=s,l=!1
3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),nf(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),nf(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=a&&nf(cf(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})
var h="NHWC"===i?c.shape[3]:c.shape[1]
nf(h===u.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+u.shape[2]+"."}),nf(xm(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})
var f=wm(i),d=fm(c.shape,u.shape,n,o,r,a,!1,f),p=fd.runKernel(function(e,t){var n=e.conv2d(c,u,d)
return t([u,c]),n},{x:c,$filter:u},function(e,t){var a=t,s=a[0],u=a[1]
return nf(bm(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return Ux(u.shape,e,s,n,r,i)},$filter:function(){return Wx(u,e,s.shape,n,r,i)}}})
return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Kx=Mp({conv3d_:function(e,t,n,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1])
var a=Rp(e,"x","conv3d"),s=Rp(t,"filter","conv3d"),u=a,c=!1
4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),nf(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),nf(5===s.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),nf(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),nf(function(e,t){return Vx(n)||Vx(t)}(0,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),nf("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."})
var l=dm(u.shape,s.shape,n,o,r),h=fd.runKernel(function(e,t){var n=e.conv3d(u,s,l)
return t([u,s]),n},{x:u,$filter:s},function(e,t){nf(Vx(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})
var i=t[0],a=t[1]
return{x:function(){return qx(i.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,i){var o=e
4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]))
var a=t
4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),nf(5===o.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."}),nf(5===a.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."}),nf(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),nf(o.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."}),nf(a.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."})
var s=dm(o.shape,n,r,1,i)
return fd.runKernel(function(e){return e.conv3dDerFilter(o,a,s)},{x5D:o,dy5D:a})}(i,e,a.shape,n,r)}}})
return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),$x=Mp({conv2dDerFilter_:Wx}),Xx=Mp({conv2dDerInput_:Ux}),Yx=Mp({depthwiseConv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1])
var s=Rp(e,"x","depthwiseConv2d"),u=Rp(t,"filter","depthwiseConv2d"),c=s,l=!1
3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),nf(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),nf(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),nf(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==o&&(o=[1,1]),nf(xm(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),null!=a&&nf(cf(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})
var h=fm(c.shape,u.shape,n,o,r,a,!0),f=fd.runKernel(function(e,t){var n=e.depthwiseConv2D(c,u,h)
return t([c,u]),n},{x:c,$filter:u},function(e,t){nf(bm(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"})
var n=t[0],r=t[1]
return{x:function(){return function(e,t,n,r){var i=t,o=!1
3===t.rank&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]))
var a=fd.runKernel(function(e){return e.depthwiseConv2DDerInput(i,n,r)},{dy4D:i})
return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}(n.shape,e,r,h)},$filter:function(){return function(e,t,n,r){var i=e
3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]))
var o=t
return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),fd.runKernel(function(e){return e.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}(n,e,r.shape,h)}}})
return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Qx=Mp({separableConv2d_:function(e,t,n,r,i,o,a){void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC")
var s=Rp(e,"x","separableConv2d"),u=Rp(t,"depthwiseFilter","separableConv2d"),c=Rp(n,"pointwiseFilter","separableConv2d"),l=s,h=!1
if(3===s.rank&&(h=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported")
nf(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),nf(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),nf(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),nf(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),nf(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."})
var f=u.shape[2],d=u.shape[3]
nf(c.shape[2]===f*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*d+", but got "+c.shape[2]+"."})
var p=Yx(l,u,r,i,a,o),v=Gx(p,c,1,"valid",a)
return h?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Jx=Mp({conv2dTranspose_:function(e,t,n,r,i,o){return Ux(n,Rp(e,"x","conv2dTranspose"),Rp(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),Zx=Mp({conv3dTranspose_:function(e,t,n,r,i){return qx(n,Rp(e,"x","conv3dTranspose"),Rp(t,"filter","conv3dTranspose"),r,i)}}),ew=Mp({matMul_:function(e,t,n,r){var i
void 0===n&&(n=!1),void 0===r&&(r=!1)
var o=Rp(e,"a","matMul"),a=Rp(t,"b","matMul")
i=ad(o,a),o=i[0],a=i[1]
var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],h=o.shape.slice(0,-2),f=a.shape.slice(0,-2),d=sf(h),p=sf(f)
nf(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),nf(uf(h,f),function(){return"Error in matMul: outer dimensions ("+h+") and ("+f+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),nf(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."})
var v=o.shape.slice(0,-2).concat([c,l]),m=n?o.as3D(d,s,c):o.as3D(d,c,s),g=r?a.as3D(p,l,u):a.as3D(p,u,l)
return fd.runKernel(function(e,t){var i=e.batchMatMul(m,g,n,r)
return t([m,g]),i},{$a:m,$b:g},function(e,t){var i=t,o=i[0],a=i[1]
return n||r?!n&&r?{$a:function(){return e.matMul(a,!1,!1)},$b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{$a:function(){return a.matMul(e,!1,!0)},$b:function(){return o.matMul(e,!1,!1)}}:{$a:function(){return a.matMul(e,!0,!0)},$b:function(){return e.matMul(o,!0,!0)}}:{$a:function(){return e.matMul(a,!1,!0)},$b:function(){return o.matMul(e,!0,!1)}}}).reshape(v)}}),tw=Mp({dot_:function(e,t){var n=Rp(e,"t1","dot"),r=Rp(t,"t2","dot")
nf(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."})
var i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0]
return nf(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),nw=Mp({outerProduct_:function(e,t){var n=Rp(e,"v1","outerProduct"),r=Rp(t,"v2","outerProduct")
return nf(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),rw=Mp({reverse_:function(e,t){var n=Rp(e,"x","reverse")
if(0===n.rank)return n.clone()
var r=vf(t,n.shape)
return fd.runKernel(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),iw=Mp({reverse1d_:function(e){var t=Rp(e,"x","reverse")
return nf(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),rw(t,0)}}),ow=Mp({reverse2d_:function(e,t){var n=Rp(e,"x","reverse")
return nf(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),rw(n,t)}}),aw=Mp({reverse3d_:function(e,t){var n=Rp(e,"x","reverse")
return nf(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),rw(n,t)}}),sw=Mp({reverse4d_:function(e,t){var n=Rp(e,"x","reverse")
return nf(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),rw(n,t)}})
function uw(e,t,n,r,i,o){var a=Rp(e,"x","maxPool"),s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),nf(4===s.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),nf(xm(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=o&&nf(cf(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var c=lm(s.shape,t,n,r,i,o),l=fd.runKernel(function(e,t){var n=e.maxPool(s,c)
return t([s,n]),n},{x:s},function(e,o){var a=o[0],s=o[1]
return{x:function(){return function(e,t,n,r,i,o,a,s){var u=Rp(e,"dy","maxPoolBackprop"),c=Rp(t,"input","maxPoolBackprop"),l=Rp(n,"output","maxPoolBackprop")
nf(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==o&&(o=[1,1]),nf(xm(i,o),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}),nf(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),nf(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."})
var h=lm(c.shape,r,i,o,a,void 0)
return fd.runKernel(function(e){return e.maxPoolBackprop(u,c,l,h)},{$dy:u,$input:c})}(e,a,s,t,n,r,i)}}})
return u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}function cw(e,t,n,r,i,o){var a=Rp(e,"x","avgPool","float32")
null==r&&(r=[1,1]),nf(xm(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})
var s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),nf(4===s.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),null!=o&&nf(cf(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})
var c=lm(s.shape,t,n,r,i,o),l=fd.runKernel(function(e){return e.avgPool(s,c)},{x:s},function(e){return{x:function(){return function(e,t,n,r,i,o){var a=Rp(e,"dy","avgPoolBackprop"),s=Rp(t,"input","avgPoolBackprop")
nf(s.rank===a.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"}),null==i&&(i=[1,1]),nf(xm(r,i),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})
var u=s,c=a,l=!1
3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),nf(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),nf(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."})
var h=lm(u.shape,n,r,i,o),f=fd.runKernel(function(e){return e.avgPoolBackprop(c,u,h)},{dy4D:c,input4D:u})
return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,i)}}})
return l=l.cast(a.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var lw=Mp({maxPool_:function(e,t,n,r,i){return uw(e,t,n,1,r,i)}}),hw=Mp({avgPool_:function(e,t,n,r,i){return cw(e,t,n,1,r,i)}}),fw=Mp({pool_:function(e,t,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid")
var a=Rp(e,"x","maxPool"),s=a,u=!1
3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),nf(xm(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})
var c,l=lm(s.shape,t,o,i,r),h=[l.dilationHeight,l.dilationWidth]
c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),i=n.map(function(e,t){return e-r[t]})
return n.map(function(e,t){return[r[t],i[t]]})}([l.filterHeight,l.filterWidth],h):[[0,0],[0,0]]
var f=1===h[0]&&1===h[1],d=function(e,t,n){var r=n.map(function(e){return e[0]}),i=n.map(function(e){return e[1]}),o=e.concat(r,i),a=t.map(function(e,t){return(e-o[t]%e)%e}),s=i.map(function(e,t){return e+a[t]})
return[t.map(function(e,t){return[r[t],s[t]]}),t.map(function(e,t){return[0,a[t]]})]}([l.inHeight,l.inWidth],h,c),p=d[0],v=d[1],m=f?r:"valid",g=f?s:Fv(s,h,p),y=("avg"===n?function(){return cw(g,t,o,1,m)}:function(){return uw(g,t,o,1,m)})(),b=f?y:gv(y,h,v)
return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),dw=Mp({maxPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC")
var s=Rp(e,"x","maxPool3d"),u=s,c=!1
4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),nf(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),nf("NDHWC"===o,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),nf(xm(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=i&&nf(cf(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})
var l=hm(u.shape,t,n,a,r,i,o),h=fd.runKernel(function(e,t){var n=e.maxPool3d(u,l)
return t([u,n]),n},{x:u},function(e,o){var s=o[0],u=o[1]
return{x:function(){return function(e,t,n,r,i,o,a,s){var u=Rp(e,"dy","maxPool3dBackprop"),c=Rp(t,"input","maxPool3dBackprop"),l=Rp(n,"output","maxPool3dBackprop"),h=u,f=c,d=l,p=!1
4===c.rank&&(p=!0,h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),nf(5===h.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."}),nf(5===f.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+f.rank+"."}),nf(5===d.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."}),null==o&&(o=[1,1,1]),nf(xm(i,o),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}),null!=s&&nf(cf(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."})
var v=hm(f.shape,r,i,o,a,s),m=fd.runKernel(function(e){return e.maxPool3dBackprop(h,f,d,v)},{dy5D:h,input5D:f})
return p?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,s,u,t,n,a,r,i)}}})
return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),pw=Mp({avgPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC")
var s=Rp(e,"x","avgPool3d","float32"),u=s,c=!1
4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),nf(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),nf("NDHWC"===o,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),nf(xm(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=i&&nf(cf(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})
var l=hm(u.shape,t,n,a,r,i,o),h=fd.runKernel(function(e){return e.avgPool3d(u,l)},{x:u},function(e){return{x:function(){return function(e,t,n,r,i,o,a){var s=Rp(e,"dy","avgPool3dBackprop"),u=Rp(t,"input","avgPool3dBackprop"),c=s,l=u,h=!1
4===u.rank&&(h=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),nf(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),nf(5===l.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."}),null==i&&(i=[1,1,1]),nf(xm(r,i),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),null!=a&&nf(cf(o),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."})
var f=hm(l.shape,n,r,i,o,a),d=fd.runKernel(function(e){return e.avgPool3dBackprop(c,l,f)},{dy5D:c,input5D:l})
return h?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(e,u,t,n,a,r,i)}}})
return h=h.cast(u.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),vw=Mp({slice_:function(e,t,n){var r,i,o=Rp(e,"x","slice")
if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach(function(e){nf(-1!==e,function(){return"slice() does not support negative begin indexing."})}),i=(i=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(nf(-1===e,function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."}),o.shape[t]-r[t])}),function(e,t,n){nf(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),nf(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."})
for(var r=function(r){nf(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},i=0;i<e.rank;++i)r(i)}(o,r,i)
var a=o.shape
return fd.runKernel(function(e){return e.slice(o,r,i)},{$x:o},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-i[n]])
return{$x:function(){return e.pad(t)}}})}}),mw=Mp({slice1d_:function(e,t,n){var r=Rp(e,"x","slice1d")
return nf(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),vw(r,[t],[n])}}),gw=Mp({slice2d_:function(e,t,n){var r=Rp(e,"x","slice2d")
return nf(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),vw(r,t,n)}}),yw=Mp({slice3d_:function(e,t,n){var r=Rp(e,"x","slice3d")
return nf(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),vw(r,t,n)}}),bw=Mp({slice4d_:function(e,t,n){var r=Rp(e,"x","slice4d")
return nf(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),vw(r,t,n)}})
function xw(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(Ap(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Ap(e.shape,r))),{$x:function(){var r=e.mul(n.equal(t).cast(e.dtype))
return null==i?r:r.transpose(i)}}}var ww=Mp({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","all","bool"),i=vf(t,r.shape),o=i,a=Op(o,r.rank)
null!=a&&(r=r.transpose(a),o=Np(o.length,r.rank))
var s=fd.runKernel(function(e){return e.all(r,o)},{$x:r})
if(n){var u=Ap(s.shape,i)
return s.reshape(u)}return s}}),_w=Mp({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","any","bool"),i=vf(t,r.shape),o=i,a=Op(o,r.rank)
null!=a&&(r=r.transpose(a),o=Np(o.length,r.rank))
var s=fd.runKernel(function(e){return e.any(r,o)},{$x:r})
if(n){var u=Ap(s.shape,i)
return s.reshape(u)}return s}}),Rw=Mp({argMax_:function(e,t){void 0===t&&(t=0)
var n=Rp(e,"x","argMax")
null==t&&(t=0)
var r=vf(t,n.shape),i=Op(r,n.rank)
return null!=i&&(n=n.transpose(i),r=Np(r.length,n.rank)),fd.runKernel(function(e,t){var i=e.argMax(n,r[0])
return t([n]),i},{$x:n},function(e,t){var n=t[0]
return{$x:function(){return Qp(n)}}})}}),Ew=Mp({argMin_:function(e,t){void 0===t&&(t=0)
var n=Rp(e,"x","argMin")
null==t&&(t=0)
var r=vf(t,n.shape),i=Op(r,n.rank)
return null!=i&&(n=n.transpose(i),r=Np(r.length,n.rank)),fd.runKernel(function(e,t){var i=e.argMin(n,r[0])
return t([n]),i},{$x:n},function(e,t){var n=t[0]
return{$x:function(){return Qp(n)}}})}}),Cw=Mp({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","logSumExp"),i=vf(t,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a)
if(n){var u=Ap(s.shape,i)
return s.reshape(u)}return s}}),kw=Mp({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","max"),i=r,o=vf(t,r.shape),a=o,s=Op(a,r.rank)
null!=s&&(r=r.transpose(s),a=Np(a.length,r.rank))
var u=fd.runKernel(function(e,t){var n=e.max(r,a)
return t([i,n]),n},{$x:r},function(e,t){return xw(e,t[1],t[0],o,s)})
if(n){var c=Ap(u.shape,o)
u=u.reshape(c)}return u}}),Sw=Mp({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","mean"),i=vf(t,r.shape),o=sf(Sp(r.shape,i)[1])
return rm(function(e){var r=Up(o)
return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice()
return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Gp(e.shape,"float32")).div(o)}}})(r)}}),Aw=Mp({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","min"),i=r,o=vf(t,r.shape),a=o,s=Op(a,r.rank)
null!=s&&(r=r.transpose(s),a=Np(a.length,r.rank))
var u=fd.runKernel(function(e,t){var n=e.min(r,a)
return t([i,n]),n},{$x:r},function(e,t){return xw(e,t[1],t[0],o,s)})
if(n){var c=Ap(u.shape,o)
u=u.reshape(c)}return u}}),Tw=Mp({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=vf(t,(e=Rp(e,"x","moments")).shape),i=e.mean(r,n),o=i.shape
n||(o=Ap(i.shape,r))
var a=e.toFloat().sub(i.reshape(o)).square()
return{mean:i,variance:a.mean(r,n)}}}),Ow=Mp({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","sum")
"bool"===r.dtype&&(r=r.toInt())
var i=vf(t,r.shape)
return rm(function(e){var t=Op(i,e.rank),r=i,o=e
null!=t&&(o=e.transpose(t),r=Np(r.length,e.rank))
var a=fd.runKernel(function(e){return e.sum(o,r)},{permutedX:o})
if(n){var s=Ap(a.shape,i)
a=a.reshape(s)}return{value:a,gradFunc:function(t){var n=e.shape.slice()
return i.forEach(function(e){n[e]=1}),t.reshape(n).mul(Gp(e.shape,"float32"))}}})(r)}}),Iw=Mp({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1)
var r=Rp(e,"x","prod")
"bool"===r.dtype&&(r=r.toInt())
var i=vf(t,r.shape),o=Op(i,r.rank),a=i,s=r
null!=o&&(s=r.transpose(o),a=Np(a.length,r.rank))
var u=fd.runKernel(function(e){return e.prod(s,a)},{permutedX:s})
if(n){var c=Ap(u.shape,i)
u=u.reshape(c)}return u}}),Nw=Mp({elu_:function(e){var t=Rp(e,"x","elu")
return fd.runKernel(function(e,n){var r=e.elu(t)
return n([r]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return fd.runKernel(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),Dw=Mp({leakyRelu_:function(e,t){void 0===t&&(t=.2)
var n=Rp(e,"x","leakyRelu")
return hx(Up(t).mul(n),n)}}),Pw=Mp({prelu_:function(e,t){var n=Rp(e,"x","prelu"),r=Rp(t,"alpha","prelu")
return fd.runKernel(function(e,t){var i=e.prelu(n,r)
return t([n,r]),i},{$x:n,$alpha:r},function(e,t){var n=t[0],r=t[1],i=n.greater(0)
return{$x:function(){return nx(i,e,e.mul(r))},$alpha:function(){var t=nx(i,Qp(e),e.mul(n)),o=um(r.shape,e.shape)
return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}})}}),Mw=Mp({relu_:function(e){var t=Rp(e,"x","relu")
return"bool"===t.dtype?t.toInt():fd.runKernel(function(e,n){var r=e.relu(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){return e.mulStrict(n.step().toFloat())}}})}}),Fw=Mp({selu_:function(e){var t=Rp(e,"x","selu")
return fd.runKernel(function(e,n){var r=e.selu(t)
return n([t]),r},{$x:t},function(e,t){var n=t[0]
return{$x:function(){var t=n.greater(Up(0)),r=Up(1.7580993408473768),i=Up(1.0507009873554805),o=e.mul(i),a=e.mul(r).mul(n.toFloat().exp())
return nx(t,o,a)}}})}}),Lw=Mp({transpose_:function(e,t){var n=Rp(e,"x","transpose")
return null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),nf(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){nf(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1?n.clone():fd.runKernel(function(e){return e.transpose(n,t)},{$x:n},function(e){var n=Ip(t)
return{$x:function(){return e.transpose(n)}}})}}),Bw=Mp({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5)
var o=Rp(e,"x","localResponseNormalization")
nf(4===o.rank||3===o.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),nf(cf(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."})
var a=o,s=!1
3===o.rank&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]))
var u=fd.runKernel(function(e,o){var s=e.localResponseNormalization4D(a,t,n,r,i)
return o([a,s]),s},{x4D:a},function(e,o){var a=o[0],s=o[1]
return{x4D:function(){return fd.runKernel(function(o){return o.LRNGrad(e,a,s,t,n,r,i)},{})}}})
return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),jw=Mp({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1)
var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs()
if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r)
if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r)
if(n===1/0)return t.abs().max(r)
if(n===-1/0)return t.abs().min(r)
if("euclidean"===n||2===n)return t.abs().pow(Up(2,"int32")).sum(r).sqrt()
throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1)
if(n===1/0)return t.abs().sum(r[1]).max(r[0])
if(n===-1/0)return t.abs().sum(r[1]).min(r[0])
if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt()
throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Rp(e,"x","norm"),t,n),o=i.shape
if(r){var a=vf(n,e.shape)
o=Ap(i.shape,a)}return i.reshape(o)}}),zw=Mp({basicLSTMCell_:function(e,t,n,r,i,o){var a=Rp(e,"forgetBias","basicLSTMCell"),s=Rp(t,"lstmKernel","basicLSTMCell"),u=Rp(n,"lstmBias","basicLSTMCell"),c=Rp(r,"data","basicLSTMCell"),l=Rp(i,"c","basicLSTMCell"),h=Rp(o,"h","basicLSTMCell"),f=c.concat(h,1).matMul(s).add(u),d=f.shape[0],p=f.shape[1]/4,v=[d,p],m=f.slice([0,0],v),g=f.slice([0,p],v),y=f.slice([0,2*p],v),b=f.slice([0,3*p],v),x=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid())
return[x,w]}}),Uw=Mp({multiRNNCell_:function(e,t,n,r){for(var i=Rp(t,"data","multiRNNCell"),o=Ep(n,"c","multiRNNCell"),a=Ep(r,"h","multiRNNCell"),s=i,u=[],c=0;c<e.length;c++){var l=e[c](s,o[c],a[c])
u.push(l[0]),u.push(l[1]),s=l[1]}var h=[],f=[]
for(c=0;c<u.length;c+=2)h.push(u[c]),f.push(u[c+1])
return[h,f]}}),Ww=Mp({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0)
var o=Rp(e,"v","movingAverage"),a=Rp(t,"x","movingAverage"),s=Rp(n,"decay","movingAverage")
sd(o,a),nf(uf(o.shape,a.shape),function(){return"Shape mismatch in v and x"})
var u=Up(1),c=u.sub(s),l=a.sub(o).mul(c)
if(i){nf(null!=r,function(){return"When using zeroDebias: true, step is required."})
var h=Rp(r,"step","movingAverage")
l=l.div(u.sub(bx(s,h)))}return o.add(l)}}),Vw=Mp({stridedSlice_:function(e,t,n,r,i,o,a,s,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported")
var c=Rp(e,"x","stridedSlice"),l=Qv(s),h=c.shape.slice()
l.forEach(function(e){t[e]=0,n[e]=1,h.splice(e,0,1)}),c=c.reshape(h)
for(var f=0;f<c.rank;f++)t[f]=Zv(i,t,r,c.shape,f),n[f]=em(o,n,r,c.shape,f),r[f]=r[f]||1
var d=Qv(u)
d.forEach(function(e){n[e]=t[e]+1,r[e]=1})
var p=Jv(t,n,r),v=p.filter(function(e,t){return-1===d.indexOf(t)})
return r.every(function(e){return 1===e})?vw(c,t,p).reshape(v):fd.runKernel(function(e){return e.stridedSlice(c,t,n,r)},{$x:c}).reshape(v)}}),qw=Mp({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0)
var r=Rp(e,"x","topk")
if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher")
var i=r.shape[r.shape.length-1]
if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t)
var o=fd.runKernel(function(e){return e.topk(r,t,n)},{$x:r})
return{values:o[0],indices:o[1]}}}),Hw=Mp({scatterND_:function(e,t,n){var r=Rp(e,"indices","scatterND","int32"),i=Rp(t,"updates","scatterND")
return function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".")
if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".")
if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype)
if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n)
if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape)
if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+"."
if(n.rank<i)throw new Error(o+" update.rank < "+i+". ")
if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)))
if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r))
for(var a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").")
for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+e[a+i]+")")}(n,t,e)}(i,r,n),fd.runKernel(function(e){return e.scatterND(r,i,n)},{$indices:r,$updates:i})}}),Gw=Mp({fft_:function(e){nf("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."})
var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t)
return fd.runKernel(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),Kw=Mp({ifft_:function(e){nf("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."})
var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t)
return fd.runKernel(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),$w=Mp({rfft_:function(e,t){nf("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype})
var n,r=e.shape[e.shape.length-1],i=e.size/r
if(null!=t&&t<r){var o=e.shape.map(function(e){return 0}),a=e.shape.map(function(e){return e})
a[e.shape.length-1]=t,n=e.slice(o,a),r=t}else if(null!=t&&t>r){var s=e.shape.map(function(e){return e})
s[e.shape.length-1]=t-r,n=e.concat(Kp(s),e.shape.length-1),r=t}else n=e
var u=n.zerosLike(),c=Fp(n,u).as2D(i,r),l=Gw(c),h=Math.floor(r/2)+1,f=Lp(l),d=Bp(l),p=f.split([h,r-h],f.shape.length-1),v=d.split([h,r-h],d.shape.length-1),m=n.shape.slice()
return m[n.shape.length-1]=h,Fp(p[0],v[0]).reshape(m)}}),Xw=Mp({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t
if(t<=2){var r=e.as2D(n,t),i=Kw(r)
return Lp(i)}var o=[n,2*(t-1)],a=Lp(e).as2D(n,t),s=Bp(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(Up(-1)),l=a.concat(u,1),h=s.concat(c,1)
return r=Fp(l,h).as2D(o[0],o[1]),i=Kw(r),Lp(i)}}),Yw=Object.freeze({fft:Gw,ifft:Kw,rfft:$w,irfft:Xw}),Qw=Mp({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0)
var i=Rp(e,"sparseIndices","sparseToDense","int32"),o=Rp(t,"sparseValues","sparseToDense"),a=Rp(r,"defaultValue","sparseToDense",o.dtype)
return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".")
if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".")
var i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1
if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".")
var a=t.size
if(0!==t.rank&&(1!==t.rank||a!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]")
if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),fd.runKernel(function(e){return e.sparseToDense(i,o,n,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),Jw=Mp({gatherND_:function(e,t){var n=Rp(t,"indices","gatherND","int32"),r=Rp(e,"x","gatherND")
return fd.runKernel(function(e){return e.gatherND(r,n)},{$x:r,$indices:n})}}),Zw=Mp({diag_:function(e){var t=Rp(e,"x","diag").flatten(),n=e.shape.concat(e.shape)
return fd.runKernel(function(e){return e.diag(t)},{$x:t}).reshape(n)}}),e_=Mp({dropout_:function(e,t,n,r){var i=Rp(e,"x","dropout")
if(nf("float32"===i.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),nf(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return e instanceof Yf?i.clone():i
var o=function(e,t){if(null==t)return e.shape.slice()
if(uf(e.shape,t))return t
if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r])
return n}return t}(i,n),a=1-t,s=Pv(o,0,1,"float32",r).add(a).floor().div(a)
return i.mul(s)}})
function t_(e,t,n){for(var r=1-e%2,i=new Float32Array(e),o=0;o<e;++o){var a=2*Math.PI*o/(e+r-1)
i[o]=t-n*Math.cos(a)}return Wp(i,"float32")}var n_,r_=Mp({hannWindow_:function(e){return t_(e,.5,.5)}}),i_=Mp({hammingWindow_:function(e){return t_(e,.54,.46)}}),o_=Mp({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0)
for(var o=0,a=[];o+t<=e.size;)a.push(vw(e,o,t)),o+=n
if(r)for(;o<e.size;){var s=o+t-e.size,u=Jp([vw(e,o,t-s),$p([s],i)])
a.push(u),o+=n}return 0===a.length?Vp([],[0,t]):Jp(a).as2D(a.length,t)}}),a_=Mp({stft_:function(e,t,n,r,i){var o
void 0===i&&(i=r_),null==r&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))))
for(var a=o_(e,t,n),s=gx(a,i(t)),u=[],c=0;c<a.shape[0];c++)u.push($w(s.slice([c,0],[1,t]),r))
return Jp(u)}}),s_=Object.freeze({hannWindow:r_,hammingWindow:i_,frame:o_,stft:a_})
!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(n_||(n_={}))
var u_=Mp({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=n_.SUM_BY_NONZERO_WEIGHTS)
var i=Rp(e,"labels","absoluteDifference"),o=Rp(t,"predictions","absoluteDifference"),a=null
null!=n&&(a=Rp(n,"weights","absoluteDifference")),rf(i.shape,o.shape,"Error in absoluteDifference: ")
var s=i.sub(o).abs()
return c_(s,a,r)}}),c_=Mp({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=n_.SUM_BY_NONZERO_WEIGHTS)
var r=Rp(e,"losses","computeWeightedLoss"),i=null
null!=t&&(i=Rp(t,"weights","computeWeightedLoss"))
var o=null==i?r:r.mul(i)
if(n===n_.NONE)return o
if(n===n_.SUM)return o.sum()
if(n===n_.MEAN){if(null==i)return o.mean()
var a=r.size/i.size,s=o.sum().div(i.sum())
return a>1?s.div(Up(a)):s}if(n===n_.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(Up(r.size))
var u=i.mul(Gp(r.shape)).notEqual(Up(0)).sum().toFloat()
return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),l_=Mp({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=n_.SUM_BY_NONZERO_WEIGHTS)
var o=Rp(e,"labels","cosineDistance"),a=Rp(t,"predictions","cosineDistance"),s=null
null!=r&&(s=Rp(r,"weights","cosineDistance")),rf(o.shape,a.shape,"Error in cosineDistance: ")
var u=Up(1).sub(o.mul(a).sum(n,!0))
return c_(u,s,i)}}),h_=Mp({hingeLoss_:function(e,t,n,r){void 0===r&&(r=n_.SUM_BY_NONZERO_WEIGHTS)
var i=Rp(e,"labels","hingeLoss"),o=Rp(t,"predictions","hingeLoss"),a=null
null!=n&&(a=Rp(n,"weights","hingeLoss")),rf(i.shape,o.shape,"Error in hingeLoss: ")
var s=Up(1)
i=Up(2).mul(i).sub(s)
var u=s.sub(i.mul(o)).relu()
return c_(u,a,r)}}),f_=Mp({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=n_.SUM_BY_NONZERO_WEIGHTS)
var o=Rp(e,"labels","huberLoss"),a=Rp(t,"predictions","huberLoss"),s=null
null!=n&&(s=Rp(n,"weights","huberLoss")),rf(o.shape,a.shape,"Error in huberLoss: ")
var u=Up(r),c=a.sub(o).abs(),l=dx(c,u),h=c.sub(l),f=Up(.5).mul(l.square()).add(u.mul(h))
return c_(f,s,i)}}),d_=Mp({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=n_.SUM_BY_NONZERO_WEIGHTS)
var o=Rp(e,"labels","logLoss"),a=Rp(t,"predictions","logLoss"),s=null
null!=n&&(s=Rp(n,"weights","logLoss")),rf(o.shape,a.shape,"Error in logLoss: ")
var u=Up(1),c=Up(r),l=o.mul(a.add(c).log()).neg().sub(u.sub(o).mul(u.sub(a).add(c).log()))
return c_(l,s,i)}}),p_=Mp({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=n_.SUM_BY_NONZERO_WEIGHTS)
var i=Rp(e,"labels","meanSquaredError"),o=Rp(t,"predictions","meanSquaredError"),a=null
null!=n&&(a=Rp(n,"weights","meanSquaredError")),rf(i.shape,o.shape,"Error in meanSquaredError: ")
var s=i.squaredDifference(o)
return c_(s,a,r)}}),v_=Mp({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=n_.SUM_BY_NONZERO_WEIGHTS)
var o=Rp(e,"multiClassLabels","sigmoidCrossEntropy"),a=Rp(t,"logits","sigmoidCrossEntropy"),s=null
if(null!=n&&(s=Rp(n,"weights","sigmoidCrossEntropy")),rf(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Up(r),c=Up(1),l=Up(.5)
o=o.mul(c.sub(u)).add(l.mul(u))}var h=function(e,t){var n=Rp(e,"labels","sigmoidCrossEntropyWithLogits"),r=Rp(t,"logits","sigmoidCrossEntropyWithLogits")
rf(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ")
var i=r.relu(),o=r.mul(n),a=r.abs().neg().exp().log1p()
return i.sub(o).add(a)}(o,a)
return c_(h,s,i)}}),m_=Mp({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=n_.SUM_BY_NONZERO_WEIGHTS)
var o=Rp(e,"onehotLabels","softmaxCrossEntropy"),a=Rp(t,"logits","softmaxCrossEntropy"),s=null
if(null!=n&&(s=Rp(n,"weights","softmaxCrossEntropy")),rf(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Up(r),c=Up(1),l=Up(o.shape[1])
o=o.mul(c.sub(u)).add(u.div(l))}var h=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n)
return rm(function(e,t,r){var i=t.logSumExp([n],!0),o=t.toFloat().sub(i)
return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],o=Ap(e.shape,[n])
return[e.reshape(o).mul(r.toFloat().sub(i.exp())),e.reshape(o).mul(i.exp().sub(r.toFloat()))]}}})(e,t)}(o,a)
return c_(h,s,i)}}),g_=Object.freeze({get Reduction(){return n_},absoluteDifference:u_,computeWeightedLoss:c_,cosineDistance:l_,hingeLoss:h_,huberLoss:f_,logLoss:d_,meanSquaredError:p_,sigmoidCrossEntropy:v_,softmaxCrossEntropy:m_})
function y_(e,t){return void 0===t&&(t=!1),fd.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.")
for(var n=e.shape[0],r=e.shape[1],i=Rv(n),o=e.clone(),a=Vp([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,c=function(e){var t,u=o,c=s,l=i
t=fd.tidy(function(){var t=o.slice([e,e],[n-e,1]),u=t.norm(),c=o.slice([e,e],[1,1]),l=Vp([[-1]]).where(c.greater(0),Vp([[1]])),h=c.sub(l.mul(u)),f=t.div(h)
s=1===f.shape[0]?a.clone():a.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0)
var d=l.matMul(h).div(u).neg(),p=o.slice([e,0],[n-e,r]),v=d.mul(s)
if(0===e)o=p.sub(v.matMul(s.transpose().matMul(p)))
else{var m=p.sub(v.matMul(s.transpose().matMul(p)))
o=o.slice([0,0],[e,r]).concat(m,0)}var g=i.slice([0,e],[n,i.shape[1]-e])
if(0===e)i=g.sub(g.matMul(s).matMul(v.transpose()))
else{var y=g.sub(g.matMul(s).matMul(v.transpose()))
i=i.slice([0,0],[n,e]).concat(y,1)}return[s,o,i]}),s=t[0],o=t[1],i=t[2],bp([u,c,l])},l=0;l<u;++l)c(l)
return!t&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var b_=Mp({gramSchmidt_:function(e){var t
if(Array.isArray(e)){t=!1,nf(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"})
for(var n=e[0].shape[0],r=function(t){nf(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},i=1;i<e.length;++i)r(i)}else t=!0,e=rv(e,e.shape[0],0).map(function(e){return Lv(e,[0])})
nf(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."})
var o=[],a=e,s=function(e){o.push(fd.tidy(function(){var t=a[e]
if(e>0)for(var n=0;n<e;++n){var r=Ow(o[n].mulStrict(t)).mul(o[n])
t=t.sub(r)}return t.div(jw(t,"euclidean"))}))}
for(i=0;i<e.length;++i)s(i)
return t?Bv(o,0):o}}),x_=Mp({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank)
if(2===e.rank)return y_(e,t)
var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=Uv(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[]
return r.forEach(function(e){var n=y_(e,t),r=n[0],a=n[1]
i.push(r),o.push(a)}),[Bv(i,0).reshape(e.shape),Bv(o,0).reshape(e.shape)]}}),w_=Object.freeze({gramSchmidt:b_,qr:x_})
function __(e,t,n,r,i){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY)
var o=e.shape[0]
return n=Math.min(n,o),nf(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),nf(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),nf(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),nf(1===t.rank,function(){return"scores must be a 1D tensor"}),nf(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var R_=Mp({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1)
var r=Rp(e,"images","resizeBilinear")
nf(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),nf(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."})
var i=r,o=!1
3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]))
var a=t[0],s=t[1],u=fd.runKernel(function(e,t){return t([i]),e.resizeBilinear(i,a,s,n)},{batchImages:i},function(e,t){return{batchImages:function(){return fd.runKernel(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}})
return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),E_=Mp({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1)
var r=Rp(e,"images","resizeNearestNeighbor")
nf(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),nf(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),nf("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"})
var i=r,o=!1
3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]))
var a=t[0],s=t[1],u=fd.runKernel(function(e,t){return t([i]),e.resizeNearestNeighbor(i,a,s,n)},{batchImages:i},function(e,t){return{batchImages:function(){return fd.runKernel(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}})
return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),C_=Mp({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY)
var o=Rp(e,"boxes","nonMaxSuppression"),a=Rp(t,"scores","nonMaxSuppression"),s=__(o,a,n,r,i)
return n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,fd.runKernel(function(e){return e.nonMaxSuppression(o,a,n,r,i)},{$boxes:o})}}),k_=Mp({cropAndResize_:function(e,t,n,r,i,o){var a=Rp(e,"image","cropAndResize","float32"),s=Rp(t,"boxes","cropAndResize","float32"),u=Rp(n,"boxInd","cropAndResize","int32")
i=i||"bilinear",o=o||0
var c=s.shape[0]
return nf(4===a.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),nf(2===s.rank&&4===s.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),nf(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),nf(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),nf(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),nf("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),fd.runKernel(function(e,t){return e.cropAndResize(a,s,u,r,i,o)},{$image:a,$boxes:s})}}),S_=Object.freeze({resizeBilinear:R_,resizeNearestNeighbor:E_,nonMaxSuppression:C_,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),Gh(this,void 0,void 0,function(){var o,a,s,u,c,l,h
return Kh(this,function(f){switch(f.label){case 0:return o=Rp(e,"boxes","nonMaxSuppressionAsync"),a=Rp(t,"scores","nonMaxSuppressionAsync"),s=__(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])]
case 1:return u=f.sent(),c=u[0],l=u[1],h=Tm(c,l,n,r,i),o!==e&&o.dispose(),a!==t&&a.dispose(),[2,h]}})})},cropAndResize:k_}),A_=Mp({matMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,o=void 0!==i&&i,a=e.transposeB,s=void 0!==a&&a,u=e.bias,c=e.activation,l=void 0===c?"linear":c,h=e.preluActivationWeights,f=Rp(n,"a","fused matMul"),d=Rp(r,"b","fused matMul")
t=ad(f,d),f=t[0],d=t[1]
var p=o?f.shape[f.rank-2]:f.shape[f.rank-1],v=s?d.shape[d.rank-1]:d.shape[d.rank-2],m=o?f.shape[f.rank-1]:f.shape[f.rank-2],g=s?d.shape[d.rank-2]:d.shape[d.rank-1],y=f.shape.slice(0,-2),b=d.shape.slice(0,-2),x=sf(y),w=sf(b)
nf(f.rank>=2&&d.rank>=2&&f.rank===d.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+d.rank+"."}),nf(uf(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+f.shape+" and "+d.shape+" must match."}),nf(p===v,function(){return"Error in fused matMul: inner shapes ("+p+") and ("+v+") of Tensors with shapes "+f.shape+" and "+d.shape+" and transposeA="+o+" and transposeB="+s+" must match."})
var _,R,E=f.shape.slice(0,-2).concat([m,g]),C=o?f.as3D(x,p,m):f.as3D(x,m,p),k=s?d.as3D(w,g,v):d.as3D(w,v,g)
null!=u&&cm(E,(_=ad(_=Rp(u,"bias","fused matMul"),f)[0]).shape),null!=h&&(R=Rp(h,"prelu weights","fused matMul"))
var S={$a:C,$b:k}
return null!=u&&(S.$bias=_),null!=h&&(S.$preluActivationWeights=R),fd.runKernel(function(e,t){var n=e.fusedBatchMatMul({a:C,b:k,transposeA:o,transposeB:s,bias:_,activation:l,preluActivationWeights:R})
return t([C,k,n]),n},S,function(e,t){var n,r=t[0],i=t[1],a=t[2]
if(null==l||"linear"===l)n=e
else{if("relu"!==l)throw new Error("Gradient for activation "+l+" has not been implemented yet.")
n=e.mul(a.step())}var c={}
return null!=u&&(c={$bias:function(){var e=n,t=um(_.shape,n.shape)
return t.length>0&&(e=e.sum(t)),e.reshape(_.shape)}}),o||s?!o&&s?Object.assign({$a:function(){return n.matMul(i,!1,!1)},$b:function(){return n.matMul(r,!0,!1)}},c):o&&!s?Object.assign({$a:function(){return i.matMul(n,!1,!0)},$b:function(){return r.matMul(n,!1,!1)}},c):Object.assign({$a:function(){return i.matMul(n,!0,!0)},$b:function(){return n.matMul(r,!0,!0)}},c):Object.assign({$a:function(){return n.matMul(i,!1,!0)},$b:function(){return r.matMul(n,!0,!1)}},c)}).reshape(E)}}),T_=Mp({conv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,o=e.dataFormat,a=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights,p=Rp(t,"x","conv2d"),v=Rp(n,"filter","conv2d"),m=p,g=!1
3===p.rank&&(g=!0,m=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),nf(4===m.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."}),nf(4===v.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."}),null!=c&&nf(cf(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),nf(m.shape[3]===v.shape[2],function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+v.shape[2]+"."}),nf(xm(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),nf("NHWC"===a,function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."})
var y,b,x=fm(m.shape,v.shape,r,u,i,c)
null!=l&&(y=ad(y=Rp(l,"bias","fused conv2d"),p)[0],cm(x.outShape,y.shape)),null!=d&&(b=Rp(d,"prelu weights","fused conv2d"))
var w={x:m,$filter:v}
null!=l&&(w.$bias=y),null!=d&&(w.$preluActivationWeights=b)
var _=fd.runKernel(function(e,t){var n=e.fusedConv2d(m,v,x,y,f,b)
return t([v,m,n]),n},w,function(e,t){var n,o=t,a=o[0],s=o[1],c=o[2]
if(null==f||"linear"===f)n=e
else{if("relu"!==f)throw new Error("Gradient for activation "+f+" has not been implemented yet.")
n=e.mul(c.step())}nf(bm(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"})
var h={}
return null!=l&&(h={$bias:function(){var e=n,t=um(y.shape,n.shape)
return t.length>0&&(e=e.sum(t)),e.reshape(y.shape)}}),Object.assign({x:function(){return Xx(s.shape,n,a,r,i)},$filter:function(){return $x(s,n,a.shape,r,i)}},h)})
return g?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),O_=Object.freeze({matMul:A_,conv2d:T_}),I_=Object.freeze({image:S_,linalg:w_,losses:g_,spectral:Yw,fused:O_,signal:s_,op:Mp,batchNormalization2d:qb,batchNormalization3d:Hb,batchNormalization4d:Gb,batchNormalization:Kb,batchNorm:$b,batchNorm2d:Xb,batchNorm3d:Yb,batchNorm4d:Qb,booleanMaskAsync:function(e,t,n){return Gh(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f,d,p,v
return Kh(this,function(m){switch(m.label){case 0:for(r=Rp(e,"tensor","boolMask"),i=Rp(t,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape,nf(a>0,function(){return"mask cannot be scalar"}),rf(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+a;c++)u*=s[c]
return l=s.slice(0,o).concat([u],s.slice(o+a)),h=r.reshape(l),f=i.reshape([-1]),[4,rx(f)]
case 1:return d=m.sent(),p=d.squeeze([1]),v=jx(h,p,o),e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),h.dispose(),f.dispose(),d.dispose(),[2,v]}})})},complex:Fp,real:Lp,imag:Bp,concat:Jp,concat1d:Zp,concat2d:ev,concat3d:tv,concat4d:nv,split:rv,conv1d:Hx,conv2d:Gx,conv3d:Kx,conv2dDerFilter:$x,conv2dDerInput:Xx,depthwiseConv2d:Yx,separableConv2d:Qx,conv2dTranspose:Jx,conv3dTranspose:Zx,matMul:ew,dot:tw,outerProduct:nw,reverse:rw,reverse1d:iw,reverse2d:ow,reverse3d:aw,reverse4d:sw,maxPool:lw,avgPool:hw,pool:fw,maxPool3d:dw,avgPool3d:pw,slice:vw,slice1d:mw,slice2d:gw,slice3d:yw,slice4d:bw,abs:rb,acos:ib,acosh:ob,asin:ab,asinh:sb,atan:ub,atanh:cb,ceil:lb,clipByValue:hb,cos:fb,cosh:db,erf:pb,exp:vb,expm1:mb,floor:gb,log:yb,log1p:bb,logSigmoid:xb,neg:wb,reciprocal:_b,round:Rb,rsqrt:Eb,sigmoid:Cb,sign:kb,isNaN:Sb,isInf:Ab,isFinite:Tb,sin:Ob,sinh:Ib,softplus:Nb,sqrt:Db,square:Pb,step:Mb,tan:Fb,tanh:Lb,all:ww,any:_w,argMax:Rw,argMin:Ew,logSumExp:Cw,max:kw,mean:Sw,min:Aw,moments:Tw,sum:Ow,prod:Iw,equal:Cx,equalStrict:kx,greater:Sx,greaterEqual:Ax,greaterEqualStrict:Tx,greaterStrict:Ox,less:Ix,lessEqual:Nx,lessEqualStrict:Dx,lessStrict:Px,notEqual:Mx,notEqualStrict:Fx,add:ix,addN:ox,addStrict:ax,atan2:sx,div:ux,divStrict:cx,floorDiv:lx,maximum:hx,maximumStrict:fx,minimum:dx,minimumStrict:px,mod:vx,modStrict:mx,mul:gx,mulStrict:yx,pow:bx,powStrict:xx,squaredDifference:wx,squaredDifferenceStrict:_x,sub:Rx,subStrict:Ex,elu:Nw,leakyRelu:Dw,prelu:Pw,relu:Mw,selu:Fw,logicalAnd:Jb,logicalNot:Zb,logicalOr:ex,logicalXor:tx,where:nx,whereAsync:rx,buffer:mv,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:gv,cast:yv,clone:bv,cumsum:xv,depthToSpace:wv,expandDims:_v,eye:Rv,multinomial:Ev,oneHot:Cv,pad:kv,pad1d:Sv,pad2d:Av,pad3d:Tv,pad4d:Ov,rand:Iv,randomNormal:Nv,randomGamma:Dv,randomUniform:Pv,reshape:Mv,spaceToBatchND:Fv,squeeze:Lv,stack:Bv,tile:jv,truncatedNormal:zv,unstack:Uv,setdiff1dAsync:function(e,t){return Gh(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h
return Kh(this,function(f){switch(f.label){case 0:return n=Rp(e,"x","setdiff1d"),r=Rp(t,"y","setdiff1d"),nf(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),nf(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),nf(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()]
case 1:return i=f.sent(),[4,r.data()]
case 2:for(o=f.sent(),a=new Set(o),s=0,l=0;l<i.length;l++)a.has(i[l])||s++
for(u=new Gf([s],n.dtype),c=new Gf([s],"int32"),l=0,h=0;l<i.length;l++)a.has(i[l])||(u.values[h]=i[l],c.values[h]=l,h++)
return[2,[u.toTensor(),c.toTensor()]]}})})},fill:$p,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.")
return fd.runKernel(function(r){return r.linspace(e,t,n)},{})},ones:Gp,range:Xp,scalar:Up,tensor:jp,tensor1d:Wp,tensor2d:Vp,tensor3d:qp,tensor4d:Hp,tensor5d:function(e,t,n){if(of(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers")
var r=wp(e,n)
if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array")
return zp(e,t,r,n)},tensor6d:function(e,t,n){if(of(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers")
var r=wp(e,n)
if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray")
if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array")
return zp(e,t=t||r,r,n)},zeros:Kp,onesLike:Yp,zerosLike:Qp,transpose:Lw,softmax:im,logSoftmax:om,localResponseNormalization:Bw,norm:jw,gather:jx,unsortedSegmentSum:zx,basicLSTMCell:zw,multiRNNCell:Uw,movingAverage:Ww,stridedSlice:Vw,topk:qw,scatterND:Hw,fft:Gw,ifft:Kw,rfft:$w,irfft:Xw,sparseToDense:Qw,gatherND:Jw,diag:Zw,dropout:e_,hannWindow:r_,hammingWindow:i_,frame:o_,stft:a_,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Gh(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h,f,d,p,v,m
return Kh(this,function(g){switch(g.label){case 0:return r=Rp(e,"predictions","inTopK"),i=Rp(t,"targets","inTopK"),nf(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),nf(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),rf(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],nf(n>0&&n<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n}),[4,r.data()]
case 1:return a=g.sent(),[4,i.data()]
case 2:for(s=g.sent(),u=[a.length/o,o],l=u[1],h=gf("bool",c=u[0]),f=0;f<c;f++){for(d=f*l,p=a.subarray(d,d+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m})
for(v.sort(function(e,t){return t.value-e.value}),h[f]=0,m=0;m<n;m++)if(v[m].index===s[f]){h[f]=1
break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,jp(h,i.shape,"bool")]}})})}})
function N_(e,t,n,r){if("linear"===n)return e.linear(t)
if("relu"===n)return e.relu(t)
if("elu"===n)return e.elu(t)
if("prelu"===n)return e.prelu(t,r)
throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var D_=function(){function e(){if(this.blockSize=48,this.firstUse=!0,Yh.get("IS_BROWSER")){var e="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(300,150):"undefined"!=typeof document?document.createElement("canvas"):null
null!==e&&(this.fromPixels2DContext=e.getContext("2d"))}this.data=new am(this,fd)}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,Yh.get("IS_NODE")&&xp("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered")
this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null")
this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null")
var n,r,i=e.data instanceof Uint8Array,o="undefined"!=typeof ImageData&&e instanceof ImageData,a="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,u=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=u[0],l=u[1]
if(Yh.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package")
if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,c,l).data
else if(o||i)n=e.data
else{if(!s&&!a)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name)
if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.")
this.fromPixels2DContext.canvas.width=c,this.fromPixels2DContext.canvas.height=l,this.fromPixels2DContext.drawImage(e,0,0,c,l),n=this.fromPixels2DContext.getImageData(0,0,c,l).data}if(4===t)r=new Int32Array(n)
else{var h=c*l
r=new Int32Array(h*t)
for(var f=0;f<h;f++)for(var d=0;d<t;++d)r[f*t+d]=n[4*f+d]}return qp(r,[l,c,t],"int32")},e.prototype.read=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){return[2,this.readSync(e)]})})},e.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors
return"complex64"===n?Cm(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},e.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t
if("string"===e.dtype)try{n=t.map(function(e){return jf(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return mv(e.shape,e.dtype,n)},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors
null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){return t=Ff(),e(),[2,{kernelMs:Ff()-t}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(e,t){var n=Yf.make(e.shape,{},"complex64")
return this.data.get(n.dataId).complexTensors={real:fd.keep(e.clone()),imag:fd.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&nf("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})},e.prototype.slice=function(e,t,n){if(this.assertNotComplex(e,"slice"),tm(e.shape,t,n)){var r=nm(t,e.strides),i=sf(n)
return jp(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var o=mv(n,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s).map(function(e,n){return e+t[n]})
o.values[s]=a.get.apply(a,u)}return o.toTensor()},e.prototype.stridedSlice=function(e,t,n,r){this.assertNotComplex(e,"stridedSlice")
var i=Jv(t,n,r)
if(i.some(function(e){return 0===e}))return jp([],i)
for(var o=mv(i,e.dtype),a=this.bufferSync(e),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+t[l]
o.set.apply(o,[a.get.apply(a,c)].concat(u))}return o.toTensor()},e.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=mv([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i]
return n.toTensor()},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o])
var a=new Array(e.rank).fill(0),s=e.shape.slice()
s[t]=1
var u=new Array(n)
for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r)
return u},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse")
for(var n=mv(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var o=n.indexToLoc(i),a=o.slice()
t.forEach(function(t){return a[t]=e.shape[t]-1-a[t]}),n.set.apply(n,[r.get.apply(r,a)].concat(o))},o=0;o<n.size;o++)i(o)
return n.toTensor()},e.prototype.concat=function(e,t){var n=this
if("complex64"===e[0].dtype){var r=e.map(function(e){return Lp(e)}),i=e.map(function(e){return Bp(e)})
return Fp(this.concat(r,t),this.concat(i,t))}var o=e.map(function(e){var n=sf(e.shape.slice(t))
return e.as2D(-1,n)}),a=Pp(o.map(function(e){return e.shape}),1),s=mv(a,e[0].dtype).values
if(1===o[0].shape[0]){var u=0
o.forEach(function(e){s.set(n.readSync(e.dataId),u),u+=e.size})}else{var c=0
o.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var o=i*a[1]+c,u=0;u<e.shape[1];++u)s[o+u]=t[r++]
c+=e.shape[1]})}var l=Pp(e.map(function(e){return e.shape}),t)
return jp(s,l,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(Up(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,id(e.dtype,t.dtype),function(e,t){return e+t})},e.prototype.addN=function(e){var t=this
this.assertNotComplex(e,"addN")
for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=mv(e[0].shape,e[0].dtype),i=r.values,o=0;o<e.length;o++)for(var a=n[o],s=0;s<i.length;s++)i[s]+=a[s]
return r.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,id(e.dtype,t.dtype),function(e,t){return e-t})},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul")
for(var i=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=l[0],f=l[1],d=l[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=p[0],m=p[1],g=p[2],y=o*a,b=mv([s,o,a],e.dtype),x=b.values,w=this.blockSize,_=0;_<s;_++)for(var R=0;R<o;R+=w)for(var E=0;E<a;E+=w)for(var C=0;C<i;C+=w)for(var k=Math.min(R+w,o),S=Math.min(E+w,a),A=Math.min(C+w,i),T=R;T<k;T++)for(var O=E;O<S;O++){for(var I=0,N=C;N<A;N++)I+=u[_*h+T*f+N*d]*c[N*v+O*m+_*g]
x[_*y+(T*a+O)]+=I}return b.toTensor()},e.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,i)
return o&&(u=this.add(u,o)),a&&(u=N_(this,u,a,s)),u},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,id(e.dtype,t.dtype),function(e,t){return e*t})},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),Tp("sum",t,e.rank)
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,id(e.dtype,"int32")),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=0,f=0;f<a;++f)h+=u[l+f]
s[c]=h}return o},e.prototype.prod=function(e,t){this.assertNotComplex(e,"sum")
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,id(e.dtype,"int32")),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=1,f=0;f<a;++f)h*=u[l+f]
s[c]=h}return o},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum")
for(var r=[],i=e.rank-t.rank,o=0;o<i;++o)t=t.expandDims(o+1)
for(o=0;o<n;++o){var a=Up(o,"int32"),s=Cx(a,t).asType("float32").mul(e).sum(0)
r.push(s)}return Bv(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin")
var n=[t]
Tp("argMin",n,e.rank)
for(var r=Sp(e.shape,n),i=r[0],o=r[1],a=Kp(i,"int32"),s=sf(o),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p]
v<f&&(f=v,d=p)}u[l]=d}return a},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax")
var n=[t]
Tp("argMax",n,e.rank)
for(var r=Sp(e.shape,n),i=r[0],o=r[1],a=Kp(i,"int32"),s=sf(o),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<u.length;++l){for(var h=l*s,f=c[h],d=0,p=0;p<s;++p){var v=c[h+p]
v>f&&(f=v,d=p)}u[l]=d}return a},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t)
for(var i=id(e.dtype,"int32"),o=Kp(e.shape,i),a=this.readSync(o.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],c=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},l=0;l<s.length;l+=u)for(var h=0;h<u;h++){var f=c(l,h)
if(0===h)a[f]=n?0:s[f]
else{var d=c(l,h-1)
a[f]=n?s[d]+a[d]:s[f]+a[d]}}return o},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1
return Yf.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select")
for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),o=this.readSync(n.dataId),a=Kp(t.shape,id(t.dtype,n.dtype)),s=this.readSync(a.dataId),u=0,c=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],l=0;l<r.length;l++)for(var h=0;h<c;h++)1===r[l]?s[u++]=i[l]:s[u++]=o[l]
return a},e.prototype.where=function(e){this.assertNotComplex([e],"where")
var t=this.readSync(e.dataId)
return Pm(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),Dm(this.readSync(e.dataId),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),Tp("min",t,e.rank)
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,e.dtype),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
d<h&&(h=d)}s[c]=h}return o},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t
return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),Tp("max",t,e.rank)
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,e.dtype),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
d>h&&(h=d)}s[c]=h}return o},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),Tp("all",t,e.rank)
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,e.dtype),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
h=h&&d}s[c]=h}return o},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),Tp("any",t,e.rank)
for(var n=Sp(e.shape,t),r=n[0],i=n[1],o=Kp(r,e.dtype),a=sf(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),c=0;c<s.length;++c){for(var l=c*a,h=u[l],f=0;f<a;++f){var d=u[l+f]
h=h||d}s[c]=h}return o},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t
return n*n})},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r])
return Yf.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r])
return Yf.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0
return Yf.make(e.shape,{values:n})},e.prototype.isNaN=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1)
return Yf.make(e.shape,{values:n},"bool")},e.prototype.isInf=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1)
return Yf.make(e.shape,{values:n},"bool")},e.prototype.isFinite=function(e){this.assertNotComplex(e,"x")
for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1)
return Yf.make(e.shape,{values:n},"bool")},e.prototype.round=function(e){this.assertNotComplex(e,"round")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r])
t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return Yf.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r])
return Yf.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r])
return Yf.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.log(i)}return Yf.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.log1p(i)}return Yf.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=Math.sqrt(i)}return Yf.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=1/Math.sqrt(i)}return Yf.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r]
n[r]=i*i}return Yf.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal")
for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r]
return Yf.make(e.shape,{values:n})},e.prototype.linear=function(e){return e},e.prototype.relu=function(e){this.assertNotComplex(e,"relu")
for(var t=Kp(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i])
return t},e.prototype.prelu=function(e,t){return this.assertNotComplex([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},e.prototype.elu=function(e){this.assertNotComplex(e,"elu")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r]
t[r]=i>=0?i:Math.exp(i)-1}return Yf.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer")
for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o]
n[o]=a>=1?i[o]:i[o]*(a+1)}return Yf.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r]
t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return Yf.make(e.shape,{values:t})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip")
for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o]
r[o]=a>n?n:a<t?t:a}return Yf.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],o=n[2*r+1]
t[r]=Math.hypot(i,o)}return Yf.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int")
for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r]
return Yf.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]))
return Yf.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus")
for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o,a=r[i]>-t,s=r[i]<t,u=Math.exp(r[i])
o=s?u:a?r[i]:Math.log(1+u),n[i]=o}return Yf.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=lf(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r])
return Yf.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf")
for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r],o=1/(1+.3275911*i)
t[r]=1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i)}return Yf.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step")
for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i]
isNaN(o)?n[i]=NaN:n[i]=o>0?1:t}return Yf.make(e.shape,{values:n})},e.prototype.fusedConv2d=function(e,t,n,r,i,o){var a=this.conv2d(e,t,n)
return r&&(a=this.add(a,r)),i&&(a=N_(this,a,i,o)),a},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d")
for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=mv(n.outShape,e.dtype),h=e.strides[0],f=c?e.strides[1]:e.strides[2],d=c?e.strides[2]:1,p=c?1:e.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=l.values,_=0;_<n.batchSize;++_)for(var R=_*h,E=_*v,C=0;C<n.outHeight;++C)for(var k=E+C*m,S=C*n.strideHeight-u,A=0;A<r;A++){var T=S+A*o
if(!(T<0||T>=n.inHeight))for(var O=A*t.strides[0],I=R+T*f,N=0;N<n.outWidth;++N)for(var D=k+N*g,P=N*n.strideWidth-s,M=0;M<i;M++){var F=P+M*a
if(!(F<0||F>=n.inWidth))for(var L=I+F*d,B=O+M*t.strides[1],j=0;j<n.inChannels;++j){for(var z=b[L+j*p],U=0;U<n.outChannels;++U)w[D+U*y]+=z*x[B+U]
B+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,h=n.padInfo.top,f=mv(n.outShape,e.dtype),d=this.readSync(e.dataId),p=this.readSync(t.dataId),v=f.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-c,_=0;_<r;_++){var R=w+_*a
if(!(R<0||R>=n.inDepth))for(var E=_*t.strides[0],C=g+R*e.strides[1],k=0;k<n.outHeight;++k)for(var S=x+k*f.strides[2],A=k*n.strideHeight-h,T=0;T<i;T++){var O=A+T*s
if(!(O<0||O>=n.inHeight))for(var I=E+T*t.strides[1],N=C+O*e.strides[2],D=0;D<n.outWidth;++D)for(var P=S+D*n.outChannels,M=D*n.strideWidth-l,F=0;F<o;F++){var L=M+F*u
if(!(L<0||L>=n.inWidth))for(var B=I+F*t.strides[2],j=N+L*n.inChannels,z=B,U=0;U<n.inChannels;++U){for(var W=d[j+U],V=0;V<n.outChannels;++V)v[P+V]+=W*p[z+V]
z+=n.outChannels}}}}return f.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput")
for(var r=mv(n.inShape,"float32"),i=r.values,o=this.readSync(e.dataId),a=this.readSync(t.dataId),s=t.strides,u=s[0],c=s[1],l=s[2],h=n.batchSize,f=n.filterHeight,d=n.filterWidth,p=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,_=n.dataFormat,R=f-1-n.padInfo.top,E=d-1-n.padInfo.left,C="channelsLast"===_,k=r.strides[0],S=C?r.strides[1]:r.strides[2],A=C?r.strides[2]:1,T=C?1:r.strides[1],O=e.strides[0],I=C?e.strides[1]:e.strides[2],N=C?e.strides[2]:1,D=C?1:e.strides[1],P=0;P<h;++P)for(var M=0;M<p;++M)for(var F=0;F<v;++F)for(var L=F-R,B=Math.max(0,Math.ceil(L/x)),j=Math.min(y,(f+L)/x),z=0;z<m;++z){for(var U=z-E,W=Math.max(0,Math.ceil(U/w)),V=Math.min(b,(d+U)/w),q=0,H=B;H<j;++H)for(var G=H*x-L,K=W;K<V;++K)for(var $=O*P+I*H+N*K,X=u*(f-1-G)+c*(d-1-(K*w-U))+l*M,Y=0;Y<g;++Y)q+=o[$+D*Y]*a[X+Y]
i[k*P+S*F+A*z+T*M]=q}return r.toTensor()},e.prototype.conv3dDerInput=function(e,t,n){for(var r=mv(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],c=o[3],l=this.readSync(e.dataId),h=e.strides,f=h[0],d=h[1],p=h[2],v=h[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],_=n.batchSize,R=n.filterDepth,E=n.filterHeight,C=n.filterWidth,k=n.inChannels,S=n.inDepth,A=n.inHeight,T=n.inWidth,O=n.outChannels,I=n.outDepth,N=n.outHeight,D=n.outWidth,P=n.strideDepth,M=n.strideHeight,F=n.strideWidth,L=R-1-n.padInfo.front,B=E-1-n.padInfo.top,j=C-1-n.padInfo.left,z=0;z<_;++z)for(var U=0;U<k;++U)for(var W=0;W<S;++W)for(var V=W-L,q=Math.max(0,Math.ceil(V/P)),H=Math.min(I,(R+V)/P),G=0;G<A;++G)for(var K=G-B,$=Math.max(0,Math.ceil(K/M)),X=Math.min(N,(E+K)/M),Y=0;Y<T;++Y){for(var Q=Y-j,J=Math.max(0,Math.ceil(Q/F)),Z=Math.min(D,(C+Q)/F),ee=0,te=q;te<H;++te)for(var ne=te*P-V,re=$;re<X;++re)for(var ie=re*M-K,oe=J;oe<Z;++oe)for(var ae=f*z+d*te+p*re+v*oe,se=y*(R-1-ne)+b*(E-1-ie)+x*(C-1-(oe*F-Q))+w*U,ue=0;ue<O;++ue)ee+=l[ae+ue]*m[se+ue]
i[a*z+s*W+u*G+c*Y+U]=ee}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,u=mv(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<o;++d)for(var p=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((c-m)/i)),y=Math.min(n.outWidth,(n.inWidth+c-m)/i),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,_=0;_<n.batchSize;++_)for(var R=p;R<v;++R)for(var E=d+R*r-l,C=g;C<y;++C){var k=m+C*i-c
w+=s?h.get(_,E,k,b)*f.get(_,R,C,x):h.get(_,b,E,k)*f.get(_,x,R,C)}u.set(w,d,m,b,x)}return u.toTensor()},e.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=mv(n.filterShape,"float32"),l=c.values,h=c.strides,f=h[0],d=h[1],p=h[2],v=h[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],_=this.readSync(e.dataId),R=e.strides,E=R[0],C=R[1],k=R[2],S=R[3],A=n.padInfo.front,T=n.padInfo.left,O=n.padInfo.top,I=0;I<a;++I)for(var N=Math.max(0,Math.ceil((A-I)/r)),D=Math.min(n.outDepth,(n.inDepth+A-I)/r),P=I*f,M=0;M<s;++M)for(var F=Math.max(0,Math.ceil((O-M)/i)),L=Math.min(n.outHeight,(n.inHeight+O-M)/i),B=M*d+P,j=0;j<u;++j)for(var z=Math.max(0,Math.ceil((T-j)/o)),U=Math.min(n.outWidth,(n.inWidth+T-j)/o),W=j*p+B,V=0;V<n.inChannels;++V)for(var q=V*v+W,H=0;H<n.outChannels;++H){for(var G=0,K=0;K<n.batchSize;++K)for(var $=K*E,X=K*y,Y=N;Y<D;++Y)for(var Q=(I+Y*r-A)*C+$,J=Y*b+X,Z=F;Z<L;++Z)for(var ee=(M+Z*i-O)*k+Q,te=Z*x+J,ne=z;ne<U;++ne){var re=ne*w+te
G+=_[(j+ne*o-T)*S+ee+V]*m[re+H]}l[q+H]=G}return c.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D")
for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=mv(n.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(t.dataId),d=l.values,p=0;p<n.batchSize;++p)for(var v=p*e.strides[0],m=p*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],b=g*n.strideHeight-s,x=0;x<r;++x){var w=b+x*o
if(!(w<0||w>=n.inHeight))for(var _=x*t.strides[0],R=v+w*e.strides[1],E=0;E<n.outWidth;++E)for(var C=y+E*l.strides[2],k=E*n.strideWidth-u,S=0;S<i;++S){var A=k+S*a
if(!(A<0||A>=n.inWidth))for(var T=_+S*t.strides[1],O=R+A*n.inChannels,I=C,N=T,D=0;D<n.inChannels;++D){for(var P=h[O+D],M=0;M<c;++M)d[I+M]+=P*f[N+M]
I+=c,N+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput")
for(var r=mv(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],c=this.readSync(e.dataId),l=e.strides,h=l[0],f=l[1],d=l[2],p=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,_=n.inChannels,R=n.inHeight,E=n.inWidth,C=n.outChannels,k=n.outHeight,S=n.outWidth,A=n.strideHeight,T=n.strideWidth,O=x-1-n.padInfo.top,I=w-1-n.padInfo.left,N=C/_,D=0;D<b;++D)for(var P=0;P<_;++P)for(var M=0;M<R;++M)for(var F=M-O,L=Math.max(0,Math.ceil(F/A)),B=Math.min(k,(x+F)/A),j=0;j<E;++j){for(var z=j-I,U=Math.max(0,Math.ceil(z/T)),W=Math.min(S,(w+z)/T),V=0,q=L;q<B;++q)for(var H=q*A-F,G=U;G<W;++G)for(var K=h*D+f*q+d*G,$=m*(x-1-H)+g*(w-1-(G*T-z))+y*P,X=0;X<N;++X)V+=c[K+(P*N+X)]*p[$+X]
i[a*D+s*M+u*j+P]=V}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=mv(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,h=this.bufferSync(e),f=this.bufferSync(t),d=0;d<o;++d)for(var p=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((u-m)/i)),y=Math.min(n.outWidth,(n.inWidth+u-m)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,_=0,R=0;R<n.batchSize;++R)for(var E=p;E<v;++E)for(var C=d+E*r-c,k=g;k<y;++k){var S=m+k*i-u
_+=h.get(R,C,S,x)*f.get(R,E,k,b)}s.set(_,d,m,x,w)}return s.toTensor()},e.prototype.tile=function(e,t){return this.assertNotComplex(e,"tile"),Nm(this.bufferSync(e),t)},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad")
var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),i=t.map(function(e){return e[0]}),o=this.bufferSync(e),a=mv(r,e.dtype)
0!==n&&a.values.fill(n)
for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),c=u.map(function(e,t){return e+i[t]})
a.set.apply(a,[o.get.apply(o,u)].concat(c))}return a.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose")
for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]]
var i=this.readSync(e.dataId),o=mv(n,e.dtype),a=this.bufferSync(e)
for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[t[c]]
var l=o.locToIndex(u)
o.values[l]=i[r]}return o.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather")
var r=e.shape.slice(),i=this.readSync(t.dataId)
r[n]=i.length
for(var o=mv(r,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s),c=u.slice()
c[n]=i[u[n]]
var l=a.locToIndex(c)
o.values[s]=a.values[l]}return o.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND")
var r=t.reduce(function(e,t){return e*t}),i=Wv(e.shape,t,r),o=Vv(i.length,t.length),a=qv(e.shape,t,r),s=Hv(n,t.length),u=Gv(a,n,t.length)
return e.reshape(i).transpose(o).reshape(a).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND")
var r=t.reduce(function(e,t){return e*t}),i=[[0,0]]
i.push.apply(i,n)
for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0])
var a=e.pad(i),s=Wv(a.shape,t,r,!1),u=Vv(s.length,t.length,!1),c=qv(a.shape,t,r,!1)
return a.reshape(s).transpose(u).reshape(c)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool")
for(var r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(e.dataId),d=mv(t.outShape,e.dtype),p=d.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var _=0;_<t.outHeight;++_)for(var R=_*r-c,E=Math.max(0,R),C=Math.min(t.inHeight,s+R),k=b+_*m,S=0;S<t.outWidth;++S){for(var A=S*i-l,T=Math.max(0,A),O=Math.min(t.inWidth,u+A),I=h,N=0,D=0,P=E;P<C;P+=o){for(var M=x+P*e.strides[1],F=T;F<O;F+=a){var L=f[M+F*e.strides[2]+w]
"max"===n&&L>I?I=L:"avg"===n&&(N+=L,D++)}if(isNaN(I))break}p[k+S*g+w]="avg"===n?N/D:I}return d.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=mv(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,h=this.bufferSync(e),f=0;f<t.batchSize;++f)for(var d=0;d<t.inChannels;++d)for(var p=0;p<t.outHeight;++p){for(var v=p*r-c,m=v;m<0;)m+=o
for(var g=Math.min(t.inHeight,s+v),y=0;y<t.outWidth;++y){for(var b=y*i-l,x=b;x<0;)x+=a
for(var w=Math.min(t.inWidth,u+b),_=Number.NEGATIVE_INFINITY,R=-1,E=m;E<g;E+=o)for(var C=E-v,k=x;k<w;k+=a){var S=k-b,A=h.get(f,E,k,d)
A>_&&(_=A,R=C*u+S)}n.set(R,f,p,y,d)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop")
for(var i=this.maxPoolPositions(t,r),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,h=l-1-r.padInfo.left,f=c-1-r.padInfo.top,d=mv(t.shape,"float32"),p=this.bufferSync(i),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-f,w=b-h,_=0,R=0;R<c;R+=s){var E=(x+R)/o
if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var C=0;C<l;C+=u){var k=(w+C)/a
if(!(k<0||k>=r.outWidth||Math.floor(k)!==k)){var S=c*l-1-p.get(m,E,k,g)===R*l+C?1:0
0!==S&&(_+=v.get(m,E,k,g)*S)}}}d.set(_,m,y,b,g)}return d.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop")
for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,h=l-1-n.padInfo.left,f=c-1-n.padInfo.top,d=mv(t.shape,"float32"),p=1/(o*a),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-h,_=0,R=0;R<c;R+=s){var E=(x+R)/r
if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var C=0;C<l;C+=u){var k=(w+C)/i
k<0||k>=n.outWidth||Math.floor(k)!==k||(_+=v.get(m,E,k,g))}}d.set(_*p,m,y,b,g)}return d.toTensor()},e.prototype.pool3d=function(e,t,n){this.assertNotComplex(e,"pool3d")
for(var r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=mv(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],_=t.outShape[4],R=0;R<t.batchSize;++R)for(var E=R*b,C=R*e.strides[0],k=0;k<t.inChannels;++k)for(var S=0;S<t.outDepth;++S){for(var A=S*r-f,T=A;T<0;)T+=a
for(var O=Math.min(t.inDepth,c+A),I=E+S*x,N=0;N<t.outHeight;++N){for(var D=N*i-d,P=D;P<0;)P+=s
for(var M=Math.min(t.inHeight,l+D),F=I+N*w,L=0;L<t.outWidth;++L){for(var B=L*o-p,j=B;j<0;)j+=u
for(var z=Math.min(t.inWidth,h+B),U=F+L*_,W=v,V=0,q=0,H=T;H<O;H+=a){for(var G=C+H*e.strides[1],K=P;K<M;K+=s){for(var $=G+K*e.strides[2],X=j;X<z;X+=u){var Y=m[$+X*e.strides[3]+k]
if("max"===n&&Y>W?W=Y:"avg"===n&&(V+=Y,q++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}y[U+k]="avg"===n?V/q:W}}}return g.toTensor()},e.prototype.avgPool3d=function(e,t){return this.assertNotComplex(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPool3dBackprop")
for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,h=n.dilationWidth,f=n.effectiveFilterDepth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=f-1-n.padInfo.front,m=p-1-n.padInfo.left,g=d-1-n.padInfo.top,y=mv(t.shape,"float32"),b=1/(a*s*u),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var _=0;_<n.inChannels;++_)for(var R=0;R<n.inDepth;++R)for(var E=0;E<n.inHeight;++E)for(var C=0;C<n.inWidth;++C){for(var k=R-v,S=E-g,A=C-m,T=0,O=0;O<f;O+=c){var I=(k+O)/r
if(!(I<0||I>=n.outDepth||Math.floor(I)!==I))for(var N=0;N<d;N+=l){var D=(S+N)/i
if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var P=0;P<p;P+=h){var M=(A+P)/o
M<0||M>=n.outWidth||Math.floor(M)!==M||(T+=x.get(w,I,D,M,_))}}}y.set(T*b,w,R,E,C,_)}return y.toTensor()},e.prototype.maxPool3d=function(e,t){return this.assertNotComplex(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},e.prototype.maxPool3dPositions=function(e,t){for(var n=mv(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left,v=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-f,x=b;x<0;)x+=a
for(var w=Math.min(t.inDepth,c+b),_=0;_<t.outHeight;++_){for(var R=_*i-d,E=R;E<0;)E+=s
for(var C=Math.min(t.inHeight,l+R),k=0;k<t.outWidth;++k){for(var S=k*o-p,A=S;A<0;)A+=u
for(var T=Math.min(t.inWidth,h+S),O=Number.NEGATIVE_INFINITY,I=-1,N=x;N<w;N+=a)for(var D=N-b,P=E;P<C;P+=s)for(var M=P-R,F=A;F<T;F+=u){var L=F-S,B=v.get(m,N,P,F,g)
B>=O&&(O=B,I=D*l*h+M*l+L)}n.set(I,m,y,_,k,g)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPool3dBackprop")
for(var i=this.maxPool3dPositions(t,r),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,h=r.effectiveFilterDepth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=h-1-r.padInfo.front,v=d-1-r.padInfo.left,m=f-1-r.padInfo.top,g=mv(t.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var _=0;_<r.inDepth;++_)for(var R=0;R<r.inHeight;++R)for(var E=0;E<r.inWidth;++E){for(var C=_-p,k=R-m,S=E-v,A=0,T=0;T<h;T+=u){var O=(C+T)/o
if(!(O<0||O>=r.outDepth||Math.floor(O)!==O))for(var I=0;I<f;I+=c){var N=(k+I)/a
if(!(N<0||N>=r.outHeight||Math.floor(N)!==N))for(var D=0;D<d;D+=l){var P=(S+D)/s
if(!(P<0||P>=r.outWidth||Math.floor(P)!==P)){var M=h*f*d-1-y.get(x,O,N,P,w)===T*f*d+I*d+D?1:0
0!==M&&(A+=b.get(x,O,N,P,w)*M)}}}}g.set(A,x,_,R,E,w)}return g.toTensor()},e.prototype.cast=function(e,t){return _m(e,t,this)},e.prototype.reshape=function(e,t){return Rm(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear")
for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],c=this.readSync(e.dataId),l=new Float32Array(sf([o,t,n,u])),h=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=0,p=h[0]/f[0],v=h[1]/f[1],m=0;m<o;m++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),x=y-b,w=Math.min(a-1,Math.ceil(y)),_=m*e.strides[0]+b*e.strides[1],R=m*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var C=v*E,k=Math.floor(C),S=C-k,A=Math.min(s-1,Math.ceil(C)),T=_+k*e.strides[2],O=R+k*e.strides[2],I=_+ +A*e.strides[2],N=R+A*e.strides[2],D=0;D<u;D++){var P=c[T+D],M=c[O+D],F=P+(c[I+D]-P)*S,L=F+(M+(c[N+D]-M)*S-F)*x
l[d++]=L}return jp(l,[o,t,n,u])},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop")
for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(i*o*a*s),f=[n&&c>1?o-1:o,n&&l>1?a-1:a],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],p=f[0]/d[0],v=f[1]/d[1],m=this.readSync(e.dataId),g=0,y=0;y<i;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*p,_=Math.floor(w),R=Math.min(Math.ceil(w),o-1),E=b+_*t.strides[1],C=b+R*t.strides[1],k=w-_,S=1-k,A=0;A<l;A++)for(var T=A*v,O=Math.floor(T),I=Math.min(Math.ceil(T),a-1),N=T-O,D=1-N,P=E+O*t.strides[2],M=E+I*t.strides[2],F=C+O*t.strides[2],L=C+I*t.strides[2],B=S*D,j=S*N,z=k*D,U=k*N,W=0;W<s;W++){var V=m[g++]
h[P+W]+=V*B,h[M+W]+=V*j,h[F+W]+=V*z,h[L+W]+=V*U}return Hp(h,[i,a,o,s],t.dtype)},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor")
for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],c=this.readSync(e.dataId),l=new Float32Array(o*t*n*u),h=[r&&t>1?a-1:a,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=h[0]/f[0],p=h[1]/f[1],v=0,m=0;m<o;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var b=d*y,x=g+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var _=p*w,R=x+Math.min(s-1,r?Math.round(_):Math.floor(_))*e.strides[2],E=0;E<u;E++){var C=c[R+E]
l[v++]=C}return jp(l,[o,t,n,u],e.dtype)},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop")
for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,c=u[1],l=u[2],h=new Float32Array(i*o*a*s),f=this.readSync(e.dataId),d=[n&&c>1?o-1:o,n&&l>1?a-1:a],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/p[0],m=d[1]/p[1],g=1/v,y=1/m,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var _=w*t.strides[0],R=0;R<o;R++)for(var E=_+R*t.strides[1],C=Math.floor(R*g),k=Math.floor(C-b/2),S=0;S<a;S++)for(var A=E+S*t.strides[2],T=Math.floor(S*y),O=Math.floor(T-x/2),I=0;I<s;I++){for(var N=0,D=0;D<b;D++){var P=D+k
if(!(P<0||P>=c)){var M=_+P*e.strides[1],F=P*v
if(R===Math.min(o-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<x;L++){var B=L+O
if(!(B<0||B>=l)){var j=M+B*e.strides[2],z=B*m
S===Math.min(a-1,n?Math.round(z):Math.floor(z))&&(N+=f[j+I])}}}}h[A+I]=N}return Hp(h,t.shape,t.dtype)},e.prototype.batchNormalization=function(e,t,n,r,i,o){this.assertNotComplex([e,t,n,i,o],"batchNorm")
for(var a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),l=o?this.readSync(o.dataId):new Float32Array([0]),h=new Float32Array(a.length),f=l.length,d=c.length,p=u.length,v=s.length,m=0,g=0,y=0,b=0,x=0;x<a.length;++x)h[x]=l[m++]+(a[x]-s[g++])*c[y++]/Math.sqrt(u[b++]+r),m>=f&&(m=0),g>=v&&(g=0),y>=d&&(y=0),b>=p&&(b=0)
return Hp(h,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){this.assertNotComplex(e,"localResponseNormalization4D")
var o=e.shape[3],a=o-1,s=this.readSync(e.dataId),u=e.size,c=new Float32Array(u)
function l(e){for(var n=e%o,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,a),u=0;r<=i;r++){var c=s[r]
u+=c*c}return u}for(var h=0;h<u;h++){var f=l(h),d=s[h]*Math.pow(n+r*f,-i)
c[h]=d}return Hp(c,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){this.assertNotComplex(e,"LRNGrad")
for(var s=e.shape[3],u=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),h=new Float32Array(e.size),f=e.size,d=0;d<f;d++){for(var p=d%s,v=d-p+Math.max(0,p-r),m=d-p+Math.min(s,p+r+1),g=0,y=v;y<m;y++)g+=Math.pow(c[y],2)
for(g=o*g+i,y=v;y<m;y++){var b=-2*o*a*c[y]*l[d]/g
d===y&&(b+=Math.pow(g,-a)),b*=u[d],h[y]+=b}}return Hp(h,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial")
for(var i=t?e:im(e),o=i.shape[0],a=i.shape[1],s=Kp([o,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(i.dataId),l=0;l<o;++l){var h=l*a,f=new Float32Array(a-1)
f[0]=c[h]
for(var d=1;d<f.length;++d)f[d]=f[d-1]+c[h+d]
for(var p=fv(r.toString()),v=l*n,m=0;m<n;++m){var g=p()
u[v+m]=f.length
for(var y=0;y<f.length;y++)if(g<f[y]){u[v+m]=y
break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot")
var i=new Float32Array(e.size*t)
i.fill(r)
for(var o=this.readSync(e.dataId),a=0;a<e.size;++a)o[a]>=0&&o[a]<t&&(i[a*t+o[a]]=n)
return Vp(i,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return this.assertNotComplex(e,"nonMaxSuppression"),Tm(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},e.prototype.fft=function(e){return this.fftBatch(e,!1)},e.prototype.ifft=function(e){return this.fftBatch(e,!0)},e.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=mv(e.shape,"float32"),o=mv(e.shape,"float32"),a=Lp(e).as2D(n,r),s=Bp(e).as2D(n,r),u=0;u<n;u++)for(var c=a.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),h=Fp(c,l),f=this.readSync(this.fftImpl(h,t).dataId),d=0;d<r;d++){var p=km(f,d)
i.values[u*r+d]=p.real,o.values[u*r+d]=p.imag}return Fp(i.toTensor(),o.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size
if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1])
return t&&(i=Fp(Lp(i).div(Up(r)),Bp(i).div(Up(r)))),i}var o=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1]
return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t))
return Fp(a.real,a.imag).as2D(e.shape[0],e.shape[1])},e.prototype.isExponentOf2=function(e){return 0==(e&e-1)},e.prototype.fftRadix2=function(e,t,n){if(1===t)return e
var r=this.readSync(e.dataId),i=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1]
return{real:n,imag:r}}(r),a=Fp(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1]
return{real:n,imag:r}}(r),u=Fp(s.real,s.imag).as1D()
a=this.fftRadix2(a,i,n),u=this.fftRadix2(u,i,n)
var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var o=(t?2:-2)*Math.PI*(i/e)
n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}(t,n),l=Fp(c.real,c.imag).mul(u),h=a.add(l),f=a.sub(l),d=Lp(h).concat(Lp(f)),p=Bp(h).concat(Bp(f))
return Fp(d,p).as1D()},e.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,a=0,s=0;s<t;s++){var u=Am(i*s,t,n),c=km(e,s)
o+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(o/=t,a/=t),Sm(r,o,a,i)}return r},e.prototype.depthToSpace=function(e,t,n){nf("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),nf(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t})
for(var r=e.shape[0],i=e.shape[1],o=e.shape[2],a=e.shape[3],s=i*t,u=o*t,c=a/(t*t),l=this.readSync(e.dataId),h=new Float32Array(r*s*u*c),f=0,d=0;d<r;++d)for(var p=0;p<s;++p)for(var v=Math.floor(p/t),m=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(m*t+g%t)*c,x=0;x<c;++x){var w=x+b+a*(y+o*(v+i*d))
h[f++]=l[w]}return Hp(h,[r,s,u,c])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=cm(e.shape,t.shape),o=mv(i,n),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sm(e.shape,i),c=sm(t.shape,i),l=o.values
if(u.length+c.length===0)for(var h=0;h<l.length;++h)l[h]=r(a[h%a.length],s[h%s.length])
else{var f=this.bufferSync(e),d=this.bufferSync(t),p=function(n){var i=o.indexToLoc(n),h=i.slice(-e.rank)
u.forEach(function(e){return h[e]=0})
var p=f.locToIndex(h),v=i.slice(-t.rank)
c.forEach(function(e){return v[e]=0})
var m=d.locToIndex(v)
l[n]=r(a[p],s[m])}
for(h=0;h<l.length;++h)p(h)}return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=cm(e.shape,t.shape),i=mv(r,"float32"),o=mv(r,"float32"),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sm(e.shape,r),c=sm(t.shape,r),l=i.values,h=o.values
if(u.length+c.length===0)for(var f=0;f<l.length;f++){var d=f%a.length,p=f%s.length,v=n(a[2*d],a[2*d+1],s[2*p],s[2*p+1])
l[f]=v.real,h[f]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=i.indexToLoc(r),f=o.slice(-e.rank)
u.forEach(function(e){return f[e]=0})
var d=m.locToIndex(f),p=o.slice(-t.rank)
c.forEach(function(e){return p[e]=0})
var v=g.locToIndex(p),y=n(a[2*d],a[2*d+1],s[2*v],s[2*v+1])
l[r]=y.real,h[r]=y.imag}
for(f=0;f<l.length;f++)y(f)}return this.complex(i.toTensor(),o.toTensor())},e.prototype.split=function(e,t,n){return Im(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(e,t,n,r,i,o){for(var a=e.shape,s=a[0],u=a[1],c=a[2],l=a[3],h=t.shape[0],f=r[0],d=r[1],p=mv([h,f,d,l],e.dtype),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<h;x++){var w=4*x,_=v[w],R=v[w+1],E=v[w+2],C=v[w+3],k=m[x]
if(!(k>=s))for(var S=f>1?(E-_)*(u-1)/(f-1):0,A=d>1?(C-R)*(c-1)/(d-1):0,T=0;T<f;T++){var O=f>1?_*(u-1)+T*S:.5*(_+E)*(u-1)
if(O<0||O>u-1)for(var I=0;I<d;I++)for(var N=0;N<l;N++){var D=N+I*b[2]+T*b[1]+x*b[0]
p.values[D]=o}else if("bilinear"===i){var P=Math.floor(O),M=Math.ceil(O),F=O-P
for(I=0;I<d;I++)if((H=d>1?R*(c-1)+I*A:.5*(R+C)*(c-1))<0||H>c-1)for(N=0;N<l;N++)D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=o
else{var L=Math.floor(H),B=Math.ceil(H),j=H-L
for(N=0;N<l;N++){var z=g[D=N+L*y[2]+P*y[1]+k*y[0]],U=g[D=N+B*y[2]+P*y[1]+k*y[0]],W=g[D=N+L*y[2]+M*y[1]+k*y[0]],V=z+(U-z)*j,q=W+(g[D=N+B*y[2]+M*y[1]+k*y[0]]-W)*j
D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=V+(q-V)*F}}}else for(I=0;I<d;++I){var H
if((H=d>1?R*(c-1)+I*A:.5*(R+C)*(c-1))<0||H>c-1)for(N=0;N<l;N++)D=N+I*b[2]+T*b[1]+x*b[0],p.values[D]=o
else{var G=Math.round(H),K=Math.round(O)
for(N=0;N<l;N++){var $=N+G*y[2]+K*y[1]+k*y[0],X=N+I*b[2]+T*b[1]+x*b[0]
p.values[X]=g[$]}}}}}return p.toTensor()},e.prototype.sparseToDense=function(e,t,n,r){var i=Yv(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,u=i.strides,c=i.outputSize
return this.scatter(e,t,n,c,s,a,o,u,r,!1)},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Kv(e,t),o=i[0],a=i[1],s=i[2],u=i[3]
if(0===a)return jp([],o,e.dtype)
for(var c=new Gf([a,s],e.dtype),l=this.readSync(t.dataId),h=this.readSync(e.dataId),f=0;f<a;f++){for(var d=[],p=0,v=0;v<r;v++){var m=l[f*r+v]
p+=m*u[v],d.push(m)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+d+" does not index into "+e.shape)
for(var g=0;g<s;g++)c.values[f*s+g]=h[p*s+g]}return c.toTensor().reshape(o)},e.prototype.scatterND=function(e,t,n){var r=Yv(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,c=Up(0)
return this.scatter(e,t,n,u,a,o,i,s,c,!0)},e.prototype.fill=function(e,t,n){var r=yf(n=n||Af(t),sf(e))
return r.fill(t),Yf.make(e,{values:r},n)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors")
return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){var t=yf(e.dtype,sf(e.shape))
return Yf.make(e.shape,{values:t},e.dtype)},e.prototype.linspace=function(e,t,n){return Em(e,t,n)},e.prototype.scatter=function(e,t,n,r,i,o,a,s,u,c){var l=[r/i,i],h=this.readSync(e.dataId),f=this.readSync(t.dataId)
if(0===r)return jp([],n,t.dtype)
var d=new Gf(l,t.dtype)
d.values.fill(this.readSync(u.dataId)[0])
for(var p=0;p<o;p++){for(var v=[],m=0,g=0;g<a;g++){var y=h[p*a+g]
v.push(y),m+=y*s[g]}if(m<0||m>=r/i)throw new Error("Invalid indices: "+v+" does not index into "+n)
for(var b=0;b<i;b++)c?d.values[m*i+b]+=f[p*i+b]:d.values[m*i+b]=0===t.rank?f[0]:f[p*i+b]}return d.toTensor().reshape(n)},e}()
fd.registerBackend("cpu",function(){return new D_},1)
var P_=function(){function e(){this.textEncoder=new TextEncoder}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t)
return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}()
Yh.get("IS_BROWSER")&&Yh.setPlatform("browser",new P_)
var M_,F_=function(){function e(){this.util=n(11),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Yh.global.fetch?Yh.global.fetch(e,t):(null==M_&&(M_=n(10)),M_(e,t))},e.prototype.now=function(){var e=process.hrtime()
return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t)
return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}()
Yh.get("IS_NODE")&&Yh.setPlatform("node",new F_)
var L_={float32:4,int32:4,uint16:2,uint8:1,bool:1},B_=4
function j_(e,t){for(var n={},r=0,i=function(t){var i=t.name,o=t.dtype,a=t.shape,s=sf(a),u=void 0
if("quantization"in t){var c=t.quantization
if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.")
var l=L_[c.dtype],h=e.slice(r,r+s*l),f="uint8"===c.dtype?new Uint8Array(h):new Uint16Array(h)
if("float32"===o)u=Float32Array.from(f,function(e){return e*c.scale+c.min})
else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o)
u=Int32Array.from(f,function(e){return Math.round(e*c.scale+c.min)})}r+=s*l}else if("string"===o){var d=sf(t.shape)
u=[]
for(var p=0;p<d;p++){var v=new Uint32Array(e.slice(r,r+B_))[0]
r+=B_
var m=new Uint8Array(e.slice(r,r+v))
u.push(m),r+=v}}else{var g=L_[o]
if(h=e.slice(r,r+s*g),"float32"===o)u=new Float32Array(h)
else if("int32"===o)u=new Int32Array(h)
else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o)
u=new Uint8Array(h)}r+=s*g}n[i]=jp(u,a,o)},o=0,a=t;o<a.length;o++)i(a[o])
return n}function z_(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e))
var t=0,n=[]
e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)})
var r=new Uint8Array(t),i=0
return n.forEach(function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}var U_="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa)
function W_(e){return U_?Buffer.byteLength(e):new Blob([e]).size}function V_(e){var t=0
e.forEach(function(e){t+=e.byteLength})
var n=new Uint8Array(t),r=0
return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function q_(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1)
var t=e.split("/")
return t[t.length-1]}function H_(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.")
return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:W_(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:W_(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var G_=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[]
return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r)
null!==n&&i.push(n)}),i},e}(),K_="://",$_=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){nf(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(K_)&&(t=t.slice(0,t.indexOf(K_))),nf(t.length>0,function(){return"scheme must not be an empty string."})
var r=e.getInstance()
nf(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e]
if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'")
return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}()
function X_(e){if(-1===e.indexOf(K_))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+$_.getSchemes().join(","))
return{scheme:e.split(K_)[0],path:e.split(K_)[1]}}function Y_(e,t,n){return void 0===n&&(n=!1),Gh(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h
return Kh(this,function(f){switch(f.label){case 0:return nf(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),nf((r=G_.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),nf(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),i=r[0],nf((o=G_.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),nf(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=o[0],s=X_(e).scheme,u=X_(e).path,c=s===X_(e).scheme,[4,i.load()]
case 1:return l=f.sent(),n&&c?[4,$_.getManager(s).removeModel(u)]:[3,3]
case 2:f.sent(),f.label=3
case 3:return[4,a.save(l)]
case 4:return h=f.sent(),!n||c?[3,6]:[4,$_.getManager(s).removeModel(u)]
case 5:f.sent(),f.label=6
case 6:return[2,h.modelArtifactsInfo]}})})}var Q_="models_store",J_="model_info_store"
function Z_(){if(!Yh.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.")
var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB
if(null==t)throw new Error("The current browser does not appear to support IndexedDB.")
return t}function eR(e){var t=e.result
t.createObjectStore(Q_,{keyPath:"modelPath"}),t.createObjectStore(J_,{keyPath:"modelPath"})}var tR=function(){function e(e){if(this.indexedDB=Z_(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.")
this.modelPath=e}return e.prototype.save=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.")
return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this
return new Promise(function(e,r){var i=n.indexedDB.open("tensorflowjs",1)
i.onupgradeneeded=function(){return eR(i)},i.onsuccess=function(){var o=i.result
if(null==t){var a=o.transaction(Q_,"readonly"),s=a.objectStore(Q_).get(n.modelPath)
s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."))
e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},a.oncomplete=function(){return o.close()}}else{var u,c=H_(t),l=o.transaction(J_,"readwrite"),h=l.objectStore(J_),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c})
f.onsuccess=function(){var i=(u=o.transaction(Q_,"readwrite")).objectStore(Q_).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c})
i.onsuccess=function(){return e({modelArtifactsInfo:c})},i.onerror=function(e){var t=(h=l.objectStore(J_)).delete(n.modelPath)
t.onsuccess=function(){return o.close(),r(i.error)},t.onerror=function(e){return o.close(),r(i.error)}}},f.onerror=function(e){return o.close(),r(f.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},i.onerror=function(e){return r(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),nR=function(e){return Yh.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tR.URL_SCHEME)?(t=e.slice(tR.URL_SCHEME.length),new tR(t)):null
var t}
G_.registerSaveRouter(nR),G_.registerLoadRouter(nR)
var rR=function(){function e(){this.indexedDB=Z_()}return e.prototype.listModels=function(){return Gh(this,void 0,void 0,function(){var e=this
return Kh(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1)
r.onupgradeneeded=function(){return eR(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(J_,"readonly"),o=i.objectStore(J_).getAll()
o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var i=r[n]
e[i.modelPath]=i.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return Gh(this,void 0,void 0,function(){var t=this
return Kh(this,function(n){var r
return e=(r=e).startsWith(tR.URL_SCHEME)?r.slice(tR.URL_SCHEME.length):r,[2,new Promise(function(n,r){var i=t.indexedDB.open("tensorflowjs",1)
i.onupgradeneeded=function(){return eR(i)},i.onsuccess=function(){var t,o=i.result,a=o.transaction(J_,"readwrite"),s=a.objectStore(J_),u=s.get(e)
u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."))
var i=s.delete(e),a=function(){var i=(t=o.transaction(Q_,"readwrite")).objectStore(Q_).delete(e)
i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(e){return r(u.error)}}
i.onsuccess=a,i.onerror=function(e){return a(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},a.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},i.onerror=function(e){return r(i.error)}})]})})},e}()
if(Yh.getBool("IS_BROWSER"))try{$_.registerManager(tR.URL_SCHEME,new rR)}catch(Ae){}var iR="/",oR="tensorflowjs_models",aR="info",sR="model_topology",uR="weight_specs",cR="weight_data",lR="model_metadata"
function hR(e){return{info:[oR,e,aR].join(iR),topology:[oR,e,sR].join(iR),weightSpecs:[oR,e,uR].join(iR),weightData:[oR,e,cR].join(iR),modelMetadata:[oR,e,lR].join(iR)}}function fR(e){var t=e.split(iR)
if(t.length<3)throw new Error("Invalid key format: "+e)
return t.slice(1,t.length-1).join(iR)}var dR=function(){function e(e){if(!Yh.getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.")
if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.")
this.modelPath=e,this.keys=hR(this.modelPath)}return e.prototype.save=function(e){return Gh(this,void 0,void 0,function(){var t,n,r
return Kh(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.")
t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=H_(e)
try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(o=e.weightData,U_?Buffer.from(o).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(o))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var o
return[2]})})},e.prototype.load=function(){return Gh(this,void 0,void 0,function(){var e,t,n,r,i,o,a
return Kh(this,function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'")
if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.")
if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.")
if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.")
if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.")
return t.weightData=function(e){if(U_){var t=Buffer.from(e,"base64")
return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i)
return r.buffer}(a),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),pR=function(e){return Yh.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dR.URL_SCHEME)?(t=e.slice(dR.URL_SCHEME.length),new dR(t)):null
var t}
G_.registerSaveRouter(pR),G_.registerLoadRouter(pR)
var vR=function(){function e(){nf(Yh.getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),nf(void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Gh(this,void 0,void 0,function(){var e,t,n,r,i,o
return Kh(this,function(a){for(e={},t=oR+iR,n=iR+aR,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(o=fR(i),e[o]=JSON.parse(this.LS.getItem(i)))
return[2,e]})})},e.prototype.removeModel=function(e){return Gh(this,void 0,void 0,function(){var t,n
return Kh(this,function(r){var i
if(e=(i=e).startsWith(dR.URL_SCHEME)?i.slice(dR.URL_SCHEME.length):i,t=hR(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'")
return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}()
if(Yh.getBool("IS_BROWSER"))try{$_.registerManager(dR.URL_SCHEME,new vR)}catch(Ae){}var mR="model",gR=".json",yR=".weights.bin"
function bR(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var xR=function(){function e(t){if(!Yh.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.")
t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=mR),this.modelTopologyFileName=t+gR,this.weightDataFileName=t+yR}return e.prototype.save=function(e){return Gh(this,void 0,void 0,function(){var t,n,r,i,o,a
return Kh(this,function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present")
if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1]
throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.")
case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,bR(function(){return o.dispatchEvent(new MouseEvent("click"))})]
case 2:return s.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,bR(function(){return a.dispatchEvent(new MouseEvent("click"))})])
case 3:s.sent(),s.label=4
case 4:return[2,{modelArtifactsInfo:H_(e)}]}})})},e.URL_SCHEME="downloads://",e}(),wR=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e)
this.files=e}return e.prototype.load=function(){return Gh(this,void 0,void 0,function(){var e,t,n=this
return Kh(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,i){var o=new FileReader
o.onload=function(o){var a=JSON.parse(o.target.result),s=a.modelTopology
if(null!=s){0===t.length&&r({modelTopology:s})
var u=a.weightsManifest
if(null!=u){var c
try{c=n.checkManifestAndWeightFiles(u,t)}catch(e){return void i(e)}var l=[],h=[],f=[]
u.forEach(function(e){e.paths.forEach(function(e){h.push(e),f.push(null)}),l.push.apply(l,e.weights)}),u.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader
t.onload=function(t){var n=t.target.result,i=h.indexOf(e)
f[i]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:V_(f)})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return q_(e.name)}),i={},o=0,a=e;o<a.length;o++)a[o].paths.forEach(function(e){var o=q_(e)
if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'")
if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.")
i[e]=t[r.indexOf(o)]})
if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").")
return i},e}()
function _R(e,t,n,r){!function(e){nf(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){nf(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),nf(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),nf(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r)
var i=0
return Promise.all(e.map(function(o){return o.then(function(o){var a=n+ ++i/e.length*(r-n)
return t(a),o}),o}))}function RR(e,t){return Gh(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l
return Kh(this,function(h){switch(h.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Yh.platform.fetch:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit,{isBinary:!0})}),i=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)]
case 1:return a=h.sent(),[3,4]
case 2:return[4,_R(r,t.onProgress,i,o)]
case 3:a=h.sent(),h.label=4
case 4:return s=a.map(function(e){return e.arrayBuffer()}),u=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)]
case 5:return l=h.sent(),[3,8]
case 6:return[4,_R(s,t.onProgress,u,c)]
case 7:l=h.sent(),h.label=8
case 8:return[2,l]}})})}function ER(e){var t=this
return function(n,r,i){return void 0===r&&(r=""),Gh(t,void 0,void 0,function(){var t,o,a,s,u,c,l,h,f,d
return Kh(this,function(p){switch(p.label){case 0:if(t=n.map(function(){return!1}),o={},a=null!=i?i.map(function(){return!1}):[],s=[],n.forEach(function(e,n){var r=0
e.weights.forEach(function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,c=L_[u]*sf(e.shape),l=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})}
null!=i?i.forEach(function(t,n){t===e.name&&(l(),a[n]=!0)}):l(),s.push(e.name),r+=c})}),!a.every(function(e){return e}))throw u=i.filter(function(e,t){return!a[t]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".")
return c=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),l=[],c.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e
l.push(t)})}),[4,e(l)]
case 1:return h=p.sent(),f={},d=0,c.forEach(function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=h[d+i].byteLength
for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,c=0;c<t;c++){var l=new Uint8Array(h[d+c])
s.set(l,u),u+=l.byteLength}o[e].forEach(function(e){var t=j_(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry])
for(var n in t)f[n]=t[n]}),d+=t}),[2,f]}})})}}G_.registerSaveRouter(function(e){return Yh.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xR.URL_SCHEME)?(void 0===(t=e.slice(xR.URL_SCHEME.length))&&(t="model"),new xR(t)):null
var t})
var CR=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(nf("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=Yh.platform.fetch,nf(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&nf(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.")
this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Gh(this,void 0,void 0,function(){var t,n,r,i
return Kh(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.")
return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)]
case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:H_(e),responses:[i]}]
throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Gh(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s
return Kh(this,function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)]
case 1:if(!(e=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.")
u.label=2
case 2:return u.trys.push([2,4,,5]),[4,e.json()]
case 3:return t=u.sent(),[3,5]
case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n)
case 5:if(r=t.modelTopology,i=t.weightsManifest,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.")
return null==i?[3,7]:[4,this.loadWeights(i)]
case 6:s=u.sent(),o=s[0],a=s[1],u.label=7
case 7:return[2,{modelTopology:r,weightSpecs:o,weightData:a}]}})})},e.prototype.loadWeights=function(e){return Gh(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h
return Kh(this,function(f){switch(f.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?")
return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],o=this.weightPathPrefix||r,a=[],s=0,u=e;s<u.length;s++)c=u[s],a.push.apply(a,c.weights)
return l=[],e.forEach(function(e){e.paths.forEach(function(e){l.push(o+e+i)})}),[4,RR(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})]
case 1:return h=f.sent(),[2,[a,V_(h)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}()
function kR(e){return null!=e.match(CR.URL_SCHEME_REGEX)}var SR=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return kR(e)}):kR(e))?AR(e,{onProgress:t}):null}
function AR(e,t){return new CR(e,t)}G_.registerSaveRouter(SR),G_.registerLoadRouter(SR)
var TR=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){return[2,this.modelArtifacts]})})},e}(),OR=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){return[2,this.saveHandler(e)]})})},e}(),IR=Object.freeze({browserFiles:function(e){return new wR(e)},browserHTTPRequest:function(e,t){return AR(e,t)},concatenateArrayBuffers:V_,decodeWeights:j_,encodeWeights:function(e,t){return Gh(this,void 0,void 0,function(){var n,r,i,o,a,s=this
return Kh(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),o=function(o){var a=i[o],u=Array.isArray(e)?e[o].tensor:e[a]
if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+u.dtype)
var c={name:a,shape:u.shape,dtype:u.dtype}
if("string"===u.dtype){var l=new Promise(function(e){return Gh(s,void 0,void 0,function(){var t,n,r,i,o,a,s
return Kh(this,function(c){switch(c.label){case 0:return[4,u.bytes()]
case 1:for(t=c.sent(),n=t.reduce(function(e,t){return e+t.length},0)+B_*t.length,r=new Uint8Array(n),i=0,o=0;o<t.length;o++)a=t[o],s=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(s,i),i+=B_,r.set(a,i),i+=a.length
return e(r),[2]}})})})
r.push(l)}else r.push(u.data())
null!=t&&(c.group=t),n.push(c)},a=0;a<i.length;++a)o(a)
return[4,Promise.all(r)]
case 1:return[2,{data:z_(u.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new TR(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new TR({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new TR({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return G_.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:H_,getSaveHandlers:function(e){return G_.getSaveHandlers(e)},http:AR,isHTTPScheme:kR,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Gh(this,void 0,void 0,function(){return Kh(this,function(i){return[2,ER(function(e){return RR(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return G_.registerLoadRouter(e)},registerSaveRouter:function(e){return G_.registerSaveRouter(e)},weightsLoaderFactory:ER,withSaveHandler:function(e){return new OR(e)},copyModel:function(e,t){return Gh(this,void 0,void 0,function(){return Kh(this,function(n){return[2,Y_(e,t,!1)]})})},listModels:function(){return Gh(this,void 0,void 0,function(){var e,t,n,r,i,o,a
return Kh(this,function(s){switch(s.label){case 0:e=$_.getSchemes(),t={},n=0,r=e,s.label=1
case 1:return n<r.length?(i=r[n],[4,$_.getManager(i).listModels()]):[3,4]
case 2:for(a in o=s.sent())t[i+K_+a]=o[a]
s.label=3
case 3:return n++,[3,1]
case 4:return[2,t]}})})},moveModel:function(e,t){return Gh(this,void 0,void 0,function(){return Kh(this,function(n){return[2,Y_(e,t,!0)]})})},removeModel:function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){return t=X_(e),[2,$_.getManager(t.scheme).removeModel(t.path)]})})}}),NR=Mp({confusionMatrix_:function(e,t,n){var r=Rp(e,"labels","confusionMatrix"),i=Rp(t,"predictions","confusionMatrix")
nf(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),nf(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),nf(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),nf(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),nf(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n})
var o=Cv(r.asType("int32"),n),a=Cv(i.asType("int32"),n)
return o.transpose().matMul(a).asType("int32")}}),DR=(Object.freeze({confusionMatrix:NR}),Mp({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.")
var n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement
if(n&&n&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")
return fd.fromPixels(e,t)}})),PR=Object.freeze({toPixels:function(e,t){return Gh(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,g,y,b,x,w,_,R,E
return Kh(this,function(C){switch(C.label){case 0:if(n=Rp(e,"img","toPixels"),e instanceof Yf||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".")
if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a)
return[4,n.data()]
case 1:return s=C.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])]
case 2:if(l=C.sent(),h=l[0],f=l[1],d=h[0],p=f[0],u.dispose(),c.dispose(),"float32"===n.dtype){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.")
if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(v="float32"===n.dtype?255:1,m=new Uint8ClampedArray(o*i*4),g=0;g<i*o;++g)y=void 0,b=void 0,x=void 0,w=void 0,1===a?(y=s[g]*v,b=s[g]*v,x=s[g]*v,w=255):3===a?(y=s[3*g]*v,b=s[3*g+1]*v,x=s[3*g+2]*v,w=255):4===a&&(y=s[4*g]*v,b=s[4*g+1]*v,x=s[4*g+2]*v,w=s[4*g+3]*v),m[0+(_=4*g)]=Math.round(y),m[_+1]=Math.round(b),m[_+2]=Math.round(x),m[_+3]=Math.round(w)
return null!=t&&(t.width=o,t.height=i,R=t.getContext("2d"),E=new ImageData(m,o,i),R.putImageData(E,0,0)),n!==e&&n.dispose(),[2,m]}})})},fromPixels:DR}),MR=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),FR=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}()
function LR(e){nf(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),nf("string"==typeof e.className,function(){return"className is required to be a string, but got type "+Vh(e.className)}),nf(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),FR.register(e)}Object.freeze({Serializable:MR,SerializationMap:FR,registerClass:LR})
var BR=.001,jR=.1
function zR(){return 32===fd.backend.floatPrecision()?BR:jR}function UR(e,t,n){var r=!0
if((_f(e)||_f(t))&&(r=!1),_f(e)&&_f(t)&&(r=!0),r){var i=e.constructor.name,o=t.constructor.name
if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var a=wp(e),s=wp(t)
if(!uf(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=_f(e)?e:af(e),c=_f(t)?t:af(t)
if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".")
for(var l=0;l<c.length;++l){var h=u[l],f=c[l]
if(!n(h,f))throw new Error("Arrays differ: actual["+l+"] = "+h+", expected["+l+"] = "+f+".\nActual:   "+u+".\nExpected: "+c+".")}}function WR(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:jR,expectArraysClose:function(e,t,n){return null==n&&(n=zR()),UR(e,t,function(e,t){return WR(e,t,n)})},testEpsilon:zR,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t
return Cf(e)||Cf(e[0])||Cf(t)||Cf(t[0])?UR(e,n,function(e,t){return e==t}):UR(e,t,function(e,t){return WR(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=zR()),!WR(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:iy,webgl_util:mp,forceHalfFloat:function(){Yh.set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:nb,setWebGLContext:yd,GPGPUContext:oy})
var VR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hh(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1)
var r=this.computeGradients(e,n),i=r.value,o=r.grads
if(null!=n){var a=n.map(function(e){return{name:e.name,tensor:o[e.name]}})
this.applyGradients(a)}else this.applyGradients(o)
return bp(o),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){nf(Tf(e),function(){return"The f passed in variableGrads(f) must be a function"}),nf(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof nd}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"})
var n=null!=t
if(!n)for(var r in t=[],fd.registeredVariables)t.push(fd.registeredVariables[r])
var i=n?t.filter(function(e){return!e.trainable}):null,o=t.length
nf((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."})
var a=fd.gradients(e,t,null,!0),s=a.value,u=a.grads
nf(u.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),nf(0===s.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"})
var c={}
return t.forEach(function(e,t){null!=u[t]&&(c[e.name]=u[t])}),null!=i&&i.forEach(function(e){return c[e.name]=null}),{value:s,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&bp(this.iterations_)},t.prototype.saveIterations=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Up(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()]
case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(MR)
Object.defineProperty(VR,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}})
var qR=function(e){function t(t,n,r){void 0===r&&(r=null)
var i=e.call(this)||this
return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=fd.backend.epsilon()),i}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=fd.registeredVariables[n]
null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:yp(function(){return Qp(i).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:yp(function(){return Qp(i).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable
yp(function(){var e=a.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho))
a.assign(e),s.assign(r)
var u=n.mul(-t.learningRate).add(i)
i.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(bp(this.accumulatedGrads.map(function(e){return e.variable})),bp(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(VR)
LR(qR)
var HR=function(e){function t(t,n){void 0===n&&(n=.1)
var r=e.call(this)||this
return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=fd.registeredVariables[n]
null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:yp(function(){return $p(i.shape,t.initialAccumulatorValue).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedGrads[r].variable
yp(function(){var e=a.add(o.square())
a.assign(e)
var n=o.div(e.add(fd.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i)
i.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&bp(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(VR)
LR(HR)
var GR=function(e){function t(t,n,r,i){void 0===i&&(i=null)
var o=e.call(this)||this
return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],yp(function(){o.accBeta1=Up(n).variable(),o.accBeta2=Up(r).variable()}),null==i&&(o.epsilon=fd.backend.epsilon()),o}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)
yp(function(){var r=Rx(1,t.accBeta1),i=Rx(1,t.accBeta2)
n.forEach(function(n,o){var a=fd.registeredVariables[n]
null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:yp(function(){return Qp(a).variable(!1)})}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:yp(function(){return Qp(a).variable(!1)})})
var s=Array.isArray(e)?e[o].tensor:e[n]
if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedSecondMoment[o].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=l.div(r),d=h.div(i)
u.assign(l),c.assign(h)
var p=f.div(d.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a)
a.assign(p)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&bp(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&bp(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){var t,n=this
return Kh(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=r.sent(),yp(function(){n.accBeta1.assign(bx(n.beta1,n.iterations_+1)),n.accBeta2.assign(bx(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(VR)
LR(GR)
var KR=function(e){function t(t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=0)
var a=e.call(this)||this
return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.decay=o,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],yp(function(){a.iteration=Up(0).variable(),a.accBeta1=Up(n).variable()}),null==i&&(a.epsilon=fd.backend.epsilon()),a}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)
yp(function(){var r=Rx(1,t.accBeta1),i=ux(-t.learningRate,t.iteration.mul(t.decay).add(1))
n.forEach(function(n,o){var a=fd.registeredVariables[n]
null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Qp(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:Qp(a).variable(!1)})
var s=Array.isArray(e)?e[o].tensor:e[n]
if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedWeightedInfNorm[o].variable,l=u.mul(t.beta1).add(s.mul(1-t.beta1)),h=c.mul(t.beta2),f=s.abs(),d=h.maximum(f)
u.assign(l),c.assign(d)
var p=i.div(r).mul(l.div(d.add(t.epsilon))).add(a)
a.assign(p)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&bp(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&bp(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(VR)
LR(KR)
var $R=function(e){function t(t){var n=e.call(this)||this
return n.learningRate=t,n.setLearningRate(t),n}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n]
if(null!=i){var o=fd.registeredVariables[n]
yp(function(){var e=t.c.mul(i).add(o)
o.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return fd.keep(e)}(Up(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.")
return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(VR)
LR($R)
var XR=function(e){function t(t,n,r){void 0===r&&(r=!1)
var i=e.call(this,t)||this
return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Up(i.momentum),i}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=fd.registeredVariables[n]
null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:yp(function(){return Qp(i).variable(!1)})})
var o=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n]
null!=a&&yp(function(){var e,n=t.m.mul(o).add(a)
e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),o.assign(n),i.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&bp(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){return Kh(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()]
case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){return Kh(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}($R)
LR(XR)
var YR=function(e){function t(t,n,r,i,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1)
var a=e.call(this)||this
return a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=i,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=o,null==i&&(a.epsilon=fd.backend.epsilon()),a}return Hh(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var i=fd.registeredVariables[n]
null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:yp(function(){return Qp(i).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:yp(function(){return Qp(i).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:yp(function(){return Qp(i).variable(!1)})})
var o=Array.isArray(e)?e[r].tensor:e[n]
if(null!=o){var a=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable
yp(function(){var e=a.mul(t.decay).add(o.square().mul(1-t.decay))
if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(o.mul(1-t.decay)),c=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()))
a.assign(e),n.assign(u),s.assign(c)
var l=i.sub(c)
i.assign(l)}else{var h=a.mul(t.decay).add(o.square().mul(1-t.decay))
c=s.mul(t.momentum).add(o.mul(t.learningRate).div(h.add(t.epsilon).sqrt())),a.assign(h),s.assign(c),l=i.sub(c),i.assign(l)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&bp(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&bp(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&bp(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Gh(this,void 0,void 0,function(){var e
return Kh(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()]
case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Gh(this,void 0,void 0,function(){var t
return Kh(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)]
case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(VR)
LR(YR)
var QR=function(){function e(){}return e.sgd=function(e){return new $R(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new XR(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new YR(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new GR(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new qR(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new KR(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new HR(e,t)},e}()
QR.sgd,QR.momentum,QR.adadelta,QR.adagrad,QR.rmsprop,QR.adamax,QR.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate,$f=I_
var JR=function(){function e(e,t){if(!fE(e)||!fE(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}))
this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}(),ZR=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}()
function eE(e,t){return e instanceof Yf&&e.shape.length===t}function tE(e){return eE(e,1)}function nE(e){return eE(e,2)}function rE(e){return eE(e,3)}function iE(e){return eE(e,4)}function oE(e){return e%1!=0}function aE(e){return e%2==0}function sE(e,t){void 0===t&&(t=2)
var n=Math.pow(10,t)
return Math.floor(e*n)/n}function uE(e){return e&&e.width&&e.height}function cE(e,t){var n=e.width,r=e.height,i=t/Math.max(r,n)
return new JR(Math.round(n*i),Math.round(r*i))}function lE(e){return e.reduce(function(e,t){return e.add(t)},new ZR(0,0)).div(new ZR(e.length,e.length))}function hE(e,t,n){return Array(e).fill(0).map(function(e,r){return t+r*n})}function fE(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function dE(e){return fE(e)&&0<=e&&e<=1}var pE,vE=function(){function e(t,n){void 0===n&&(n=!0)
var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(fE),o=[r.x,r.y,r.width,r.height].every(fE)
if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r))
var a=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],c=a[2],l=a[3]
e.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=l}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(fE)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height")
if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new ZR(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new ZR(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new ZR(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new ZR(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)})
return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)})
return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this.x,n=this.y,r=this.width,i=this.height,o=Math.abs(r-i)
return r<i&&(t-=o/2,r+=o),i<r&&(n-=o/2,i+=o),new e({x:t,y:n,width:r,height:i})},e.prototype.rescale=function(t){var n=uE(t)?t.width:t,r=uE(t)?t.height:t
return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n]
return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this.x,i=this.y,o=this.right,a=this.bottom,s=Math.max(r,0),u=Math.max(i,0),c=o-s,l=a-u
return new e({x:s,y:u,width:Math.min(c,t-s),height:Math.min(l,n-u)}).floor()},e.prototype.shift=function(t,n){var r=this.width,i=this.height
return new e({x:this.x+t,y:this.y+n,width:r,height:i})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,i=n,o=r,a=this.left,s=this.top,u=this.right,c=this.bottom
return u>t&&(i=-u+t+n,u=t),c>e&&(o=-c+e+r,c=e),a<1&&(o=2-a,a=1),s<1&&(o=2-s,s=1),{dy:1,edy:o,dx:1,edx:i,y:s,ey:c,x:a,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),mE=function(e){function t(t,n,r,i,o){return void 0===o&&(o=!1),e.call(this,{left:t,top:n,right:r,bottom:i},o)||this}return u(t,e),t}(vE),gE=function(e){function t(t,n){var r=e.call(this,t)||this
return r._label=n,r}return u(t,e),t.assertIsValidLabeledBox=function(e,t){if(vE.assertIsValidBox(e,t),!fE(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(vE),yE=function(){function e(e,t,n,r,i){this._imageDims=new JR(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new vE(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new vE(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),bE=function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this
return o._score=r,o._classScore=i,o}return u(t,e),t.assertIsValidPredictedBox=function(e,t){if(gE.assertIsValidLabeledBox(e,t),!dE(e.score)||!dE(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t}(gE),xE=function(e){function t(t,n,r,i,o){return void 0===o&&(o=!1),e.call(this,{x:t,y:n,width:r,height:i},o)||this}return u(t,e),t}(vE)
function wE(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")}
return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function _E(e){var t=""
if(!e)try{e=n(!function(){var e=new Error("Cannot find module 'fs'")
throw e.code="MODULE_NOT_FOUND",e}())}catch(e){t=e.toString()}return{readFile:e?function(t){return new Promise(function(n,r){e.readFile(t,function(e,t){return e?r(e):n(t)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function RE(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},r=_E()
return c({Canvas:e||function(){},CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:global.ImageData||function(){},Video:global.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e
throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t
throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:n},r)}function EE(e){return(EE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CE(){return"object"===("undefined"==typeof window?"undefined":EE(window))&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function kE(e){return(kE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SE(){return"object"===("undefined"==typeof global?"undefined":kE(global))&&void 0!==e&&"undefined"!=typeof process&&!!process.version}function AE(e){pE=e}function TE(){CE()&&AE(wE()),SE()&&AE(RE())}var OE,IE={getEnv:function(){if(!pE)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()")
return pE},setEnv:AE,initialize:TE,createBrowserEnv:wE,createFileSystem:_E,createNodejsEnv:RE,monkeyPatch:function(e){if(pE||TE(),!pE)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()")
var t=e.Canvas,n=void 0===t?pE.Canvas:t,r=e.Image,i=void 0===r?pE.Image:r
pE.Canvas=n,pE.Image=i,pE.createCanvasElement=e.createCanvasElement||function(){return new n},pE.createImageElement=e.createImageElement||function(){return new i},pE.ImageData=e.ImageData||pE.ImageData,pE.Video=e.Video||pE.Video,pE.fetch=e.fetch||pE.fetch,pE.readFile=e.readFile||pE.readFile},isBrowser:CE,isNodejs:SE}
function NE(e){return IE.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function DE(e){var t=IE.getEnv(),n=t.Canvas
if(e instanceof t.CanvasRenderingContext2D)return e
var r=NE(e)
if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas")
var i=r.getContext("2d")
if(!i)throw new Error("resolveContext2d - canvas 2d context is null")
return i}TE(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(OE||(OE={}))
var PE=function(e){void 0===e&&(e={})
var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,i=e.fontSize,o=e.fontStyle,a=e.padding
this.anchorPosition=t||OE.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=a||4},ME=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"==typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new PE(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding
return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding
return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===OE.BOTTOM_RIGHT||n===OE.TOP_RIGHT,i=n===OE.BOTTOM_LEFT||n===OE.BOTTOM_RIGHT,o=this.measureWidth(e),a=this.measureHeight(),s=r?this.anchor.x-o:this.anchor.x,u=i?this.anchor.y-a:this.anchor.y
if(t){var c=t.width,l=t.height
return{x:Math.max(Math.min(s,c-o),0),y:Math.max(Math.min(u,l-a),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=NE(e),n=DE(t),r=this.options,i=r.backgroundColor,o=r.fontColor,a=r.fontSize,s=r.fontStyle,u=r.padding
n.font=a+"px "+s
var c=this.measureWidth(n),l=this.measureHeight()
n.fillStyle=i
var h=this.getUpperLeft(n,t)
n.fillRect(h.x,h.y,c,l),n.fillStyle=o,this.text.forEach(function(e,t){var r=u+h.x,i=u+h.y+(t+1)*a
n.fillText(e,r,i)})},e}(),FE=function(e){void 0===e&&(e={})
var t=e.boxColor,n=e.lineWidth,r=e.label,i=e.drawLabelOptions
this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r
var o={anchorPosition:OE.BOTTOM_LEFT,backgroundColor:this.boxColor}
this.drawLabelOptions=new PE(Object.assign({},o,i))},LE=function(){function e(e,t){void 0===t&&(t={}),this.box=new vE(e),this.options=new FE(t)}return e.prototype.draw=function(e){var t=DE(e),n=this.options,r=n.boxColor,i=n.lineWidth,o=this.box,a=o.x,s=o.y,u=o.width,c=o.height
t.strokeStyle=r,t.lineWidth=i,t.strokeRect(a,s,u,c)
var l=this.options.label
l&&new ME([l],{x:a-i/2,y:s},this.options.drawLabelOptions).draw(e)},e}()
function BE(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),yp(function(){var i=ix(Gx(e,t.filters,[1,1],n),t.bias)
return r?Mw(i):i})}function jE(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function zE(e,t){return function(n,r,i,o){var a=Hp(e(n*r*i*i),[i,i,n,r]),s=Wp(e(r))
return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function UE(e,t){return function(n,r,i){var o=Vp(e(n*r),[n,r]),a=Wp(e(r))
return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var WE=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}
function VE(e,t){return function(n,r,i){var o=Hp(e(9*n),[3,3,n,1]),a=Hp(e(n*r),[1,1,n,r]),s=Wp(e(r))
return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new WE(o,a,s)}}function qE(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),i=e(t+"/bias",1)
return new WE(n,r,i)}}function HE(e,t){return function(n,r,i){var o=e[n]
if(!eE(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o)
return t.push({originalPath:n,paramPath:i||n}),o}}function GE(e){var t=e
return{extractWeights:function(e){var n=t.slice(0,e)
return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function KE(e,t){var n=t+"-weights_manifest.json"
if(!e)return{modelBaseUri:"",manifestUri:n}
if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n}
var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter(function(e){return e}),o=e.endsWith(".json")?i[i.length-1]:n,a=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/")
return{modelBaseUri:a=e.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+o:a+"/"+o}}function $E(e){var t=IE.getEnv(),n=t.Image,r=t.Video
return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function XE(e){return new Promise(function(t,n){if(e instanceof IE.getEnv().Canvas||$E(e))return t()
function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),t(e))}function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),n(e))}e.addEventListener("load",r),e.addEventListener("error",i)})}function YE(e){return new Promise(function(t,n){if(!(e instanceof Blob))return n("bufferToImage - expected buf to be of type: Blob")
var r=new FileReader
r.onload=function(){if("string"!=typeof r.result)return n("bufferToImage - expected reader.result to be a string, in onload")
var e=IE.getEnv().createImageElement()
e.onload=function(){return t(e)},e.onerror=n,e.src=r.result},r.onerror=n,r.readAsDataURL(e)})}function QE(e){var t=IE.getEnv(),n=t.Image,r=t.Video
return e instanceof n?new JR(e.naturalWidth,e.naturalHeight):e instanceof r?new JR(e.videoWidth,e.videoHeight):new JR(e.width,e.height)}function JE(e){var t=e.width,n=e.height,r=(0,IE.getEnv().createCanvasElement)()
return r.width=t,r.height=n,r}function ZE(e,t){var n=IE.getEnv().ImageData
if(!(e instanceof n||$E(e)))throw new Error("createCanvasFromMedia - media has not finished loading yet")
var r=t||QE(e),i=r.width,o=r.height,a=JE({width:i,height:o})
return e instanceof n?DE(a).putImageData(e,0,0):DE(a).drawImage(e,0,0,i,o),a}function eC(e,t){return l(this,void 0,void 0,function(){var n
return h(this,function(r){switch(r.label){case 0:return[4,(0,IE.getEnv().fetch)(e,t)]
case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url)
return[2,n]}})})}function tC(e){return l(this,void 0,void 0,function(){var t,n
return h(this,function(r){switch(r.label){case 0:return[4,eC(e)]
case 1:return[4,(t=r.sent()).blob()]
case 2:if(!(n=r.sent()).type.startsWith("image/"))throw new Error("fetchImage - expected blob type to be of type image/*, instead have: "+n.type+", for url: "+t.url)
return[2,YE(n)]}})})}function nC(e){return l(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,eC(e)]
case 1:return[2,t.sent().json()]}})})}function rC(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=Float32Array.bind,[4,eC(e)]
case 1:return[4,n.sent().arrayBuffer()]
case 2:return[2,new(t.apply(Float32Array,[void 0,n.sent()]))]}})})}function iC(e,t){return l(this,void 0,void 0,function(){var n,r,i,o,a,s
return h(this,function(u){switch(u.label){case 0:return n=t||IE.getEnv().createCanvasElement(),r=e.shape.slice(iE(e)?1:0),i=r[0],o=r[1],a=r[2],s=yp(function(){return e.as3D(i,o,a).toInt()}),[4,PR.toPixels(s,n)]
case 1:return u.sent(),s.dispose(),[2,n]}})})}function oC(e,t,n){void 0===n&&(n=!1)
var r=IE.getEnv(),i=r.Image,o=r.Canvas
if(!(e instanceof i||e instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement")
var a=QE(e),s=t/Math.max(a.height,a.width),u=s*a.width,c=s*a.height,l=JE({width:t,height:t}),h=e instanceof o?e:ZE(e),f=Math.abs(u-c)/2,d=n&&u<c?f:0,p=n&&c<u?f:0
return DE(l).drawImage(h,d,p,u,c),l}function aC(e){var t=IE.getEnv(),n=t.Image,r=t.Canvas,i=t.Video
return e instanceof n||e instanceof r||e instanceof i}function sC(e,t){return l(this,void 0,void 0,function(){var n,r,i,o
return h(this,function(a){switch(a.label){case 0:return n=KE(e,t),r=n.manifestUri,i=n.modelBaseUri,[4,nC(r)]
case 1:return o=a.sent(),[2,IR.loadWeights(o,i)]}})})}function uC(e,t,n){void 0===n&&(n=!1)
var r=n?QE(t):t,i=r.width,o=r.height
return e.width=i,e.height=o,{width:i,height:o}}function cC(e,t){return void 0===t&&(t=!1),yp(function(){var n=e.shape.slice(1),r=n[0],i=n[1]
if(r===i)return e
var o=Math.abs(r-i),a=Math.round(o*(t?.5:1)),s=r>i?2:1,u=function(t){var n=e.shape.slice()
return n[s]=t,$p(n,0)},c=u(a),l=o-c.shape[s],h=[t&&l?u(l):null,e,c].filter(function(e){return!!e}).map(function(e){return e.toFloat()})
return Jp(h,s)})}var lC=function(){function e(e,t){var n=this
if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e)
this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(rE(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape)
if(iE(e)){var r=e.shape[0]
if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array")
return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var i=e instanceof IE.getEnv().Canvas?e:ZE(e)
n._canvases[t]=i,n._inputDimensions[t]=[i.height,i.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this
return hE(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet")
return cE({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this
return void 0===t&&(t=!0),this._inputSize=e,yp(function(){var r=hE(n.batchSize,0,1).map(function(r){var i=n.getInput(r)
if(i instanceof Yf){var o=iE(i)?i:i.expandDims()
return(o=cC(o,t)).shape[1]===e&&o.shape[2]===e||(o=S_.resizeBilinear(o,[e,e])),o.as3D(e,e,3)}if(i instanceof IE.getEnv().Canvas)return PR.fromPixels(oC(i,e,t))
throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)})
return Bv(r.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3)})},e}()
function hC(e){return l(this,void 0,void 0,function(){var t,n,r
return h(this,function(i){switch(i.label){case 0:if(e instanceof lC)return[2,e]
if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input")
return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(NE)).forEach(function(e,r){if(!aC(e)&&!rE(e)&&!iE(e)){if("string"==typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r])
throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(iE(e)){var i=e.shape[0]
if(1!==i)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(e){return aC(e)&&XE(e)}))]
case 1:return i.sent(),[2,new lC(r,Array.isArray(e))]}})})}var fC=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e)
return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp
r[i].dispose(),r[i]=t},e.prototype.getParamList=function(){var e=this
return this._paramMappings.map(function(t){var n=t.paramPath
return{path:n,tensor:e.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof nd})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof nd)})},e.prototype.variable=function(){var e=this
this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor
e.reassignParamFromPath(n,r.variable())})},e.prototype.freeze=function(){var e=this
this.getTrainableParams().forEach(function(t){var n=t.path,r=t.tensor,i=jp(r.dataSync())
r.dispose(),e.reassignParamFromPath(n,i)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path)
t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor
return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},e.prototype.load=function(e){return l(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)]
case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromUri - expected model uri")
return[4,sC(e,this.getDefaultModelName())]
case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(e){return l(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l
return h(this,function(h){switch(h.label){case 0:if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromDisk - expected model file path")
return t=IE.getEnv().readFile,n=KE(e,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,o=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},a=IR.weightsLoaderFactory(o),c=(u=JSON).parse,[4,t(r)]
case 1:return s=c.apply(u,[h.sent().toString()]),[4,a(s,i)]
case 2:return l=h.sent(),this.loadFromWeightMap(l),[2]}})})},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params
this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params
this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params")
var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e)
return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,r=t.objProp
if(!(n&&r&&n[r]instanceof Yf))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e)
return{obj:n,objProp:r}},e}()
function dC(e,t,n){void 0===n&&(n=!0)
var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))
return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function pC(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=t.reduce(function(e,t){return t<e?t:e},1/0),i=n.reduce(function(e,t){return t<e?t:e},1/0),o=t.reduce(function(e,t){return e<t?t:e},0),a=n.reduce(function(e,t){return e<t?t:e},0)
return new mE(r,i,o,a)}function vC(e,t,n,r){void 0===r&&(r=!0)
for(var i=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),o=[],a=function(){var t=i.pop()
o.push(t)
for(var a=i,s=[],u=0;u<a.length;u++){var c=a[u],l=e[t],h=e[c]
s.push(dC(l,h,r))}i=i.filter(function(e,t){return s[t]<=n})};i.length>0;)a()
return o}function mC(e,t){return yp(function(){var n=t[0],r=t[1],i=t[2],o=$p(e.shape.slice(0,3).concat([1]),n),a=$p(e.shape.slice(0,3).concat([1]),r),s=$p(e.shape.slice(0,3).concat([1]),i),u=Jp([o,a,s],3)
return Rx(e,u)})}function gC(e){for(var t=e.slice(),n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),i=t[n]
t[n]=t[r],t[r]=i}return t}function yC(e){return 1/(1+Math.exp(-e))}function bC(e){return Math.log(e/(1-e))}var xC,wC=function(e){return"number"==typeof e}
function _C(e){if(!e)throw new Error("invalid config: "+e)
if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs)
if(!wC(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold)
if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"==typeof e}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes))
if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return wC(e.x)&&wC(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors))
if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(wC)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function RC(e){return yp(function(){var t=gx(e,Up(.10000000149011612))
return ix(Mw(Rx(e,t)),t)})}function EC(e,t){return yp(function(){var n=kv(e,[[0,0],[1,1],[1,1],[0,0]])
return n=Gx(n,t.conv.filters,[1,1],"valid"),n=Rx(n,t.bn.sub),n=gx(n,t.bn.truediv),RC(n=ix(n,t.conv.bias))})}function CC(e,t){return yp(function(){var n=kv(e,[[0,0],[1,1],[1,1],[0,0]])
return n=Qx(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),RC(n=ix(n,t.bias))})}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(xC||(xC={}))
var kC=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold
if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32")
if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),SC=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this
return _C(t),n._config=t,n}return u(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=EC(e,t.conv0)
return n=EC(n=lw(n,[2,2],[2,2],"same"),t.conv1),n=EC(n=lw(n,[2,2],[2,2],"same"),t.conv2),n=EC(n=lw(n,[2,2],[2,2],"same"),t.conv3),n=EC(n=lw(n,[2,2],[2,2],"same"),t.conv4),n=EC(n=lw(n,[2,2],[2,2],"same"),t.conv5),n=EC(n=lw(n,[2,2],[1,1],"same"),t.conv6),BE(n=EC(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?RC(BE(e,t.conv0,"valid",!1)):CC(e,t.conv0)
return n=CC(n=lw(n,[2,2],[2,2],"same"),t.conv1),n=CC(n=lw(n,[2,2],[2,2],"same"),t.conv2),n=CC(n=lw(n,[2,2],[2,2],"same"),t.conv3),n=CC(n=lw(n,[2,2],[2,2],"same"),t.conv4),n=CC(n=lw(n,[2,2],[2,2],"same"),t.conv5),n=lw(n,[2,2],[1,1],"same"),n=t.conv6?CC(n,t.conv6):n,BE(n=t.conv7?CC(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params
if(!r)throw new Error("TinyYolov2 - load model before inference")
return yp(function(){var i=e.toBatchTensor(t,!1).toFloat()
return i=(i=n.config.meanRgb?mC(i,n.config.meanRgb):i).div(Up(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)})},t.prototype.forward=function(e,t){return l(this,void 0,void 0,function(){var n
return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hC(e)]
case 1:return[4,n.apply(this,[r.sent(),t])]
case 2:return[2,r.sent()]}})})},t.prototype.detect=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,f,d,p,v=this
return h(this,function(h){switch(h.label){case 0:return n=new kC(t),r=n.inputSize,i=n.scoreThreshold,[4,hC(e)]
case 1:return o=h.sent(),[4,this.forwardInput(o,r)]
case 2:return a=h.sent(),s=yp(function(){return Uv(a)[0].expandDims()}),u={width:o.getInputWidth(0),height:o.getInputHeight(0)},[4,this.extractBoxes(s,o.getReshapedInputDimensions(0),i)]
case 3:return c=h.sent(),a.dispose(),s.dispose(),l=c.map(function(e){return e.box}),f=c.map(function(e){return e.score}),d=c.map(function(e){return e.classScore}),p=c.map(function(e){return v.config.classes[e.label]}),[2,vC(l.map(function(e){return e.rescale(r)}),f,this.config.iouThreshold,!0).map(function(e){return new yE(f[e],d[e],p[e],l[e],u)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],i=function(e,t){var n=HE(e,t)
function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){return{conv:r(e+"/conv"),bn:function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn")}},extractSeparableConvParams:qE(n)}}(e,r),o=i.extractConvParams,a=i.extractConvWithBatchNormParams,s=i.extractSeparableConvParams
if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9
n={conv0:t.isFirstLayerConv2d?o("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:o("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")}
return jE(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0
if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config")
return function(e,t,n,r){var i,o=GE(e),a=o.extractWeights,s=o.getRemainingWeights,u=[],c=function(e,t){var n=zE(e,t),r=VE(e,t)
return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,o){return{conv:n(r,i,3,o+"/conv"),bn:function(n,r){var i=Wp(e(n)),o=Wp(e(n))
return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:o}}(i,o+"/bn")}},extractSeparableConvParams:r}}(a,u),l=c.extractConvParams,h=c.extractConvWithBatchNormParams,f=c.extractSeparableConvParams
if(t.withSeparableConvs){var d=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8]
i={conv0:t.isFirstLayerConv2d?l(d,p,3,"conv0"):f(d,p,"conv0"),conv1:f(p,v,"conv1"),conv2:f(v,m,"conv2"),conv3:f(m,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,b,"conv5"),conv6:x?f(b,x,"conv6"):void 0,conv7:w?f(x,w,"conv7"):void 0,conv8:l(w||x||b,5*n,1,"conv8")}}else d=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8],i={conv0:h(d,p,"conv0"),conv1:h(p,v,"conv1"),conv2:h(v,m,"conv2"),conv3:h(m,g,"conv3"),conv4:h(g,y,"conv4"),conv5:h(y,b,"conv5"),conv6:h(b,x,"conv6"),conv7:h(x,w,"conv7"),conv8:l(w,5*n,1,"conv8")}
if(0!==s().length)throw new Error("weights remaing after extract: "+s().length)
return{params:i,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return l(this,void 0,void 0,function(){var r,i,o,a,s,u,l,f,d,p,v,m,g,y,b,x,w,_,R,E,C,k,S,A,T,O,I,N,D,P=this
return h(this,function(h){switch(h.label){case 0:return r=t.width,i=t.height,o=Math.max(r,i),a=o/r,s=o/i,u=e.shape[1],l=this.config.anchors.length,f=yp(function(){var t=e.reshape([u,u,l,P.boxEncodingSize])
return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),P.withClassScores?im(t.slice([0,0,0,5],[u,u,l,P.config.classes.length]),3):Up(0)]}),d=f[0],p=f[1],v=f[2],m=[],[4,p.array()]
case 1:return g=h.sent(),[4,d.array()]
case 2:y=h.sent(),b=0,h.label=3
case 3:if(!(b<u))return[3,12]
x=0,h.label=4
case 4:if(!(x<u))return[3,11]
w=0,h.label=5
case 5:return w<l?(_=yC(g[b][x][w][0]),!n||_>n?(R=(x+yC(y[b][x][w][0]))/u*a,E=(b+yC(y[b][x][w][1]))/u*s,C=Math.exp(y[b][x][w][2])*this.config.anchors[w].x/u*a,k=Math.exp(y[b][x][w][3])*this.config.anchors[w].y/u*s,S=R-C/2,A=E-k/2,T={row:b,col:x,anchor:w},this.withClassScores?[4,this.extractPredictedClass(v,T)]:[3,7]):[3,9]):[3,10]
case 6:return D=h.sent(),[3,8]
case 7:D={classScore:1,label:0},h.label=8
case 8:I=(O=D).classScore,N=O.label,m.push(c({box:new mE(S,A,S+C,A+k),score:_,classScore:_*I,label:N},T)),h.label=9
case 9:return w++,[3,5]
case 10:return x++,[3,4]
case 11:return b++,[3,3]
case 12:return d.dispose(),p.dispose(),v.dispose(),[2,m]}})})},t.prototype.extractPredictedClass=function(e,t){return l(this,void 0,void 0,function(){var n,r,i,o
return h(this,function(a){switch(a.label){case 0:return n=t.row,r=t.col,i=t.anchor,[4,e.array()]
case 1:return o=a.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return o[n][r][i][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(fC)
function AC(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,r){var i=n.x,o=n.y,a=t[r]
e.moveTo(a.x,a.y),e.lineTo(i,o)}),n){var r=t[t.length-1],i=t[0]
if(!r||!i)return
e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}var TC=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return u(t,e),t.prototype.forSize=function(n,r){var i=e.prototype.forSize.call(this,n,r)
return new t(i.score,i.relativeBox,i.imageDims)},t}(yE)
function OC(e){return e.detection instanceof TC}function IC(e,t){var n={detection:t}
return Object.assign({},e,n)}function NC(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){var n=t instanceof TC?t.score:OC(t)?t.detection.score:void 0,r=t instanceof TC?t.box:OC(t)?t.detection.box:new vE(t),o=n?""+sE(n):void 0
new i.DrawBox(r,{label:o}).draw(e)})}function DC(e,t,n){return Ht(function(){var r=Zs(e,t.depthwise_filter,t.pointwise_filter,n,"same")
return Vu(r,t.bias)})}function PC(e,t,n){return void 0===n&&(n=!1),Ht(function(){var r=bc(n?Vu(Xs(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):DC(e,t.conv0,[2,2])),i=DC(r,t.conv1,[1,1]),o=DC(bc(Vu(r,i)),t.conv2,[1,1])
return bc(Vu(r,Vu(i,o)))})}function MC(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Ht(function(){var i=bc(n?Vu(Xs(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):DC(e,t.conv0,r?[2,2]:[1,1])),o=DC(i,t.conv1,[1,1]),a=DC(bc(Vu(i,o)),t.conv2,[1,1]),s=DC(bc(Vu(i,Vu(o,a))),t.conv3,[1,1])
return bc(Vu(i,Vu(o,Vu(a,s))))})}function FC(e,t){var n=o.extractConvParamsFactory(e,t),r=o.extractSeparableConvParamsFactory(e,t)
function i(e,t,i,o){return void 0===o&&(o=!1),{conv0:o?n(e,t,3,i+"/conv0"):r(e,t,i+"/conv0"),conv1:r(t,t,i+"/conv1"),conv2:r(t,t,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(e,t,n,o){void 0===o&&(o=!1)
var a=i(e,t,n,o)
return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:r(t,t,n+"/conv3")}}}}function LC(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function BC(e,t){var n=o.extractWeightEntryFactory(e,t),r=LC(n),i=o.loadSeparableConvParamsFactory(n)
return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2"),conv3:i(e+"/conv3")}}}}var jC=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return u(t,e),t.prototype.forwardInput=function(e){var t=this.params
if(!t)throw new Error("FaceFeatureExtractor - load model before inference")
return Ht(function(){var n=MC(mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(kn(255)),t.dense0,!0)
return n=MC(n,t.dense1),n=MC(n,t.dense2),n=MC(n,t.dense3),fu(n,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=BC(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")}
return o.disposeUnusedWeightTensors(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=o.extractWeightsFactory(e),r=n.extractWeights,i=n.getRemainingWeights,a=FC(r,t).extractDenseBlock4Params,s=a(3,32,"dense0",!0),u=a(32,64,"dense1"),c=a(64,128,"dense2"),l=a(128,256,"dense3")
if(0!==i().length)throw new Error("weights remaing after extract: "+i().length)
return{paramMappings:t,params:{dense0:s,dense1:u,dense2:c,dense3:l}}}(e)},t}(fC)
function zC(e,t){return Ht(function(){return Vu(tu(e,t.weights),t.bias)})}function UC(e){var t={},n={}
return Object.keys(e).forEach(function(r){(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var WC=function(e){function t(t,n){var r=e.call(this,t)||this
return r._faceFeatureExtractor=n,r}return u(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params
if(!n)throw new Error(this._name+" - load model before inference")
return Ht(function(){var r=e instanceof lC?t.faceFeatureExtractor.forwardInput(e):e
return zC(r.as2D(r.shape[0],-1),n.fc)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings
this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],i=o.extractWeightsFactory(e),a=i.extractWeights,s=i.getRemainingWeights,u=o.extractFCParamsFactory(a,r)(t,n,"fc")
if(0!==s().length)throw new Error("weights remaing after extract: "+s().length)
return{paramMappings:r,params:{fc:u}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=UC(e),n=t.featureExtractorMap,r=t.classifierMap
return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=o.extractWeightEntryFactory(e,t),r={fc:("fc",{weights:n("fc/weights",2),bias:n("fc/bias",1)})}
return o.disposeUnusedWeightTensors(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),o=e.slice(e.length-r)
return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},t}(fC),VC=["neutral","happy","sad","angry","fearful","disgusted","surprised"],qC=function(){function e(e){var t=this
if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length)
VC.forEach(function(n,r){t[n]=e[r]})}return e.prototype.asSortedArray=function(){var e=this
return VC.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},e}(),HC=function(e){function t(t){return void 0===t&&(t=new jC),e.call(this,"FaceExpressionNet",t)||this}return u(t,e),t.prototype.forwardInput=function(e){var t=this
return Ht(function(){return Qr(t.runNet(e))})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictExpressions=function(e){return l(this,void 0,void 0,function(){var t,n,r,i,o=this
return h(this,function(a){switch(a.label){case 0:return[4,hC(e)]
case 1:return t=a.sent(),[4,this.forwardInput(t)]
case 2:return n=a.sent(),[4,Promise.all(Ar(n).map(function(e){return l(o,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return[4,e.data()]
case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))]
case 3:return r=a.sent(),n.dispose(),i=r.map(function(e){return new qC(e)}),[2,t.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(WC)
function GC(e){return e.expressions instanceof qC}function KC(e,t){var n={expressions:t}
return Object.assign({},e,n)}function $C(e,t,n,r){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach(function(t){var o=t instanceof qC?t:GC(t)?t.expressions:void 0
if(!o)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof")
var a=o.asSortedArray().filter(function(e){return e.probability>n}),s=OC(t)?t.detection.box.bottomLeft:r||new ZR(0,0)
new i.DrawTextField(a.map(function(e){return e.expression+" ("+sE(e.probability)+")"}),s).draw(e)})}var XC=function(){function e(e,t,n){void 0===n&&(n=new ZR(0,0))
var r=t.width,i=t.height
this._imgDims=new JR(r,i),this._shift=n,this._positions=e.map(function(e){return e.mul(new ZR(r,i)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new ZR(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this
return this._positions.map(function(t){return t.sub(e._shift).div(new ZR(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new ZR(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof TC?e.box.floor():new vE(e)
return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=r.useDlibAlignment,o=r.minBoxPadding
return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],i=function(e){return r.sub(e).magnitude()},o=(i(t)+i(n))/2,a=Math.floor(o/.45),s=lE(e),u=Math.floor(Math.max(0,s.x-.5*a)),c=Math.floor(Math.max(0,s.y-.43*a))
return new xE(u,c,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t,n,r,i,o,a,s,u=(n=(t=this.positions).map(function(e){return e.x}),r=t.map(function(e){return e.y}),i=n.reduce(function(e,t){return t<e?t:e},1/0),o=r.reduce(function(e,t){return t<e?t:e},1/0),a=n.reduce(function(e,t){return e<t?t:e},0),s=r.reduce(function(e,t){return e<t?t:e},0),new mE(i,o,a,s))
return u.pad(u.width*e,u.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),YC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(lE)},t}(XC)
function QC(e){return OC(e)&&e.landmarks instanceof XC&&e.unshiftedLandmarks instanceof XC&&e.alignedRect instanceof TC}function JC(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),i=r.align(),o=e.detection.imageDims,a={landmarks:r,unshiftedLandmarks:t,alignedRect:new TC(e.detection.score,i.rescale(o.reverse()),o)}
return Object.assign({},e,a)}var ZC=function(e){void 0===e&&(e={})
var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,i=void 0===r||r,o=e.lineWidth,a=e.lineColor,s=e.pointSize,u=e.pointColor
this.drawLines=n,this.drawPoints=i,this.lineWidth=o||1,this.pointSize=s||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"},ek=function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new ZC(t)}return e.prototype.draw=function(e){var t=DE(e),n=this.options,r=n.drawLines,i=n.drawPoints,o=n.lineWidth,a=n.lineColor,s=n.pointSize,u=n.pointColor
r&&this.faceLandmarks instanceof YC&&(t.strokeStyle=a,t.lineWidth=o,AC(t,this.faceLandmarks.getJawOutline()),AC(t,this.faceLandmarks.getLeftEyeBrow()),AC(t,this.faceLandmarks.getRightEyeBrow()),AC(t,this.faceLandmarks.getNose()),AC(t,this.faceLandmarks.getLeftEye(),!0),AC(t,this.faceLandmarks.getRightEye(),!0),AC(t,this.faceLandmarks.getMouth(),!0)),i&&(t.strokeStyle=u,t.fillStyle=u,this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))},e}()
function tk(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){var n=t instanceof XC?t:QC(t)?t.landmarks:void 0
if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof")
new ek(n).draw(e)})}function nk(e,t,n){return Vu(Xs(e,t.filters,n,"same"),t.bias)}function rk(e,t,n){void 0===n&&(n=!0)
var r=n?bc(e):e
return r=DC(r,t.separable_conv0,[1,1]),r=DC(bc(r),t.separable_conv1,[1,1]),r=hu(r,[3,3],[2,2],"same"),Vu(r,nk(e,t.expansion_conv,[2,2]))}var ik,ok=function(e){function t(t){var n=e.call(this,"TinyXception")||this
return n._numMainBlocks=t,n}return u(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params
if(!n)throw new Error("TinyXception - load model before inference")
return Ht(function(){var r=mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(kn(256)),i=bc(nk(r,n.entry_flow.conv_in,[2,2]))
return i=rk(i,n.entry_flow.reduction_block_0,!1),i=rk(i,n.entry_flow.reduction_block_1),hE(t._numMainBlocks,0,1).forEach(function(e){i=function(e,t){var n=DC(bc(e),t.separable_conv0,[1,1])
return n=DC(bc(n),t.separable_conv1,[1,1]),n=DC(bc(n),t.separable_conv2,[1,1]),Vu(n,e)}(i,n.middle_flow["main_block_"+e])}),i=rk(i,n.exit_flow.reduction_block),i=bc(DC(i,n.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n=[],r=function(e,t){var n=o.extractWeightEntryFactory(e,t),r=LC(n),i=o.loadSeparableConvParamsFactory(n)
return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),separable_conv2:i(e+"/separable_conv2")}}}}(e,n),i=r.extractConvParams,a=r.extractSeparableConvParams,s=r.extractReductionBlockParams,u=r.extractMainBlockParams,c={conv_in:i("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},l={}
hE(t,0,1).forEach(function(e){l["main_block_"+e]=u("middle_flow/main_block_"+e)})
var h={reduction_block:s("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")}
return o.disposeUnusedWeightTensors(e,n),{params:{entry_flow:c,middle_flow:l,exit_flow:h},paramMappings:n}}(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return function(e,t){var n=[],r=o.extractWeightsFactory(e),i=r.extractWeights,a=r.getRemainingWeights,s=function(e,t){var n=o.extractConvParamsFactory(e,t),r=o.extractSeparableConvParamsFactory(e,t)
return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,i){return{separable_conv0:r(e,t,i+"/separable_conv0"),separable_conv1:r(t,t,i+"/separable_conv1"),expansion_conv:n(e,t,1,i+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(i,n),u=s.extractConvParams,c=s.extractSeparableConvParams,l=s.extractReductionBlockParams,h=s.extractMainBlockParams,f={conv_in:u(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},d={}
hE(t,0,1).forEach(function(e){d["main_block_"+e]=h(128,"middle_flow/main_block_"+e)})
var p={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:c(256,512,"exit_flow/separable_conv")}
if(0!==a().length)throw new Error("weights remaing after extract: "+a().length)
return{paramMappings:n,params:{entry_flow:f,middle_flow:d,exit_flow:p}}}(e,this._numMainBlocks)},t}(fC)
!function(e){e.FEMALE="female",e.MALE="male"}(ik||(ik={}))
var ak=function(e){function t(t){void 0===t&&(t=new ok(2))
var n=e.call(this,"AgeGenderNet")||this
return n._faceFeatureExtractor=t,n}return u(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params
if(!n)throw new Error(this._name+" - load model before inference")
return Ht(function(){var r=e instanceof lC?t.faceFeatureExtractor.forwardInput(e):e,i=fu(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1)
return{age:zC(i,n.fc.age).as1D(),gender:zC(i,n.fc.gender)}})},t.prototype.forwardInput=function(e){var t=this
return Ht(function(){var n=t.runNet(e),r=n.age,i=n.gender
return{age:r,gender:Qr(i)}})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return l(this,void 0,void 0,function(){var t,n,r,i,o,a,s=this
return h(this,function(u){switch(u.label){case 0:return[4,hC(e)]
case 1:return t=u.sent(),[4,this.forwardInput(t)]
case 2:return n=u.sent(),r=Ar(n.age),i=Ar(n.gender),o=r.map(function(e,t){return{ageTensor:e,genderTensor:i[t]}}),[4,Promise.all(o.map(function(e){var t=e.ageTensor,n=e.genderTensor
return l(s,void 0,void 0,function(){var e,r,i,o,a
return h(this,function(s){switch(s.label){case 0:return[4,t.data()]
case 1:return e=s.sent()[0],[4,n.data()]
case 2:return r=s.sent()[0],o=(i=r>.5)?ik.MALE:ik.FEMALE,a=i?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:o,genderProbability:a}]}})})}))]
case 3:return a=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings
this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=o.extractWeightsFactory(e),r=n.extractWeights,i=n.getRemainingWeights,a=o.extractFCParamsFactory(r,t),s=a(512,1,"fc/age"),u=a(512,2,"fc/gender")
if(0!==i().length)throw new Error("weights remaing after extract: "+i().length)
return{paramMappings:t,params:{fc:{age:s,gender:u}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=UC(e),n=t.featureExtractorMap,r=t.classifierMap
return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=o.extractWeightEntryFactory(e,t)
function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}}
return o.disposeUnusedWeightTensors(e,t),{params:i,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539)
return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(fC),sk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions
return[e[0],e[1],lE([e[3],e[4]])]},t}(XC),uk=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+sE(this.distance)+")":"")},e}(),ck=function(){function e(e,t){if("string"!=typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string")
if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array")
this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e}()
function lk(e,t){return l(this,void 0,void 0,function(){var n,r,i,o,a,s
return h(this,function(u){switch(u.label){case 0:return n=IE.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,hC(e)]
case 1:if((i=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported")
return(o=i.getInput(0))instanceof n?(a=o,[3,4]):[3,2]
case 2:return[4,iC(o)]
case 3:a=u.sent(),u.label=4
case 4:r=a,u.label=5
case 5:return s=DE(r),[2,t.map(function(e){return e instanceof TC?e.forSize(r.width,r.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(r.width,r.height)}).map(function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=JE({width:r,height:i})
return DE(o).putImageData(s.getImageData(t,n,r,i),0,0),o})]}})})}function hk(e,t){return l(this,void 0,void 0,function(){return h(this,function(n){if(!rE(e)&&!iE(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D")
if(iE(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported")
return[2,Ht(function(){var n=e.shape.slice(iE(e)?1:0),r=n[0],i=n[1],o=n[2]
return t.map(function(e){return e instanceof TC?e.forSize(i,r).box:e}).map(function(e){return e.clipAtImageBorders(i,r)}).map(function(t){var n=t.x,a=t.y,s=t.width,u=t.height
return gu(e.as3D(r,i,o),[a,n,0],[u,s,o])})})]})})}var fk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map(function(e){var n=e.width,r=e.height,i=t/Math.max(r,n)
return{width:n*i,height:r*i}}),i=r.length
return Ht(function(){var n=function(e,t){return Cr([Mn([68],e),Mn([68],t)],1).as2D(1,136).as1D()},o=function(e,t){var n=r[e],i=n.width,o=n.height
return t(i,o)?Math.abs(i-o)/2:0}
return e.mul(Mn([i,136],t)).sub(Cr(Array.from(Array(i),function(e,t){return n(o(t,function(e,t){return e<t}),o(t,function(e,t){return t<e}))}))).div(Cr(Array.from(Array(i),function(e,t){return n(r[t].width,r[t].height)})))})},t.prototype.forwardInput=function(e){var t=this
return Ht(function(){var n=t.runNet(e)
return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.detectLandmarks=function(e){return l(this,void 0,void 0,function(){var t,n,r,i=this
return h(this,function(o){switch(o.label){case 0:return[4,hC(e)]
case 1:return t=o.sent(),n=Ht(function(){return Ar(i.forwardInput(t))}),[4,Promise.all(n.map(function(e,n){return l(i,void 0,void 0,function(){var r,i,o,a,s
return h(this,function(u){switch(u.label){case 0:return o=(i=Array).from,[4,e.data()]
case 1:return r=o.apply(i,[u.sent()]),a=r.filter(function(e,t){return aE(t)}),s=r.filter(function(e,t){return!aE(t)}),[2,new YC(Array(68).fill(0).map(function(e,t){return new ZR(a[t],s[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))]
case 2:return r=o.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(WC),dk=function(e){function t(t){return void 0===t&&(t=new jC),e.call(this,"FaceLandmark68Net",t)||this}return u(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(fk),pk=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return u(t,e),t.prototype.forwardInput=function(e){var t=this.params
if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference")
return Ht(function(){var n=PC(mC(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(kn(255)),t.dense0,!0)
return n=PC(n,t.dense1),n=PC(n,t.dense2),fu(n,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=BC(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")}
return o.disposeUnusedWeightTensors(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=o.extractWeightsFactory(e),r=n.extractWeights,i=n.getRemainingWeights,a=FC(r,t).extractDenseBlock3Params,s=a(3,32,"dense0",!0),u=a(32,64,"dense1"),c=a(64,128,"dense2")
if(0!==i().length)throw new Error("weights remaing after extract: "+i().length)
return{paramMappings:t,params:{dense0:s,dense1:u,dense2:c}}}(e)},t}(fC),vk=function(e){function t(t){return void 0===t&&(t=new pk),e.call(this,"FaceLandmark68TinyNet",t)||this}return u(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(fk),mk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(dk)
function gk(e,t,n,r,i){void 0===i&&(i="same")
var o=t.conv,a=o.filters,s=o.bias,u=Xs(e,a,n,i)
return u=function(e,t){return Vu(nc(e,t.weights),t.biases)}(u=Vu(u,s),t.scale),r?bc(u):u}function yk(e,t){return gk(e,t,[1,1],!1)}function bk(e,t){return gk(e,t,[2,2],!0,"valid")}function xk(e,t){var n=function(e,t){return gk(e,t,[1,1],!0)}(e,t.conv1)
return n=yk(n,t.conv2),n=Vu(n,e),bc(n)}function wk(e,t){var n=bk(e,t.conv1)
n=yk(n,t.conv2)
var r=fu(e,2,2,"valid"),i=Pn(r.shape),o=r.shape[3]!==n.shape[3]
if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=n.shape.slice()
a[1]=1
var s=Pn(a),u=(n=zn([n,s],1)).shape.slice()
u[2]=1
var c=Pn(u)
n=zn([n,c],2)}return r=o?zn([r,i],3):r,n=Vu(r,n),bc(n)}var _k=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return u(t,e),t.prototype.forwardInput=function(e){var t=this.params
if(!t)throw new Error("FaceRecognitionNet - load model before inference")
return Ht(function(){var n=bk(mC(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(kn(256)),t.conv32_down)
n=xk(n=hu(n,3,2,"valid"),t.conv32_1),n=xk(n,t.conv32_2),n=xk(n,t.conv32_3),n=xk(n=wk(n,t.conv64_down),t.conv64_1),n=xk(n,t.conv64_2),n=xk(n,t.conv64_3),n=xk(n=wk(n,t.conv128_down),t.conv128_1),n=xk(n,t.conv128_2),n=xk(n=wk(n,t.conv256_down),t.conv256_1)
var r=(n=wk(n=xk(n,t.conv256_2),t.conv256_down_out)).mean([1,2])
return tu(r,t.fc)})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return l(this,void 0,void 0,function(){var t,n,r,i=this
return h(this,function(o){switch(o.label){case 0:return[4,hC(e)]
case 1:return t=o.sent(),n=Ht(function(){return Ar(i.forwardInput(t))}),[4,Promise.all(n.map(function(e){return e.data()}))]
case 2:return r=o.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=o.extractWeightEntryFactory(e,t)
function r(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}(e,t),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),s=i("conv32_1"),u=i("conv32_2"),c=i("conv32_3"),l=i("conv64_down"),h=i("conv64_1"),f=i("conv64_2"),d=i("conv64_3"),p=i("conv128_down"),v=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),y=i("conv256_1"),b=i("conv256_2"),x=i("conv256_down_out"),w=e.fc
if(t.push({originalPath:"fc",paramPath:"fc"}),!nE(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w)
var _={conv32_down:a,conv32_1:s,conv32_2:u,conv32_3:c,conv64_down:l,conv64_1:h,conv64_2:f,conv64_3:d,conv128_down:p,conv128_1:v,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:b,conv256_down_out:x,fc:w}
return o.disposeUnusedWeightTensors(e,t),{params:_,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=o.extractWeightsFactory(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=function(e,t){function n(n,r,i,o){var a=function(t,n,r){var i=e(t),o=i.length/(n*r*r)
if(oE(o))throw new Error("depth has to be an integer: "+o+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r)
return Ht(function(){return wc(On(i,[n,o,r,r]),[2,3,1,0])})}(n,r,i),s=Sn(e(r))
return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}function r(r,i,o,a){return{conv:n(r,i,o,a+"/conv"),scale:function(n,r){var i=Sn(e(n)),o=Sn(e(n))
return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:o}}(i,a+"/scale")}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,i,o){return void 0===o&&(o=!1),{conv1:r((o?.5:1)*e,t,n,i+"/conv1"),conv2:r(e,t,n,i+"/conv2")}}}}(n,i),s=a.extractConvLayerParams,u=a.extractResidualLayerParams,c=s(4704,32,7,"conv32_down"),l=u(9216,32,3,"conv32_1"),h=u(9216,32,3,"conv32_2"),f=u(9216,32,3,"conv32_3"),d=u(36864,64,3,"conv64_down",!0),p=u(36864,64,3,"conv64_1"),v=u(36864,64,3,"conv64_2"),m=u(36864,64,3,"conv64_3"),g=u(147456,128,3,"conv128_down",!0),y=u(147456,128,3,"conv128_1"),b=u(147456,128,3,"conv128_2"),x=u(589824,256,3,"conv256_down",!0),w=u(589824,256,3,"conv256_1"),_=u(589824,256,3,"conv256_2"),R=u(589824,256,3,"conv256_down_out"),E=Ht(function(){return wc(An(n(32768),[128,256]),[1,0])})
if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length)
return{params:{conv32_down:c,conv32_1:l,conv32_2:h,conv32_3:f,conv64_down:d,conv64_1:p,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:y,conv128_2:b,conv256_down:x,conv256_1:w,conv256_2:_,conv256_down_out:R,fc:E},paramMappings:i}}(e)},t}(fC)
function Rk(e){var t=new _k
return t.extractWeights(e),t}function Ek(e,t){var n={descriptor:t}
return Object.assign({},e,n)}var Ck=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,a=t.scaleSteps
if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=a,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0")
if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1")
if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0")
if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!=typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3")
if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!=typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}()
function kk(e,t,n){return Ht(function(){var r=Xs(e,t.filters,n,"same")
return r=Vu(r,t.batch_norm_offset),is(r,0,6)})}var Sk=.0010000000474974513
function Ak(e,t,n){var r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),h=Math.max(r[n][1],r[n][3]),f=(a-i)*(s-o),d=(l-u)*(h-c)
if(f<=0||d<=0)return 0
var p=Math.max(i,u),v=Math.max(o,c),m=Math.min(a,l),g=Math.min(s,h),y=Math.max(m-p,0)*Math.max(g-v,0)
return y/(f+d-y)}function Tk(e,t){return Ht(function(){var n=e.shape[0]
return{boxPredictionEncoding:_r(o.convLayer(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:_r(o.convLayer(e,t.class_predictor),[n,-1,3])}})}var Ok=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults
if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1")
if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Ik=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return u(t,e),t.prototype.forwardInput=function(e){var t=this.params
if(!t)throw new Error("SsdMobilenetv1 - load model before inference")
return Ht(function(){var n=e.toBatchTensor(512,!1).toFloat(),r=function(e,t){return Ht(function(){var n=null,r=kk(e,t.conv_0,[2,2])
if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(e,t){var i=t+1,o=function(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}(i)
r=kk(r=function(e,t,n){return Ht(function(){var r=Js(e,t.filters,n,"same")
return r=Us(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,Sk),is(r,0,6)})}(r,e.depthwise_conv,o),e.pointwise_conv,[1,1]),11===i&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null")
return{out:r,conv11:n}})}(uc(nc(n,kn(.007843137718737125)),kn(1)),t.mobilenetv1),i=function(e,t,n){return Ht(function(){var r=kk(e,n.conv_0,[1,1]),i=kk(r,n.conv_1,[2,2]),o=kk(i,n.conv_2,[1,1]),a=kk(o,n.conv_3,[2,2]),s=kk(a,n.conv_4,[1,1]),u=kk(s,n.conv_5,[2,2]),c=kk(u,n.conv_6,[1,1]),l=kk(c,n.conv_7,[2,2]),h=Tk(t,n.box_predictor_0),f=Tk(e,n.box_predictor_1),d=Tk(i,n.box_predictor_2),p=Tk(a,n.box_predictor_3),v=Tk(u,n.box_predictor_4),m=Tk(l,n.box_predictor_5)
return{boxPredictions:zn([h.boxPredictionEncoding,f.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:zn([h.classPrediction,f.classPrediction,d.classPrediction,p.classPrediction,v.classPrediction,m.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer)
return function(e,t,n){return Ht(function(){var r=e.shape[0],i=function(e,t){var n=function(e){var t=Ar(wc(e,[1,0])),n=[uc(t[2],t[0]),uc(t[3],t[1])]
return{sizes:n,centers:[Vu(t[0],Ku(n[0],kn(2))),Vu(t[1],Ku(n[1],kn(2)))]}}(e),r=n.sizes,i=n.centers,o=Ar(wc(t,[1,0])),a=Ku(nc(us(Ku(o[2],kn(5))),r[0]),kn(2)),s=Vu(nc(Ku(o[0],kn(10)),r[0]),i[0]),u=Ku(nc(us(Ku(o[3],kn(5))),r[1]),kn(2)),c=Vu(nc(Ku(o[1],kn(10)),r[1]),i[1])
return wc(Cr([uc(s,a),uc(c,u),Vu(s,a),Vu(c,u)]),[1,0])}(_r(kr(n.extra_dim,[r,1,1]),[-1,4]),_r(e,[-1,4]))
i=_r(i,[r,i.shape[0]/r,4])
var o=ys(pu(t,[0,0,1],[-1,-1,-1])),a=pu(o,[0,0,0],[-1,-1,1])
return a=_r(a,[r,a.shape[1]]),{boxes:Ar(i),scores:Ar(a)}})}(i.boxPredictions,i.classPredictions,t.output_layer)})},t.prototype.forward=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hC(e)]
case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,f,d,p,v,m,g,y,b,x,w,_
return h(this,function(h){switch(h.label){case 0:return n=new Ok(t),r=n.maxResults,i=n.minConfidence,[4,hC(e)]
case 1:for(o=h.sent(),a=this.forwardInput(o),s=a.boxes,u=a.scores,c=s[0],l=u[0],f=1;f<s.length;f++)s[f].dispose(),u[f].dispose()
return v=(p=Array).from,[4,l.data()]
case 2:return d=v.apply(p,[h.sent()]),m=function(e,t,n,r,i){var o=e.shape[0],a=Math.min(n,o),s=t.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>i}).sort(function(e,t){return t.score-e.score}),u=[]
return s.forEach(function(t){if(!(u.length>=a)){for(var n=t.score,r=u.length-1;r>=0;--r){var o=Ak(e,t.boxIndex,u[r])
if(0!==o&&(t.score*=o<=.5?1:0,t.score<=i))break}n===t.score&&u.push(t.boxIndex)}}),u}(c,d,r,0,i),g=o.getReshapedInputDimensions(0),y=o.inputSize,b=y/g.width,x=y/g.height,w=c.arraySync(),_=m.map(function(e){var t=[Math.max(0,w[e][0]),Math.min(1,w[e][2])].map(function(e){return e*x}),n=t[0],r=t[1],i=[Math.max(0,w[e][1]),Math.min(1,w[e][3])].map(function(e){return e*b}),a=i[0],s=i[1]
return new TC(d[e],new xE(a,n,s-a,r-n),{height:o.getInputHeight(0),width:o.getInputWidth(0)})}),c.dispose(),l.dispose(),[2,_]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=o.extractWeightEntryFactory(e,t)
function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(e){var t="mobilenetv1/conv_"+e,i="MobilenetV1/Conv2d_"+e+"_depthwise",o=t+"/depthwise_conv",a=t+"/pointwise_conv"
return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function a(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function s(e){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}}}(e,t),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=e["Output/extra_dim"]
if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!rE(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a)
var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}}
return o.disposeUnusedWeightTensors(e,t),{params:s,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=o.extractWeightsFactory(e),r=n.extractWeights,i=n.getRemainingWeights,a=function(e,t){function n(n,r,i,o,a){var s=On(e(n*r*i*i),[i,i,n,r]),u=Sn(e(r))
return t.push({paramPath:o+"/filters"},{paramPath:o+"/"+(a?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,i){var o=n(e,t,r,i,!0)
return{filters:o.filters,batch_norm_offset:o.bias}}function i(n,i,o){return{depthwise_conv:function(n,r){var i=On(e(9*n),[3,3,n,1]),o=Sn(e(n)),a=Sn(e(n)),s=Sn(e(n)),u=Sn(e(n))
return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:o,batch_norm_offset:a,batch_norm_mean:s,batch_norm_variance:u}}(n,o+"/depthwise_conv"),pointwise_conv:r(n,i,1,o+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,t),s=a.extractMobilenetV1Params,u=a.extractPredictionLayerParams,c=s(),l=u(),h={extra_dim:Tn(r(20472),[1,5118,4])}
if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length)
return{params:{mobilenetv1:c,prediction_layer:l,output_layer:h},paramMappings:t}}(e)},t}(fC)
function Nk(e){var t=new Ik
return t.extractWeights(e),t}function Dk(e){return Nk(e)}var Pk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(Ik),Mk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this
return t._name="TinyFaceDetectorOptions",t}return u(t,e),t}(o.TinyYolov2Options),Fk=function(){function e(){}return e.prototype.then=function(e){return l(this,void 0,void 0,function(){var t
return h(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()]
case 1:return[2,t.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return l(this,void 0,void 0,function(){return h(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},e}()
function Lk(e,t,n,r,i){return void 0===i&&(i=function(e){return e.alignedRect}),l(this,void 0,void 0,function(){var o,a,s,u,c
return h(this,function(l){switch(l.label){case 0:return o=e.map(function(e){return QC(e)?i(e):e.detection}),(s=r)?[3,5]:t instanceof we?[4,hk(t,o)]:[3,2]
case 1:return u=l.sent(),[3,4]
case 2:return[4,lk(t,o)]
case 3:u=l.sent(),l.label=4
case 4:s=u,l.label=5
case 5:return[4,n(a=s)]
case 6:return c=l.sent(),a.forEach(function(e){return e instanceof we&&e.dispose()}),[2,c]}})})}function Bk(e,t,n,r,i){return l(this,void 0,void 0,function(){var o=this
return h(this,function(a){return[2,Lk([e],t,function(e){return l(o,void 0,void 0,function(){return h(this,function(t){return[2,n(e[0])]})})},r,i)]})})}var jk=2,zk=12
function Uk(e,t){var n=t[0],r=t[1]
return{height:Math.floor(n*e),width:Math.floor(r*e)}}var Wk=function(e){function t(t,n,r,i){return e.call(this,{left:t,top:n,right:r,bottom:i},!0)||this}return u(t,e),t}(vE)
function Vk(e){return Ht(function(){return nc(uc(e,kn(127.5)),kn(.0078125))})}function qk(e,t){return Ht(function(){return Vu(bc(e),nc(t,ps(bc(ps(e)))))})}function Hk(e,t,n){return void 0===n&&(n=!1),Ht(function(){var r=o.convLayer(e,t.conv1,"valid")
return r=qk(r,t.prelu1_alpha),r=hu(r,n?[2,2]:[3,3],[2,2],"same"),r=qk(r=o.convLayer(r,t.conv2,"valid"),t.prelu2_alpha),r=n?r:hu(r,[3,3],[2,2],"valid"),qk(r=o.convLayer(r,t.conv3,"valid"),t.prelu3_alpha)})}function Gk(e,t,n,r,i){i.stage1=[]
var a=t.map(function(t){return Ht(function(){var n={scale:t},i=function(e,t){return Ht(function(){var n=Uk(t,e.shape.slice(1)),r=n.height,i=n.width,o=Vk(dl.resizeBilinear(e,[r,i]))
return wc(o,[0,2,1,3])})}(e,t),a=Date.now(),s=function(e,t){return Ht(function(){var n=Hk(e,t,!0),r=o.convLayer(n,t.conv4_1,"valid"),i=lr(Cu(r,3),3)
return{prob:Qr(uc(r,i),3),regions:o.convLayer(n,t.conv4_2,"valid")}})}(i,r),u=s.prob,c=s.regions
return n.pnet=Date.now()-a,{scoresTensor:Ar(Ar(u,3)[1])[0],regionsTensor:Ar(c)[0],scale:t,statsForScale:n}})}).map(function(e){var t=e.scoresTensor,r=e.regionsTensor,o=e.scale,a=e.statsForScale,s=function(e,t,n,r){for(var i=[],o=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)o[a][s]>=r&&i.push(new ZR(s,a))
return i.map(function(e){var r=new mE(Math.round((e.y*jk+1)/n),Math.round((e.x*jk+1)/n),Math.round((e.y*jk+zk)/n),Math.round((e.x*jk+zk)/n)),i=o[e.y][e.x],a=t.arraySync()
return{cell:r,score:i,region:new Wk(a[e.y][e.x][0],a[e.y][e.x][1],a[e.y][e.x][2],a[e.y][e.x][3])}})}(t,r,o,n)
if(t.dispose(),r.dispose(),!s.length)return i.stage1.push(a),[]
var u=Date.now(),c=vC(s.map(function(e){return e.cell}),s.map(function(e){return e.score}),.5)
return a.nms=Date.now()-u,a.numBoxes=c.length,i.stage1.push(a),c.map(function(e){return s[e]})}).reduce(function(e,t){return e.concat(t)},[]),s=[],u=[]
if(a.length>0){var c=Date.now(),l=vC(a.map(function(e){return e.cell}),a.map(function(e){return e.score}),.7)
i.stage1_nms=Date.now()-c,u=l.map(function(e){return a[e].score}),s=l.map(function(e){return a[e]}).map(function(e){var t=e.cell,n=e.region
return new mE(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:s,scores:u}}function Kk(e,t,n){var r=n.width,i=n.height
return l(this,void 0,void 0,function(){var n,o,a,s=this
return h(this,function(u){switch(u.label){case 0:return n=DE(e),[4,Promise.all(t.map(function(t){return l(s,void 0,void 0,function(){var r,i,o,a,s,u,c,l
return h(this,function(h){return r=t.padAtBorders(e.height,e.width),i=r.y,o=r.ey,a=r.x,s=r.ex,u=a-1,c=i-1,l=n.getImageData(u,c,s-u,o-c),[2,IE.isNodejs()?ZE(l):createImageBitmap(l)]})})}))]
case 1:return o=u.sent(),a=[],o.forEach(function(e){var t=DE(JE({width:r,height:i}))
t.drawImage(e,0,0,r,i)
for(var n=t.getImageData(0,0,r,i).data,o=[],s=0;s<n.length;s+=4)o.push(n[s+2]),o.push(n[s+1]),o.push(n[s])
a.push(o)}),[2,a.map(function(e){return Ht(function(){return Vk(wc(On(e,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}function $k(e,t,n,r,i){return l(this,void 0,void 0,function(){var o,a,s,u,c,l,f,d,p,v,m,g,y,b
return h(this,function(h){switch(h.label){case 0:return o=Date.now(),[4,Kk(e,t,{width:24,height:24})]
case 1:return a=h.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(e){var t=function(e,t){return Ht(function(){var n=Hk(e,t),r=qk(zC(_r(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),i=zC(r,t.fc2_1),o=lr(Cu(i,1),1),a=Qr(uc(i,o),1),s=zC(r,t.fc2_2)
return{scores:Ar(a,1)[1],regions:s}})}(e,r)
return e.dispose(),t}),i.stage2_rnet=Date.now()-o,u=s.length>1?zn(s.map(function(e){return e.scores})):s[0].scores,f=(l=Array).from,[4,u.data()]
case 2:return c=f.apply(l,[h.sent()]),u.dispose(),d=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),p=d.map(function(e){return t[e]}),v=d.map(function(e){return c[e]}),m=[],g=[],p.length>0&&(o=Date.now(),y=vC(p,v,.7),i.stage2_nms=Date.now()-o,b=y.map(function(e){var t=s[d[e]].regions.arraySync()
return new Wk(t[0][0],t[0][1],t[0][2],t[0][3])}),g=y.map(function(e){return v[e]}),m=y.map(function(e,t){return p[e].calibrate(b[t])})),s.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function Xk(e,t,n,r,i){return l(this,void 0,void 0,function(){var a,s,u,c,l,f,d,p,v,m,g,y,b,x,w
return h(this,function(h){switch(h.label){case 0:return a=Date.now(),[4,Kk(e,t,{width:48,height:48})]
case 1:return s=h.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),u=s.map(function(e){var t=function(e,t){return Ht(function(){var n=Hk(e,t)
n=hu(n,[2,2],[2,2],"same"),n=qk(n=o.convLayer(n,t.conv4,"valid"),t.prelu4_alpha)
var r=qk(zC(_r(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),i=zC(r,t.fc2_1),a=lr(Cu(i,1),1),s=Qr(uc(i,a),1),u=zC(r,t.fc2_2),c=zC(r,t.fc2_3)
return{scores:Ar(s,1)[1],regions:u,points:c}})}(e,r)
return e.dispose(),t}),i.stage3_onet=Date.now()-a,c=u.length>1?zn(u.map(function(e){return e.scores})):u[0].scores,d=(f=Array).from,[4,c.data()]
case 2:return l=d.apply(f,[h.sent()]),c.dispose(),p=l.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),v=p.map(function(e){var t=u[e].regions.arraySync()
return new Wk(t[0][0],t[0][1],t[0][2],t[0][3])}),m=p.map(function(e,n){return t[e].calibrate(v[n])}),g=p.map(function(e){return l[e]}),y=[],b=[],x=[],m.length>0&&(a=Date.now(),w=vC(m,g,.7,!1),i.stage3_nms=Date.now()-a,y=w.map(function(e){return m[e]}),b=w.map(function(e){return g[e]}),x=w.map(function(e,t){return Array(5).fill(0).map(function(n,r){var i=u[e].points.arraySync()
return new ZR(i[0][r]*(y[t].width+1)+y[t].left,i[0][r+5]*(y[t].height+1)+y[t].top)})})),u.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:y,scores:b,points:x}]}})})}var Yk=function(e){function t(){return e.call(this,"Mtcnn")||this}return u(t,e),t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,f,d,p,v,m,g,y,b,x,w,_,R
return h(this,function(h){switch(h.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference")
if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.")
return i={},o=Date.now(),a=Ht(function(){return e=lr(yh.fromPixels(r)).toFloat(),Ht(function(){return Cr(Ar(e,3).reverse(),3)})
var e}),s=function(e){return a.dispose(),i.total=Date.now()-o,e},u=a.shape.slice(1),c=u[0],l=u[1],f=new Ck(t),d=f.minFaceSize,p=f.scaleFactor,v=f.maxNumScales,m=f.scoreThresholds,g=f.scaleSteps,y=(g||function(e,t,n){for(var r=n[0],i=n[1],o=zk/d,a=[],s=Math.min(r,i)*o,u=0;s>=12;)a.push(o*Math.pow(t,u)),s*=t,u+=1
return a}(0,p,[c,l])).filter(function(e){var t=Uk(e,[c,l])
return Math.min(t.width,t.height)>zk}).slice(0,v),i.scales=y,i.pyramid=y.map(function(e){return Uk(e,[c,l])}),b=Date.now(),[4,Gk(a,y,m[0],n.pnet,i)]
case 1:return x=h.sent(),i.total_stage1=Date.now()-b,x.boxes.length?(i.stage2_numInputBoxes=x.boxes.length,b=Date.now(),[4,$k(r,x.boxes,m[1],n.rnet,i)]):[2,s({results:[],stats:i})]
case 2:return w=h.sent(),i.total_stage2=Date.now()-b,w.boxes.length?(i.stage3_numInputBoxes=w.boxes.length,b=Date.now(),[4,Xk(r,w.boxes,m[2],n.onet,i)]):[2,s({results:[],stats:i})]
case 3:return _=h.sent(),i.total_stage3=Date.now()-b,R=_.boxes.map(function(e,t){return JC(IC({},new TC(_.scores[t],new xE(e.left/l,e.top/c,e.width/l,e.height/c),{height:c,width:l})),new sk(_.points[t].map(function(t){return t.sub(new ZR(e.left,e.top)).div(new ZR(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,s({results:R,stats:i})]}})})},t.prototype.forward=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){var n
return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hC(e)]
case 1:return[4,n.apply(this,[r.sent(),t])]
case 2:return[2,r.sent().results]}})})},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){var n
return h(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hC(e)]
case 1:return[2,n.apply(this,[r.sent(),t])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=o.extractWeightEntryFactory(e,t)
function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function i(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function s(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=s("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2")
return c({},e,{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=s("rnet"),t=i("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=i("rnet/fc2_1"),o=i("rnet/fc2_2")
return c({},e,{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:o})},extractONetParams:function(){var e=s("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),o=i("onet/fc1"),u=a("onet/prelu5_alpha"),l=i("onet/fc2_1"),h=i("onet/fc2_2"),f=i("onet/fc2_3")
return c({},e,{conv4:t,prelu4_alpha:n,fc1:o,prelu5_alpha:u,fc2_1:l,fc2_2:h,fc2_3:f})}}}(e,t),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,s=r(),u=i(),l=a()
return o.disposeUnusedWeightTensors(e,t),{params:{pnet:s,rnet:u,onet:l},paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=o.extractWeightsFactory(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],a=function(e,t){var n=o.extractConvParamsFactory(e,t),r=o.extractFCParamsFactory(e,t)
function i(n,r){var i=Sn(e(n))
return t.push({paramPath:r}),i}function a(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:i(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:i(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:i(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2")
return c({},e,{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2")
return c({},e,{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=i(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=i(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),h=r(256,4,"onet/fc2_2"),f=r(256,10,"onet/fc2_3")
return c({},e,{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:h,fc2_3:f})}}}(n,i),s=a.extractPNetParams,u=a.extractRNetParams,l=a.extractONetParams,h=s(),f=u(),d=l()
if(0!==r().length)throw new Error("weights remaing after extract: "+r().length)
return{params:{pnet:h,rnet:f,onet:d},paramMappings:i}}(e)},t}(fC),Qk=.4,Jk=[new ZR(1.603231,2.094468),new ZR(6.041143,7.080126),new ZR(2.882459,3.518061),new ZR(4.266906,5.178857),new ZR(9.041765,10.66308)],Zk=[117.001,114.697,97.404],eS=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:Qk,classes:["face"],anchors:Jk,meanRgb:Zk,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]}
return e.call(this,t)||this}return u(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)]
case 1:return[2,n.sent().map(function(e){return new TC(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(o.TinyYolov2),tS=.4,nS=[new ZR(.738768,.874946),new ZR(2.42204,2.65704),new ZR(4.30971,7.04493),new ZR(10.246,4.59428),new ZR(12.6868,11.8741)],rS=[new ZR(1.603231,2.094468),new ZR(6.041143,7.080126),new ZR(2.882459,3.518061),new ZR(4.266906,5.178857),new ZR(9.041765,10.66308)],iS=[117.001,114.697,97.404],oS=function(e){function t(t){void 0===t&&(t=!0)
var n=Object.assign({},{withSeparableConvs:t,iouThreshold:tS,classes:["face"]},t?{anchors:rS,meanRgb:iS}:{anchors:nS,withClassScores:!0})
return e.call(this,n)||this}return u(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)]
case 1:return[2,n.sent().map(function(e){return new TC(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(o.TinyYolov2)
function aS(e,t){void 0===t&&(t=!0)
var n=new oS(t)
return n.extractWeights(e),n}var sS={ssdMobilenetv1:new Ik,tinyFaceDetector:new eS,tinyYolov2:new oS,mtcnn:new Yk,faceLandmark68Net:new dk,faceLandmark68TinyNet:new vk,faceRecognitionNet:new _k,faceExpressionNet:new HC,ageGenderNet:new ak},uS=function(e,t){return sS.ssdMobilenetv1.locateFaces(e,t)},cS=function(e,t){return sS.tinyFaceDetector.locateFaces(e,t)},lS=function(e,t){return sS.tinyYolov2.locateFaces(e,t)},hS=function(e,t){return sS.mtcnn.forward(e,t)},fS=function(e){return sS.faceLandmark68Net.detectLandmarks(e)},dS=function(e){return sS.faceLandmark68TinyNet.detectLandmarks(e)},pS=function(e){return sS.faceRecognitionNet.computeFaceDescriptor(e)},vS=function(e){return sS.faceExpressionNet.predictExpressions(e)},mS=function(e){return sS.ageGenderNet.predictAgeAndGender(e)},gS=function(e){return sS.ssdMobilenetv1.load(e)},yS=function(e){return sS.tinyFaceDetector.load(e)},bS=function(e){return sS.mtcnn.load(e)},xS=function(e){return sS.tinyYolov2.load(e)},wS=function(e){return sS.faceLandmark68Net.load(e)},_S=function(e){return sS.faceLandmark68TinyNet.load(e)},RS=function(e){return sS.faceRecognitionNet.load(e)},ES=function(e){return sS.faceExpressionNet.load(e)},CS=function(e){return sS.ageGenderNet.load(e)},kS=gS,SS=uS,AS=fS
function TS(e,t){var n={age:t}
return Object.assign({},e,n)}function OS(e,t,n){var r={gender:t,genderProbability:n}
return Object.assign({},e,r)}var IS=function(e){function t(t,n,r){var i=e.call(this)||this
return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return u(t,e),t}(Fk),NS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n=this
return h(this,function(r){switch(r.label){case 0:return[4,this.parentTask]
case 1:return[4,Lk(e=r.sent(),this.input,function(e){return l(n,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return sS.faceExpressionNet.predictExpressions(e)}))]
case 1:return[2,t.sent()]}})})},this.extractedFaces)]
case 2:return t=r.sent(),[2,e.map(function(e,n){return KC(e,t[n])})]}})})},t.prototype.withAgeAndGender=function(){return new LS(this,this.input)},t}(IS),DS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t
return h(this,function(n){switch(n.label){case 0:return[4,this.parentTask]
case 1:return(e=n.sent())?[4,Bk(e,this.input,function(e){return sS.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2]
case 2:return t=n.sent(),[2,KC(e,t)]}})})},t.prototype.withAgeAndGender=function(){return new BS(this,this.input)},t}(IS),PS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.withAgeAndGender=function(){return new jS(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WS(this,this.input)},t}(NS),MS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.withAgeAndGender=function(){return new zS(this,this.input)},t.prototype.withFaceDescriptor=function(){return new VS(this,this.input)},t}(DS),FS=function(e){function t(t,n,r){var i=e.call(this)||this
return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return u(t,e),t}(Fk),LS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n=this
return h(this,function(r){switch(r.label){case 0:return[4,this.parentTask]
case 1:return[4,Lk(e=r.sent(),this.input,function(e){return l(n,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return sS.ageGenderNet.predictAgeAndGender(e)}))]
case 1:return[2,t.sent()]}})})},this.extractedFaces)]
case 2:return t=r.sent(),[2,e.map(function(e,n){var r=t[n],i=r.age
return TS(OS(e,r.gender,r.genderProbability),i)})]}})})},t.prototype.withFaceExpressions=function(){return new NS(this,this.input)},t}(FS),BS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n,r,i
return h(this,function(o){switch(o.label){case 0:return[4,this.parentTask]
case 1:return(e=o.sent())?[4,Bk(e,this.input,function(e){return sS.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2]
case 2:return t=o.sent(),n=t.age,r=t.gender,i=t.genderProbability,[2,TS(OS(e,r,i),n)]}})})},t.prototype.withFaceExpressions=function(){return new DS(this,this.input)},t}(FS),jS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.withFaceExpressions=function(){return new PS(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WS(this,this.input)},t}(LS),zS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.withFaceExpressions=function(){return new MS(this,this.input)},t.prototype.withFaceDescriptor=function(){return new VS(this,this.input)},t}(BS),US=function(e){function t(t,n){var r=e.call(this)||this
return r.parentTask=t,r.input=n,r}return u(t,e),t}(Fk),WS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e
return h(this,function(t){switch(t.label){case 0:return[4,this.parentTask]
case 1:return[4,Lk(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return sS.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]
case 2:return[2,t.sent().map(function(t,n){return Ek(e[n],t)})]}})})},t.prototype.withFaceExpressions=function(){return new PS(this,this.input)},t.prototype.withAgeAndGender=function(){return new jS(this,this.input)},t}(US),VS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t
return h(this,function(n){switch(n.label){case 0:return[4,this.parentTask]
case 1:return(e=n.sent())?[4,Bk(e,this.input,function(e){return sS.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2]
case 2:return t=n.sent(),[2,Ek(e,t)]}})})},t.prototype.withFaceExpressions=function(){return new MS(this,this.input)},t.prototype.withAgeAndGender=function(){return new zS(this,this.input)},t}(US),qS=function(e){function t(t,n,r){var i=e.call(this)||this
return i.parentTask=t,i.input=n,i.useTinyLandmarkNet=r,i}return u(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?sS.faceLandmark68TinyNet:sS.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Fk),HS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n,r,i,o=this
return h(this,function(a){switch(a.label){case 0:return[4,this.parentTask]
case 1:return e=a.sent(),t=e.map(function(e){return e.detection}),this.input instanceof we?[4,hk(this.input,t)]:[3,3]
case 2:return r=a.sent(),[3,5]
case 3:return[4,lk(this.input,t)]
case 4:r=a.sent(),a.label=5
case 5:return n=r,[4,Promise.all(n.map(function(e){return o.landmarkNet.detectLandmarks(e)}))]
case 6:return i=a.sent(),n.forEach(function(e){return e instanceof we&&e.dispose()}),[2,e.map(function(e,t){return JC(e,i[t])})]}})})},t.prototype.withFaceExpressions=function(){return new PS(this,this.input)},t.prototype.withAgeAndGender=function(){return new jS(this,this.input)},t.prototype.withFaceDescriptors=function(){return new WS(this,this.input)},t}(qS),GS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n,r,i
return h(this,function(o){switch(o.label){case 0:return[4,this.parentTask]
case 1:return(e=o.sent())?(t=e.detection,this.input instanceof we?[4,hk(this.input,[t])]:[3,3]):[2]
case 2:return r=o.sent(),[3,5]
case 3:return[4,lk(this.input,[t])]
case 4:r=o.sent(),o.label=5
case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])]
case 6:return i=o.sent(),n.forEach(function(e){return e instanceof we&&e.dispose()}),[2,JC(e,i)]}})})},t.prototype.withFaceExpressions=function(){return new MS(this,this.input)},t.prototype.withAgeAndGender=function(){return new zS(this,this.input)},t.prototype.withFaceDescriptor=function(){return new VS(this,this.input)},t}(qS),KS=function(e){function t(t,n){void 0===n&&(n=new Ok)
var r=e.call(this)||this
return r.input=t,r.options=n,r}return u(t,e),t}(Fk),$S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t,n,r
return h(this,function(i){switch(i.label){case 0:return t=(e=this).input,(n=e.options)instanceof Ck?[4,sS.mtcnn.forward(t,n)]:[3,2]
case 1:return[2,i.sent().map(function(e){return e.detection})]
case 2:if(!(r=n instanceof Mk?function(e){return sS.tinyFaceDetector.locateFaces(e,n)}:n instanceof Ok?function(e){return sS.ssdMobilenetv1.locateFaces(e,n)}:n instanceof o.TinyYolov2Options?function(e){return sS.tinyYolov2.locateFaces(e,n)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options")
return[2,r(t)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this
return new Promise(function(t){return l(e,void 0,void 0,function(){var e
return h(this,function(n){switch(n.label){case 0:return[4,this.run()]
case 1:return e=n.sent(),[2,t(e.map(function(e){return IC({},e)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new HS(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new NS(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new LS(this.runAndExtendWithFaceDetections(),this.input)},t}(KS),XS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.run=function(){return l(this,void 0,void 0,function(){var e,t
return h(this,function(n){switch(n.label){case 0:return[4,new $S(this.input,this.options)]
case 1:return e=n.sent(),t=e[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this
return new Promise(function(t){return l(e,void 0,void 0,function(){var e
return h(this,function(n){switch(n.label){case 0:return[4,this.run()]
case 1:return e=n.sent(),[2,t(e?IC({},e):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new GS(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new DS(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new BS(this.runAndExtendWithFaceDetection(),this.input)},t}(KS)
function YS(e,t){return void 0===t&&(t=new Ok),new XS(e,t)}function QS(e,t){return void 0===t&&(t=new Ok),new $S(e,t)}function JS(e,t){return l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,QS(e,new Ok(t?{minConfidence:t}:{})).withFaceLandmarks().withFaceDescriptors()]
case 1:return[2,n.sent()]}})})}function ZS(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,QS(e,new o.TinyYolov2Options(t)).withFaceLandmarks().withFaceDescriptors()]
case 1:return[2,n.sent()]}})})}function eA(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,function(){return h(this,function(n){switch(n.label){case 0:return[4,QS(e,new Ck(t)).withFaceLandmarks().withFaceDescriptors()]
case 1:return[2,n.sent()]}})})}var tA=JS
function nA(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length")
var n=Array.from(e),r=Array.from(t)
return Math.sqrt(n.map(function(e,t){return e-r[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}var rA=function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t
var n=Array.isArray(e)?e:[e]
if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input")
var r=1,i=function(){return"person "+r++}
this._labeledDescriptors=n.map(function(e){if(e instanceof ck)return e
if(e instanceof Float32Array)return new ck(i(),[e])
if(e.descriptor&&e.descriptor instanceof Float32Array)return new ck(i(),[e.descriptor])
throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return nA(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this
return this.labeledDescriptors.map(function(n){var r=n.descriptors,i=n.label
return new uk(i,t.computeMeanDistance(e,r))}).reduce(function(e,t){return e.distance<t.distance?e:t})},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e)
return t.distance<this.distanceThreshold?t:new uk("unknown",t.distance)},e}()
function iA(e){var t=new Yk
return t.extractWeights(e),t}function oA(e){var t=new eS
return t.extractWeights(e),t}function aA(e,t){var n=new JR(t.width,t.height),r=n.width,i=n.height
if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}))
if(Array.isArray(e))return e.map(function(e){return aA(e,{width:r,height:i})})
if(QC(e)){var o=e.detection.forSize(r,i),a=e.unshiftedLandmarks.forSize(o.box.width,o.box.height)
return JC(IC(e,o),a)}return OC(e)?IC(e,e.detection.forSize(r,i)):e instanceof XC||e instanceof TC?e.forSize(r,i):e}n.d(t,"draw",function(){return sA}),n.d(t,"tf",function(){return r}),n.d(t,"TfjsImageRecognitionBase",function(){return o}),n.d(t,"env",function(){return IE}),n.d(t,"sigmoid",function(){return yC}),n.d(t,"inverseSigmoid",function(){return bC}),n.d(t,"isTensor",function(){return eE}),n.d(t,"isTensor1D",function(){return tE}),n.d(t,"isTensor2D",function(){return nE}),n.d(t,"isTensor3D",function(){return rE}),n.d(t,"isTensor4D",function(){return iE}),n.d(t,"isFloat",function(){return oE}),n.d(t,"isEven",function(){return aE}),n.d(t,"round",function(){return sE}),n.d(t,"isDimensions",function(){return uE}),n.d(t,"computeReshapedDimensions",function(){return cE}),n.d(t,"getCenterPoint",function(){return lE}),n.d(t,"range",function(){return hE}),n.d(t,"isValidNumber",function(){return fE}),n.d(t,"isValidProbablitiy",function(){return dE}),n.d(t,"NeuralNetwork",function(){return fC}),n.d(t,"BoundingBox",function(){return mE}),n.d(t,"Box",function(){return vE}),n.d(t,"Dimensions",function(){return JR}),n.d(t,"LabeledBox",function(){return gE}),n.d(t,"ObjectDetection",function(){return yE}),n.d(t,"Point",function(){return ZR}),n.d(t,"PredictedBox",function(){return bE}),n.d(t,"Rect",function(){return xE}),n.d(t,"awaitMediaLoaded",function(){return XE}),n.d(t,"bufferToImage",function(){return YE}),n.d(t,"createCanvas",function(){return JE}),n.d(t,"createCanvasFromMedia",function(){return ZE}),n.d(t,"fetchImage",function(){return tC}),n.d(t,"fetchJson",function(){return nC}),n.d(t,"fetchNetWeights",function(){return rC}),n.d(t,"fetchOrThrow",function(){return eC}),n.d(t,"getContext2dOrThrow",function(){return DE}),n.d(t,"getMediaDimensions",function(){return QE}),n.d(t,"imageTensorToCanvas",function(){return iC}),n.d(t,"imageToSquare",function(){return oC}),n.d(t,"isMediaElement",function(){return aC}),n.d(t,"isMediaLoaded",function(){return $E}),n.d(t,"loadWeightMap",function(){return sC}),n.d(t,"matchDimensions",function(){return uC}),n.d(t,"NetInput",function(){return lC}),n.d(t,"resolveInput",function(){return NE}),n.d(t,"toNetInput",function(){return hC}),n.d(t,"iou",function(){return dC}),n.d(t,"minBbox",function(){return pC}),n.d(t,"nonMaxSuppression",function(){return vC}),n.d(t,"normalize",function(){return mC}),n.d(t,"padToSquare",function(){return cC}),n.d(t,"shuffleArray",function(){return gC}),n.d(t,"AgeGenderNet",function(){return ak}),n.d(t,"Gender",function(){return ik}),n.d(t,"FaceDetection",function(){return TC}),n.d(t,"FaceLandmarks",function(){return XC}),n.d(t,"FaceLandmarks5",function(){return sk}),n.d(t,"FaceLandmarks68",function(){return YC}),n.d(t,"FaceMatch",function(){return uk}),n.d(t,"LabeledFaceDescriptors",function(){return ck}),n.d(t,"extractFaces",function(){return lk}),n.d(t,"extractFaceTensors",function(){return hk}),n.d(t,"FaceExpressionNet",function(){return HC}),n.d(t,"FACE_EXPRESSION_LABELS",function(){return VC}),n.d(t,"FaceExpressions",function(){return qC}),n.d(t,"FaceLandmarkNet",function(){return mk}),n.d(t,"FaceLandmark68Net",function(){return dk}),n.d(t,"FaceLandmark68TinyNet",function(){return vk}),n.d(t,"createFaceRecognitionNet",function(){return Rk}),n.d(t,"FaceRecognitionNet",function(){return _k}),n.d(t,"extendWithFaceDescriptor",function(){return Ek}),n.d(t,"isWithFaceDetection",function(){return OC}),n.d(t,"extendWithFaceDetection",function(){return IC}),n.d(t,"isWithFaceExpressions",function(){return GC}),n.d(t,"extendWithFaceExpressions",function(){return KC}),n.d(t,"isWithFaceLandmarks",function(){return QC}),n.d(t,"extendWithFaceLandmarks",function(){return JC}),n.d(t,"allFacesSsdMobilenetv1",function(){return JS}),n.d(t,"allFacesTinyYolov2",function(){return ZS}),n.d(t,"allFacesMtcnn",function(){return eA}),n.d(t,"allFaces",function(){return tA}),n.d(t,"ComposableTask",function(){return Fk}),n.d(t,"ComputeFaceDescriptorsTaskBase",function(){return US}),n.d(t,"ComputeAllFaceDescriptorsTask",function(){return WS}),n.d(t,"ComputeSingleFaceDescriptorTask",function(){return VS}),n.d(t,"detectSingleFace",function(){return YS}),n.d(t,"detectAllFaces",function(){return QS}),n.d(t,"DetectFacesTaskBase",function(){return KS}),n.d(t,"DetectAllFacesTask",function(){return $S}),n.d(t,"DetectSingleFaceTask",function(){return XS}),n.d(t,"DetectFaceLandmarksTaskBase",function(){return qS}),n.d(t,"DetectAllFaceLandmarksTask",function(){return HS}),n.d(t,"DetectSingleFaceLandmarksTask",function(){return GS}),n.d(t,"FaceMatcher",function(){return rA}),n.d(t,"nets",function(){return sS}),n.d(t,"ssdMobilenetv1",function(){return uS}),n.d(t,"tinyFaceDetector",function(){return cS}),n.d(t,"tinyYolov2",function(){return lS}),n.d(t,"mtcnn",function(){return hS}),n.d(t,"detectFaceLandmarks",function(){return fS}),n.d(t,"detectFaceLandmarksTiny",function(){return dS}),n.d(t,"computeFaceDescriptor",function(){return pS}),n.d(t,"recognizeFaceExpressions",function(){return vS}),n.d(t,"predictAgeAndGender",function(){return mS}),n.d(t,"loadSsdMobilenetv1Model",function(){return gS}),n.d(t,"loadTinyFaceDetectorModel",function(){return yS}),n.d(t,"loadMtcnnModel",function(){return bS}),n.d(t,"loadTinyYolov2Model",function(){return xS}),n.d(t,"loadFaceLandmarkModel",function(){return wS}),n.d(t,"loadFaceLandmarkTinyModel",function(){return _S}),n.d(t,"loadFaceRecognitionModel",function(){return RS}),n.d(t,"loadFaceExpressionModel",function(){return ES}),n.d(t,"loadAgeGenderModel",function(){return CS}),n.d(t,"loadFaceDetectionModel",function(){return kS}),n.d(t,"locateFaces",function(){return SS}),n.d(t,"detectLandmarks",function(){return AS}),n.d(t,"createMtcnn",function(){return iA}),n.d(t,"Mtcnn",function(){return Yk}),n.d(t,"MtcnnOptions",function(){return Ck}),n.d(t,"createSsdMobilenetv1",function(){return Nk}),n.d(t,"createFaceDetectionNet",function(){return Dk}),n.d(t,"FaceDetectionNet",function(){return Pk}),n.d(t,"SsdMobilenetv1",function(){return Ik}),n.d(t,"SsdMobilenetv1Options",function(){return Ok}),n.d(t,"createTinyFaceDetector",function(){return oA}),n.d(t,"TinyFaceDetector",function(){return eS}),n.d(t,"TinyFaceDetectorOptions",function(){return Mk}),n.d(t,"TinyYolov2",function(){return oS}),n.d(t,"createTinyYolov2",function(){return aS}),n.d(t,"euclideanDistance",function(){return nA}),n.d(t,"resizeResults",function(){return aA})
var sA=c({},i,a)},function(e,t,n){"use strict"
n.r(t)
var r=n(1),i=n(0)
function o(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,s=r.default.assert
!function(e){e[e.None=0]="None",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.Info=3]="Info"}(a||(a={}))
var u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sources={},this._strategies={},n.sources&&n.sources.forEach(function(e){return t.addSource(e)}),n.strategies&&n.strategies.forEach(function(e){return t.addStrategy(e)}),this._defaultActivationOptions=n.defaultActivationOptions||{},void 0===this._defaultActivationOptions.logLevel&&(this._defaultActivationOptions.logLevel=a.Info)}var t,n
return t=e,(n=[{key:"addSource",value:function(e){var t=e.name
s("Sources require a 'name' to be added to a coordinator.",!!t),s("A source named '".concat(t,"' has already been added to this coordinator."),!this._sources[t]),s("A coordinator's sources can not be changed while it is active.",!this._activated),this._sources[t]=e}},{key:"removeSource",value:function(e){var t=this._sources[e]
s("Source '".concat(e,"' has not been added to this coordinator."),!!t),s("A coordinator's sources can not be changed while it is active.",!this._activated),delete this._sources[e]}},{key:"getSource",value:function(e){return this._sources[e]}},{key:"addStrategy",value:function(e){var t=e.name
s("A strategy named '".concat(t,"' has already been added to this coordinator."),!this._strategies[t]),s("A coordinator's strategies can not be changed while it is active.",!this._activated),this._strategies[t]=e}},{key:"removeStrategy",value:function(e){var t=this._strategies[e]
s("Strategy '".concat(e,"' has not been added to this coordinator."),!!t),s("A coordinator's strategies can not be changed while it is active.",!this._activated),delete this._strategies[e]}},{key:"getStrategy",value:function(e){return this._strategies[e]}},{key:"activate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return this._activated||(void 0===t.logLevel&&(t.logLevel=this._defaultActivationOptions.logLevel),this._currentActivationOptions=t,this._activated=this.strategies.reduce(function(n,r){return n.then(function(){return r.activate(e,t)})},Promise.resolve())),this._activated}},{key:"deactivate",value:function(){var e=this
return this._activated?this._activated.then(function(){return e.strategies.reverse().reduce(function(e,t){return e.then(function(){return t.deactivate()})},Promise.resolve())}).then(function(){e._activated=null}):Promise.resolve()}},{key:"sources",get:function(){return Object(i.objectValues)(this._sources)}},{key:"sourceNames",get:function(){return Object.keys(this._sources)}},{key:"strategies",get:function(){return Object(i.objectValues)(this._strategies)}},{key:"strategyNames",get:function(){return Object.keys(this._strategies)}},{key:"activated",get:function(){return this._activated}}])&&o(t.prototype,n),e}()
function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=r.default.assert,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f("Strategy requires a name",!!t.name),this._name=t.name,this._sourceNames=t.sources,this._logPrefix=t.logPrefix||"[".concat(this._name,"]"),this._logLevel=this._customLogLevel=t.logLevel}var t,n,r,i
return t=e,(n=[{key:"activate",value:(i=l(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,u,c=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},this._coordinator=t,void 0===this._customLogLevel&&(this._logLevel=n.logLevel),this._sourceNames?this._sources=this._sourceNames.map(function(e){return t.getSource(e)}):this._sources=t.sources,r=!0,i=!1,o=void 0,e.prev=7,a=this._sources[Symbol.iterator]()
case 9:if(r=(s=a.next()).done){e.next=16
break}return u=s.value,e.next=13,u.activate()
case 13:r=!0,e.next=9
break
case 16:e.next=22
break
case 18:e.prev=18,e.t0=e.catch(7),i=!0,o=e.t0
case 22:e.prev=22,e.prev=23,r||null==a.return||a.return()
case 25:if(e.prev=25,!i){e.next=28
break}throw o
case 28:return e.finish(25)
case 29:return e.finish(22)
case 30:case"end":return e.stop()}},e,this,[[7,18,22,30],[23,,25,29]])})),function(e){return i.apply(this,arguments)})},{key:"deactivate",value:(r=l(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,i=this._sources[Symbol.iterator]()
case 5:if(t=(o=i.next()).done){e.next=12
break}return a=o.value,e.next=9,a.deactivate()
case 9:t=!0,e.next=5
break
case 12:e.next=18
break
case 14:e.prev=14,e.t0=e.catch(3),n=!0,r=e.t0
case 18:e.prev=18,e.prev=19,t||null==i.return||i.return()
case 21:if(e.prev=21,!n){e.next=24
break}throw r
case 24:return e.finish(21)
case 25:return e.finish(18)
case 26:this._coordinator=null
case 27:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(){return r.apply(this,arguments)})},{key:"name",get:function(){return this._name}},{key:"coordinator",get:function(){return this._coordinator}},{key:"sources",get:function(){return this._sources}},{key:"logPrefix",get:function(){return this._logPrefix}},{key:"logLevel",get:function(){return this._logLevel}}])&&h(t.prototype,n),e}()
function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)})}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t)
if(r){var i=Object.getOwnPropertyDescriptor(r,t)
return i.get?i.get.call(n):i.value}})(e,t,n||e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.name=e.name||"log-truncation",function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,b(t).call(this,e))}var n,r,i,o
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,d),n=t,(r=[{key:"activate",value:(o=m(regeneratorRuntime.mark(function e(n){var r,i,o,a,s,u,c,l=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,y(b(t.prototype),"activate",this).call(this,n,r)
case 3:for(this._transformListeners={},i=!0,o=!1,a=void 0,e.prev=7,s=this._sources[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)c=u.value,this._connectSource(c)
e.next=15
break
case 11:e.prev=11,e.t0=e.catch(7),o=!0,a=e.t0
case 15:e.prev=15,e.prev=16,i||null==s.return||s.return()
case 18:if(e.prev=18,!o){e.next=21
break}throw a
case 21:return e.finish(18)
case 22:return e.finish(15)
case 23:case"end":return e.stop()}},e,this,[[7,11,15,23],[16,,18,22]])})),function(e){return o.apply(this,arguments)})},{key:"deactivate",value:(i=m(regeneratorRuntime.mark(function e(){var n,r,i,o,a,s
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(b(t.prototype),"deactivate",this).call(this)
case 2:for(n=!0,r=!1,i=void 0,e.prev=5,o=this._sources[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)s=a.value,this._disconnectSource(s)
e.next=13
break
case 9:e.prev=9,e.t0=e.catch(5),r=!0,i=e.t0
case 13:e.prev=13,e.prev=14,n||null==o.return||o.return()
case 16:if(e.prev=16,!r){e.next=19
break}throw i
case 19:return e.finish(16)
case 20:return e.finish(13)
case 21:this._transformListeners=null
case 22:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])})),function(){return i.apply(this,arguments)})},{key:"_review",value:function(e){var t=this._sources,n=e.transformLog.head
if(n&&t.length>1){for(var r=!0,i=0;i<t.length;i++){var o=t[i]
if(!(o===e||o.requestQueue.empty&&o.syncQueue.empty&&o.transformLog.contains(n))){r=!1
break}}if(r)return this._truncateSources(n,0)}}},{key:"_truncateSources",value:function(e,t){return this._sources.reduce(function(n,r){return n.then(function(){return r.transformLog.truncate(e,t)})},Promise.resolve())}},{key:"_connectSource",value:function(e){var t=this,n=this._transformListeners[e.name]=function(){if(e.requestQueue.empty&&e.syncQueue.empty)return t._review(e)}
e.syncQueue.on("complete",n),e.requestQueue.on("complete",n)}},{key:"_disconnectSource",value:function(e){var t=this._transformListeners[e.name]
e.syncQueue.off("complete",t),e.requestQueue.off("complete",t),delete this._transformListeners[e.name]}}])&&g(n.prototype,r),t}()
function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){R(o,r,i,a,s,"next",e)}function s(e){R(o,r,i,a,s,"throw",e)}a(void 0)})}}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t)
if(r){var i=Object.getOwnPropertyDescriptor(r,t)
return i.get?i.get.call(n):i.value}})(e,t,n||e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n.name=n.name||"event-logging",(e=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,S(t).call(this,n)))._events=n.events,e._interfaces=n.interfaces,e._logPrefix=n.logPrefix||"[source-event]",e}var n,o,s,u
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,d),n=t,(o=[{key:"activate",value:(u=E(regeneratorRuntime.mark(function e(n){var r,i=this,o=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,k(S(t.prototype),"activate",this).call(this,n,r)
case 3:this._eventListeners={},this._sources.forEach(function(e){return i._activateSource(e)})
case 5:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"deactivate",value:(s=E(regeneratorRuntime.mark(function e(){var n=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(S(t.prototype),"deactivate",this).call(this)
case 2:this._sources.forEach(function(e){return n._deactivateSource(e)}),this._eventListeners=null
case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"_activateSource",value:function(e){var t=this
this._sourceEvents(e).forEach(function(n){t._addListener(e,n)})}},{key:"_deactivateSource",value:function(e){var t=this
this._sourceEvents(e).forEach(function(n){t._removeListener(e,n)})}},{key:"_sourceEvents",value:function(e){var t=this
if(this._events)return this._events
var n=[]
return(this._interfaces||this._sourceInterfaces(e)).forEach(function(e){Array.prototype.push.apply(n,t._interfaceEvents(e))}),n}},{key:"_sourceInterfaces",value:function(e){var t=["transformable"]
return Object(r.isPullable)(e)&&t.push("pullable"),Object(r.isPushable)(e)&&t.push("pushable"),Object(r.isQueryable)(e)&&t.push("queryable"),Object(r.isSyncable)(e)&&t.push("syncable"),Object(r.isUpdatable)(e)&&t.push("updatable"),t}},{key:"_interfaceEvents",value:function(e){if(this._logLevel===a.Info)switch(e){case"pullable":return["beforePull","pull","pullFail"]
case"pushable":return["beforePush","push","pushFail"]
case"queryable":return["beforeQuery","query","queryFail"]
case"updatable":return["beforeUpdate","update","updateFail"]
case"syncable":return["beforeSync","sync","syncFail"]
case"transformable":return["transform"]}else if(this._logLevel>a.None)switch(e){case"pullable":return["pullFail"]
case"pushable":return["pushFail"]
case"queryable":return["queryFail"]
case"syncable":return["syncFail"]
case"updatable":return["updateFail"]}}},{key:"_addListener",value:function(e,t){var n=this._generateListener(e,t)
Object(i.deepSet)(this._eventListeners,[e.name,t],n),e.on(t,n)}},{key:"_removeListener",value:function(e,t){var n=Object(i.deepGet)(this._eventListeners,[e.name,t])
e.off(t,n),this._eventListeners[e.name][t]=null}},{key:"_generateListener",value:function(e,t){var n=this
return function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(r=console).log.apply(r,[n._logPrefix,e.name,t].concat(o))}}}])&&C(n.prototype,o),t}(),O=n(2)
function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function D(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){N(o,r,i,a,s,"next",e)}function s(e){N(o,r,i,a,s,"throw",e)}a(void 0)})}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t)
if(r){var i=Object.getOwnPropertyDescriptor(r,t)
return i.get?i.get.call(n):i.value}})(e,t,n||e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=O.default.assert,j=function(e){function t(e){var n
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B("A `source` must be specified for a ConnectionStrategy",!!e.source),B("`source` should be a Source name specified as a string","string"==typeof e.source),B("`on` should be specified as the name of the event a ConnectionStrategy listens for","string"==typeof e.on),e.sources=[e.source]
var r="".concat(e.source,":").concat(e.on)
return delete e.source,e.target&&(B("`target` should be a Source name specified as a string","string"==typeof e.target),e.sources.push(e.target),r+=" -> ".concat(e.target),"string"==typeof e.action&&(r+=":".concat(e.action)),delete e.target),e.name=e.name||r,(n=function(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,F(t).call(this,e)))._event=e.on,n._action=e.action,n._catch=e.catch,n._filter=e.filter,n._blocking="function"==typeof e.blocking?e.blocking:!!e.blocking,n}var n,r,i,o
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,d),n=t,(r=[{key:"activate",value:(o=D(regeneratorRuntime.mark(function e(n){var r,i=arguments
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,M(F(t.prototype),"activate",this).call(this,n,r)
case 3:this._listener=this.generateListener(),this.source.on(this._event,this._listener)
case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"deactivate",value:(i=D(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(F(t.prototype),"deactivate",this).call(this)
case 2:this.source.off(this._event,this._listener),this._listener=null
case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"generateListener",value:function(){var e=this,t=this.target
return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
var o
if(!e._filter||e._filter.apply(e,r))if(o="string"==typeof e._action?t[e._action].apply(t,r):e._action.apply(e,r),e._catch&&o&&o.catch&&(o=o.catch(function(t){return r.unshift(t),e._catch.apply(e,r)})),"function"==typeof e._blocking){if(e._blocking.apply(e,r))return o}else if(e._blocking)return o}}},{key:"source",get:function(){return this._sources[0]}},{key:"target",get:function(){return this._sources[1]}},{key:"blocking",get:function(){return this._blocking}}])&&P(n.prototype,r),t}()
function z(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(e){var n
return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,V(t).call(this,e))).passHints=e.passHints,n}var n,r,i,o
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,j),n=t,(r=[{key:"generateListener",value:function(){var e=this,t=this.target
return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i]
var o
if((!e._filter||e._filter.apply(e,r))&&(o="string"==typeof e._action?t[e._action](r[0]):e._action.apply(e,r),e._catch&&o&&o.catch&&(o=o.catch(function(t){return e._catch.apply(e,[t].concat(r))})),o&&o.then)){var a=!1
if("function"==typeof e._blocking?e._blocking.apply(e,r)&&(a=!0):e._blocking&&(a=!0),a){if(e.passHints){var s=r[1]
if("object"===U(s))return e.applyHint(s,o)}return o}}}}},{key:"applyHint",value:(i=regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n
case 2:return e.abrupt("return",t.data=e.sent)
case 3:case"end":return e.stop()}},e)}),o=function(){var e=this,t=arguments
return new Promise(function(n,r){var o=i.apply(e,t)
function a(e){z(o,n,r,a,s,"next",e)}function s(e){z(o,n,r,a,s,"throw",e)}a(void 0)})},function(e,t){return o.apply(this,arguments)})}])&&W(n.prototype,r),t}()
function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=O.default.assert,Y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)
var n=e
return X("A `source` must be specified for a SyncStrategy",!!n.source),X("A `target` must be specified for a SyncStrategy",!!n.target),X("`source` should be a Source name specified as a string","string"==typeof n.source),X("`target` should be a Source name specified as a string","string"==typeof n.target),n.on=n.on||"transform",n.action=n.action||"sync",function(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,K(t).call(this,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,j),t}()
n.d(t,"default",function(){return u}),n.d(t,"LogLevel",function(){return a}),n.d(t,"Strategy",function(){return d}),n.d(t,"LogTruncationStrategy",function(){return w}),n.d(t,"EventLoggingStrategy",function(){return T}),n.d(t,"ConnectionStrategy",function(){return j}),n.d(t,"RequestStrategy",function(){return H}),n.d(t,"SyncStrategy",function(){return Y})},function(e,t,n){"use strict"
n.r(t)
var r=n(1),i=n(2),o=n(0),a=n(3)
function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=5,f=Math.pow(2,h),d=f-1,p=f/2,v=f/4,m={}
function g(e){return function(){return e}}function y(e){var t,n=void 0===e?"undefined":(t=e)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":l(t)
if("number"===n)return e
"string"!==n&&(e+="")
for(var r=0,i=0,o=e.length;i<o;++i)r=(r<<5)-r+e.charCodeAt(i)|0
return r}function b(e,t){return t>>>e&d}function x(e){return 1<<e}function w(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16)
var n}function _(e,t,n,r){var i=r
if(!e){var o=r.length
i=new Array(o)
for(var a=0;a<o;++a)i[a]=r[a]}return i[t]=n,i}function R(e,t,n){var r=n.length,i=0,o=0,a=n
if(e)i=o=t
else{for(a=new Array(r-1);i<t;)a[o++]=n[i++];++i}for(;i<r;)a[o++]=n[i++]
return a}var E=1,C=2,k=3,S=4,A={__hamt_isEmpty:!0,_modify:function(e,t,n,r,i,o,a){var s=r()
return s===m?A:(++a.value,O(e,i,o,s))}}
function T(e){return e===A||e&&e.__hamt_isEmpty}function O(e,t,n,r){return{type:E,edit:e,hash:t,key:n,value:r,_modify:F}}function I(e,t,n){return{type:C,edit:e,hash:t,children:n,_modify:L}}function N(e,t,n){return{type:k,edit:e,mask:t,children:n,_modify:B}}function D(e,t,n){return{type:S,edit:e,size:t,children:n,_modify:j}}function P(e,t,n,r,i,o){if(n===i)return I(e,n,[o,r])
var a=b(t,n),s=b(t,i)
return N(e,x(a)|x(s),a===s?[P(e,t+h,n,r,i,o)]:a<s?[r,o]:[o,r])}function M(e,t){return e===t.edit}function F(e,t,n,r,i,o,a){if(t(o,this.key)){var s=r(this.value)
return s===this.value?this:s===m?(--a.value,A):M(e,this)?(this.value=s,this):O(e,i,o,s)}var u=r()
return u===m?this:(++a.value,P(e,n,this.hash,this,i,O(e,i,o,u)))}function L(e,t,n,r,i,o,a){if(i===this.hash){var s=function(e,t,n,r,i,o,a,s){for(var u=i.length,c=0;c<u;++c){var l=i[c]
if(n(a,l.key)){var h=l.value,f=o(h)
return f===h?i:f===m?(--s.value,R(e,c,i)):_(e,c,O(t,r,a,f),i)}}var d=o()
return d===m?i:(++s.value,_(e,u,O(t,r,a,d),i))}(M(e,this),e,t,this.hash,this.children,r,o,a)
return s===this.children?this:s.length>1?I(e,this.hash,s):s[0]}var u=r()
return u===m?this:(++a.value,P(e,n,this.hash,this,i,O(e,i,o,u)))}function B(e,t,n,r,i,o,a){var s=this.mask,u=this.children,c=b(n,i),l=x(c),f=w(s,l),d=s&l,v=d?u[f]:A,m=v._modify(e,t,n+h,r,i,o,a)
if(v===m)return this
var g,y=M(e,this),k=s,S=void 0
if(d&&T(m)){if(!(k&=~l))return A
if(u.length<=2&&((g=u[1^f])===A||g.type===E||g.type===C))return u[1^f]
S=R(y,f,u)}else if(d||T(m))S=_(y,f,m,u)
else{if(u.length>=p)return function(e,t,n,r,i){for(var o=[],a=r,s=0,u=0;a;++u)1&a&&(o[u]=i[s++]),a>>>=1
return o[t]=n,D(e,s+1,o)}(e,c,m,s,u)
k|=l,S=function(e,t,n,r){var i=r.length
if(e){for(var o=i;o>=t;)r[o--]=r[o]
return r[t]=n,r}for(var a=0,s=0,u=new Array(i+1);a<t;)u[s++]=r[a++]
for(u[t]=n;a<i;)u[++s]=r[a++]
return u}(y,f,m,u)}return y?(this.mask=k,this.children=S,this):N(e,k,S)}function j(e,t,n,r,i,o,a){var s=this.size,u=this.children,c=b(n,i),l=u[c],f=(l||A)._modify(e,t,n+h,r,i,o,a)
if(l===f)return this
var d=M(e,this),p=void 0
if(T(l)&&!T(f))++s,p=_(d,c,f,u)
else if(!T(l)&&T(f)){if(--s<=v)return function(e,t,n,r){for(var i=new Array(t-1),o=0,a=0,s=0,u=r.length;s<u;++s)if(s!==n){var c=r[s]
c&&!T(c)&&(i[o++]=c,a|=1<<s)}return N(e,a,i)}(e,s,c,u)
p=_(d,c,A,u)}else p=_(d,c,f,u)
return d?(this.size=s,this.children=p,this):D(e,s,p)}function z(e,t,n,r){for(var i=r._root,o=0,a=r._config.keyEq;;)switch(i.type){case E:return a(n,i.key)?i.value:e
case C:if(t===i.hash)for(var s=i.children,u=0,c=s.length;u<c;++u){var l=s[u]
if(a(n,l.key))return l.value}return e
case k:var f=x(b(o,t))
if(i.mask&f){i=i.children[w(i.mask,f)],o+=h
break}return e
case S:if(i=i.children[b(o,t)]){o+=h
break}return e
default:return e}}function U(e,t,n){return z(e,n._config.hash(t),t,n)}function W(e,t,n){return z(m,e,t,n)!==m}function V(e,t){return e===t}function q(e,t,n,r){var i={value:r._size},o=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,i)
return r.setTree(o,i.value)}function H(e,t,n,r){return q(g(n),e,t,r)}var G=g(m)
function K(e,t,n){return q(G,e,t,n)}function $(e){return new se(e._editable+1,e._edit+1,e._config,e._root,e._size)}function X(e){return e._editable=e._editable&&e._editable-1,e}function Y(e){return e&&Q(e[0],e[1],e[2],e[3],e[4])}function Q(e,t,n,r,i){for(;n<e;){var o=t[n++]
if(o&&!T(o))return J(o,r,[e,t,n,r,i])}return Y(i)}function J(e,t,n){switch(e.type){case E:return{value:t(e),rest:n}
case C:case S:case k:var r=e.children
return Q(r.length,r,0,t,n)
default:return Y(n)}}var Z={done:!0}
function ee(e,t){return new ae(J(e._root,t))}function te(e){return[e.key,e.value]}function ne(e){return ee(e,te)}function re(e){return e.key}function ie(e){return e.value}function oe(e,t,n){var r=n._root
if(r.type===E)return e(t,r.value,r.key)
for(var i=[r.children],o=void 0;o=i.pop();)for(var a=0,s=o.length;a<s;){var u=o[a++]
u&&u.type&&(u.type===E?t=e(t,u.value,u.key):i.push(u.children))}return t}var ae=function(){function e(t){s(this,e),this[Symbol.iterator]=function(){return this},this.v=t}return c(e,[{key:"next",value:function(){if(!this.v)return Z
var e=this.v
return this.v=Y(e.rest),e}}]),e}(),se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0
s(this,e),this[Symbol.iterator]=function(){return ne(this)},this._editable=t,this._edit=n,this._config={keyEq:r&&r.keyEq||V,hash:r&&r.hash||y},this._root=i,this._size=o}return c(e,[{key:"setTree",value:function(t,n){return this._editable?(this._root=t,this._size=n,this):t===this._root?this:new e(this._editable,this._edit,this._config,t,n)}},{key:"tryGetHash",value:function(e,t,n){return z(e,t,n,this)}},{key:"tryGet",value:function(e,t){return U(e,t,this)}},{key:"getHash",value:function(e,t){return function(e,t,n){return z(void 0,e,t,n)}(e,t,this)}},{key:"get",value:function(e,t){return U(t,e,this)}},{key:"hasHash",value:function(e,t){return W(e,t,this)}},{key:"has",value:function(e){return function(e,t){return W(t._config.hash(e),e,t)}(e,this)}},{key:"isEmpty",value:function(){return this&&!!T(this._root)}},{key:"modifyHash",value:function(e,t,n){return q(n,e,t,this)}},{key:"modify",value:function(e,t){return function(e,t,n){return q(e,n._config.hash(t),t,n)}(t,e,this)}},{key:"setHash",value:function(e,t,n){return H(e,t,n,this)}},{key:"set",value:function(e,t){return function(e,t,n){return H(n._config.hash(e),e,t,n)}(e,t,this)}},{key:"deleteHash",value:function(e,t){return K(e,t,this)}},{key:"removeHash",value:function(e,t){return K(e,t,this)}},{key:"remove",value:function(e){return function(e,t){return K(t._config.hash(e),e,t)}(e,this)}},{key:"beginMutation",value:function(){return $(this)}},{key:"endMutation",value:function(){return X(this)}},{key:"mutate",value:function(e){return function(e,t){var n=$(t)
return e(n),X(n)}(e,this)}},{key:"entries",value:function(){return ne(this)}},{key:"keys",value:function(){return ee(this,re)}},{key:"values",value:function(){return ee(this,ie)}},{key:"fold",value:function(e,t){return oe(e,t,this)}},{key:"forEach",value:function(e){return function(e,t){return oe(function(n,r,i){return e(r,i,t)},null,t)}(e,this)}},{key:"size",get:function(){return this._size}}]),e}()
function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t?t.data:new se}var t,n
return t=e,(n=[{key:"clear",value:function(){this._data=new se}},{key:"get",value:function(e){return this._data.get(e)}},{key:"set",value:function(e,t){this._data=this._data.set(e,t)}},{key:"setMany",value:function(e){var t=this._data.beginMutation()
e.forEach(function(e){t.set(e[0],e[1])}),this._data=t.endMutation()}},{key:"remove",value:function(e){this._data=this._data.remove(e)}},{key:"removeMany",value:function(e){var t=this._data.beginMutation()
e.forEach(function(e){t.remove(e)}),this._data=t.endMutation()}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"keys",value:function(){return this._data.keys()}},{key:"values",value:function(){return this._data.values()}},{key:"entries",value:function(){return this._data.entries()}},{key:"size",get:function(){return this._data.size}},{key:"data",get:function(){return this._data}}])&&ue(t.prototype,n),e}()
function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=i.default.deprecate,ve=function(e){function t(e){var n
return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,fe(t).call(this,e))).reset(e.base),n}var n,i
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(i=[{key:"getRecordSync",value:function(e){return this._records[e.type].get(e.id)}},{key:"records",value:function(e){var t=this
return pe("`records(type).get(id)` is deprecated, use `getRecordSync(identity)`."),{get:function(n){return t.getRecordSync({type:e,id:n})}}}},{key:"getRecordsSync",value:function(e){if(Array.isArray(e)){var t=[],n=e,r=!0,i=!1,o=void 0
try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=this.getRecordSync(u)
c&&t.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}var l=e
return Array.from(this._records[l].values())}},{key:"setRecordSync",value:function(e){this._records[e.type].set(e.id,e)}},{key:"setRecordsSync",value:function(e){var t={},n=!0,r=!1,i=void 0
try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value
t[s.type]=t[s.type]||[],t[s.type].push([s.id,s])}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}for(var u in t)this._records[u].setMany(t[u])}},{key:"removeRecordSync",value:function(e){var t=this._records[e.type],n=t.get(e.id)
return n?(t.remove(e.id),n):null}},{key:"removeRecordsSync",value:function(e){var t=[],n={},r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=this.getRecordSync(u)
c&&(t.push(c),n[c.type]=n[c.type]||[],n[c.type].push(u.id))}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}for(var l in n)this._records[l].removeMany(n[l])
return t}},{key:"getInverseRelationshipsSync",value:function(e){return this._inverseRelationships[e.type].get(e.id)||[]}},{key:"addInverseRelationshipsSync",value:function(e){var t=this
e.forEach(function(e){var n=t._inverseRelationships[e.relatedRecord.type].get(e.relatedRecord.id);(n=n?Object(o.clone)(n):[]).push(e),t._inverseRelationships[e.relatedRecord.type].set(e.relatedRecord.id,n)})}},{key:"removeInverseRelationshipsSync",value:function(e){var t=this
e.forEach(function(e){var n=t._inverseRelationships[e.relatedRecord.type].get(e.relatedRecord.id)
if(n){var i=n.filter(function(t){return!(Object(r.equalRecordIdentities)(t.record,e.record)&&t.relationship===e.relationship)})
t._inverseRelationships[e.relatedRecord.type].set(e.relatedRecord.id,i)}})}},{key:"reset",value:function(e){var t=this
this._records={},Object.keys(this._schema.models).forEach(function(n){var r=e&&e._records[n]
t._records[n]=new ce(r)}),this._resetInverseRelationships(e),this._processors.forEach(function(t){return t.reset(e)}),this.emit("reset")}},{key:"upgrade",value:function(){var e=this
Object.keys(this._schema.models).forEach(function(t){e._records[t]||(e._records[t]=new ce)}),this._resetInverseRelationships(),this._processors.forEach(function(e){return e.upgrade()})}},{key:"_resetInverseRelationships",value:function(e){var t={}
Object.keys(this._schema.models).forEach(function(n){var r=e&&e._inverseRelationships[n]
t[n]=new ce(r)}),this._inverseRelationships=t}}])&&he(n.prototype,i),t}(a.d)
function me(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ge(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){me(o,r,i,a,s,"next",e)}function s(e){me(o,r,i,a,s,"throw",e)}a(void 0)})}}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Re,Ee=r.default.assert,Ce=Re=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee("MemorySource's `schema` must be specified in `settings.schema` constructor argument",!!n.schema)
var r=n.keyMap,i=n.schema
n.name=n.name||"memory",(e=function(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?xe(e):t}(this,be(t).call(this,n)))._transforms={},e._transformInverses={},e.transformLog.on("clear",e._logCleared.bind(xe(e))),e.transformLog.on("truncate",e._logTruncated.bind(xe(e))),e.transformLog.on("rollback",e._logRolledback.bind(xe(e)))
var o=n.cacheSettings||{schema:i}
return o.schema=i,o.keyMap=r,o.queryBuilder=o.queryBuilder||e.queryBuilder,o.transformBuilder=o.transformBuilder||e.transformBuilder,n.base&&(e._base=n.base,e._forkPoint=e._base.transformLog.head,o.base=e._base.cache),e._cache=new ve(o),e}var n,i,o,a,s
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,r.Source),n=t,(i=[{key:"upgrade",value:function(){return this._cache.upgrade(),Promise.resolve()}},{key:"_sync",value:(s=ge(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.transformLog.contains(t.id)){e.next=4
break}return this._applyTransform(t),e.next=4,this.transformed([t])
case 4:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"_update",value:(a=ge(regeneratorRuntime.mark(function e(t,n){var r,i=this
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.transformLog.contains(t.id)){e.next=4
break}return r=this._applyTransform(t),e.next=4,this.transformed([t])
case 4:if(!n||!n.data){e.next=12
break}if(!(t.operations.length>1&&Array.isArray(n.data))){e.next=9
break}return e.abrupt("return",n.data.map(function(e){return i._retrieveFromCache(e)}))
case 9:return e.abrupt("return",this._retrieveFromCache(n.data))
case 10:e.next=18
break
case 12:if(!r){e.next=18
break}if(1!==t.operations.length||!Array.isArray(r)){e.next=17
break}return e.abrupt("return",r[0])
case 17:return e.abrupt("return",r)
case 18:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"_query",value:(o=ge(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.data){e.next=4
break}return e.abrupt("return",this._retrieveFromCache(n.data))
case 4:return e.abrupt("return",this._cache.query(t))
case 5:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"fork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._schema
return e.schema=t,e.cacheSettings=e.cacheSettings||{schema:t},e.keyMap=this._keyMap,e.queryBuilder=this.queryBuilder,e.transformBuilder=this.transformBuilder,e.base=this,new Re(e)}},{key:"merge",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
t=i.sinceTransformId?e.transformsSince(i.sinceTransformId):e.allTransforms()
var o=[]
return t.forEach(function(e){Array.prototype.push.apply(o,e.operations)}),!1!==i.coalesce&&(o=Object(r.coalesceRecordOperations)(o)),n=Object(r.buildTransform)(o,i.transformOptions),this.update(n)}},{key:"rebase",value:function(){var e,t=this,n=this._base,r=this._forkPoint
if(Ee("A `base` source must be defined for `rebase` to work",!!n),(e=void 0===r?n.allTransforms():n.transformsSince(r)).length>0){var i=this.allTransforms()
i.reverse().forEach(function(e){var n=t._transformInverses[e.id]
n&&t.cache.patch(n),t._clearTransformFromHistory(e.id)}),e.forEach(function(e){return t._applyTransform(e)}),i.forEach(function(e){return t._applyTransform(e)}),this._forkPoint=n.transformLog.head}}},{key:"rollback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return this.transformLog.rollback(e,t)}},{key:"transformsSince",value:function(e){var t=this
return this.transformLog.after(e).map(function(e){return t._transforms[e]})}},{key:"allTransforms",value:function(){var e=this
return this.transformLog.entries.map(function(t){return e._transforms[t]})}},{key:"getTransform",value:function(e){return this._transforms[e]}},{key:"getInverseOperations",value:function(e){return this._transformInverses[e]}},{key:"_retrieveFromCache",value:function(e){return Array.isArray(e)?this._cache.getRecordsSync(e):this._cache.getRecordSync(e)}},{key:"_applyTransform",value:function(e){var t=this.cache.patch(e.operations)
return this._transforms[e.id]=e,this._transformInverses[e.id]=t.inverse,t.data}},{key:"_clearTransformFromHistory",value:function(e){delete this._transforms[e],delete this._transformInverses[e]}},{key:"_logCleared",value:function(){this._transforms={},this._transformInverses={}}},{key:"_logTruncated",value:function(e,t,n){var r=this
n.forEach(function(e){return r._clearTransformFromHistory(e)})}},{key:"_logRolledback",value:function(e,t,n){var r=this
n.reverse().forEach(function(e){var t=r._transformInverses[e]
t&&r.cache.patch(t),r._clearTransformFromHistory(e)})}},{key:"cache",get:function(){return this._cache}},{key:"base",get:function(){return this._base}},{key:"forkPoint",get:function(){return this._forkPoint}}])&&ye(n.prototype,i),t}(),ke=Ce=Re=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":_e(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.syncable,r.queryable,r.updatable],Ce)
n.d(t,"default",function(){return ke}),n.d(t,"MemoryCache",function(){return ve}),n.d(t,"OperationProcessor",function(){return a.c}),n.d(t,"CacheIntegrityProcessor",function(){return a.b}),n.d(t,"SchemaConsistencyProcessor",function(){return a.e}),n.d(t,"SchemaValidationProcessor",function(){return a.f})},function(e,t,n){"use strict"
n.r(t)
var r=n(1),i=n(2)
function o(){return!!i.default.globals.indexedDB}var a=n(3)
function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t)
if(r){var i=Object.getOwnPropertyDescriptor(r,t)
return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=r.default.assert,m="__inverseRels__",g=function(e){function t(e){var n
return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v("Your browser does not support IndexedDB!",o()),(n=h(this,d(t).call(this,e)))._namespace=e.namespace||"orbit",n}var n,i,a,s,u,g
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(i=[{key:"query",value:(g=c(regeneratorRuntime.mark(function e(n,r,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDB()
case 2:return e.abrupt("return",f(d(t.prototype),"query",this).call(this,n,r,i))
case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return g.apply(this,arguments)})},{key:"patch",value:(u=c(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDB()
case 2:return e.abrupt("return",f(d(t.prototype),"patch",this).call(this,n))
case 3:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"upgrade",value:(s=c(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reopenDB()
case 2:t=!0,n=!1,r=void 0,e.prev=5,i=this._processors[Symbol.iterator]()
case 7:if(t=(o=i.next()).done){e.next=14
break}return a=o.value,e.next=11,a.upgrade()
case 11:t=!0,e.next=7
break
case 14:e.next=20
break
case 16:e.prev=16,e.t0=e.catch(5),n=!0,r=e.t0
case 20:e.prev=20,e.prev=21,t||null==i.return||i.return()
case 23:if(e.prev=23,!n){e.next=26
break}throw r
case 26:return e.finish(23)
case 27:return e.finish(20)
case 28:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27]])})),function(){return s.apply(this,arguments)})},{key:"reset",value:(a=c(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteDB()
case 2:t=!0,n=!1,r=void 0,e.prev=5,i=this._processors[Symbol.iterator]()
case 7:if(t=(o=i.next()).done){e.next=14
break}return a=o.value,e.next=11,a.reset()
case 11:t=!0,e.next=7
break
case 14:e.next=20
break
case 16:e.prev=16,e.t0=e.catch(5),n=!0,r=e.t0
case 20:e.prev=20,e.prev=21,t||null==i.return||i.return()
case 23:if(e.prev=23,!n){e.next=26
break}throw r
case 26:return e.finish(23)
case 27:return e.finish(20)
case 28:case"end":return e.stop()}},e,this,[[5,16,20,28],[21,,23,27]])})),function(){return a.apply(this,arguments)})},{key:"openDB",value:function(){var e=this
return new Promise(function(t,n){if(e._db)t(e._db)
else{var i=r.default.globals.indexedDB.open(e.dbName,e.dbVersion)
i.onerror=function(){n(i.error)},i.onsuccess=function(){var n=e._db=i.result
t(n)},i.onupgradeneeded=function(t){var n=e._db=t.target.result
t&&t.oldVersion>0?e.migrateDB(n,t):e.createDB(n)}}})}},{key:"closeDB",value:function(){this.isDBOpen&&(this._db.close(),this._db=null)}},{key:"reopenDB",value:function(){return this.closeDB(),this.openDB()}},{key:"createDB",value:function(e){var t=this
Object.keys(this.schema.models).forEach(function(n){t.registerModel(e,n)}),this.createInverseRelationshipStore(e)}},{key:"createInverseRelationshipStore",value:function(e){e.createObjectStore(m,{keyPath:"id"}).createIndex("recordIdentity","recordIdentity",{unique:!1})}},{key:"migrateDB",value:function(e,t){console.error("IndexedDBSource#migrateDB - should be overridden to upgrade IDBDatabase from: ",t.oldVersion," -> ",t.newVersion)}},{key:"deleteDB",value:function(){var e=this
return this.closeDB(),new Promise(function(t,n){var i=r.default.globals.indexedDB.deleteDatabase(e.dbName)
i.onerror=function(){n(i.error)},i.onsuccess=function(){t()}})}},{key:"registerModel",value:function(e,t){e.createObjectStore(t,{keyPath:"id"})}},{key:"clearRecords",value:function(e){var t=this
return new Promise(function(n,r){var i=t._db.transaction([e],"readwrite").objectStore(e).clear()
i.onerror=function(){r(i.error)},i.onsuccess=function(){n()}})}},{key:"getRecordAsync",value:function(e){var t=this
return new Promise(function(n,r){var i=t._db.transaction([e.type]).objectStore(e.type).get(e.id)
i.onerror=function(){r(i.error)},i.onsuccess=function(){var e=i.result
e?(t._keyMap&&t._keyMap.pushRecord(e),n(e)):n(void 0)}})}},{key:"getRecordsAsync",value:function(e){var t=this
if(!e)return this._getAllRecords()
if("string"==typeof e){var n=e
return new Promise(function(e,r){var i=t._db.transaction([n]).objectStore(n).openCursor(),o=[]
i.onerror=function(){r(i.error)},i.onsuccess=function(n){var r=n.target.result
if(r){var i=r.value
t._keyMap&&t._keyMap.pushRecord(i),o.push(i),r.continue()}else e(o)}})}if(Array.isArray(e)){var r=e,i=[]
if(r.length>0){var o=[],a=!0,s=!1,u=void 0
try{for(var c,l=r[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var h=c.value
o.includes(h.type)||o.push(h.type)}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}var f=this._db.transaction(o)
return new Promise(function(e,n){var o=0
!function a(){if(o<r.length){var s=r[o++],u=f.objectStore(s.type).get(s.id)
u.onsuccess=function(){var e=u.result
e&&(t._keyMap&&t._keyMap.pushRecord(e),i.push(e)),a()},u.onerror=function(){n(u.error)}}else e(i)}()})}return Promise.resolve(i)}}},{key:"setRecordAsync",value:function(e){var t=this,n=this._db.transaction([e.type],"readwrite").objectStore(e.type)
return new Promise(function(r,i){var o=n.put(e)
o.onerror=function(){i(o.error)},o.onsuccess=function(){t._keyMap&&t._keyMap.pushRecord(e),r()}})}},{key:"setRecordsAsync",value:function(e){if(e.length>0){var t=[],n=!0,r=!1,i=void 0
try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value
t.includes(s.type)||t.push(s.type)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=this._db.transaction(t,"readwrite")
return new Promise(function(t,n){var r=0
!function i(){if(r<e.length){var o=e[r++],a=u.objectStore(o.type).put(o)
a.onsuccess=i(),a.onerror=function(){n(a.error)}}else t()}()})}}},{key:"removeRecordAsync",value:function(e){var t=this
return new Promise(function(n,r){var i=t._db.transaction([e.type],"readwrite").objectStore(e.type).delete(e.id)
i.onerror=function(){r(i.error)},i.onsuccess=function(){n()}})}},{key:"removeRecordsAsync",value:function(e){if(e.length>0){var t=[],n=!0,r=!1,i=void 0
try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value
t.includes(s.type)||t.push(s.type)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=this._db.transaction(t,"readwrite")
return new Promise(function(t,n){var r=0
!function i(){if(r<e.length){var o=e[r++],a=u.objectStore(o.type).delete(o.id)
a.onsuccess=i(),a.onerror=function(){n(a.error)}}else t()}()})}}},{key:"getInverseRelationshipsAsync",value:function(e){var t=this
return new Promise(function(n,i){var o=t._db.transaction([m]).objectStore(m),a=[],s=r.default.globals.IDBKeyRange.only(Object(r.serializeRecordIdentity)(e)),u=o.index("recordIdentity").openCursor(s)
u.onerror=function(){i(u.error)},u.onsuccess=function(e){var r=e.target.result
if(r){var i=t._fromInverseRelationshipForIDB(r.value)
a.push(i),r.continue()}else n(a)}})}},{key:"addInverseRelationshipsAsync",value:function(e){var t=this
if(e.length>0){var n=this._db.transaction([m],"readwrite").objectStore(m)
return new Promise(function(r,i){var o=0
!function a(){if(o<e.length){var s=e[o++],u=t._toInverseRelationshipForIDB(s),c=n.put(u)
c.onsuccess=a(),c.onerror=function(){i(c.error)}}else r()}()})}return Promise.resolve()}},{key:"removeInverseRelationshipsAsync",value:function(e){var t=this
if(e.length>0){var n=this._db.transaction([m],"readwrite").objectStore(m)
return new Promise(function(r,i){var o=0
!function a(){if(o<e.length){var s=e[o++],u=t._serializeInverseRelationshipIdentity(s),c=n.delete(u)
c.onsuccess=a(),c.onerror=function(){i(c.error)}}else r()}()})}return Promise.resolve()}},{key:"_getAllRecords",value:function(){for(var e=this,t=[],n=this._db.objectStoreNames,r=[],i=0;i<n.length;i++){var o=n.item(i)
o!==m&&r.push(o)}return r.reduce(function(n,r){return n.then(function(){return e.getRecordsAsync(r).then(function(e){Array.prototype.push.apply(t,e)})})},Promise.resolve()).then(function(){return t})}},{key:"_serializeInverseRelationshipIdentity",value:function(e){return[Object(r.serializeRecordIdentity)(e.record),e.relationship,Object(r.serializeRecordIdentity)(e.relatedRecord)].join("::")}},{key:"_toInverseRelationshipForIDB",value:function(e){return{id:this._serializeInverseRelationshipIdentity(e),recordIdentity:Object(r.serializeRecordIdentity)(e.record),relationship:e.relationship,relatedIdentity:Object(r.serializeRecordIdentity)(e.relatedRecord),type:e.record.type,relatedType:e.relatedRecord.type}}},{key:"_fromInverseRelationshipForIDB",value:function(e){return{record:Object(r.deserializeRecordIdentity)(e.recordIdentity),relatedRecord:Object(r.deserializeRecordIdentity)(e.relatedIdentity),relationship:e.relationship}}},{key:"namespace",get:function(){return this._namespace}},{key:"dbVersion",get:function(){return this._schema.version}},{key:"dbName",get:function(){return this._namespace}},{key:"isDBOpen",get:function(){return!!this._db}}])&&l(n.prototype,i),t}(a.a)
function y(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments
return new Promise(function(r,i){var o=e.apply(t,n)
function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)})}}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=r.default.assert,C=r.default.deprecate,k=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E("IndexedDBSource's `schema` must be specified in `settings.schema` constructor argument",!!n.schema),E("Your browser does not support IndexedDB!",o()),n.name=n.name||"indexedDB",e=function(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}(e):t}(this,w(t).call(this,n))
var r=n.cacheSettings||{}
return r.schema=n.schema,r.keyMap=n.keyMap,r.queryBuilder=r.queryBuilder||e.queryBuilder,r.transformBuilder=r.transformBuilder||e.transformBuilder,r.namespace=r.namespace||n.namespace,e._cache=new g(r),e}var n,i,a,s,u,c,l
return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r.Source),n=t,(i=[{key:"upgrade",value:(l=b(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cache.reopenDB()
case 2:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"closeDB",value:function(){return C("`closeDB()` must be called as `cache.closeDB()`."),this.cache.closeDB()}},{key:"reset",value:(c=b(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cache.reset()
case 2:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_sync",value:(u=b(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.transformLog.contains(t.id)){e.next=5
break}return e.next=3,this._cache.patch(t.operations)
case 3:return e.next=5,this.transformed([t])
case 5:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"_push",value:(s=b(regeneratorRuntime.mark(function e(t){var n
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.transformLog.contains(t.id)){e.next=8
break}return e.next=3,this._cache.patch(t.operations)
case 3:return n=[t],e.next=6,this.transformed(n)
case 6:e.next=9
break
case 8:n=[]
case 9:return e.abrupt("return",n)
case 10:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"_pull",value:(a=b(regeneratorRuntime.mark(function e(t){var n,i,o
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cache.query(t)
case 2:return i=e.sent,n=Array.isArray(i)?i.map(function(e){return{op:"updateRecord",record:e}}):i?[{op:"updateRecord",record:i}]:[],o=[Object(r.buildTransform)(n)],e.next=7,this.transformed(o)
case 7:return e.abrupt("return",o)
case 8:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"cache",get:function(){return this._cache}}])&&x(n.prototype,i),t}(),S=k=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r
if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r)
else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a)
return o>3&&a&&Object.defineProperty(t,n,a),a}([r.pullable,r.pushable,r.syncable],k)
n.d(t,"default",function(){return S}),n.d(t,"IndexedDBCache",function(){return g}),n.d(t,"supportsIndexedDB",function(){return o})},function(e,t,n){"use strict"
function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0
try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t)
var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serializer=t.serializer,this._map=new Map}var t,n
return t=e,(n=[{key:"get",value:function(e){var t=this._serializer.serialize(e)
return this._map.get(t)}},{key:"set",value:function(e,t){var n=this._serializer.serialize(e)
return this._map.set(n,t),this}},{key:"has",value:function(e){var t=this._serializer.serialize(e)
return this._map.has(t)}},{key:"delete",value:function(e){var t=this._serializer.serialize(e),n=this._map.has(t)
return this._map.delete(t),n}},{key:"entries",value:function(){var e=this
return Array.from(this._map).map(function(t){var n=r(t,2),i=n[0],o=n[1]
return[e._serializer.deserialize(i),o]})[Symbol.iterator]()}},{key:"keys",value:function(){return Array.from(this).map(function(e){return r(e,1)[0]})[Symbol.iterator]()}},{key:"values",value:function(){return this._map.values()}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"clear",value:function(){this._map.clear()}},{key:"forEach",value:function(e,t){var n=!0,i=!1,o=void 0
try{for(var a,s=this[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=r(a.value,2),c=u[0],l=u[1]
e.call(t,l,c,this)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"size",get:function(){return this._map.size}},{key:Symbol.toStringTag,get:function(){return"IdentityMap"}}])&&i(t.prototype,n),e}()
n.d(t,"default",function(){return o})}]])
var __ember_auto_import__=function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)a=s[h],i[a]&&f.push(i[a][0]),i[a]=0
for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r])
for(l&&l(t);f.length;)f.shift()()
return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s]
0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={0:0},o=[]
function a(t){if(r[t])return r[t].exports
var n=r[t]={i:t,l:!1,exports:{}}
return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e
if(4&t&&"object"==typeof e&&e&&e.__esModule)return e
var n=Object.create(null)
if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r))
return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e}
return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=""
var s=window.webpackJsonp_ember_auto_import_=window.webpackJsonp_ember_auto_import_||[],u=s.push.bind(s)
s.push=t,s=s.slice()
for(var c=0;c<s.length;c++)t(s[c])
var l=u
return o.push([5,2]),n()}([,,,,function(e,t){window._eai_r=require,window._eai_d=define},function(e,t,n){n(4),e.exports=n(6)},function(e,t,n){var r,i,o
"undefined"!=typeof document&&(n.p=(r=document.querySelectorAll("script"))[r.length-1].src.replace(/\/[^\/]*$/,"/")),e.exports=(i=_eai_d,o=_eai_r,window.emberAutoImportDynamic=function(e){return o("_eai_dyn_"+e)},i("@orbit/coordinator",[],function(){return n(15)}),i("@orbit/core",[],function(){return n(2)}),i("@orbit/data",[],function(){return n(1)}),i("@orbit/identity-map",[],function(){return n(18)}),i("@orbit/indexeddb",[],function(){return n(17)}),i("@orbit/memory",[],function(){return n(16)}),i("@orbit/utils",[],function(){return n(0)}),void i("face-api.js",[],function(){return n(14)}))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}])
